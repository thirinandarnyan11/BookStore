<!DOCTYPE html>
<html>
<head>
	<title>IT Shop</title>
	<script type="text/javascript" src="jquery.min.js"></script>
	<script type="text/javascript" src="custom.js"></script>
</head>
<body>
	<h1>IT Shop</h1>
	<h2><a href="index.html">Shop</a> | <a href="checkout.html">Checkout(<span id="count"></span>)</a></h2>
	<table cellspacing="0" cellpadding="30">
		<tr>
			<td>
				<img src="images/headphone.jpg" width="230" height="250"><br>
				<h3>Name: Earphone</h3>
				<h3>Price: 45000 MMK</h3>
				<h3>Brand: Sony</h3>
				<button class="addtocart" data-id="1" data-name="Earphone" data-price="45000" data-brand="Sony">Add to Cart</button>
			</td>
			<td>
				<img src="images/keyboard.jpg" width="300" height="250"><br>
				<h3>Name: Keyboard</h3>
				<h3>Price: 35000 MMK</h3>
				<h3>Brand: MSI</h3>
				<button class="addtocart" data-id="2" data-name="Keyboard" data-price="35000" data-brand="MSI">Add to Cart</button>
			</td>
			<td>
				<img src="images/mouse.jpg" width="230" height="250"><br>
				<h3>Name: Mouse</h3>
				<h3>Price: 15000 MMK</h3>
				<h3>Brand: G</h3>
				<button class="addtocart" data-id="3" data-name="Mouse" data-price="15000" data-brand="G">Add to Cart</button>
			</td>
		</tr>
	</table>
	<script type="text/javascript">
		$(document).ready(function(){
			count();
			$(".addtocart").click(function(){
				var id=$(this).data('id');
				var name=$(this).data('name');
				var price=$(this).data('price'); 
				var brand=$(this).data('brand');

				var item={
					id:id,
					name:name,
					price:price,
					brand:brand,
					qty:1
				}
				var shop_str=localStorage.getItem("it_shop"); //it_shop is localStorage name  string
				var shop_arr;
				if(shop_str==null){
					shop_arr=Array(); //build localStorage
				}else{
					shop_arr=JSON.parse(shop_str);
				}
				var status=false;
				 $.each(shop_arr,function(i,v){ // $.each(array,function(i,v))
				 	// console.log(i);//index
				 	// console.log(v.name);//value
				 	if(id==v.id){
				 		status=true;
				 		v.qty++;
				 		//console.log(typeof(qty));
				 	}
				 })
				 //not equal id push to array
				 if(status==false){
				shop_arr.push(item); //array=object
			}

				var shopData=JSON.stringify(shop_arr);
				localStorage.setItem("it_shop",shopData); //localStorage.setItem(localStorage Name,shopData); 
				count();
				console.log(shopData);
			})
		})
	</script>
</body>
</html>