! function(t) {
    var e = {};

    function i(n) {
        if (e[n]) return e[n].exports;
        var r = e[n] = {
            i: n,
            l: !1,
            exports: {}
        };
        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports
    }
    i.m = t, i.c = e, i.d = function(t, e, n) {
        i.o(t, e) || Object.defineProperty(t, e, {
            configurable: !1,
            enumerable: !0,
            get: n
        })
    }, i.n = function(t) {
        var e = t && t.__esModule ? function() {
            return t.default
        } : function() {
            return t
        };
        return i.d(e, "a", e), e
    }, i.o = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }, i.p = "", i(i.s = 22)
}([function(t, e) {
    t.exports = function() {
        var t = [];
        return t.toString = function() {
            for (var t = [], e = 0; e < this.length; e++) {
                var i = this[e];
                i[2] ? t.push("@media " + i[2] + "{" + i[1] + "}") : t.push(i[1])
            }
            return t.join("")
        }, t.i = function(e, i) {
            "string" == typeof e && (e = [
                [null, e, ""]
            ]);
            for (var n = {}, r = 0; r < this.length; r++) {
                var o = this[r][0];
                "number" == typeof o && (n[o] = !0)
            }
            for (r = 0; r < e.length; r++) {
                var a = e[r];
                "number" == typeof a[0] && n[a[0]] || (i && !a[2] ? a[2] = i : i && (a[2] = "(" + a[2] + ") and (" + i + ")"), t.push(a))
            }
        }, t
    }
}, function(t, e) {
    var i = {},
        n = function(t) {
            var e;
            return function() {
                return void 0 === e && (e = t.apply(this, arguments)), e
            }
        },
        r = n(function() {
            return /msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())
        }),
        o = n(function() {
            return document.head || document.getElementsByTagName("head")[0]
        }),
        a = null,
        s = 0,
        l = [];

    function c(t, e) {
        for (var n = 0; n < t.length; n++) {
            var r = t[n],
                o = i[r.id];
            if (o) {
                o.refs++;
                for (var a = 0; a < o.parts.length; a++) o.parts[a](r.parts[a]);
                for (; a < r.parts.length; a++) o.parts.push(p(r.parts[a], e))
            } else {
                var s = [];
                for (a = 0; a < r.parts.length; a++) s.push(p(r.parts[a], e));
                i[r.id] = {
                    id: r.id,
                    refs: 1,
                    parts: s
                }
            }
        }
    }

    function u(t) {
        for (var e = [], i = {}, n = 0; n < t.length; n++) {
            var r = t[n],
                o = r[0],
                a = {
                    css: r[1],
                    media: r[2],
                    sourceMap: r[3]
                };
            i[o] ? i[o].parts.push(a) : e.push(i[o] = {
                id: o,
                parts: [a]
            })
        }
        return e
    }

    function h(t, e) {
        var i = o(),
            n = l[l.length - 1];
        if ("top" === t.insertAt) n ? n.nextSibling ? i.insertBefore(e, n.nextSibling) : i.appendChild(e) : i.insertBefore(e, i.firstChild), l.push(e);
        else {
            if ("bottom" !== t.insertAt) throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
            i.appendChild(e)
        }
    }

    function d(t) {
        t.parentNode.removeChild(t);
        var e = l.indexOf(t);
        e >= 0 && l.splice(e, 1)
    }

    function f(t) {
        var e = document.createElement("style");
        return e.type = "text/css", h(t, e), e
    }

    function p(t, e) {
        var i, n, r;
        if (e.singleton) {
            var o = s++;
            i = a || (a = f(e)), n = m.bind(null, i, o, !1), r = m.bind(null, i, o, !0)
        } else t.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (i = function(t) {
            var e = document.createElement("link");
            return e.rel = "stylesheet", h(t, e), e
        }(e), n = function(t, e) {
            var i = e.css,
                n = e.sourceMap;
            n && (i += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n)))) + " */");
            var r = new Blob([i], {
                    type: "text/css"
                }),
                o = t.href;
            t.href = URL.createObjectURL(r), o && URL.revokeObjectURL(o)
        }.bind(null, i), r = function() {
            d(i), i.href && URL.revokeObjectURL(i.href)
        }) : (i = f(e), n = function(t, e) {
            var i = e.css,
                n = e.media;
            n && t.setAttribute("media", n);
            if (t.styleSheet) t.styleSheet.cssText = i;
            else {
                for (; t.firstChild;) t.removeChild(t.firstChild);
                t.appendChild(document.createTextNode(i))
            }
        }.bind(null, i), r = function() {
            d(i)
        });
        return n(t),
            function(e) {
                if (e) {
                    if (e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap) return;
                    n(t = e)
                } else r()
            }
    }
    t.exports = function(t, e) {
        if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment");
        void 0 === (e = e || {}).singleton && (e.singleton = r()), void 0 === e.insertAt && (e.insertAt = "bottom");
        var n = u(t);
        return c(n, e),
            function(t) {
                for (var r = [], o = 0; o < n.length; o++) {
                    var a = n[o];
                    (s = i[a.id]).refs--, r.push(s)
                }
                t && c(u(t), e);
                for (o = 0; o < r.length; o++) {
                    var s;
                    if (0 === (s = r[o]).refs) {
                        for (var l = 0; l < s.parts.length; l++) s.parts[l]();
                        delete i[s.id]
                    }
                }
            }
    };
    var g = function() {
        var t = [];
        return function(e, i) {
            return t[e] = i, t.filter(Boolean).join("\n")
        }
    }();

    function m(t, e, i, n) {
        var r = i ? "" : n.css;
        if (t.styleSheet) t.styleSheet.cssText = g(e, r);
        else {
            var o = document.createTextNode(r),
                a = t.childNodes;
            a[e] && t.removeChild(a[e]), a.length ? t.insertBefore(o, a[e]) : t.appendChild(o)
        }
    }
}, , , , function(t, e, i) {
    ! function(e, i) {
        t.exports = i()
    }(0, function() {
        return function(t) {
            var e = {};

            function i(n) {
                if (e[n]) return e[n].exports;
                var r = e[n] = {
                    exports: {},
                    id: n,
                    loaded: !1
                };
                return t[n].call(r.exports, r, r.exports, i), r.loaded = !0, r.exports
            }
            return i.m = t, i.c = e, i.p = "dist", i(0)
        }([function(t, e, i) {
            "use strict";
            var n = {},
                r = i(1),
                o = r.extend;
            o(n, r), o(n, i(3)), o(n, i(2)), o(n, i(4)), o(n, i(5)), o(n, i(6)), o(n, i(7)), o(n, i(8)), o(n, i(9)), n.browser = i(10), n.popup = i(11), n.formatDate = i(12), n.defineClass = i(13), n.defineModule = i(14), n.defineNamespace = i(15), n.CustomEvents = i(16), n.Enum = i(17), n.ExMap = i(18), n.HashMap = i(20), n.Map = i(19), t.exports = n
        }, function(t, e, i) {
            "use strict";
            var n = i(2),
                r = i(3),
                o = 0;

            function a(t, e) {
                var i, o = [],
                    s = [];
                if (isNaN(t) && isNaN(e) && n.isNumber(t) && n.isNumber(e)) return !0;
                if (t === e) return !0;
                if (n.isFunction(t) && n.isFunction(e) || t instanceof Date && e instanceof Date || t instanceof RegExp && e instanceof RegExp || t instanceof String && e instanceof String || t instanceof Number && e instanceof Number) return t.toString() === e.toString();
                if (!(t instanceof Object && e instanceof Object)) return !1;
                if (t.isPrototypeOf(e) || e.isPrototypeOf(t) || t.constructor !== e.constructor || t.prototype !== e.prototype) return !1;
                if (r.inArray(t, o) > -1 || r.inArray(e, s) > -1) return !1;
                for (i in e) {
                    if (e.hasOwnProperty(i) !== t.hasOwnProperty(i)) return !1;
                    if (typeof e[i] != typeof t[i]) return !1
                }
                for (i in t) {
                    if (e.hasOwnProperty(i) !== t.hasOwnProperty(i)) return !1;
                    if (typeof e[i] != typeof t[i]) return !1;
                    if ("object" == typeof t[i] || "function" == typeof t[i]) {
                        if (o.push(t), s.push(e), !a(t[i], e[i])) return !1;
                        o.pop(), s.pop()
                    } else if (t[i] !== e[i]) return !1
                }
                return !0
            }

            function s(t, e) {
                for (var i = arguments, r = i[0], o = 1, a = i.length; o < a; o += 1) {
                    if (n.isUndefined(r) || n.isNull(r)) return;
                    r = r[i[o]]
                }
                return r
            }
            t.exports = {
                extend: function(t, e) {
                    var i, n, r, o, a = Object.prototype.hasOwnProperty;
                    for (r = 1, o = arguments.length; r < o; r += 1)
                        for (n in i = arguments[r]) a.call(i, n) && (t[n] = i[n]);
                    return t
                },
                stamp: function(t) {
                    return t.__fe_id || (o += 1, t.__fe_id = o), t.__fe_id
                },
                hasStamp: function(t) {
                    return n.isExisty(s(t, "__fe_id"))
                },
                resetLastId: function() {
                    o = 0
                },
                keys: Object.prototype.keys || function(t) {
                    var e, i = [];
                    for (e in t) t.hasOwnProperty(e) && i.push(e);
                    return i
                },
                compareJSON: function(t) {
                    var e = arguments.length,
                        i = 1;
                    if (e < 1) return !0;
                    for (; i < e; i += 1)
                        if (!a(t, arguments[i])) return !1;
                    return !0
                },
                pick: s
            }
        }, function(t, e) {
            "use strict";
            var i = Object.prototype.toString;

            function n(t) {
                return !r(t) && !o(t)
            }

            function r(t) {
                return void 0 === t
            }

            function o(t) {
                return null === t
            }

            function a(t) {
                return n(t) && !1 !== t
            }

            function s(t) {
                return n(t) && ("[object Arguments]" === i.call(t) || !!t.callee)
            }

            function l(t) {
                return t instanceof Array
            }

            function c(t) {
                return t === Object(t)
            }

            function u(t) {
                return t instanceof Function
            }

            function h(t) {
                return "string" == typeof t || t instanceof String
            }

            function d(t) {
                return !(n(t) && ! function(t) {
                    return h(t) && "" === t
                }(t)) || (l(t) || s(t) ? 0 === t.length : !(c(t) && !u(t)) || ! function(t) {
                    var e;
                    for (e in t)
                        if (t.hasOwnProperty(e)) return !0;
                    return !1
                }(t))
            }
            t.exports = {
                isExisty: n,
                isUndefined: r,
                isNull: o,
                isTruthy: a,
                isFalsy: function(t) {
                    return !a(t)
                },
                isArguments: s,
                isArray: l,
                isArraySafe: function(t) {
                    return "[object Array]" === i.call(t)
                },
                isObject: c,
                isFunction: u,
                isFunctionSafe: function(t) {
                    return "[object Function]" === i.call(t)
                },
                isNumber: function(t) {
                    return "number" == typeof t || t instanceof Number
                },
                isNumberSafe: function(t) {
                    return "[object Number]" === i.call(t)
                },
                isDate: function(t) {
                    return t instanceof Date
                },
                isDateSafe: function(t) {
                    return "[object Date]" === i.call(t)
                },
                isString: h,
                isStringSafe: function(t) {
                    return "[object String]" === i.call(t)
                },
                isBoolean: function(t) {
                    return "boolean" == typeof t || t instanceof Boolean
                },
                isBooleanSafe: function(t) {
                    return "[object Boolean]" === i.call(t)
                },
                isHTMLNode: function(t) {
                    return "object" == typeof HTMLElement ? t && (t instanceof HTMLElement || !!t.nodeType) : !(!t || !t.nodeType)
                },
                isHTMLTag: function(t) {
                    return "object" == typeof HTMLElement ? t && t instanceof HTMLElement : !(!t || !t.nodeType || 1 !== t.nodeType)
                },
                isEmpty: d,
                isNotEmpty: function(t) {
                    return !d(t)
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n, r = i(4),
                o = i(2),
                a = Array.prototype.slice;
            n = {
                inArray: function(t, e, i) {
                    var n, r;
                    if (i = i || 0, !o.isArray(e)) return -1;
                    if (Array.prototype.indexOf) return Array.prototype.indexOf.call(e, t, i);
                    for (r = e.length, n = i; i >= 0 && n < r; n += 1)
                        if (e[n] === t) return n;
                    return -1
                },
                range: function(t, e, i) {
                    var n, r = [];
                    for (o.isUndefined(e) && (e = t || 0, t = 0), e *= n = (i = i || 1) < 0 ? -1 : 1; t * n < e; t += i) r.push(t);
                    return r
                },
                zip: function() {
                    var t = a.call(arguments),
                        e = [];
                    return r.forEach(t, function(t) {
                        r.forEach(t, function(t, i) {
                            e[i] || (e[i] = []), e[i].push(t)
                        })
                    }), e
                }
            }, t.exports = n
        }, function(t, e, i) {
            "use strict";
            var n = i(2),
                r = i(1);

            function o(t, e, i) {
                var n = 0,
                    r = t.length;
                for (i = i || null; n < r && !1 !== e.call(i, t[n], n, t); n += 1);
            }

            function a(t, e, i) {
                var n;
                for (n in i = i || null, t)
                    if (t.hasOwnProperty(n) && !1 === e.call(i, t[n], n, t)) break
            }

            function s(t, e, i) {
                n.isArray(t) ? o(t, e, i) : a(t, e, i)
            }

            function l(t, e, i) {
                var n = [];
                return i = i || null, s(t, function() {
                    n.push(e.apply(i, arguments))
                }), n
            }
            t.exports = {
                forEachOwnProperties: a,
                forEachArray: o,
                forEach: s,
                toArray: function(t) {
                    var e;
                    try {
                        e = Array.prototype.slice.call(t)
                    } catch (i) {
                        e = [], o(t, function(t) {
                            e.push(t)
                        })
                    }
                    return e
                },
                map: l,
                reduce: function(t, e, i) {
                    var o, a, s, l = 0;
                    for (i = i || null, n.isArray(t) ? (a = t.length, s = t[l]) : (a = (o = r.keys(t)).length, s = t[o[l += 1]]), l += 1; l < a; l += 1) s = e.call(i, s, t[o ? o[l] : l]);
                    return s
                },
                filter: function(t, e, i) {
                    var r, o;
                    if (i = i || null, !n.isObject(t) || !n.isFunction(e)) throw new Error("wrong parameter");
                    return n.isArray(t) ? (r = [], o = function(t, e) {
                        t.push(e[0])
                    }) : (r = {}, o = function(t, e) {
                        t[e[1]] = e[0]
                    }), s(t, function() {
                        e.apply(i, arguments) && o(r, arguments)
                    }, i), r
                },
                pluck: function(t, e) {
                    return l(t, function(t) {
                        return t[e]
                    })
                }
            }
        }, function(t, e) {
            "use strict";
            t.exports = {
                bind: function(t, e) {
                    var i, n = Array.prototype.slice;
                    return t.bind ? t.bind.apply(t, n.call(arguments, 1)) : (i = n.call(arguments, 2), function() {
                        return t.apply(e, i.length ? i.concat(n.call(arguments)) : arguments)
                    })
                }
            }
        }, function(t, e) {
            "use strict";

            function i(t) {
                function e() {}
                return e.prototype = t, new e
            }
            t.exports = {
                createObject: i,
                inherit: function(t, e) {
                    var n = i(e.prototype);
                    n.constructor = t, t.prototype = n
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(1);
            t.exports = {
                decodeHTMLEntity: function(t) {
                    var e = {
                        "&quot;": '"',
                        "&amp;": "&",
                        "&lt;": "<",
                        "&gt;": ">",
                        "&#39;": "'",
                        "&nbsp;": " "
                    };
                    return t.replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&nbsp;/g, function(t) {
                        return e[t] ? e[t] : t
                    })
                },
                encodeHTMLEntity: function(t) {
                    var e = {
                        '"': "quot",
                        "&": "amp",
                        "<": "lt",
                        ">": "gt",
                        "'": "#39"
                    };
                    return t.replace(/[<>&"']/g, function(t) {
                        return e[t] ? "&" + e[t] + ";" : t
                    })
                },
                hasEncodableString: function(t) {
                    return /[<>&"']/.test(t)
                },
                getDuplicatedChar: function(t, e) {
                    for (var i, o = 0, a = t.length, s = {}; o < a; o += 1) s[i = t.charAt(o)] = 1;
                    for (o = 0, a = e.length; o < a; o += 1) s[i = e.charAt(o)] && (s[i] += 1);
                    return s = n.filter(s, function(t) {
                        return t > 1
                    }), (s = r.keys(s).sort()).join("")
                }
            }
        }, function(t, e) {
            "use strict";
            var i = {},
                n = Array.prototype.slice;
            i.timestamp = function() {
                return Number(new Date)
            }, i.debounce = function(t, e) {
                var i, r;
                return e = e || 0,
                    function() {
                        r = n.call(arguments), window.clearTimeout(i), i = window.setTimeout(function() {
                            t.apply(null, r)
                        }, e)
                    }
            }, i.throttle = function(t, e) {
                var r, o, a, s, l = !0,
                    c = function(e) {
                        t.apply(null, e), r = null
                    };

                function u() {
                    if (s = n.call(arguments), l) return c(s), void(l = !1);
                    a = i.timestamp(), r = r || a, o(s), a - r >= e && c(s)
                }
                return e = e || 0, o = i.debounce(c, e), u.reset = function() {
                    l = !0, r = null
                }, u
            }, t.exports = i
        }, function(t, e, i) {
            "use strict";
            var n = i(1),
                r = i(4),
                o = i(2),
                a = 6048e5;

            function s(t, e) {
                var i = r.map(n.keys(e), function(t, i) {
                        return (0 === i ? "" : "&") + t + "=" + e[t]
                    }).join(""),
                    o = document.createElement("img");
                return o.src = t + "?" + i, o.style.display = "none", document.body.appendChild(o), document.body.removeChild(o), o
            }
            t.exports = {
                imagePing: s,
                sendHostname: function(t, e) {
                    var i = location.hostname,
                        n = "TOAST UI " + t + " for " + i + ": Statistics",
                        r = window.localStorage.getItem(n);
                    (o.isUndefined(window.tui) || !1 !== window.tui.usageStatistics) && (r && ! function(t) {
                        return (new Date).getTime() - t > a
                    }(r) || (window.localStorage.setItem(n, (new Date).getTime()), setTimeout(function() {
                        "interactive" !== document.readyState && "complete" !== document.readyState || s("https://www.google-analytics.com/collect", {
                            v: 1,
                            t: "event",
                            tid: e,
                            cid: i,
                            dp: i,
                            dh: t,
                            el: t,
                            ec: "use"
                        })
                    }, 1e3)))
                }
            }
        }, function(t, e) {
            "use strict";
            var i, n, r = {
                    chrome: !1,
                    firefox: !1,
                    safari: !1,
                    msie: !1,
                    edge: !1,
                    others: !1,
                    version: 0
                },
                o = window.navigator,
                a = o.appName.replace(/\s/g, "_"),
                s = o.userAgent,
                l = /MSIE\s([0-9]+[.0-9]*)/,
                c = /Trident.*rv:11\./,
                u = /Edge\/(\d+)\./,
                h = {
                    firefox: /Firefox\/(\d+)\./,
                    chrome: /Chrome\/(\d+)\./,
                    safari: /Version\/([\d.]+).*Safari\/(\d+)/
                },
                d = {
                    Microsoft_Internet_Explorer: function() {
                        var t = s.match(l);
                        t ? (r.msie = !0, r.version = parseFloat(t[1])) : r.others = !0
                    },
                    Netscape: function() {
                        var t = !1;
                        if (c.exec(s)) r.msie = !0, r.version = 11, t = !0;
                        else if (u.exec(s)) r.edge = !0, r.version = s.match(u)[1], t = !0;
                        else
                            for (i in h)
                                if (h.hasOwnProperty(i) && (n = s.match(h[i])) && n.length > 1) {
                                    r[i] = t = !0, r.version = parseFloat(n[1] || 0);
                                    break
                                }
                        t || (r.others = !0)
                    }
                };
            d[a] && d[a](), t.exports = r
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(2),
                o = i(5),
                a = i(10),
                s = i(1),
                l = 0;

            function c() {
                this.openedPopup = {}, this.closeWithParentPopup = {}, this.postBridgeUrl = ""
            }
            c.prototype.getPopupList = function(t) {
                return r.isExisty(t) ? this.openedPopup[t] : this.openedPopup
            }, c.prototype.openPopup = function(t, e) {
                var i, n, c;
                if ((e = s.extend({
                        popupName: "popup_" + l + "_" + Number(new Date),
                        popupOptionStr: "",
                        useReload: !0,
                        closeWithParent: !0,
                        method: "get",
                        param: {}
                    }, e || {})).method = e.method.toUpperCase(), this.postBridgeUrl = e.postBridgeUrl || this.postBridgeUrl, c = "POST" === e.method && e.param && a.msie && 11 === a.version, !r.isExisty(t)) throw new Error("Popup#open() need popup url.");
                l += 1, e.param && ("GET" === e.method ? t = t + (/\?/.test(t) ? "&" : "?") + this._parameterize(e.param) : "POST" === e.method && (c || (n = this.createForm(t, e.param, e.method, e.popupName), t = "about:blank"))), i = this.openedPopup[e.popupName], r.isExisty(i) ? i.closed ? this.openedPopup[e.popupName] = i = this._open(c, e.param, t, e.popupName, e.popupOptionStr) : (e.useReload && i.location.replace(t), i.focus()) : this.openedPopup[e.popupName] = i = this._open(c, e.param, t, e.popupName, e.popupOptionStr), this.closeWithParentPopup[e.popupName] = e.closeWithParent, (!i || i.closed || r.isUndefined(i.closed)) && alert("please enable popup windows for this website"), e.param && "POST" === e.method && !c && (i && n.submit(), n.parentNode && n.parentNode.removeChild(n)), window.onunload = o.bind(this.closeAllPopup, this)
            }, c.prototype.close = function(t, e) {
                var i = e || window;
                (t = !!r.isExisty(t) && t) && (window.onunload = null), i.closed || (i.opener = window.location.href, i.close())
            }, c.prototype.closeAllPopup = function(t) {
                var e = r.isExisty(t);
                n.forEachOwnProperties(this.openedPopup, function(t, i) {
                    (e && this.closeWithParentPopup[i] || !e) && this.close(!1, t)
                }, this)
            }, c.prototype.focus = function(t) {
                this.getPopupList(t).focus()
            }, c.prototype.parseQuery = function() {
                var t, e, i = {};
                return t = window.location.search.substr(1), n.forEachArray(t.split("&"), function(t) {
                    e = t.split("="), i[decodeURIComponent(e[0])] = decodeURIComponent(e[1])
                }), i
            }, c.prototype.createForm = function(t, e, i, r, o) {
                var a, s = document.createElement("form");
                return o = o || document.body, s.method = i || "POST", s.action = t || "", s.target = r || "", s.style.display = "none", n.forEachOwnProperties(e, function(t, e) {
                    (a = document.createElement("input")).name = e, a.type = "hidden", a.value = t, s.appendChild(a)
                }), o.appendChild(s), s
            }, c.prototype._parameterize = function(t) {
                var e = [];
                return n.forEachOwnProperties(t, function(t, i) {
                    e.push(encodeURIComponent(i) + "=" + encodeURIComponent(t))
                }), e.join("&")
            }, c.prototype._open = function(t, e, i, n, r) {
                var o;
                return t ? (o = window.open(this.postBridgeUrl, n, r), setTimeout(function() {
                    o.redirect(i, e)
                }, 100)) : o = window.open(i, n, r), o
            }, t.exports = new c
        }, function(t, e, i) {
            "use strict";
            var n = i(2),
                r = i(1),
                o = /[\\]*YYYY|[\\]*YY|[\\]*MMMM|[\\]*MMM|[\\]*MM|[\\]*M|[\\]*DD|[\\]*D|[\\]*HH|[\\]*H|[\\]*A/gi,
                a = ["Invalid month", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                s = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
                l = {
                    M: function(t) {
                        return Number(t.month)
                    },
                    MM: function(t) {
                        var e = t.month;
                        return Number(e) < 10 ? "0" + e : e
                    },
                    MMM: function(t) {
                        return a[Number(t.month)].substr(0, 3)
                    },
                    MMMM: function(t) {
                        return a[Number(t.month)]
                    },
                    D: function(t) {
                        return Number(t.date)
                    },
                    d: function(t) {
                        return l.D(t)
                    },
                    DD: function(t) {
                        var e = t.date;
                        return Number(e) < 10 ? "0" + e : e
                    },
                    dd: function(t) {
                        return l.DD(t)
                    },
                    YY: function(t) {
                        return Number(t.year) % 100
                    },
                    yy: function(t) {
                        return l.YY(t)
                    },
                    YYYY: function(t) {
                        var e = "20",
                            i = t.year;
                        return i > 69 && i < 100 && (e = "19"), Number(i) < 100 ? e + String(i) : i
                    },
                    yyyy: function(t) {
                        return l.YYYY(t)
                    },
                    A: function(t) {
                        return t.meridiem
                    },
                    a: function(t) {
                        return t.meridiem
                    },
                    hh: function(t) {
                        var e = t.hour;
                        return Number(e) < 10 ? "0" + e : e
                    },
                    HH: function(t) {
                        return l.hh(t)
                    },
                    h: function(t) {
                        return String(Number(t.hour))
                    },
                    H: function(t) {
                        return l.h(t)
                    },
                    m: function(t) {
                        return String(Number(t.minute))
                    },
                    mm: function(t) {
                        var e = t.minute;
                        return Number(e) < 10 ? "0" + e : e
                    }
                };
            t.exports = function(t, e, i) {
                var a, c, u = r.pick(i, "meridiemSet", "AM") || "AM",
                    h = r.pick(i, "meridiemSet", "PM") || "PM";
                return !! function(t, e, i) {
                    var n;
                    return t = Number(t), e = Number(e), i = Number(i), (t > -1 && t < 100 || t > 1969 && t < 2070) && e > 0 && e < 13 && (n = s[e], 2 === e && t % 4 == 0 && (t % 100 == 0 && t % 400 != 0 || (n = 29)), i > 0 && i <= n)
                }((c = n.isDate(e) ? {
                    year: e.getFullYear(),
                    month: e.getMonth() + 1,
                    date: e.getDate(),
                    hour: e.getHours(),
                    minute: e.getMinutes()
                } : {
                    year: e.year,
                    month: e.month,
                    date: e.date,
                    hour: e.hour,
                    minute: e.minute
                }).year, c.month, c.date) && (c.meridiem = "", /([^\\]|^)[aA]\b/.test(t) && (a = c.hour > 11 ? h : u, c.hour > 12 && (c.hour %= 12), 0 === c.hour && (c.hour = 12), c.meridiem = a), t.replace(o, function(t) {
                    return t.indexOf("\\") > -1 ? t.replace(/\\/, "") : l[t](c) || ""
                }))
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(6).inherit,
                r = i(1).extend;
            t.exports = function(t, e) {
                var i;
                return e || (e = t, t = null), i = e.init || function() {}, t && n(i, t), e.hasOwnProperty("static") && (r(i, e.static), delete e.static), r(i.prototype, e), i
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(15),
                r = i(2),
                o = "initialize";
            t.exports = function(t, e) {
                var i = e || {};
                return r.isFunction(i[o]) && i[o](), n(t, i)
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(1);
            t.exports = function(t, e, i) {
                var o, a, s;
                return (o = t.split(".")).unshift(window), a = n.reduce(o, function(t, e) {
                    return t[e] = t[e] || {}, t[e]
                }), i ? (s = o.pop(), a = r.pick.apply(null, o)[s] = e) : r.extend(a, e), a
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(2),
                o = i(1),
                a = /\s+/g;

            function s() {
                this.events = null, this.contexts = null
            }
            s.mixin = function(t) {
                o.extend(t.prototype, s.prototype)
            }, s.prototype._getHandlerItem = function(t, e) {
                var i = {
                    handler: t
                };
                return e && (i.context = e), i
            }, s.prototype._safeEvent = function(t) {
                var e, i = this.events;
                return i || (i = this.events = {}), t && ((e = i[t]) || (e = [], i[t] = e), i = e), i
            }, s.prototype._safeContext = function() {
                var t = this.contexts;
                return t || (t = this.contexts = []), t
            }, s.prototype._indexOfContext = function(t) {
                for (var e = this._safeContext(), i = 0; e[i];) {
                    if (t === e[i][0]) return i;
                    i += 1
                }
                return -1
            }, s.prototype._memorizeContext = function(t) {
                var e, i;
                r.isExisty(t) && (e = this._safeContext(), (i = this._indexOfContext(t)) > -1 ? e[i][1] += 1 : e.push([t, 1]))
            }, s.prototype._forgetContext = function(t) {
                var e, i;
                r.isExisty(t) && (e = this._safeContext(), (i = this._indexOfContext(t)) > -1 && (e[i][1] -= 1, e[i][1] <= 0 && e.splice(i, 1)))
            }, s.prototype._bindEvent = function(t, e, i) {
                var n = this._safeEvent(t);
                this._memorizeContext(i), n.push(this._getHandlerItem(e, i))
            }, s.prototype.on = function(t, e, i) {
                var o = this;
                r.isString(t) ? (t = t.split(a), n.forEach(t, function(t) {
                    o._bindEvent(t, e, i)
                })) : r.isObject(t) && (i = e, n.forEach(t, function(t, e) {
                    o.on(e, t, i)
                }))
            }, s.prototype.once = function(t, e, i) {
                var o = this;
                if (r.isObject(t)) return i = e, void n.forEach(t, function(t, e) {
                    o.once(e, t, i)
                });
                this.on(t, function n() {
                    e.apply(i, arguments), o.off(t, n, i)
                }, i)
            }, s.prototype._spliceMatches = function(t, e) {
                var i, n = 0;
                if (r.isArray(t))
                    for (i = t.length; n < i; n += 1) !0 === e(t[n]) && (t.splice(n, 1), i -= 1, n -= 1)
            }, s.prototype._matchHandler = function(t) {
                var e = this;
                return function(i) {
                    var n = t === i.handler;
                    return n && e._forgetContext(i.context), n
                }
            }, s.prototype._matchContext = function(t) {
                var e = this;
                return function(i) {
                    var n = t === i.context;
                    return n && e._forgetContext(i.context), n
                }
            }, s.prototype._matchHandlerAndContext = function(t, e) {
                var i = this;
                return function(n) {
                    var r = t === n.handler,
                        o = e === n.context,
                        a = r && o;
                    return a && i._forgetContext(n.context), a
                }
            }, s.prototype._offByEventName = function(t, e) {
                var i = this,
                    o = n.forEachArray,
                    s = r.isFunction(e),
                    l = i._matchHandler(e);
                t = t.split(a), o(t, function(t) {
                    var e = i._safeEvent(t);
                    s ? i._spliceMatches(e, l) : (o(e, function(t) {
                        i._forgetContext(t.context)
                    }), i.events[t] = [])
                })
            }, s.prototype._offByHandler = function(t) {
                var e = this,
                    i = this._matchHandler(t);
                n.forEach(this._safeEvent(), function(t) {
                    e._spliceMatches(t, i)
                })
            }, s.prototype._offByObject = function(t, e) {
                var i, o = this;
                this._indexOfContext(t) < 0 ? n.forEach(t, function(t, e) {
                    o.off(e, t)
                }) : r.isString(e) ? (i = this._matchContext(t), o._spliceMatches(this._safeEvent(e), i)) : r.isFunction(e) ? (i = this._matchHandlerAndContext(e, t), n.forEach(this._safeEvent(), function(t) {
                    o._spliceMatches(t, i)
                })) : (i = this._matchContext(t), n.forEach(this._safeEvent(), function(t) {
                    o._spliceMatches(t, i)
                }))
            }, s.prototype.off = function(t, e) {
                r.isString(t) ? this._offByEventName(t, e) : arguments.length ? r.isFunction(t) ? this._offByHandler(t) : r.isObject(t) && this._offByObject(t, e) : (this.events = {}, this.contexts = [])
            }, s.prototype.fire = function(t) {
                this.invoke.apply(this, arguments)
            }, s.prototype.invoke = function(t) {
                var e, i, n, r;
                if (!this.hasListener(t)) return !0;
                for (e = this._safeEvent(t), i = Array.prototype.slice.call(arguments, 1), n = 0; e[n];) {
                    if (!1 === (r = e[n]).handler.apply(r.context, i)) return !1;
                    n += 1
                }
                return !0
            }, s.prototype.hasListener = function(t) {
                return this.getListenerLength(t) > 0
            }, s.prototype.getListenerLength = function(t) {
                return this._safeEvent(t).length
            }, t.exports = s
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(2),
                o = function() {
                    try {
                        return Object.defineProperty({}, "x", {}), !0
                    } catch (t) {
                        return !1
                    }
                }(),
                a = 0;

            function s(t) {
                t && this.set.apply(this, arguments)
            }
            s.prototype.set = function(t) {
                var e = this;
                r.isArray(t) || (t = n.toArray(arguments)), n.forEach(t, function(t) {
                    e._addItem(t)
                })
            }, s.prototype.getName = function(t) {
                var e, i = this;
                return n.forEach(this, function(n, r) {
                    if (i._isEnumItem(r) && t === n) return e = r, !1
                }), e
            }, s.prototype._addItem = function(t) {
                var e;
                this.hasOwnProperty(t) || (e = this._makeEnumValue(), o ? Object.defineProperty(this, t, {
                    enumerable: !0,
                    configurable: !1,
                    writable: !1,
                    value: e
                }) : this[t] = e)
            }, s.prototype._makeEnumValue = function() {
                var t;
                return t = a, a += 1, t
            }, s.prototype._isEnumItem = function(t) {
                return r.isNumber(this[t])
            }, t.exports = s
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(19);

            function o(t) {
                this._map = new r(t), this.size = this._map.size
            }
            n.forEachArray(["get", "has", "forEach", "keys", "values", "entries"], function(t) {
                o.prototype[t] = function() {
                    return this._map[t].apply(this._map, arguments)
                }
            }), n.forEachArray(["delete", "clear"], function(t) {
                o.prototype[t] = function() {
                    var e = this._map[t].apply(this._map, arguments);
                    return this.size = this._map.size, e
                }
            }), o.prototype.set = function() {
                return this._map.set.apply(this._map, arguments), this.size = this._map.size, this
            }, o.prototype.setObject = function(t) {
                n.forEachOwnProperties(t, function(t, e) {
                    this.set(e, t)
                }, this)
            }, o.prototype.deleteByKeys = function(t) {
                n.forEachArray(t, function(t) {
                    this.delete(t)
                }, this)
            }, o.prototype.merge = function(t) {
                t.forEach(function(t, e) {
                    this.set(e, t)
                }, this)
            }, o.prototype.filter = function(t) {
                var e = new o;
                return this.forEach(function(i, n) {
                    t(i, n) && e.set(n, i)
                }), e
            }, t.exports = o
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(2),
                o = i(3),
                a = i(10),
                s = i(5),
                l = {},
                c = {};

            function u(t, e) {
                this._keys = t, this._valueGetter = e, this._length = this._keys.length, this._index = -1, this._done = !1
            }

            function h(t) {
                this._valuesForString = {}, this._valuesForIndex = {}, this._keys = [], t && this._setInitData(t), this.size = 0
            }
            u.prototype.next = function() {
                var t = {};
                do {
                    this._index += 1
                } while (r.isUndefined(this._keys[this._index]) && this._index < this._length);
                return this._index >= this._length ? t.done = !0 : (t.done = !1, t.value = this._valueGetter(this._keys[this._index], this._index)), t
            }, h.prototype._setInitData = function(t) {
                if (!r.isArray(t)) throw new Error("Only Array is supported.");
                n.forEachArray(t, function(t) {
                    this.set(t[0], t[1])
                }, this)
            }, h.prototype._isNaN = function(t) {
                return "number" == typeof t && t != t
            }, h.prototype._getKeyIndex = function(t) {
                var e, i = -1;
                return r.isString(t) ? (e = this._valuesForString[t]) && (i = e.keyIndex) : i = o.inArray(t, this._keys), i
            }, h.prototype._getOriginKey = function(t) {
                var e = t;
                return t === l ? e = void 0 : t === c && (e = NaN), e
            }, h.prototype._getUniqueKey = function(t) {
                var e = t;
                return r.isUndefined(t) ? e = l : this._isNaN(t) && (e = c), e
            }, h.prototype._getValueObject = function(t, e) {
                return r.isString(t) ? this._valuesForString[t] : (r.isUndefined(e) && (e = this._getKeyIndex(t)), e >= 0 ? this._valuesForIndex[e] : void 0)
            }, h.prototype._getOriginValue = function(t, e) {
                return this._getValueObject(t, e).origin
            }, h.prototype._getKeyValuePair = function(t, e) {
                return [this._getOriginKey(t), this._getOriginValue(t, e)]
            }, h.prototype._createValueObject = function(t, e) {
                return {
                    keyIndex: e,
                    origin: t
                }
            }, h.prototype.set = function(t, e) {
                var i, n = this._getUniqueKey(t),
                    o = this._getKeyIndex(n);
                return o < 0 && (o = this._keys.push(n) - 1, this.size += 1), i = this._createValueObject(e, o), r.isString(t) ? this._valuesForString[t] = i : this._valuesForIndex[o] = i, this
            }, h.prototype.get = function(t) {
                var e = this._getUniqueKey(t),
                    i = this._getValueObject(e);
                return i && i.origin
            }, h.prototype.keys = function() {
                return new u(this._keys, s.bind(this._getOriginKey, this))
            }, h.prototype.values = function() {
                return new u(this._keys, s.bind(this._getOriginValue, this))
            }, h.prototype.entries = function() {
                return new u(this._keys, s.bind(this._getKeyValuePair, this))
            }, h.prototype.has = function(t) {
                return !!this._getValueObject(t)
            }, h.prototype.delete = function(t) {
                var e;
                r.isString(t) ? this._valuesForString[t] && (e = this._valuesForString[t].keyIndex, delete this._valuesForString[t]) : (e = this._getKeyIndex(t)) >= 0 && delete this._valuesForIndex[e], e >= 0 && (delete this._keys[e], this.size -= 1)
            }, h.prototype.forEach = function(t, e) {
                e = e || this, n.forEachArray(this._keys, function(i) {
                    r.isUndefined(i) || t.call(e, this._getValueObject(i).origin, i, this)
                }, this)
            }, h.prototype.clear = function() {
                h.call(this)
            }, window.Map && (a.firefox && a.version >= 37 || a.chrome && a.version >= 42) && (h = window.Map), t.exports = h
        }, function(t, e, i) {
            "use strict";
            var n = i(4),
                r = i(2);

            function o(t) {
                this.length = 0, t && this.setObject(t)
            }
            o.prototype.set = function(t, e) {
                2 === arguments.length ? this.setKeyValue(t, e) : this.setObject(t)
            }, o.prototype.setKeyValue = function(t, e) {
                this.has(t) || (this.length += 1), this[this.encodeKey(t)] = e
            }, o.prototype.setObject = function(t) {
                var e = this;
                n.forEachOwnProperties(t, function(t, i) {
                    e.setKeyValue(i, t)
                })
            }, o.prototype.merge = function(t) {
                var e = this;
                t.each(function(t, i) {
                    e.setKeyValue(i, t)
                })
            }, o.prototype.encodeKey = function(t) {
                return "å" + t
            }, o.prototype.decodeKey = function(t) {
                var e = t.split("å");
                return e[e.length - 1]
            }, o.prototype.get = function(t) {
                return this[this.encodeKey(t)]
            }, o.prototype.has = function(t) {
                return this.hasOwnProperty(this.encodeKey(t))
            }, o.prototype.remove = function(t) {
                return arguments.length > 1 && (t = n.toArray(arguments)), r.isArray(t) ? this.removeByKeyArray(t) : this.removeByKey(t)
            }, o.prototype.removeByKey = function(t) {
                var e = this.has(t) ? this.get(t) : null;
                return null !== e && (delete this[this.encodeKey(t)], this.length -= 1), e
            }, o.prototype.removeByKeyArray = function(t) {
                var e = [],
                    i = this;
                return n.forEach(t, function(t) {
                    e.push(i.removeByKey(t))
                }), e
            }, o.prototype.removeAll = function() {
                var t = this;
                this.each(function(e, i) {
                    t.remove(i)
                })
            }, o.prototype.each = function(t) {
                var e, i = this;
                n.forEachOwnProperties(this, function(n, r) {
                    if ("å" === r.charAt(0) && (e = t(n, i.decodeKey(r))), !1 === e) return e
                })
            }, o.prototype.keys = function() {
                var t = [],
                    e = this;
                return this.each(function(i, n) {
                    t.push(e.decodeKey(n))
                }), t
            }, o.prototype.find = function(t) {
                var e = [];
                return this.each(function(i, n) {
                    t(i, n) && e.push(i)
                }), e
            }, o.prototype.toArray = function() {
                var t = [];
                return this.each(function(e) {
                    t.push(e)
                }), t
            }, t.exports = o
        }])
    })
}, , , , , , , , , , , , , , , , , function(t, e, i) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var n = i(23),
        r = (i.n(n), i(25)),
        o = (i.n(r), i(27)),
        a = (i.n(o), i(29)),
        s = (i.n(a), i(31)),
        l = i.n(s);
    const c = new URL(window.location.href).searchParams.get("img"),
        u = c.split("/").pop(),
        h = {
            "common.bi.image": "./logo.png",
            "common.bisize.width": "324px",
            "common.bisize.height": "50px"
        };
    var d = new Image;
    d.onload = function() {
        const t = new l.a(document.querySelector("#tui-image-editor"), {
                includeUI: {
                    loadImage: {
                        path: c,
                        name: u
                    },
                    theme: h,
                    menuBarPosition: "bottom"
                },
                cssMaxHeight: d.height,
                usageStatistics: !1
            }),
            e = document.querySelector(".tui-image-editor-main-container .tui-image-editor-download-btn"),
            i = e.cloneNode(!0);
        e.parentNode.replaceChild(i, e), i.addEventListener("click", e => {
            e.preventDefault();
            const i = t.toDataURL();
            chrome.storage.local.get(["openTimes", "rateClicked"], function(t) {
                let {
                    openTimes: e,
                    rateClicked: i
                } = t;
                e ? e += 1 : e = 1, chrome.storage.local.set({
                    openTimes: e
                }), i || e % 4 != 0 || document.getElementById("xxdialog-rate") || (document.querySelector("body").insertAdjacentHTML("beforeend", f), function() {
                    for (var t = document.querySelectorAll("[i18n]"), e = 0; e < t.length; ++e) t[e].textContent = chrome.i18n.getMessage(t[e].getAttribute("i18n"));
                    t = document.querySelectorAll("[i18n-alt]");
                    for (var e = 0; e < t.length; ++e) {
                        var i = chrome.i18n.getMessage(t[e].getAttribute("i18n-alt"));
                        t[e].alt = i, t[e].title = i
                    }
                }(), document.querySelector("#xxdialog-yes").addEventListener("click", function() {
                    chrome.storage.local.set({
                        rateClicked: !0
                    });
                    const t = document.getElementById("xxdialog-rate");
                    t.remove(), window.open("https://chrome.google.com/webstore/detail/" + chrome.runtime.id + "/reviews", "_blank").focus()
                }), document.querySelector("#xxdialog-no").addEventListener("click", function() {
                    const t = document.getElementById("xxdialog-rate");
                    t.remove()
                }))
            }), chrome.downloads.download({
                url: i,
                filename: u
            })
        })
    }, d.src = c;
    const f = '\n<div id="xxdialog-rate" class="xxflex-container">\n    <div class="xxdialog">\n      <h2 class="xxdialog-header" i18n="rateDialogTitle"></h2>\n      <div class="xxdialog-content">\n        <p i18n="rateDialogDesc"></p>\n      </div>\n      <div class="xxdialog-button">\n        <a href="#" id="xxdialog-yes" class="xxcancel" i18n="rateDialogYes"></a>\n        <a href="#" id="xxdialog-no" i18n="rateDialogNo"></a>\n      </div>\n    </div>\n  </div>\n'
}, function(t, e, i) {
    var n = i(24);
    "string" == typeof n && (n = [
        [t.i, n, ""]
    ]);
    i(1)(n, {});
    n.locals && (t.exports = n.locals)
}, function(t, e, i) {
    (t.exports = i(0)()).push([t.i, "/*!\n * tui-image-editor.js\n * @version 3.6.1\n * @author NHN FE Development Lab <dl_javascript@nhn.com>\n * @license MIT\n */\nbody > textarea {\n  position: fixed !important;\n}\n.tui-image-editor-container {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  min-height: 300px;\n  height: 100%;\n  position: relative;\n  background-color: #282828;\n  overflow: hidden;\n  letter-spacing: 0.3px;\n}\n.tui-image-editor-container div,\n.tui-image-editor-container ul,\n.tui-image-editor-container label,\n.tui-image-editor-container input,\n.tui-image-editor-container li {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  -ms-user-select: none;\n  -moz-user-select: -moz-none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.tui-image-editor-container .tui-image-editor-header {\n/* BUTTON AND LOGO */\n  min-width: 533px;\n  position: absolute;\n  background-color: #151515;\n  top: 0;\n  width: 100%;\n}\n.tui-image-editor-container .tui-image-editor-header-buttons,\n.tui-image-editor-container .tui-image-editor-controls-buttons {\n  float: right;\n  margin: 8px;\n}\n.tui-image-editor-container .tui-image-editor-header-logo,\n.tui-image-editor-container .tui-image-editor-controls-logo {\n  float: left;\n  width: 30%;\n  padding: 17px;\n}\n.tui-image-editor-container .tui-image-editor-controls-logo,\n.tui-image-editor-container .tui-image-editor-controls-buttons {\n  width: 270px;\n  height: 100%;\n  display: none;\n}\n.tui-image-editor-container .tui-image-editor-header-buttons button,\n.tui-image-editor-container .tui-image-editor-header-buttons div,\n.tui-image-editor-container .tui-image-editor-controls-buttons button,\n.tui-image-editor-container .tui-image-editor-controls-buttons div {\n  display: inline-block;\n  position: relative;\n  width: 120px;\n  height: 40px;\n  padding: 0;\n  line-height: 40px;\n  outline: none;\n  border-radius: 20px;\n  border: 1px solid #ddd;\n  font-family: 'Noto Sans', sans-serif;\n  font-size: 12px;\n  font-weight: bold;\n  cursor: pointer;\n  vertical-align: middle;\n  letter-spacing: 0.3px;\n  text-align: center;\n}\n.tui-image-editor-container .tui-image-editor-download-btn {\n  background-color: #fdba3b;\n  border-color: #fdba3b;\n  color: #fff;\n}\n.tui-image-editor-container .tui-image-editor-load-btn {\n  position: absolute;\n  left: 0;\n  right: 0;\n  display: inline-block;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  cursor: pointer;\n  opacity: 0;\n}\n.tui-image-editor-container .tui-image-editor-main-container {\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 64px;\n}\n.tui-image-editor-container .tui-image-editor-main {\n  position: absolute;\n  text-align: center;\n  top: 64px;\n  bottom: 0;\n  right: 0;\n  left: 0;\n}\n.tui-image-editor-container .tui-image-editor-wrap {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  overflow: auto;\n}\n.tui-image-editor-container .tui-image-editor-wrap .tui-image-editor-size-wrap {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n.tui-image-editor-container .tui-image-editor-wrap .tui-image-editor-size-wrap .tui-image-editor-align-wrap {\n  display: table-cell;\n  vertical-align: middle;\n}\n.tui-image-editor-container .tui-image-editor {\n  position: relative;\n  display: inline-block;\n}\n.tui-image-editor-container .tui-image-editor-menu {\n  width: auto;\n  list-style: none;\n  padding: 0;\n  margin: 0 auto;\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.tui-image-editor-container .tui-image-editor-menu > .tui-image-editor-item {\n  position: relative;\n  display: inline-block;\n  border-radius: 2px;\n  padding: 7px 8px 3px 8px;\n  cursor: pointer;\n  margin: 0 4px;\n}\n.tui-image-editor-container .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:hover:before {\n  content: '';\n  position: absolute;\n  display: inline-block;\n  margin: 0 auto 0;\n  width: 0;\n  height: 0;\n  border-right: 7px solid transparent;\n  border-top: 7px solid #2f2f2f;\n  border-left: 7px solid transparent;\n  left: 13px;\n  top: -2px;\n}\n.tui-image-editor-container .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:hover:after {\n  content: attr(tooltip-content);\n  position: absolute;\n  display: inline-block;\n  background-color: #2f2f2f;\n  color: #fff;\n  padding: 5px 8px;\n  font-size: 11px;\n  font-weight: lighter;\n  border-radius: 3px;\n  max-height: 23px;\n  top: -25px;\n  left: 0;\n  min-width: 24px;\n}\n.tui-image-editor-container .tui-image-editor-menu > .tui-image-editor-item.active {\n  background-color: #fff;\n  transition: all 0.3s ease;\n}\n.tui-image-editor-container .tui-image-editor-wrap {\n  position: absolute;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual {\n  display: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border: 1px solid rgba(255,255,255,0.7);\n}\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor {\n  transition: none;\n}\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-grid-visual,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-grid-visual {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table {\n  width: 100%;\n  height: 100%;\n  border-collapse: collapse;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table td {\n  border: 1px solid rgba(255,255,255,0.3);\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table td.dot:before {\n  content: '';\n  position: absolute;\n  box-sizing: border-box;\n  width: 10px;\n  height: 10px;\n  border: 0;\n  box-shadow: 0 0 1px 0 rgba(0,0,0,0.3);\n  border-radius: 100%;\n  background-color: #fff;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.left-top:before {\n  top: -5px;\n  left: -5px;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.right-top:before {\n  top: -5px;\n  right: -5px;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.left-bottom:before {\n  bottom: -5px;\n  left: -5px;\n}\n.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.right-bottom:before {\n  bottom: -5px;\n  right: -5px;\n}\n.tui-image-editor-container .tui-image-editor-submenu {\n  display: none;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 150px;\n  white-space: nowrap;\n  z-index: 2;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover svg > use.active {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item li {\n  display: inline-block;\n  vertical-align: top;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-newline {\n  display: block;\n  margin-top: 0;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button {\n  position: relative;\n  cursor: pointer;\n  display: inline-block;\n  font-weight: normal;\n  font-size: 11px;\n  margin: 0 9px 0 9px;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.preset {\n  margin: 0 9px 20px 5px;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item label {\n  display: inline-block;\n  cursor: pointer;\n  padding-top: 5px;\n  font-family: \"Noto Sans\", sans-serif;\n  font-size: 11px;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.apply label,\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.cancel label {\n  vertical-align: 7px;\n}\n.tui-image-editor-container .tui-image-editor-submenu > div {\n  display: none;\n  vertical-align: bottom;\n}\n.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-style {\n  opacity: 0.95;\n  z-index: -1;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-partition > div {\n  width: 1px;\n  height: 52px;\n  border-left: 1px solid #3c3c3c;\n  margin: 0 8px 0 8px;\n}\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-partition > div {\n  height: 108px;\n  margin: 0 29px 0 0px;\n}\n.tui-image-editor-container .tui-image-editor-submenu-align {\n  text-align: left;\n  margin-right: 30px;\n}\n.tui-image-editor-container .tui-image-editor-submenu-align label {\n  width: 55px;\n  white-space: nowrap;\n}\n.tui-image-editor-container .tui-image-editor-submenu-align:first-child {\n  margin-right: 0;\n}\n.tui-image-editor-container .tui-image-editor-submenu-align:first-child label {\n  width: 70px;\n}\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-crop .tui-image-editor-submenu > div.tui-image-editor-menu-crop,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-submenu > div.tui-image-editor-menu-flip,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-submenu > div.tui-image-editor-menu-rotate,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-shape .tui-image-editor-submenu > div.tui-image-editor-menu-shape,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-text .tui-image-editor-submenu > div.tui-image-editor-menu-text,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-mask .tui-image-editor-submenu > div.tui-image-editor-menu-mask,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-icon .tui-image-editor-submenu > div.tui-image-editor-menu-icon,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-draw .tui-image-editor-submenu > div.tui-image-editor-menu-draw,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-submenu > div.tui-image-editor-menu-filter {\n  display: table-cell;\n}\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-crop .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-shape .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-text .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-mask .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-icon .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-draw .tui-image-editor-submenu,\n.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-submenu {\n  display: table;\n}\n.tui-image-editor-container .filter-color-item {\n  display: inline-block;\n}\n.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-checkbox-wrap {\n  display: inline-block !important;\n  text-align: left;\n}\n.tui-image-editor-container .tui-image-editor-checkbox-wrap.fixed-width {\n  width: 187px;\n  white-space: normal;\n}\n.tui-image-editor-container .tui-image-editor-checkbox {\n  display: inline-block;\n  margin: 1px 0 1px 0;\n}\n.tui-image-editor-container .tui-image-editor-checkbox input {\n  width: 14px;\n  height: 14px;\n  opacity: 0;\n}\n.tui-image-editor-container .tui-image-editor-checkbox input + label {\n  color: #fff;\n  height: 14px;\n  position: relative;\n}\n.tui-image-editor-container .tui-image-editor-checkbox input + label:before {\n  content: '';\n  position: absolute;\n  width: 14px;\n  height: 14px;\n  background-color: #fff;\n  top: 6px;\n  left: -19px;\n  display: inline-block;\n  margin: 0;\n  text-align: center;\n  font-size: 11px;\n  border: 0;\n  border-radius: 2px;\n  padding-top: 1px;\n  box-sizing: border-box;\n}\n.tui-image-editor-container .tui-image-editor-checkbox input[type='checkbox']:checked + label:before {\n  background-size: cover;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMBJREFUKBWVkjEOwjAMRe2WgZW7IIHEDdhghhuwcQ42rlJugAQS54Cxa5cq1QM5TUpByZfS2j9+dlJVt/tX5ZxbS4ZU9VLkQvSHKTIGRaVJYFmKrBbTCJxE2UgCdDzMZDkHrOV6b95V0US6UmgKodujEZbJg0B0ZgEModO5lrY1TMQf1TpyJGBEjD+E2NPN7ukIUDiF/BfEXgRiGEw8NgkffYGYwCi808fpn/6OvfUfsDr/Vc1IfRf8sKnFVqeiVQfDu0tf/nWH9gAAAABJRU5ErkJggg==\");\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap {\n  position: relative;\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap select {\n  width: 100%;\n  height: 28px;\n  margin-top: 4px;\n  border: 0;\n  outline: 0;\n  border-radius: 0;\n  border: 1px solid #cbdbdb;\n  background-color: #fff;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  padding: 0 7px 0 10px;\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist {\n  display: none;\n  position: relative;\n  top: -1px;\n  border: 1px solid #ccc;\n  background-color: #fff;\n  border-top: 0px;\n  padding: 4px 0;\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist li {\n  display: block;\n  text-align: left;\n  padding: 7px 10px;\n  font-family: 'Noto Sans', sans-serif;\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist li:hover {\n  background-color: rgba(81,92,230,0.05);\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap:before {\n  content: '';\n  position: absolute;\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  right: 5px;\n  top: 10px;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAHlJREFUKBVjYBgFOEOAEVkmPDxc89+/f6eAYjzI4kD2FyYmJrOVK1deh4kzwRggGiQBVJCELAZig8SQNYHEmEEEMrh69eo1HR0dfqCYJUickZGxf9WqVf3IakBsFBthklpaWmVA9mEQhrJhUoTp0NBQCRAmrHL4qgAAuu4cWZOZIGsAAAAASUVORK5CYII=\");\n  background-size: cover;\n}\n.tui-image-editor-container .tui-image-editor-selectlist-wrap select::-ms-expand {\n  display: none;\n}\n.tui-image-editor-container .tui-image-editor-virtual-range-bar .tui-image-editor-disabled,\n.tui-image-editor-container .tui-image-editor-virtual-range-subbar .tui-image-editor-disabled,\n.tui-image-editor-container .tui-image-editor-virtual-range-pointer .tui-image-editor-disabled {\n  backbround-color: #f00;\n}\n.tui-image-editor-container .tui-image-editor-range {\n  position: relative;\n  top: 5px;\n  width: 166px;\n  height: 17px;\n  display: inline-block;\n}\n.tui-image-editor-container .tui-image-editor-virtual-range-bar {\n  top: 7px;\n  position: absolute;\n  width: 100%;\n  height: 2px;\n  background-color: #666;\n}\n.tui-image-editor-container .tui-image-editor-virtual-range-subbar {\n  position: absolute;\n  height: 100%;\n  left: 0;\n  right: 0;\n  background-color: #d1d1d1;\n}\n.tui-image-editor-container .tui-image-editor-virtual-range-pointer {\n  position: absolute;\n  cursor: pointer;\n  top: -5px;\n  left: 0;\n  width: 12px;\n  height: 12px;\n  background-color: #fff;\n  border-radius: 100%;\n}\n.tui-image-editor-container .tui-image-editor-range-wrap {\n  display: inline-block;\n  margin-left: 4px;\n}\n.tui-image-editor-container .tui-image-editor-range-wrap.short .tui-image-editor-range {\n  width: 100px;\n}\n.tui-image-editor-container .color-picker-control .tui-image-editor-range {\n  width: 108px;\n  margin-left: 10px;\n}\n.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-pointer {\n  background-color: #333;\n}\n.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-bar {\n  background-color: #ccc;\n}\n.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-subbar {\n  background-color: #606060;\n}\n.tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short {\n  margin-top: -2px;\n  margin-left: 19px;\n}\n.tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label {\n  color: #8e8e8e;\n  font-weight: normal;\n}\n.tui-image-editor-container .tui-image-editor-range-wrap label {\n  vertical-align: baseline;\n  font-size: 11px;\n  margin-right: 7px;\n  color: #fff;\n}\n.tui-image-editor-container .tui-image-editor-range-value {\n  cursor: default;\n  width: 40px;\n  height: 24px;\n  outline: none;\n  border-radius: 2px;\n  box-shadow: none;\n  border: 1px solid #d5d5d5;\n  text-align: center;\n  background-color: #1c1c1c;\n  color: #fff;\n  font-weight: lighter;\n  vertical-align: baseline;\n  font-family: 'Noto Sans', sans-serif;\n  margin-top: 21px;\n  margin-left: 4px;\n}\n.tui-image-editor-container .tui-image-editor-controls {\n  position: absolute;\n  background-color: #151515;\n  width: 100%;\n  height: 64px;\n  display: table;\n  bottom: 0;\n  z-index: 2;\n}\n.tui-image-editor-container .tui-image-editor-icpartition {\n  display: inline-block;\n  background-color: #282828;\n  width: 1px;\n  height: 24px;\n}\n.tui-image-editor-container.left .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:before {\n  left: 28px;\n  top: 11px;\n  border-right: 7px solid #2f2f2f;\n  border-top: 7px solid transparent;\n  border-bottom: 7px solid transparent;\n}\n.tui-image-editor-container.left .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:after {\n  top: 7px;\n  left: 42px;\n  white-space: nowrap;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu {\n  left: 0;\n  height: 100%;\n  width: 248px;\n}\n.tui-image-editor-container.left .tui-image-editor-main-container {\n  left: 64px;\n  width: calc(100% - 64px);\n  height: 100%;\n}\n.tui-image-editor-container.left .tui-image-editor-controls {\n  width: 64px;\n  height: 100%;\n  display: table;\n}\n.tui-image-editor-container.left .tui-image-editor-menu,\n.tui-image-editor-container.right .tui-image-editor-menu {\n  white-space: inherit;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu,\n.tui-image-editor-container.right .tui-image-editor-submenu {\n  white-space: normal;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu > div,\n.tui-image-editor-container.right .tui-image-editor-submenu > div {\n  vertical-align: middle;\n}\n.tui-image-editor-container.left .tui-image-editor-controls li,\n.tui-image-editor-container.right .tui-image-editor-controls li {\n  display: inline-block;\n  margin: 4px auto;\n}\n.tui-image-editor-container.left .tui-image-editor-icpartition,\n.tui-image-editor-container.right .tui-image-editor-icpartition {\n  position: relative;\n  top: -7px;\n  width: 24px;\n  height: 1px;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition,\n.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition {\n  display: block;\n  width: 75%;\n  margin: auto;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\n.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\n  border-left: 0;\n  height: 10px;\n  border-bottom: 1px solid #3c3c3c;\n  width: 100%;\n  margin: 0;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-align,\n.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-align {\n  margin-right: 0;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-item li,\n.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-item li {\n  margin-top: 15px;\n}\n.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-colorpicker-clearfix li,\n.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-colorpicker-clearfix li {\n  margin-top: 0;\n}\n.tui-image-editor-container.left .tui-image-editor-checkbox-wrap.fixed-width,\n.tui-image-editor-container.right .tui-image-editor-checkbox-wrap.fixed-width {\n  width: 182px;\n  white-space: normal;\n}\n.tui-image-editor-container.left .tui-image-editor-range-wrap.tui-image-editor-newline label.range,\n.tui-image-editor-container.right .tui-image-editor-range-wrap.tui-image-editor-newline label.range {\n  display: block;\n  text-align: left;\n  width: 75%;\n  margin: auto;\n}\n.tui-image-editor-container.left .tui-image-editor-range,\n.tui-image-editor-container.right .tui-image-editor-range {\n  width: 136px;\n}\n.tui-image-editor-container.right .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:before {\n  left: -3px;\n  top: 11px;\n  border-left: 7px solid #2f2f2f;\n  border-top: 7px solid transparent;\n  border-bottom: 7px solid transparent;\n}\n.tui-image-editor-container.right .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:after {\n  top: 7px;\n  left: unset;\n  right: 43px;\n  white-space: nowrap;\n}\n.tui-image-editor-container.right .tui-image-editor-submenu {\n  right: 0;\n  height: 100%;\n  width: 248px;\n}\n.tui-image-editor-container.right .tui-image-editor-main-container {\n  right: 64px;\n  width: calc(100% - 64px);\n  height: 100%;\n}\n.tui-image-editor-container.right .tui-image-editor-controls {\n  right: 0;\n  width: 64px;\n  height: 100%;\n  display: table;\n}\n.tui-image-editor-container.top .tui-image-editor-submenu .tui-image-editor-partition.only-left-right,\n.tui-image-editor-container.bottom .tui-image-editor-submenu .tui-image-editor-partition.only-left-right {\n  display: none;\n}\n.tui-image-editor-container.bottom .tui-image-editor-submenu > div {\n  padding-bottom: 24px;\n}\n.tui-image-editor-container.top .color-picker-control .triangle {\n  top: -8px;\n  border-right: 7px solid transparent;\n  border-top: 0px;\n  border-left: 7px solid transparent;\n  border-bottom: 8px solid #fff;\n}\n.tui-image-editor-container.top .tui-image-editor-size-wrap {\n  height: 100%;\n}\n.tui-image-editor-container.top .tui-image-editor-main-container {\n  bottom: 0;\n}\n.tui-image-editor-container.top .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:before {\n  left: 13px;\n  border-top: 0;\n  border-bottom: 7px solid #2f2f2f;\n  top: 33px;\n}\n.tui-image-editor-container.top .tui-image-editor-menu > .tui-image-editor-item[tooltip-content]:after {\n  top: 38px;\n}\n.tui-image-editor-container.top .tui-image-editor-submenu {\n  top: 0;\n  bottom: inherit;\n}\n.tui-image-editor-container.top .tui-image-editor-submenu > div {\n  padding-top: 24px;\n  vertical-align: top;\n}\n.tui-image-editor-container.top .tui-image-editor-controls-logo {\n  display: table-cell;\n}\n.tui-image-editor-container.top .tui-image-editor-controls-buttons {\n  display: table-cell;\n}\n.tui-image-editor-container.top .tui-image-editor-main {\n  top: 64px;\n  height: calc(100% - 64px);\n}\n.tui-image-editor-container.top .tui-image-editor-controls {\n  top: 0;\n  bottom: inherit;\n}\n.tui-image-editor-container #tie-icon-add-button .tui-image-editor-button {\n  min-width: 42px;\n}\n.tui-image-editor-container .svg_ic-menu {\n  width: 24px;\n  height: 24px;\n}\n.tui-image-editor-container .svg_ic-submenu {\n  width: 32px;\n  height: 32px;\n}\n.tui-image-editor-container .svg_img-bi {\n  width: 257px;\n  height: 26px;\n}\n.tui-image-editor-container .tui-image-editor-controls svg > use {\n  display: none;\n}\n.tui-image-editor-container .tui-image-editor-controls .enabled svg:hover > use.hover,\n.tui-image-editor-container .tui-image-editor-controls .normal svg:hover > use.hover {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-controls .active svg:hover > use.hover {\n  display: none;\n}\n.tui-image-editor-container .tui-image-editor-controls svg > use.normal {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-controls .active svg > use.active {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-controls .enabled svg > use.enabled {\n  display: block;\n}\n.tui-image-editor-container .tui-image-editor-controls .active svg > use.normal,\n.tui-image-editor-container .tui-image-editor-controls .enabled svg > use.normal {\n  display: none;\n}\n.tui-image-editor-container .tui-image-editor-controls:hover {\n  z-index: 3;\n}\n.tui-image-editor-container div.tui-colorpicker-clearfix {\n  width: 159px;\n  height: 28px;\n  border: 1px solid #d5d5d5;\n  border-radius: 2px;\n  background-color: #f5f5f5;\n  margin-top: 6px;\n  padding: 4px 7px 4px 7px;\n}\n.tui-image-editor-container .tui-colorpicker-palette-hex {\n  width: 114px;\n  background-color: #f5f5f5;\n  border: 0;\n  font-size: 11px;\n  margin-top: 2px;\n  font-family: 'Noto Sans', sans-serif;\n}\n.tui-image-editor-container .tui-colorpicker-palette-hex[value='#ffffff'] + .tui-colorpicker-palette-preview,\n.tui-image-editor-container .tui-colorpicker-palette-hex[value=''] + .tui-colorpicker-palette-preview {\n  border: 1px solid #ccc;\n}\n.tui-image-editor-container .tui-colorpicker-palette-hex[value=''] + .tui-colorpicker-palette-preview {\n  background-size: cover;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAdBJREFUWAnFl0FuwjAQRZ0ukiugHqFSOQNdseuKW3ALzkA4BateICvUGyCxrtRFd4WuunH/TzykaYJrnLEYaTJJsP2+x8GZZCbQrLU5mj7Bn+EP8HvnCObd+R7xBV5lWfaNON4AnsA38E94qLEt+0yiFaBzAV/Bv+Cxxr4co7hKCDpw1q9wLeNYYdlAwyn8TYt8Hme3+8D5ozcTaMCZ68PXa2tnM2sbEcOZAJhrrpl2DAcTOGNjZPSfCdzkw6JrfbiMv+osBe4y9WOedhm4jZfhbENWuxS44H9Wz/xw4WzqLOAqh1+zycgAwzEMzr5k5gaHOa9ULBwuuDkFlHI1Kl4PJ66kgIpnoywOTmRFAYcbwYk9UMApWkD8zAV5ihcwHk4Rx7gl0IFTQL0EFc+CTQ9OZHWH3YhlVJiVpTHbrTGLhTHLZVgff6s9lyBsI9KduSS83oj+34rTwJutmBmCnMsvozRwZqB5GTkBw6/jdPDu69iJ6BYk6eCcfbcgcQIK/MByaaiMqm8rHcjol2TnpWDhyAKSGdA3FrxtJUToX0ODqatetfGE+8tyEUOV8GY5dGRwLP/MBS4RHQr4bT7NRAQjlcOTfZxmv2G+c4hI8nn+Ax5PG/zhI393AAAAAElFTkSuQmCC\");\n}\n.tui-image-editor-container .tui-colorpicker-palette-preview {\n  border-radius: 100%;\n  float: left;\n  width: 17px;\n  height: 17px;\n  border: 0;\n}\n.tui-image-editor-container .color-picker-control {\n  position: absolute;\n  display: none;\n  z-index: 99;\n  width: 192px;\n  background-color: #fff;\n  box-shadow: 0 3px 22px 6px rgba(0,0,0,0.15);\n  padding: 16px;\n  border-radius: 2px;\n}\n.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-toggle-slider {\n  display: none;\n}\n.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button {\n  border: 0;\n  border-radius: 100%;\n  margin: 2px;\n  background-size: cover;\n  font-size: 1px;\n}\n.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button[title='#ffffff'] {\n  border: 1px solid #ccc;\n}\n.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button[title=''] {\n  border: 1px solid #ccc;\n}\n.tui-image-editor-container .color-picker-control .triangle {\n  width: 0;\n  height: 0;\n  border-right: 7px solid transparent;\n  border-top: 8px solid #fff;\n  border-left: 7px solid transparent;\n  position: absolute;\n  bottom: -8px;\n  left: 84px;\n}\n.tui-image-editor-container .color-picker-control .tui-colorpicker-container,\n.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-container ul,\n.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-container {\n  width: 100%;\n  height: auto;\n}\n.tui-image-editor-container .filter-color-item .color-picker-control label {\n  font-color: #333;\n  font-weight: normal;\n  margin-right: 7pxleft;\n}\n.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox {\n  margin-top: 0;\n}\n.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox input + label:before {\n  left: -16px;\n}\n.tui-image-editor-container .color-picker {\n  width: 100%;\n  height: auto;\n}\n.tui-image-editor-container .color-picker-value {\n  width: 32px;\n  height: 32px;\n  border: 0px;\n  border-radius: 100%;\n  margin: auto;\n  margin-bottom: 1px;\n}\n.tui-image-editor-container .color-picker-value.transparent {\n  border: 1px solid #cbcbcb;\n  background-size: cover;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAdBJREFUWAnFl0FuwjAQRZ0ukiugHqFSOQNdseuKW3ALzkA4BateICvUGyCxrtRFd4WuunH/TzykaYJrnLEYaTJJsP2+x8GZZCbQrLU5mj7Bn+EP8HvnCObd+R7xBV5lWfaNON4AnsA38E94qLEt+0yiFaBzAV/Bv+Cxxr4co7hKCDpw1q9wLeNYYdlAwyn8TYt8Hme3+8D5ozcTaMCZ68PXa2tnM2sbEcOZAJhrrpl2DAcTOGNjZPSfCdzkw6JrfbiMv+osBe4y9WOedhm4jZfhbENWuxS44H9Wz/xw4WzqLOAqh1+zycgAwzEMzr5k5gaHOa9ULBwuuDkFlHI1Kl4PJ66kgIpnoywOTmRFAYcbwYk9UMApWkD8zAV5ihcwHk4Rx7gl0IFTQL0EFc+CTQ9OZHWH3YhlVJiVpTHbrTGLhTHLZVgff6s9lyBsI9KduSS83oj+34rTwJutmBmCnMsvozRwZqB5GTkBw6/jdPDu69iJ6BYk6eCcfbcgcQIK/MByaaiMqm8rHcjol2TnpWDhyAKSGdA3FrxtJUToX0ODqatetfGE+8tyEUOV8GY5dGRwLP/MBS4RHQr4bT7NRAQjlcOTfZxmv2G+c4hI8nn+Ax5PG/zhI393AAAAAElFTkSuQmCC\");\n}\n.tui-image-editor-container .color-picker-value + label {\n  color: #fff;\n}\n.tui-image-editor-container .tui-image-editor-submenu svg > use {\n  display: none;\n}\n.tui-image-editor-container .tui-image-editor-submenu svg > use.normal {\n  display: block;\n}\n#tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype=\"icon-bubble\"] svg > use.active,\n#tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype=\"icon-heart\"] svg > use.active,\n#tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype=\"icon-location\"] svg > use.active,\n#tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype=\"icon-polygon\"] svg > use.active,\n#tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype=\"icon-star\"] svg > use.active,\n#tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype=\"icon-star-2\"] svg > use.active,\n#tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype=\"icon-arrow-3\"] svg > use.active,\n#tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype=\"icon-arrow-2\"] svg > use.active,\n#tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype=\"icon-arrow\"] svg > use.active {\n  display: block;\n}\n#tie-draw-line-select-button.line .tui-image-editor-button.line svg > use.normal,\n#tie-draw-line-select-button.free .tui-image-editor-button.free svg > use.normal {\n  display: none;\n}\n#tie-draw-line-select-button.line .tui-image-editor-button.line svg > use.active,\n#tie-draw-line-select-button.free .tui-image-editor-button.free svg > use.active {\n  display: block;\n}\n#tie-flip-button.resetFlip .tui-image-editor-button.resetFlip svg > use.normal,\n#tie-flip-button.flipX .tui-image-editor-button.flipX svg > use.normal,\n#tie-flip-button.flipY .tui-image-editor-button.flipY svg > use.normal {\n  display: none;\n}\n#tie-flip-button.resetFlip .tui-image-editor-button.resetFlip svg > use.active,\n#tie-flip-button.flipX .tui-image-editor-button.flipX svg > use.active,\n#tie-flip-button.flipY .tui-image-editor-button.flipY svg > use.active {\n  display: block;\n}\n#tie-mask-apply.apply.active .tui-image-editor-button.apply label {\n  color: #fff;\n}\n#tie-mask-apply.apply.active .tui-image-editor-button.apply svg > use.active {\n  display: block;\n}\n#tie-crop-button .tui-image-editor-button.apply,\n#tie-crop-preset-button .tui-image-editor-button.apply {\n  margin-right: 24px;\n}\n#tie-crop-button .tui-image-editor-button.preset.active svg > use.active,\n#tie-crop-preset-button .tui-image-editor-button.preset.active svg > use.active {\n  display: block;\n}\n#tie-crop-button .tui-image-editor-button.apply.active svg > use.active,\n#tie-crop-preset-button .tui-image-editor-button.apply.active svg > use.active {\n  display: block;\n}\n#tie-shape-button.rect .tui-image-editor-button.rect svg > use.normal,\n#tie-shape-button.circle .tui-image-editor-button.circle svg > use.normal,\n#tie-shape-button.triangle .tui-image-editor-button.triangle svg > use.normal {\n  display: none;\n}\n#tie-shape-button.rect .tui-image-editor-button.rect svg > use.active,\n#tie-shape-button.circle .tui-image-editor-button.circle svg > use.active,\n#tie-shape-button.triangle .tui-image-editor-button.triangle svg > use.active {\n  display: block;\n}\n#tie-text-effect-button .tui-image-editor-button.active svg > use.active {\n  display: block;\n}\n#tie-text-align-button.left .tui-image-editor-button.left svg > use.active,\n#tie-text-align-button.center .tui-image-editor-button.center svg > use.active,\n#tie-text-align-button.right .tui-image-editor-button.right svg > use.active {\n  display: block;\n}\n#tie-mask-image-file,\n#tie-icon-image-file {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #008000;\n  cursor: inherit;\n  left: 0;\n  top: 0;\n}\n.tui-image-editor-container.top.tui-image-editor-top-optimization .tui-image-editor-controls ul {\n  text-align: right;\n}\n.tui-image-editor-container.top.tui-image-editor-top-optimization .tui-image-editor-controls-logo {\n  display: none;\n}\n", ""])
}, function(t, e, i) {
    var n = i(26);
    "string" == typeof n && (n = [
        [t.i, n, ""]
    ]);
    i(1)(n, {});
    n.locals && (t.exports = n.locals)
}, function(t, e, i) {
    (t.exports = i(0)()).push([t.i, "/*!\n * Toast UI Colorpicker\n * @version 2.2.3\n * @author NHN FE Development Team <dl_javascript@nhn.com>\n * @license MIT\n */\n .tui-colorpicker-clearfix {\n    zoom: 1;\n  }\n  .tui-colorpicker-clearfix:after {\n    content: '';\n    display: block;\n    clear: both;\n  }\n  .tui-colorpicker-vml {\n    behavior: url(\"#default#VML\");\n    display: block;\n  }\n  .tui-colorpicker-container {\n    width: 152px;\n  }\n  .tui-colorpicker-palette-container {\n    width: 152px;\n  }\n  .tui-colorpicker-palette-container ul {\n    width: 152px;\n    margin: 0px;\n    padding: 0px;\n  }\n  .tui-colorpicker-palette-container li {\n    float: left;\n    margin: 0;\n    padding: 0 3px 3px 0;\n    list-style: none;\n  }\n  .tui-colorpicker-palette-button {\n    display: block;\n    border: none;\n    overflow: hidden;\n    outline: none;\n    margin: 0px;\n    padding: 0px;\n    width: 16px;\n    height: 16px;\n    border: 1px solid #ccc;\n    cursor: pointer;\n  }\n  .tui-colorpicker-palette-button.tui-colorpicker-selected {\n    border: 2px solid #000;\n  }\n  .tui-colorpicker-palette-button.tui-colorpicker-color-transparent {\n    barckground-repeat: repeat;\n    background-repeat: no-repeat;\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAOCAYAAAD0f5bSAAABfGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGAqSSwoyGFhYGDIzSspCnJ3UoiIjFJgv8PAzcDDIMRgxSCemFxc4BgQ4MOAE3y7xsAIoi/rgsxK8/x506a1fP4WNq+ZclYlOrj1gQF3SmpxMgMDIweQnZxSnJwLZOcA2TrJBUUlQPYMIFu3vKQAxD4BZIsUAR0IZN8BsdMh7A8gdhKYzcQCVhMS5AxkSwDZAkkQtgaInQ5hW4DYyRmJKUC2B8guiBvAgNPDRcHcwFLXkYC7SQa5OaUwO0ChxZOaFxoMcgcQyzB4MLgwKDCYMxgwWDLoMjiWpFaUgBQ65xdUFmWmZ5QoOAJDNlXBOT+3oLQktUhHwTMvWU9HwcjA0ACkDhRnEKM/B4FNZxQ7jxDLX8jAYKnMwMDcgxBLmsbAsH0PA4PEKYSYyjwGBn5rBoZt5woSixLhDmf8xkKIX5xmbARh8zgxMLDe+///sxoDA/skBoa/E////73o//+/i4H2A+PsQA4AJHdp4IxrEg8AAAGbaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEzPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CghrN1AAAABzSURBVCgVldKxEYAgDAXQD5VOpLuwgi4jlrTMqF00oOd5Aia/CcV/F4oYOgNlrLjvVyCEVJchBjEC25538PeaWTzRMBLxvIL7UZwFwL06qoA6aoAy+gFfJABvJAQPUoCMlICRRd8BzgHzJL4ok9aJ67l4AK9AxVKhHryUAAAAAElFTkSuQmCC\");\n  }\n  .tui-colorpicker-palette-hex {\n    font-family: monospace;\n    display: inline-block;\n    *display: inline;\n    zoom: 1;\n    width: 60px;\n    vertical-align: middle;\n  }\n  .tui-colorpicker-palette-preview {\n    display: inline-block;\n    *display: inline;\n    zoom: 1;\n    width: 12px;\n    height: 12px;\n    border: 1px solid #ccc;\n    border: 1px solid #ccc;\n    vertical-align: middle;\n    overflow: hidden;\n  }\n  .tui-colorpicker-palette-toggle-slider {\n    display: inline-block;\n    *display: inline;\n    zoom: 1;\n    vertical-align: middle;\n    float: right;\n  }\n  .tui-colorpicker-slider-container {\n    margin: 5px 0 0 0;\n    height: 122px;\n    zoom: 1;\n  }\n  .tui-colorpicker-slider-container:after {\n    content: '';\n    display: block;\n    clear: both;\n  }\n  .tui-colorpicker-slider-left {\n    float: left;\n    width: 120px;\n    height: 120px;\n  }\n  .tui-colorpicker-slider-right {\n    float: right;\n    width: 32px;\n    height: 120px;\n  }\n  .tui-colorpicker-svg {\n    display: block;\n  }\n  .tui-colorpicker-slider-handle {\n    position: absolute;\n    overflow: visible;\n    top: 0;\n    left: 0;\n    width: 1px;\n    height: 1px;\n    z-index: 2;\n    opacity: 0.9;\n  }\n  .tui-colorpicker-svg-slider {\n    width: 120px;\n    height: 120px;\n    border: 1px solid #ccc;\n    overflow: hidden;\n  }\n  .tui-colorpicker-vml-slider {\n    position: relative;\n    width: 120px;\n    height: 120px;\n    border: 1px solid #ccc;\n    overflow: hidden;\n  }\n  .tui-colorpicker-vml-slider-bg {\n    position: absolute;\n    margin: -1px 0 0 -1px;\n    top: 0;\n    left: 0;\n    width: 122px;\n    height: 122px;\n  }\n  .tui-colorpicker-svg-huebar {\n    float: right;\n    width: 18px;\n    height: 120px;\n    border: 1px solid #ccc;\n    overflow: visible;\n  }\n  .tui-colorpicker-vml-huebar {\n    width: 32px;\n    position: relative;\n  }\n  .tui-colorpicker-vml-huebar-bg {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 18px;\n    height: 121px;\n  }\n  ", ""])
}, function(t, e, i) {
    var n = i(28);
    "string" == typeof n && (n = [
        [t.i, n, ""]
    ]);
    i(1)(n, {});
    n.locals && (t.exports = n.locals)
}, function(t, e, i) {
    (t.exports = i(0)()).push([t.i, '/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n', ""])
}, function(t, e, i) {
    var n = i(30);
    "string" == typeof n && (n = [
        [t.i, n, ""]
    ]);
    i(1)(n, {});
    n.locals && (t.exports = n.locals)
}, function(t, e, i) {
    (t.exports = i(0)()).push([t.i, 'html,\nbody {\n    height: 100%;\n}\n\n#content {\n    width: 100%;\n    height: 100%;\n}\n\n.tui-image-editor-header-logo{\n    padding-top: 8px !important;\n}\n\n.xxflex-container {\n    z-index: 99999999;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-content: stretch;\n    align-items: flex-start;\n}\n\n.xxdialog {\n    order: 0;\n    flex: 0 1 auto;\n    align-self: center;\n    border-radius: 10px;\n    width: 250px;\n    background: rgba(220, 220, 220)\n}\n\n.xxdialog-header {\n    text-align: center;\n    padding-bottom: 10px;\n    font-size: 16px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 700;\n    border-bottom: rgb(180, 180, 180) solid 1px;\n}\n\n.xxdialog-content {\n    text-align: center;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400;\n    font-size: 14px;\n    padding: 0 10px;\n}\n\n.xxdialog-button a {\n    display: block;\n    text-align: center;\n    text-decoration: none;\n    padding: 10px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400;\n    font-size: 16px;\n    color: #2e7cf1;\n    border-top: rgb(180, 180, 180) solid 1px;\n}\n\n.xxdialog-button a:last-child {\n    border-bottom-left-radius: 10px;\n    border-bottom-right-radius: 10px;\n}\n\n.xxdialog-button .cancel {\n    font-weight: 700;\n}\n\n.xxdialog-button a:hover {\n    background: rgb(180, 180, 180);\n}\n\n.xxflex-container p {\n    line-height: 22px;\n}', ""])
}, function(t, e, i) {
    ! function(e, n) {
        t.exports = n(i(5), i(32))
    }(0, function(t, e) {
        return function(t) {
            var e = {};

            function i(n) {
                if (e[n]) return e[n].exports;
                var r = e[n] = {
                    exports: {},
                    id: n,
                    loaded: !1
                };
                return t[n].call(r.exports, r, r.exports, i), r.loaded = !0, r.exports
            }
            return i.m = t, i.c = e, i.p = "dist", i(0)
        }([function(t, e, i) {
            "use strict";
            i(1);
            var n = function(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }(i(2));
            i(139), i(141), i(142), i(143), i(144), i(145), i(146), i(147), i(148), i(149), i(150), i(151), i(152), i(153), i(154), i(155), i(156), i(157), i(158), i(159), t.exports = n.default
        }, function(t, e) {
            "use strict";
            Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector, Element.prototype.closest || (Element.prototype.closest = function(t) {
                    var e = this;
                    if (!document.documentElement.contains(e)) return null;
                    do {
                        if (e.matches(t)) return e;
                        e = e.parentElement || e.parentNode
                    } while (null !== e && 1 === e.nodeType);
                    return null
                }), "document" in window.self && ("classList" in document.createElement("_") && (!document.createElementNS || "classList" in document.createElementNS("http://www.w3.org/2000/svg", "g")) || function(t) {
                    if ("Element" in t) {
                        var e = t.Element.prototype,
                            i = Object,
                            n = String.prototype.trim || function() {
                                return this.replace(/^\s+|\s+$/g, "")
                            },
                            r = Array.prototype.indexOf || function(t) {
                                for (var e = 0, i = this.length; e < i; e++)
                                    if (e in this && this[e] === t) return e;
                                return -1
                            },
                            o = function(t, e) {
                                this.name = t, this.code = DOMException[t], this.message = e
                            },
                            a = function(t, e) {
                                if ("" === e) throw new o("SYNTAX_ERR", "An invalid or illegal string was specified");
                                if (/\s/.test(e)) throw new o("INVALID_CHARACTER_ERR", "String contains an invalid character");
                                return r.call(t, e)
                            },
                            s = function(t) {
                                for (var e = n.call(t.getAttribute("class") || ""), i = e ? e.split(/\s+/) : [], r = 0, o = i.length; r < o; r++) this.push(i[r]);
                                this._updateClassName = function() {
                                    t.setAttribute("class", this.toString())
                                }
                            },
                            l = s.prototype = [],
                            c = function() {
                                return new s(this)
                            };
                        if (o.prototype = Error.prototype, l.item = function(t) {
                                return this[t] || null
                            }, l.contains = function(t) {
                                return -1 !== a(this, t += "")
                            }, l.add = function() {
                                var t, e = arguments,
                                    i = 0,
                                    n = e.length,
                                    r = !1;
                                do {
                                    t = e[i] + "", -1 === a(this, t) && (this.push(t), r = !0)
                                } while (++i < n);
                                r && this._updateClassName()
                            }, l.remove = function() {
                                var t, e, i = arguments,
                                    n = 0,
                                    r = i.length,
                                    o = !1;
                                do {
                                    for (t = i[n] + "", e = a(this, t); - 1 !== e;) this.splice(e, 1), o = !0, e = a(this, t)
                                } while (++n < r);
                                o && this._updateClassName()
                            }, l.toggle = function(t, e) {
                                t += "";
                                var i = this.contains(t),
                                    n = i ? !0 !== e && "remove" : !1 !== e && "add";
                                return n && this[n](t), !0 === e || !1 === e ? e : !i
                            }, l.toString = function() {
                                return this.join(" ")
                            }, i.defineProperty) {
                            var u = {
                                get: c,
                                enumerable: !0,
                                configurable: !0
                            };
                            try {
                                i.defineProperty(e, "classList", u)
                            } catch (t) {
                                void 0 !== t.number && -2146823252 !== t.number || (u.enumerable = !1, i.defineProperty(e, "classList", u))
                            }
                        } else i.prototype.__defineGetter__ && e.__defineGetter__("classList", c)
                    }
                }(window.self), function() {
                    var t = document.createElement("_");
                    if (t.classList.add("c1", "c2"), !t.classList.contains("c2")) {
                        var e = function(t) {
                            var e = DOMTokenList.prototype[t];
                            DOMTokenList.prototype[t] = function(t) {
                                var i, n = arguments.length;
                                for (i = 0; i < n; i++) t = arguments[i], e.call(this, t)
                            }
                        };
                        e("add"), e("remove")
                    }
                    if (t.classList.toggle("c3", !1), t.classList.contains("c3")) {
                        var i = DOMTokenList.prototype.toggle;
                        DOMTokenList.prototype.toggle = function(t, e) {
                            return 1 in arguments && !this.contains(t) == !e ? e : i.call(this, t)
                        }
                    }
                    t = null
                }()),
                function() {
                    if ("undefined" != typeof window && window.addEventListener) {
                        var t, e, i, n = Object.create(null),
                            r = function() {
                                clearTimeout(e), e = setTimeout(t, 100)
                            },
                            o = function() {},
                            a = function() {
                                var t;
                                window.addEventListener("resize", r, !1), window.addEventListener("orientationchange", r, !1), window.MutationObserver ? ((t = new MutationObserver(r)).observe(document.documentElement, {
                                    childList: !0,
                                    subtree: !0,
                                    attributes: !0
                                }), o = function() {
                                    try {
                                        t.disconnect(), window.removeEventListener("resize", r, !1), window.removeEventListener("orientationchange", r, !1)
                                    } catch (t) {}
                                }) : (document.documentElement.addEventListener("DOMSubtreeModified", r, !1), o = function() {
                                    document.documentElement.removeEventListener("DOMSubtreeModified", r, !1), window.removeEventListener("resize", r, !1), window.removeEventListener("orientationchange", r, !1)
                                })
                            },
                            s = function(t) {
                                function e(t) {
                                    var e;
                                    return void 0 !== t.protocol ? e = t : (e = document.createElement("a")).href = t, e.protocol.replace(/:/g, "") + e.host
                                }
                                var i, n, r;
                                return window.XMLHttpRequest && (i = new XMLHttpRequest, n = e(location), r = e(t), i = void 0 === i.withCredentials && "" !== r && r !== n ? XDomainRequest || void 0 : XMLHttpRequest), i
                            },
                            l = "http://www.w3.org/1999/xlink";
                        t = function() {
                            var t, e, i, r, c, u, h, d, f, p, g = 0;

                            function m() {
                                0 === (g -= 1) && (o(), a())
                            }

                            function v(t) {
                                return function() {
                                    !0 !== n[t.base] && (t.useEl.setAttributeNS(l, "xlink:href", "#" + t.hash), t.useEl.hasAttribute("href") && t.useEl.setAttribute("href", "#" + t.hash))
                                }
                            }

                            function b(t) {
                                return function() {
                                    var e, i = document.body,
                                        n = document.createElement("x");
                                    t.onload = null, n.innerHTML = t.responseText, (e = n.getElementsByTagName("svg")[0]) && (e.setAttribute("aria-hidden", "true"), e.style.position = "absolute", e.style.width = 0, e.style.height = 0, e.style.overflow = "hidden", i.insertBefore(e, i.firstChild)), m()
                                }
                            }

                            function y(t) {
                                return function() {
                                    t.onerror = null, t.ontimeout = null, m()
                                }
                            }
                            for (o(), f = document.getElementsByTagName("use"), c = 0; c < f.length; c += 1) {
                                try {
                                    e = f[c].getBoundingClientRect()
                                } catch (t) {
                                    e = !1
                                }
                                t = (d = (r = f[c].getAttribute("href") || f[c].getAttributeNS(l, "href") || f[c].getAttribute("xlink:href")) && r.split ? r.split("#") : ["", ""])[0], i = d[1], u = e && 0 === e.left && 0 === e.right && 0 === e.top && 0 === e.bottom, e && 0 === e.width && 0 === e.height && !u ? (f[c].hasAttribute("href") && f[c].setAttributeNS(l, "xlink:href", r), t.length && (!0 !== (p = n[t]) && setTimeout(v({
                                    useEl: f[c],
                                    base: t,
                                    hash: i
                                }), 0), void 0 === p && void 0 !== (h = s(t)) && (p = new h, n[t] = p, p.onload = b(p), p.onerror = y(p), p.ontimeout = y(p), p.open("GET", t), p.send(), g += 1))) : u ? t.length && n[t] && setTimeout(v({
                                    useEl: f[c],
                                    base: t,
                                    hash: i
                                }), 0) : void 0 === n[t] ? n[t] = !0 : n[t].onload && (n[t].abort(), delete n[t].onload, n[t] = !0)
                            }
                            f = "", g += 1, m()
                        }, i = function() {
                            window.removeEventListener("load", i, !1), e = setTimeout(t, 0)
                        }, "complete" !== document.readyState ? window.addEventListener("load", i, !1) : i()
                    }
                }()
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = f(i(3)),
                o = f(i(4)),
                a = f(i(68)),
                s = f(i(74)),
                l = f(i(103)),
                c = f(i(69)),
                u = f(i(105)),
                h = f(i(73)),
                d = i(72);

            function f(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var p = h.default.eventNames,
                g = h.default.commandNames,
                m = h.default.keyCodes,
                v = h.default.rejectMessages,
                b = r.default.isUndefined,
                y = r.default.forEach,
                _ = r.default.CustomEvents,
                x = function() {
                    function t(e, i) {
                        if (function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, t), i = r.default.extend({
                                includeUI: !1,
                                usageStatistics: !0
                            }, i), this.mode = null, this.activeObjectId = null, i.includeUI) {
                            var n = i.includeUI;
                            n.usageStatistics = i.usageStatistics, this.ui = new s.default(e, n, this.getActions()), i = this.ui.setUiDefaultSelectionStyle(i)
                        }
                        this._invoker = new a.default, this._graphics = new u.default(this.ui ? this.ui.getEditorArea() : e, {
                            cssMaxWidth: i.cssMaxWidth,
                            cssMaxHeight: i.cssMaxHeight,
                            useItext: !!this.ui,
                            useDragAddIcon: !!this.ui
                        }), this._handlers = {
                            keydown: this._onKeyDown.bind(this),
                            mousedown: this._onMouseDown.bind(this),
                            objectActivated: this._onObjectActivated.bind(this),
                            objectMoved: this._onObjectMoved.bind(this),
                            objectScaled: this._onObjectScaled.bind(this),
                            createdPath: this._onCreatedPath,
                            addText: this._onAddText.bind(this),
                            addObject: this._onAddObject.bind(this),
                            addObjectAfter: this._onAddObjectAfter.bind(this),
                            textEditing: this._onTextEditing.bind(this),
                            textChanged: this._onTextChanged.bind(this),
                            iconCreateResize: this._onIconCreateResize.bind(this),
                            iconCreateEnd: this._onIconCreateEnd.bind(this),
                            selectionCleared: this._selectionCleared.bind(this),
                            selectionCreated: this._selectionCreated.bind(this)
                        }, this._attachInvokerEvents(), this._attachGraphicsEvents(), this._attachDomEvents(), this._setSelectionStyle(i.selectionStyle, {
                            applyCropSelectionStyle: i.applyCropSelectionStyle,
                            applyGroupSelectionStyle: i.applyGroupSelectionStyle
                        }), i.usageStatistics && (0, d.sendHostName)(), this.ui && (this.ui.initCanvas(), this.setReAction()), fabric.enableGLFiltering = !1
                    }
                    return n(t, [{
                        key: "_setSelectionStyle",
                        value: function(t, e) {
                            var i = e.applyCropSelectionStyle,
                                n = e.applyGroupSelectionStyle;
                            t && this._graphics.setSelectionStyle(t), i && this._graphics.setCropSelectionStyle(t), n && this.on("selectionCreated", function(e) {
                                "activeSelection" === e.type && e.set(t)
                            })
                        }
                    }, {
                        key: "_attachInvokerEvents",
                        value: function() {
                            var t = p.UNDO_STACK_CHANGED,
                                e = p.REDO_STACK_CHANGED;
                            this._invoker.on(t, this.fire.bind(this, t)), this._invoker.on(e, this.fire.bind(this, e))
                        }
                    }, {
                        key: "_attachGraphicsEvents",
                        value: function() {
                            this._graphics.on({
                                mousedown: this._handlers.mousedown,
                                objectMoved: this._handlers.objectMoved,
                                objectScaled: this._handlers.objectScaled,
                                objectActivated: this._handlers.objectActivated,
                                addText: this._handlers.addText,
                                addObject: this._handlers.addObject,
                                textEditing: this._handlers.textEditing,
                                textChanged: this._handlers.textChanged,
                                iconCreateResize: this._handlers.iconCreateResize,
                                iconCreateEnd: this._handlers.iconCreateEnd,
                                selectionCleared: this._handlers.selectionCleared,
                                selectionCreated: this._handlers.selectionCreated,
                                addObjectAfter: this._handlers.addObjectAfter
                            })
                        }
                    }, {
                        key: "_attachDomEvents",
                        value: function() {
                            document.addEventListener("keydown", this._handlers.keydown)
                        }
                    }, {
                        key: "_detachDomEvents",
                        value: function() {
                            document.removeEventListener("keydown", this._handlers.keydown)
                        }
                    }, {
                        key: "_onKeyDown",
                        value: function(t) {
                            var e = t.ctrlKey,
                                i = t.keyCode,
                                n = t.metaKey,
                                r = this._graphics.getActiveObject(),
                                o = this._graphics.getActiveObjects(),
                                a = r || o && o.size();
                            (e || n) && (i === m.Z ? this.undo().catch(function() {}) : i === m.Y && this.redo().catch(function() {}));
                            var s = i === m.BACKSPACE || i === m.DEL;
                            !(r && r.isEditing) && s && a && (t.preventDefault(), this.removeActiveObject())
                        }
                    }, {
                        key: "removeActiveObject",
                        value: function() {
                            var t = this._graphics.getActiveObject(),
                                e = this._graphics.getActiveObjects();
                            if (e && e.size()) this.discardSelection(), this._removeObjectStream(e.getObjects());
                            else if (t) {
                                var i = this._graphics.getObjectId(t);
                                this.removeObject(i)
                            }
                        }
                    }, {
                        key: "_removeObjectStream",
                        value: function(t) {
                            var e = this;
                            if (!t.length) return !0;
                            var i = t.pop();
                            return this.removeObject(this._graphics.getObjectId(i)).then(function() {
                                return e._removeObjectStream(t)
                            })
                        }
                    }, {
                        key: "_onMouseDown",
                        value: function(t, e) {
                            this.fire(p.MOUSE_DOWN, t, e)
                        }
                    }, {
                        key: "_pushAddObjectCommand",
                        value: function(t) {
                            var e = c.default.create(g.ADD_OBJECT, this._graphics, t);
                            this._invoker.pushUndoStack(e)
                        }
                    }, {
                        key: "_onObjectActivated",
                        value: function(t) {
                            this.fire(p.OBJECT_ACTIVATED, t)
                        }
                    }, {
                        key: "_onObjectMoved",
                        value: function(t) {
                            this.fire(p.OBJECT_MOVED, t)
                        }
                    }, {
                        key: "_onObjectScaled",
                        value: function(t) {
                            this.fire(p.OBJECT_SCALED, t)
                        }
                    }, {
                        key: "getDrawingMode",
                        value: function() {
                            return this._graphics.getDrawingMode()
                        }
                    }, {
                        key: "clearObjects",
                        value: function() {
                            return this.execute(g.CLEAR_OBJECTS)
                        }
                    }, {
                        key: "deactivateAll",
                        value: function() {
                            this._graphics.deactivateAll(), this._graphics.renderAll()
                        }
                    }, {
                        key: "discardSelection",
                        value: function() {
                            this._graphics.discardSelection()
                        }
                    }, {
                        key: "changeSelectableAll",
                        value: function(t) {
                            this._graphics.changeSelectableAll(t)
                        }
                    }, {
                        key: "execute",
                        value: function(t) {
                            for (var e, i = arguments.length, n = Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];
                            var o = [this._graphics].concat(n);
                            return (e = this._invoker).execute.apply(e, [t].concat(o))
                        }
                    }, {
                        key: "executeSilent",
                        value: function(t) {
                            for (var e, i = arguments.length, n = Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];
                            var o = [this._graphics].concat(n);
                            return (e = this._invoker).executeSilent.apply(e, [t].concat(o))
                        }
                    }, {
                        key: "undo",
                        value: function() {
                            return this._invoker.undo()
                        }
                    }, {
                        key: "redo",
                        value: function() {
                            return this._invoker.redo()
                        }
                    }, {
                        key: "loadImageFromFile",
                        value: function(t, e) {
                            if (!t) return o.default.reject(v.invalidParameters);
                            var i = URL.createObjectURL(t);
                            return e = e || t.name, this.loadImageFromURL(i, e).then(function(e) {
                                return URL.revokeObjectURL(t), e
                            })
                        }
                    }, {
                        key: "loadImageFromURL",
                        value: function(t, e) {
                            return e && t ? this.execute(g.LOAD_IMAGE, e, t) : o.default.reject(v.invalidParameters)
                        }
                    }, {
                        key: "addImageObject",
                        value: function(t) {
                            return t ? this.execute(g.ADD_IMAGE_OBJECT, t) : o.default.reject(v.invalidParameters)
                        }
                    }, {
                        key: "startDrawingMode",
                        value: function(t, e) {
                            return this._graphics.startDrawingMode(t, e)
                        }
                    }, {
                        key: "stopDrawingMode",
                        value: function() {
                            this._graphics.stopDrawingMode()
                        }
                    }, {
                        key: "crop",
                        value: function(t) {
                            var e = this._graphics.getCroppedImageData(t);
                            return e ? this.loadImageFromURL(e.url, e.imageName) : o.default.reject(v.invalidParameters)
                        }
                    }, {
                        key: "getCropzoneRect",
                        value: function() {
                            return this._graphics.getCropzoneRect()
                        }
                    }, {
                        key: "setCropzoneRect",
                        value: function(t) {
                            this._graphics.setCropzoneRect(t)
                        }
                    }, {
                        key: "_flip",
                        value: function(t) {
                            return this.execute(g.FLIP_IMAGE, t)
                        }
                    }, {
                        key: "flipX",
                        value: function() {
                            return this._flip("flipX")
                        }
                    }, {
                        key: "flipY",
                        value: function() {
                            return this._flip("flipY")
                        }
                    }, {
                        key: "resetFlip",
                        value: function() {
                            return this._flip("reset")
                        }
                    }, {
                        key: "_rotate",
                        value: function(t, e, i) {
                            return i ? this.executeSilent(g.ROTATE_IMAGE, t, e) : this.execute(g.ROTATE_IMAGE, t, e)
                        }
                    }, {
                        key: "rotate",
                        value: function(t, e) {
                            return this._rotate("rotate", t, e)
                        }
                    }, {
                        key: "setAngle",
                        value: function(t, e) {
                            return this._rotate("setAngle", t, e)
                        }
                    }, {
                        key: "setBrush",
                        value: function(t) {
                            this._graphics.setBrush(t)
                        }
                    }, {
                        key: "setDrawingShape",
                        value: function(t, e) {
                            this._graphics.setDrawingShape(t, e)
                        }
                    }, {
                        key: "addShape",
                        value: function(t, e) {
                            return e = e || {}, this._setPositions(e), this.execute(g.ADD_SHAPE, t, e)
                        }
                    }, {
                        key: "changeShape",
                        value: function(t, e) {
                            return this.execute(g.CHANGE_SHAPE, t, e)
                        }
                    }, {
                        key: "addText",
                        value: function(t, e) {
                            return t = t || "", e = e || {}, this.execute(g.ADD_TEXT, t, e)
                        }
                    }, {
                        key: "changeText",
                        value: function(t, e) {
                            return e = e || "", this.execute(g.CHANGE_TEXT, t, e)
                        }
                    }, {
                        key: "changeTextStyle",
                        value: function(t, e) {
                            return this.execute(g.CHANGE_TEXT_STYLE, t, e)
                        }
                    }, {
                        key: "_changeActivateMode",
                        value: function(t) {
                            "ICON" !== t && this.getDrawingMode() !== t && this.startDrawingMode(t)
                        }
                    }, {
                        key: "_onTextChanged",
                        value: function(t) {
                            this.changeText(t.id, t.text)
                        }
                    }, {
                        key: "_onIconCreateResize",
                        value: function(t) {
                            this.fire(p.ICON_CREATE_RESIZE, t)
                        }
                    }, {
                        key: "_onIconCreateEnd",
                        value: function(t) {
                            this.fire(p.ICON_CREATE_END, t)
                        }
                    }, {
                        key: "_onTextEditing",
                        value: function() {
                            this.fire(p.TEXT_EDITING)
                        }
                    }, {
                        key: "_onAddText",
                        value: function(t) {
                            this.fire(p.ADD_TEXT, {
                                originPosition: t.originPosition,
                                clientPosition: t.clientPosition
                            })
                        }
                    }, {
                        key: "_onAddObject",
                        value: function(t) {
                            var e = this._graphics.getObject(t.id);
                            this._pushAddObjectCommand(e)
                        }
                    }, {
                        key: "_onAddObjectAfter",
                        value: function(t) {
                            this.fire(p.ADD_OBJECT_AFTER, t)
                        }
                    }, {
                        key: "_selectionCleared",
                        value: function() {
                            this.fire(p.SELECTION_CLEARED)
                        }
                    }, {
                        key: "_selectionCreated",
                        value: function(t) {
                            this.fire(p.SELECTION_CREATED, t)
                        }
                    }, {
                        key: "registerIcons",
                        value: function(t) {
                            this._graphics.registerPaths(t)
                        }
                    }, {
                        key: "changeCursor",
                        value: function(t) {
                            this._graphics.changeCursor(t)
                        }
                    }, {
                        key: "addIcon",
                        value: function(t, e) {
                            return e = e || {}, this._setPositions(e), this.execute(g.ADD_ICON, t, e)
                        }
                    }, {
                        key: "changeIconColor",
                        value: function(t, e) {
                            return this.execute(g.CHANGE_ICON_COLOR, t, e)
                        }
                    }, {
                        key: "removeObject",
                        value: function(t) {
                            return this.execute(g.REMOVE_OBJECT, t)
                        }
                    }, {
                        key: "hasFilter",
                        value: function(t) {
                            return this._graphics.hasFilter(t)
                        }
                    }, {
                        key: "removeFilter",
                        value: function(t) {
                            return this.execute(g.REMOVE_FILTER, t)
                        }
                    }, {
                        key: "applyFilter",
                        value: function(t, e) {
                            return this.execute(g.APPLY_FILTER, t, e)
                        }
                    }, {
                        key: "toDataURL",
                        value: function(t) {
                            return this._graphics.toDataURL(t)
                        }
                    }, {
                        key: "getImageName",
                        value: function() {
                            return this._graphics.getImageName()
                        }
                    }, {
                        key: "clearUndoStack",
                        value: function() {
                            this._invoker.clearUndoStack()
                        }
                    }, {
                        key: "clearRedoStack",
                        value: function() {
                            this._invoker.clearRedoStack()
                        }
                    }, {
                        key: "isEmptyUndoStack",
                        value: function() {
                            return this._invoker.isEmptyUndoStack()
                        }
                    }, {
                        key: "isEmptyRedoStack",
                        value: function() {
                            return this._invoker.isEmptyRedoStack()
                        }
                    }, {
                        key: "resizeCanvasDimension",
                        value: function(t) {
                            return t ? this.execute(g.RESIZE_CANVAS_DIMENSION, t) : o.default.reject(v.invalidParameters)
                        }
                    }, {
                        key: "destroy",
                        value: function() {
                            var t = this;
                            this.stopDrawingMode(), this._detachDomEvents(), this._graphics.destroy(), this._graphics = null, y(this, function(e, i) {
                                t[i] = null
                            }, this)
                        }
                    }, {
                        key: "_setPositions",
                        value: function(t) {
                            var e = this._graphics.getCenter();
                            b(t.left) && (t.left = e.left), b(t.top) && (t.top = e.top)
                        }
                    }, {
                        key: "setObjectProperties",
                        value: function(t, e) {
                            return this.execute(g.SET_OBJECT_PROPERTIES, t, e)
                        }
                    }, {
                        key: "setObjectPropertiesQuietly",
                        value: function(t, e) {
                            this._graphics.setObjectProperties(t, e)
                        }
                    }, {
                        key: "getObjectProperties",
                        value: function(t, e) {
                            return this._graphics.getObject(t) ? this._graphics.getObjectProperties(t, e) : null
                        }
                    }, {
                        key: "getCanvasSize",
                        value: function() {
                            return this._graphics.getCanvasSize()
                        }
                    }, {
                        key: "getObjectPosition",
                        value: function(t, e, i) {
                            return this._graphics.getObjectPosition(t, e, i)
                        }
                    }, {
                        key: "setObjectPosition",
                        value: function(t, e) {
                            return this.execute(g.SET_OBJECT_POSITION, t, e)
                        }
                    }]), t
                }();
            l.default.mixin(x), _.mixin(x), t.exports = x
        }, function(e, i) {
            e.exports = t
        }, function(t, e, i) {
            i(5), i(6), i(50), i(54), t.exports = i(14).Promise
        }, function(t, e) {}, function(t, e, i) {
            "use strict";
            var n = i(7)(!0);
            i(10)(String, "String", function(t) {
                this._t = String(t), this._i = 0
            }, function() {
                var t, e = this._t,
                    i = this._i;
                return i >= e.length ? {
                    value: void 0,
                    done: !0
                } : (t = n(e, i), this._i += t.length, {
                    value: t,
                    done: !1
                })
            })
        }, function(t, e, i) {
            var n = i(8),
                r = i(9);
            t.exports = function(t) {
                return function(e, i) {
                    var o, a, s = String(r(e)),
                        l = n(i),
                        c = s.length;
                    return l < 0 || l >= c ? t ? "" : void 0 : (o = s.charCodeAt(l)) < 55296 || o > 56319 || l + 1 === c || (a = s.charCodeAt(l + 1)) < 56320 || a > 57343 ? t ? s.charAt(l) : o : t ? s.slice(l, l + 2) : a - 56320 + (o - 55296 << 10) + 65536
                }
            }
        }, function(t, e) {
            var i = Math.ceil,
                n = Math.floor;
            t.exports = function(t) {
                return isNaN(t = +t) ? 0 : (t > 0 ? n : i)(t)
            }
        }, function(t, e) {
            t.exports = function(t) {
                if (void 0 == t) throw TypeError("Can't call method on  " + t);
                return t
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(11),
                r = i(12),
                o = i(27),
                a = i(17),
                s = i(28),
                l = i(29),
                c = i(30),
                u = i(46),
                h = i(48),
                d = i(47)("iterator"),
                f = !([].keys && "next" in [].keys()),
                p = function() {
                    return this
                };
            t.exports = function(t, e, i, g, m, v, b) {
                c(i, e, g);
                var y, _, x, w = function(t) {
                        if (!f && t in O) return O[t];
                        switch (t) {
                            case "keys":
                            case "values":
                                return function() {
                                    return new i(this, t)
                                }
                        }
                        return function() {
                            return new i(this, t)
                        }
                    },
                    C = e + " Iterator",
                    S = "values" == m,
                    k = !1,
                    O = t.prototype,
                    T = O[d] || O["@@iterator"] || m && O[m],
                    E = T || w(m),
                    A = m ? S ? w("entries") : E : void 0,
                    P = "Array" == e && O.entries || T;
                if (P && (x = h(P.call(new t))) !== Object.prototype && (u(x, C, !0), n || s(x, d) || a(x, d, p)), S && T && "values" !== T.name && (k = !0, E = function() {
                        return T.call(this)
                    }), n && !b || !f && !k && O[d] || a(O, d, E), l[e] = E, l[C] = p, m)
                    if (y = {
                            values: S ? E : w("values"),
                            keys: v ? E : w("keys"),
                            entries: A
                        }, b)
                        for (_ in y) _ in O || o(O, _, y[_]);
                    else r(r.P + r.F * (f || k), e, y);
                return y
            }
        }, function(t, e) {
            t.exports = !0
        }, function(t, e, i) {
            var n = i(13),
                r = i(14),
                o = i(15),
                a = i(17),
                s = function(t, e, i) {
                    var l, c, u, h = t & s.F,
                        d = t & s.G,
                        f = t & s.S,
                        p = t & s.P,
                        g = t & s.B,
                        m = t & s.W,
                        v = d ? r : r[e] || (r[e] = {}),
                        b = v.prototype,
                        y = d ? n : f ? n[e] : (n[e] || {}).prototype;
                    for (l in d && (i = e), i)(c = !h && y && void 0 !== y[l]) && l in v || (u = c ? y[l] : i[l], v[l] = d && "function" != typeof y[l] ? i[l] : g && c ? o(u, n) : m && y[l] == u ? function(t) {
                        var e = function(e, i, n) {
                            if (this instanceof t) {
                                switch (arguments.length) {
                                    case 0:
                                        return new t;
                                    case 1:
                                        return new t(e);
                                    case 2:
                                        return new t(e, i)
                                }
                                return new t(e, i, n)
                            }
                            return t.apply(this, arguments)
                        };
                        return e.prototype = t.prototype, e
                    }(u) : p && "function" == typeof u ? o(Function.call, u) : u, p && ((v.virtual || (v.virtual = {}))[l] = u, t & s.R && b && !b[l] && a(b, l, u)))
                };
            s.F = 1, s.G = 2, s.S = 4, s.P = 8, s.B = 16, s.W = 32, s.U = 64, s.R = 128, t.exports = s
        }, function(t, e) {
            var i = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
            "number" == typeof __g && (__g = i)
        }, function(t, e) {
            var i = t.exports = {
                version: "2.4.0"
            };
            "number" == typeof __e && (__e = i)
        }, function(t, e, i) {
            var n = i(16);
            t.exports = function(t, e, i) {
                if (n(t), void 0 === e) return t;
                switch (i) {
                    case 1:
                        return function(i) {
                            return t.call(e, i)
                        };
                    case 2:
                        return function(i, n) {
                            return t.call(e, i, n)
                        };
                    case 3:
                        return function(i, n, r) {
                            return t.call(e, i, n, r)
                        }
                }
                return function() {
                    return t.apply(e, arguments)
                }
            }
        }, function(t, e) {
            t.exports = function(t) {
                if ("function" != typeof t) throw TypeError(t + " is not a function!");
                return t
            }
        }, function(t, e, i) {
            var n = i(18),
                r = i(26);
            t.exports = i(22) ? function(t, e, i) {
                return n.f(t, e, r(1, i))
            } : function(t, e, i) {
                return t[e] = i, t
            }
        }, function(t, e, i) {
            var n = i(19),
                r = i(21),
                o = i(25),
                a = Object.defineProperty;
            e.f = i(22) ? Object.defineProperty : function(t, e, i) {
                if (n(t), e = o(e, !0), n(i), r) try {
                    return a(t, e, i)
                } catch (t) {}
                if ("get" in i || "set" in i) throw TypeError("Accessors not supported!");
                return "value" in i && (t[e] = i.value), t
            }
        }, function(t, e, i) {
            var n = i(20);
            t.exports = function(t) {
                if (!n(t)) throw TypeError(t + " is not an object!");
                return t
            }
        }, function(t, e) {
            t.exports = function(t) {
                return "object" == typeof t ? null !== t : "function" == typeof t
            }
        }, function(t, e, i) {
            t.exports = !i(22) && !i(23)(function() {
                return 7 != Object.defineProperty(i(24)("div"), "a", {
                    get: function() {
                        return 7
                    }
                }).a
            })
        }, function(t, e, i) {
            t.exports = !i(23)(function() {
                return 7 != Object.defineProperty({}, "a", {
                    get: function() {
                        return 7
                    }
                }).a
            })
        }, function(t, e) {
            t.exports = function(t) {
                try {
                    return !!t()
                } catch (t) {
                    return !0
                }
            }
        }, function(t, e, i) {
            var n = i(20),
                r = i(13).document,
                o = n(r) && n(r.createElement);
            t.exports = function(t) {
                return o ? r.createElement(t) : {}
            }
        }, function(t, e, i) {
            var n = i(20);
            t.exports = function(t, e) {
                if (!n(t)) return t;
                var i, r;
                if (e && "function" == typeof(i = t.toString) && !n(r = i.call(t))) return r;
                if ("function" == typeof(i = t.valueOf) && !n(r = i.call(t))) return r;
                if (!e && "function" == typeof(i = t.toString) && !n(r = i.call(t))) return r;
                throw TypeError("Can't convert object to primitive value")
            }
        }, function(t, e) {
            t.exports = function(t, e) {
                return {
                    enumerable: !(1 & t),
                    configurable: !(2 & t),
                    writable: !(4 & t),
                    value: e
                }
            }
        }, function(t, e, i) {
            t.exports = i(17)
        }, function(t, e) {
            var i = {}.hasOwnProperty;
            t.exports = function(t, e) {
                return i.call(t, e)
            }
        }, function(t, e) {
            t.exports = {}
        }, function(t, e, i) {
            "use strict";
            var n = i(31),
                r = i(26),
                o = i(46),
                a = {};
            i(17)(a, i(47)("iterator"), function() {
                return this
            }), t.exports = function(t, e, i) {
                t.prototype = n(a, {
                    next: r(1, i)
                }), o(t, e + " Iterator")
            }
        }, function(t, e, i) {
            var n = i(19),
                r = i(32),
                o = i(44),
                a = i(41)("IE_PROTO"),
                s = function() {},
                l = function() {
                    var t, e = i(24)("iframe"),
                        n = o.length;
                    for (e.style.display = "none", i(45).appendChild(e), e.src = "javascript:", (t = e.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), l = t.F; n--;) delete l.prototype[o[n]];
                    return l()
                };
            t.exports = Object.create || function(t, e) {
                var i;
                return null !== t ? (s.prototype = n(t), i = new s, s.prototype = null, i[a] = t) : i = l(), void 0 === e ? i : r(i, e)
            }
        }, function(t, e, i) {
            var n = i(18),
                r = i(19),
                o = i(33);
            t.exports = i(22) ? Object.defineProperties : function(t, e) {
                r(t);
                for (var i, a = o(e), s = a.length, l = 0; s > l;) n.f(t, i = a[l++], e[i]);
                return t
            }
        }, function(t, e, i) {
            var n = i(34),
                r = i(44);
            t.exports = Object.keys || function(t) {
                return n(t, r)
            }
        }, function(t, e, i) {
            var n = i(28),
                r = i(35),
                o = i(38)(!1),
                a = i(41)("IE_PROTO");
            t.exports = function(t, e) {
                var i, s = r(t),
                    l = 0,
                    c = [];
                for (i in s) i != a && n(s, i) && c.push(i);
                for (; e.length > l;) n(s, i = e[l++]) && (~o(c, i) || c.push(i));
                return c
            }
        }, function(t, e, i) {
            var n = i(36),
                r = i(9);
            t.exports = function(t) {
                return n(r(t))
            }
        }, function(t, e, i) {
            var n = i(37);
            t.exports = Object("z").propertyIsEnumerable(0) ? Object : function(t) {
                return "String" == n(t) ? t.split("") : Object(t)
            }
        }, function(t, e) {
            var i = {}.toString;
            t.exports = function(t) {
                return i.call(t).slice(8, -1)
            }
        }, function(t, e, i) {
            var n = i(35),
                r = i(39),
                o = i(40);
            t.exports = function(t) {
                return function(e, i, a) {
                    var s, l = n(e),
                        c = r(l.length),
                        u = o(a, c);
                    if (t && i != i) {
                        for (; c > u;)
                            if ((s = l[u++]) != s) return !0
                    } else
                        for (; c > u; u++)
                            if ((t || u in l) && l[u] === i) return t || u || 0; return !t && -1
                }
            }
        }, function(t, e, i) {
            var n = i(8),
                r = Math.min;
            t.exports = function(t) {
                return t > 0 ? r(n(t), 9007199254740991) : 0
            }
        }, function(t, e, i) {
            var n = i(8),
                r = Math.max,
                o = Math.min;
            t.exports = function(t, e) {
                return (t = n(t)) < 0 ? r(t + e, 0) : o(t, e)
            }
        }, function(t, e, i) {
            var n = i(42)("keys"),
                r = i(43);
            t.exports = function(t) {
                return n[t] || (n[t] = r(t))
            }
        }, function(t, e, i) {
            var n = i(13),
                r = n["__core-js_shared__"] || (n["__core-js_shared__"] = {});
            t.exports = function(t) {
                return r[t] || (r[t] = {})
            }
        }, function(t, e) {
            var i = 0,
                n = Math.random();
            t.exports = function(t) {
                return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++i + n).toString(36))
            }
        }, function(t, e) {
            t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
        }, function(t, e, i) {
            t.exports = i(13).document && document.documentElement
        }, function(t, e, i) {
            var n = i(18).f,
                r = i(28),
                o = i(47)("toStringTag");
            t.exports = function(t, e, i) {
                t && !r(t = i ? t : t.prototype, o) && n(t, o, {
                    configurable: !0,
                    value: e
                })
            }
        }, function(t, e, i) {
            var n = i(42)("wks"),
                r = i(43),
                o = i(13).Symbol,
                a = "function" == typeof o;
            (t.exports = function(t) {
                return n[t] || (n[t] = a && o[t] || (a ? o : r)("Symbol." + t))
            }).store = n
        }, function(t, e, i) {
            var n = i(28),
                r = i(49),
                o = i(41)("IE_PROTO"),
                a = Object.prototype;
            t.exports = Object.getPrototypeOf || function(t) {
                return t = r(t), n(t, o) ? t[o] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? a : null
            }
        }, function(t, e, i) {
            var n = i(9);
            t.exports = function(t) {
                return Object(n(t))
            }
        }, function(t, e, i) {
            i(51);
            for (var n = i(13), r = i(17), o = i(29), a = i(47)("toStringTag"), s = ["NodeList", "DOMTokenList", "MediaList", "StyleSheetList", "CSSRuleList"], l = 0; l < 5; l++) {
                var c = s[l],
                    u = n[c],
                    h = u && u.prototype;
                h && !h[a] && r(h, a, c), o[c] = o.Array
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(52),
                r = i(53),
                o = i(29),
                a = i(35);
            t.exports = i(10)(Array, "Array", function(t, e) {
                this._t = a(t), this._i = 0, this._k = e
            }, function() {
                var t = this._t,
                    e = this._k,
                    i = this._i++;
                return !t || i >= t.length ? (this._t = void 0, r(1)) : r(0, "keys" == e ? i : "values" == e ? t[i] : [i, t[i]])
            }, "values"), o.Arguments = o.Array, n("keys"), n("values"), n("entries")
        }, function(t, e) {
            t.exports = function() {}
        }, function(t, e) {
            t.exports = function(t, e) {
                return {
                    value: e,
                    done: !!t
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n, r, o, a = i(11),
                s = i(13),
                l = i(15),
                c = i(55),
                u = i(12),
                h = i(20),
                d = i(16),
                f = i(56),
                p = i(57),
                g = i(61),
                m = i(62).set,
                v = i(64)(),
                b = s.TypeError,
                y = s.process,
                _ = s.Promise,
                x = "process" == c(y = s.process),
                w = function() {},
                C = !! function() {
                    try {
                        var t = _.resolve(1),
                            e = (t.constructor = {})[i(47)("species")] = function(t) {
                                t(w, w)
                            };
                        return (x || "function" == typeof PromiseRejectionEvent) && t.then(w) instanceof e
                    } catch (t) {}
                }(),
                S = function(t, e) {
                    return t === e || t === _ && e === o
                },
                k = function(t) {
                    var e;
                    return !(!h(t) || "function" != typeof(e = t.then)) && e
                },
                O = function(t) {
                    return S(_, t) ? new T(t) : new r(t)
                },
                T = r = function(t) {
                    var e, i;
                    this.promise = new t(function(t, n) {
                        if (void 0 !== e || void 0 !== i) throw b("Bad Promise constructor");
                        e = t, i = n
                    }), this.resolve = d(e), this.reject = d(i)
                },
                E = function(t) {
                    try {
                        t()
                    } catch (t) {
                        return {
                            error: t
                        }
                    }
                },
                A = function(t, e) {
                    if (!t._n) {
                        t._n = !0;
                        var i = t._c;
                        v(function() {
                            for (var n = t._v, r = 1 == t._s, o = 0, a = function(e) {
                                    var i, o, a = r ? e.ok : e.fail,
                                        s = e.resolve,
                                        l = e.reject,
                                        c = e.domain;
                                    try {
                                        a ? (r || (2 == t._h && j(t), t._h = 1), !0 === a ? i = n : (c && c.enter(), i = a(n), c && c.exit()), i === e.promise ? l(b("Promise-chain cycle")) : (o = k(i)) ? o.call(i, s, l) : s(i)) : l(n)
                                    } catch (t) {
                                        l(t)
                                    }
                                }; i.length > o;) a(i[o++]);
                            t._c = [], t._n = !1, e && !t._h && P(t)
                        })
                    }
                },
                P = function(t) {
                    m.call(s, function() {
                        var e, i, n, r = t._v;
                        if (M(t) && (e = E(function() {
                                x ? y.emit("unhandledRejection", r, t) : (i = s.onunhandledrejection) ? i({
                                    promise: t,
                                    reason: r
                                }) : (n = s.console) && n.error && n.error("Unhandled promise rejection", r)
                            }), t._h = x || M(t) ? 2 : 1), t._a = void 0, e) throw e.error
                    })
                },
                M = function(t) {
                    if (1 == t._h) return !1;
                    for (var e, i = t._a || t._c, n = 0; i.length > n;)
                        if ((e = i[n++]).fail || !M(e.promise)) return !1;
                    return !0
                },
                j = function(t) {
                    m.call(s, function() {
                        var e;
                        x ? y.emit("rejectionHandled", t) : (e = s.onrejectionhandled) && e({
                            promise: t,
                            reason: t._v
                        })
                    })
                },
                D = function(t) {
                    var e = this;
                    e._d || (e._d = !0, (e = e._w || e)._v = t, e._s = 2, e._a || (e._a = e._c.slice()), A(e, !0))
                },
                I = function(t) {
                    var e, i = this;
                    if (!i._d) {
                        i._d = !0, i = i._w || i;
                        try {
                            if (i === t) throw b("Promise can't be resolved itself");
                            (e = k(t)) ? v(function() {
                                var n = {
                                    _w: i,
                                    _d: !1
                                };
                                try {
                                    e.call(t, l(I, n, 1), l(D, n, 1))
                                } catch (t) {
                                    D.call(n, t)
                                }
                            }): (i._v = t, i._s = 1, A(i, !1))
                        } catch (t) {
                            D.call({
                                _w: i,
                                _d: !1
                            }, t)
                        }
                    }
                };
            C || (_ = function(t) {
                f(this, _, "Promise", "_h"), d(t), n.call(this);
                try {
                    t(l(I, this, 1), l(D, this, 1))
                } catch (t) {
                    D.call(this, t)
                }
            }, (n = function(t) {
                this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
            }).prototype = i(65)(_.prototype, {
                then: function(t, e) {
                    var i = O(g(this, _));
                    return i.ok = "function" != typeof t || t, i.fail = "function" == typeof e && e, i.domain = x ? y.domain : void 0, this._c.push(i), this._a && this._a.push(i), this._s && A(this, !1), i.promise
                },
                catch: function(t) {
                    return this.then(void 0, t)
                }
            }), T = function() {
                var t = new n;
                this.promise = t, this.resolve = l(I, t, 1), this.reject = l(D, t, 1)
            }), u(u.G + u.W + u.F * !C, {
                Promise: _
            }), i(46)(_, "Promise"), i(66)("Promise"), o = i(14).Promise, u(u.S + u.F * !C, "Promise", {
                reject: function(t) {
                    var e = O(this);
                    return (0, e.reject)(t), e.promise
                }
            }), u(u.S + u.F * (a || !C), "Promise", {
                resolve: function(t) {
                    if (t instanceof _ && S(t.constructor, this)) return t;
                    var e = O(this);
                    return (0, e.resolve)(t), e.promise
                }
            }), u(u.S + u.F * !(C && i(67)(function(t) {
                _.all(t).catch(w)
            })), "Promise", {
                all: function(t) {
                    var e = this,
                        i = O(e),
                        n = i.resolve,
                        r = i.reject,
                        o = E(function() {
                            var i = [],
                                o = 0,
                                a = 1;
                            p(t, !1, function(t) {
                                var s = o++,
                                    l = !1;
                                i.push(void 0), a++, e.resolve(t).then(function(t) {
                                    l || (l = !0, i[s] = t, --a || n(i))
                                }, r)
                            }), --a || n(i)
                        });
                    return o && r(o.error), i.promise
                },
                race: function(t) {
                    var e = this,
                        i = O(e),
                        n = i.reject,
                        r = E(function() {
                            p(t, !1, function(t) {
                                e.resolve(t).then(i.resolve, n)
                            })
                        });
                    return r && n(r.error), i.promise
                }
            })
        }, function(t, e, i) {
            var n = i(37),
                r = i(47)("toStringTag"),
                o = "Arguments" == n(function() {
                    return arguments
                }());
            t.exports = function(t) {
                var e, i, a;
                return void 0 === t ? "Undefined" : null === t ? "Null" : "string" == typeof(i = function(t, e) {
                    try {
                        return t[e]
                    } catch (t) {}
                }(e = Object(t), r)) ? i : o ? n(e) : "Object" == (a = n(e)) && "function" == typeof e.callee ? "Arguments" : a
            }
        }, function(t, e) {
            t.exports = function(t, e, i, n) {
                if (!(t instanceof e) || void 0 !== n && n in t) throw TypeError(i + ": incorrect invocation!");
                return t
            }
        }, function(t, e, i) {
            var n = i(15),
                r = i(58),
                o = i(59),
                a = i(19),
                s = i(39),
                l = i(60),
                c = {},
                u = {};
            (e = t.exports = function(t, e, i, h, d) {
                var f, p, g, m, v = d ? function() {
                        return t
                    } : l(t),
                    b = n(i, h, e ? 2 : 1),
                    y = 0;
                if ("function" != typeof v) throw TypeError(t + " is not iterable!");
                if (o(v)) {
                    for (f = s(t.length); f > y; y++)
                        if ((m = e ? b(a(p = t[y])[0], p[1]) : b(t[y])) === c || m === u) return m
                } else
                    for (g = v.call(t); !(p = g.next()).done;)
                        if ((m = r(g, b, p.value, e)) === c || m === u) return m
            }).BREAK = c, e.RETURN = u
        }, function(t, e, i) {
            var n = i(19);
            t.exports = function(t, e, i, r) {
                try {
                    return r ? e(n(i)[0], i[1]) : e(i)
                } catch (e) {
                    var o = t.return;
                    throw void 0 !== o && n(o.call(t)), e
                }
            }
        }, function(t, e, i) {
            var n = i(29),
                r = i(47)("iterator"),
                o = Array.prototype;
            t.exports = function(t) {
                return void 0 !== t && (n.Array === t || o[r] === t)
            }
        }, function(t, e, i) {
            var n = i(55),
                r = i(47)("iterator"),
                o = i(29);
            t.exports = i(14).getIteratorMethod = function(t) {
                if (void 0 != t) return t[r] || t["@@iterator"] || o[n(t)]
            }
        }, function(t, e, i) {
            var n = i(19),
                r = i(16),
                o = i(47)("species");
            t.exports = function(t, e) {
                var i, a = n(t).constructor;
                return void 0 === a || void 0 == (i = n(a)[o]) ? e : r(i)
            }
        }, function(t, e, i) {
            var n, r, o, a = i(15),
                s = i(63),
                l = i(45),
                c = i(24),
                u = i(13),
                h = u.process,
                d = u.setImmediate,
                f = u.clearImmediate,
                p = u.MessageChannel,
                g = 0,
                m = {},
                v = function() {
                    var t = +this;
                    if (m.hasOwnProperty(t)) {
                        var e = m[t];
                        delete m[t], e()
                    }
                },
                b = function(t) {
                    v.call(t.data)
                };
            d && f || (d = function(t) {
                for (var e = [], i = 1; arguments.length > i;) e.push(arguments[i++]);
                return m[++g] = function() {
                    s("function" == typeof t ? t : Function(t), e)
                }, n(g), g
            }, f = function(t) {
                delete m[t]
            }, "process" == i(37)(h) ? n = function(t) {
                h.nextTick(a(v, t, 1))
            } : p ? (o = (r = new p).port2, r.port1.onmessage = b, n = a(o.postMessage, o, 1)) : u.addEventListener && "function" == typeof postMessage && !u.importScripts ? (n = function(t) {
                u.postMessage(t + "", "*")
            }, u.addEventListener("message", b, !1)) : n = "onreadystatechange" in c("script") ? function(t) {
                l.appendChild(c("script")).onreadystatechange = function() {
                    l.removeChild(this), v.call(t)
                }
            } : function(t) {
                setTimeout(a(v, t, 1), 0)
            }), t.exports = {
                set: d,
                clear: f
            }
        }, function(t, e) {
            t.exports = function(t, e, i) {
                var n = void 0 === i;
                switch (e.length) {
                    case 0:
                        return n ? t() : t.call(i);
                    case 1:
                        return n ? t(e[0]) : t.call(i, e[0]);
                    case 2:
                        return n ? t(e[0], e[1]) : t.call(i, e[0], e[1]);
                    case 3:
                        return n ? t(e[0], e[1], e[2]) : t.call(i, e[0], e[1], e[2]);
                    case 4:
                        return n ? t(e[0], e[1], e[2], e[3]) : t.call(i, e[0], e[1], e[2], e[3])
                }
                return t.apply(i, e)
            }
        }, function(t, e, i) {
            var n = i(13),
                r = i(62).set,
                o = n.MutationObserver || n.WebKitMutationObserver,
                a = n.process,
                s = n.Promise,
                l = "process" == i(37)(a);
            t.exports = function() {
                var t, e, i, c = function() {
                    var n, r;
                    for (l && (n = a.domain) && n.exit(); t;) {
                        r = t.fn, t = t.next;
                        try {
                            r()
                        } catch (n) {
                            throw t ? i() : e = void 0, n
                        }
                    }
                    e = void 0, n && n.enter()
                };
                if (l) i = function() {
                    a.nextTick(c)
                };
                else if (o) {
                    var u = !0,
                        h = document.createTextNode("");
                    new o(c).observe(h, {
                        characterData: !0
                    }), i = function() {
                        h.data = u = !u
                    }
                } else if (s && s.resolve) {
                    var d = s.resolve();
                    i = function() {
                        d.then(c)
                    }
                } else i = function() {
                    r.call(n, c)
                };
                return function(n) {
                    var r = {
                        fn: n,
                        next: void 0
                    };
                    e && (e.next = r), t || (t = r, i()), e = r
                }
            }
        }, function(t, e, i) {
            var n = i(17);
            t.exports = function(t, e, i) {
                for (var r in e) i && t[r] ? t[r] = e[r] : n(t, r, e[r]);
                return t
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(13),
                r = i(14),
                o = i(18),
                a = i(22),
                s = i(47)("species");
            t.exports = function(t) {
                var e = "function" == typeof r[t] ? r[t] : n[t];
                a && e && !e[s] && o.f(e, s, {
                    configurable: !0,
                    get: function() {
                        return this
                    }
                })
            }
        }, function(t, e, i) {
            var n = i(47)("iterator"),
                r = !1;
            try {
                var o = [7][n]();
                o.return = function() {
                    r = !0
                }, Array.from(o, function() {
                    throw 2
                })
            } catch (t) {}
            t.exports = function(t, e) {
                if (!e && !r) return !1;
                var i = !1;
                try {
                    var o = [7],
                        a = o[n]();
                    a.next = function() {
                        return {
                            done: i = !0
                        }
                    }, o[n] = function() {
                        return a
                    }, t(o)
                } catch (t) {}
                return i
            }
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = l(i(3)),
                o = l(i(4)),
                a = l(i(69)),
                s = l(i(73));

            function l(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var c = s.default.eventNames,
                u = s.default.rejectMessages,
                h = r.default.isFunction,
                d = r.default.isString,
                f = r.default.CustomEvents,
                p = function() {
                    function t() {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, t), this._undoStack = [], this._redoStack = [], this._isLocked = !1, this._isSilent = !1
                    }
                    return n(t, [{
                        key: "_invokeExecution",
                        value: function(t) {
                            var e = this;
                            this.lock();
                            var i = t.args;
                            return i || (i = []), t.execute.apply(t, i).then(function(i) {
                                return e._isSilent || e.pushUndoStack(t), e.unlock(), h(t.executeCallback) && t.executeCallback(i), i
                            }).catch(function(t) {
                                return e.unlock(), o.default.reject(t)
                            })
                        }
                    }, {
                        key: "_invokeUndo",
                        value: function(t) {
                            var e = this;
                            this.lock();
                            var i = t.args;
                            return i || (i = []), t.undo.apply(t, i).then(function(i) {
                                return e.pushRedoStack(t), e.unlock(), h(t.undoCallback) && t.undoCallback(i), i
                            }).catch(function(t) {
                                return e.unlock(), o.default.reject(t)
                            })
                        }
                    }, {
                        key: "_fireRedoStackChanged",
                        value: function() {
                            this.fire(c.REDO_STACK_CHANGED, this._redoStack.length)
                        }
                    }, {
                        key: "_fireUndoStackChanged",
                        value: function() {
                            this.fire(c.UNDO_STACK_CHANGED, this._undoStack.length)
                        }
                    }, {
                        key: "lock",
                        value: function() {
                            this._isLocked = !0
                        }
                    }, {
                        key: "unlock",
                        value: function() {
                            this._isLocked = !1
                        }
                    }, {
                        key: "executeSilent",
                        value: function() {
                            var t = this;
                            this._isSilent = !0;
                            for (var e = arguments.length, i = Array(e), n = 0; n < e; n++) i[n] = arguments[n];
                            return this.execute.apply(this, i.concat([this._isSilent])).then(function() {
                                t._isSilent = !1
                            })
                        }
                    }, {
                        key: "execute",
                        value: function() {
                            var t = this;
                            if (this._isLocked) return o.default.reject(u.isLock);
                            for (var e = arguments.length, i = Array(e), n = 0; n < e; n++) i[n] = arguments[n];
                            var r = i[0];
                            return d(r) && (r = a.default.create.apply(a.default, i)), this._invokeExecution(r).then(function(e) {
                                return t.clearRedoStack(), e
                            })
                        }
                    }, {
                        key: "undo",
                        value: function() {
                            var t = this._undoStack.pop(),
                                e = void 0,
                                i = "";
                            return t && this._isLocked && (this.pushUndoStack(t, !0), t = null), t ? (this.isEmptyUndoStack() && this._fireUndoStackChanged(), e = this._invokeUndo(t)) : (i = u.undo, this._isLocked && (i = i + " Because " + u.isLock), e = o.default.reject(i)), e
                        }
                    }, {
                        key: "redo",
                        value: function() {
                            var t = this._redoStack.pop(),
                                e = void 0,
                                i = "";
                            return t && this._isLocked && (this.pushRedoStack(t, !0), t = null), t ? (this.isEmptyRedoStack() && this._fireRedoStackChanged(), e = this._invokeExecution(t)) : (i = u.redo, this._isLocked && (i = i + " Because " + u.isLock), e = o.default.reject(i)), e
                        }
                    }, {
                        key: "pushUndoStack",
                        value: function(t, e) {
                            this._undoStack.push(t), e || this._fireUndoStackChanged()
                        }
                    }, {
                        key: "pushRedoStack",
                        value: function(t, e) {
                            this._redoStack.push(t), e || this._fireRedoStackChanged()
                        }
                    }, {
                        key: "isEmptyRedoStack",
                        value: function() {
                            return 0 === this._redoStack.length
                        }
                    }, {
                        key: "isEmptyUndoStack",
                        value: function() {
                            return 0 === this._undoStack.length
                        }
                    }, {
                        key: "clearUndoStack",
                        value: function() {
                            this.isEmptyUndoStack() || (this._undoStack = [], this._fireUndoStackChanged())
                        }
                    }, {
                        key: "clearRedoStack",
                        value: function() {
                            this.isEmptyRedoStack() || (this._redoStack = [], this._fireRedoStackChanged())
                        }
                    }]), t
                }();
            f.mixin(p), t.exports = p
        }, function(t, e, i) {
            "use strict";
            var n = function(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }(i(70));
            var r = {};
            t.exports = {
                create: function(t) {
                    var e = r[t];
                    if (e) {
                        for (var i = arguments.length, o = Array(i > 1 ? i - 1 : 0), a = 1; a < i; a++) o[a - 1] = arguments[a];
                        return new n.default(e, o)
                    }
                    return null
                },
                register: function(t) {
                    r[t.name] = t
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i(71));
            var o = r.default.create,
                a = r.default.types,
                s = function() {
                    function t(e, i) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, t), this.name = e.name, this.args = i, this.execute = e.execute, this.undo = e.undo, this.executeCallback = e.executeCallback || null, this.undoCallback = e.undoCallback || null, this.undoData = {}
                    }
                    return n(t, [{
                        key: "execute",
                        value: function() {
                            throw new Error(o(a.UN_IMPLEMENTATION, "execute"))
                        }
                    }, {
                        key: "undo",
                        value: function() {
                            throw new Error(o(a.UN_IMPLEMENTATION, "undo"))
                        }
                    }, {
                        key: "setExecuteCallback",
                        value: function(t) {
                            return this.executeCallback = t, this
                        }
                    }, {
                        key: "setUndoCallback",
                        value: function(t) {
                            return this.undoCallback = t, this
                        }
                    }]), t
                }();
            t.exports = s
        }, function(t, e, i) {
            "use strict";
            var n = function(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }(i(3));
            var r = (0, i(72).keyMirror)("UN_IMPLEMENTATION", "NO_COMPONENT_NAME"),
                o = "Should implement a method: ",
                a = "Should set a component name",
                s = {
                    UN_IMPLEMENTATION: function(t) {
                        return o + t
                    },
                    NO_COMPONENT_NAME: function() {
                        return a
                    }
                };
            t.exports = {
                types: n.default.extend({}, r),
                create: function(t) {
                    t = t.toLowerCase();
                    for (var e = s[t], i = arguments.length, n = Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];
                    return e.apply(void 0, n)
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(3),
                r = Math.min,
                o = Math.max,
                a = !1;
            t.exports = {
                clamp: function(t, e, i) {
                    var n = void 0;
                    return e > i && (n = e, e = i, i = n), o(e, r(t, i))
                },
                keyMirror: function() {
                    for (var t = {}, e = arguments.length, i = Array(e), r = 0; r < e; r++) i[r] = arguments[r];
                    return (0, n.forEach)(i, function(e) {
                        t[e] = e
                    }), t
                },
                makeStyleText: function(t) {
                    var e = "";
                    return (0, n.forEach)(t, function(t, i) {
                        e += i + ": " + t + ";"
                    }), e
                },
                getProperties: function(t, e) {
                    var i = {},
                        n = e.length,
                        r = 0,
                        o = void 0;
                    for (r = 0; r < n; r += 1) i[o = e[r]] = t[o];
                    return i
                },
                toInteger: function(t) {
                    return parseInt(t, 10)
                },
                toCamelCase: function(t) {
                    return t.replace(/-([a-z])/g, function(t, e) {
                        return e.toUpperCase()
                    })
                },
                isSupportFileApi: function() {
                    return !!(window.File && window.FileList && window.FileReader)
                },
                getRgb: function(t, e) {
                    return 4 === t.length && (t = "" + t + t.slice(1, 4)), "rgba(" + parseInt(t.slice(1, 3), 16) + ", " + parseInt(t.slice(3, 5), 16) + ", " + parseInt(t.slice(5, 7), 16) + ", " + (e || 1) + ")"
                },
                sendHostName: function() {
                    a || (a = !0, (0, n.sendHostname)("image-editor", "UA-129999381-1"))
                },
                styleLoad: function(t, e) {
                    var i = document.getElementsByTagName("head")[0],
                        n = document.createElement("link"),
                        r = encodeURIComponent(t);
                    e && (n.id = e), n.setAttribute("rel", "stylesheet"), n.setAttribute("type", "text/css"), n.setAttribute("href", "data:text/css;charset=UTF-8," + r), i.appendChild(n)
                },
                getSelector: function(t) {
                    return function(e) {
                        return t.querySelector(e)
                    }
                },
                base64ToBlob: function(t) {
                    var e = "",
                        i = void 0,
                        n = void 0,
                        r = void 0;
                    i = t.replace(/data:(image\/.+);base64,/, function(t, i) {
                        return e = i, ""
                    });
                    var o = (i = atob(i)).length;
                    for (n = new Uint8Array(o), r = 0; r < o; r += 1) n[r] = i.charCodeAt(r);
                    return new Blob([n], {
                        type: e
                    })
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n = function(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }(i(72));
            t.exports = {
                componentNames: n.default.keyMirror("IMAGE_LOADER", "CROPPER", "FLIP", "ROTATION", "FREE_DRAWING", "LINE", "TEXT", "ICON", "FILTER", "SHAPE"),
                commandNames: {
                    CLEAR_OBJECTS: "clearObjects",
                    LOAD_IMAGE: "loadImage",
                    FLIP_IMAGE: "flip",
                    ROTATE_IMAGE: "rotate",
                    ADD_OBJECT: "addObject",
                    REMOVE_OBJECT: "removeObject",
                    APPLY_FILTER: "applyFilter",
                    REMOVE_FILTER: "removeFilter",
                    ADD_ICON: "addIcon",
                    CHANGE_ICON_COLOR: "changeIconColor",
                    ADD_SHAPE: "addShape",
                    CHANGE_SHAPE: "changeShape",
                    ADD_TEXT: "addText",
                    CHANGE_TEXT: "changeText",
                    CHANGE_TEXT_STYLE: "changeTextStyle",
                    ADD_IMAGE_OBJECT: "addImageObject",
                    RESIZE_CANVAS_DIMENSION: "resizeCanvasDimension",
                    SET_OBJECT_PROPERTIES: "setObjectProperties",
                    SET_OBJECT_POSITION: "setObjectPosition"
                },
                eventNames: {
                    OBJECT_ACTIVATED: "objectActivated",
                    OBJECT_MOVED: "objectMoved",
                    OBJECT_SCALED: "objectScaled",
                    OBJECT_CREATED: "objectCreated",
                    TEXT_EDITING: "textEditing",
                    TEXT_CHANGED: "textChanged",
                    ICON_CREATE_RESIZE: "iconCreateResize",
                    ICON_CREATE_END: "iconCreateEnd",
                    ADD_TEXT: "addText",
                    ADD_OBJECT: "addObject",
                    ADD_OBJECT_AFTER: "addObjectAfter",
                    MOUSE_DOWN: "mousedown",
                    MOUSE_UP: "mouseup",
                    MOUSE_MOVE: "mousemove",
                    REDO_STACK_CHANGED: "redoStackChanged",
                    UNDO_STACK_CHANGED: "undoStackChanged",
                    SELECTION_CLEARED: "selectionCleared",
                    SELECTION_CREATED: "selectionCreated"
                },
                drawingModes: n.default.keyMirror("NORMAL", "CROPPER", "FREE_DRAWING", "LINE_DRAWING", "TEXT", "SHAPE"),
                keyCodes: {
                    Z: 90,
                    Y: 89,
                    SHIFT: 16,
                    BACKSPACE: 8,
                    DEL: 46
                },
                fObjectOptions: {
                    SELECTION_STYLE: {
                        borderColor: "red",
                        cornerColor: "green",
                        cornerSize: 10,
                        originX: "center",
                        originY: "center",
                        transparentCorners: !1
                    }
                },
                rejectMessages: {
                    addedObject: "The object is already added.",
                    flip: "The flipX and flipY setting values are not changed.",
                    invalidDrawingMode: "This operation is not supported in the drawing mode.",
                    invalidParameters: "Invalid parameters.",
                    isLock: "The executing command state is locked.",
                    loadImage: "The background image is empty.",
                    loadingImageFailed: "Invalid image loaded.",
                    noActiveObject: "There is no active object.",
                    noObject: "The object is not in canvas.",
                    redo: "The promise of redo command is reject.",
                    rotation: "The current angle is same the old angle.",
                    undo: "The promise of undo command is reject.",
                    unsupportedOperation: "Unsupported operation.",
                    unsupportedType: "Unsupported object type."
                },
                defaultIconPath: {
                    "icon-arrow": "M40 12V0l24 24-24 24V36H0V12h40z",
                    "icon-arrow-2": "M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ",
                    "icon-arrow-3": "M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ",
                    "icon-star": "M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ",
                    "icon-star-2": "M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ",
                    "icon-polygon": "M3,31 L19,3 h32 l16,28 l-16,28 H19  z ",
                    "icon-location": "M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z",
                    "icon-heart": "M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ",
                    "icon-bubble": "M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"
                },
                defaultRotateRangeValus: {
                    realTimeEvent: !0,
                    min: -360,
                    max: 360,
                    value: 0
                },
                defaultDrawRangeValus: {
                    min: 5,
                    max: 30,
                    value: 12
                },
                defaultShapeStrokeValus: {
                    realTimeEvent: !1,
                    min: 2,
                    max: 300,
                    value: 3
                },
                defaultTextRangeValus: {
                    realTimeEvent: !0,
                    min: 10,
                    max: 100,
                    value: 50
                },
                defaultFilterRangeValus: {
                    tintOpacityRange: {
                        min: 0,
                        max: 1,
                        value: .7
                    },
                    removewhiteDistanceRange: {
                        min: 0,
                        max: 1,
                        value: .2
                    },
                    brightnessRange: {
                        min: -1,
                        max: 1,
                        value: 0
                    },
                    noiseRange: {
                        min: 0,
                        max: 1e3,
                        value: 100
                    },
                    pixelateRange: {
                        min: 2,
                        max: 20,
                        value: 4
                    },
                    colorfilterThresholeRange: {
                        min: 0,
                        max: 1,
                        value: .2
                    }
                }
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = y(i(3)),
                o = y(i(72)),
                a = y(i(75)),
                s = y(i(76)),
                l = y(i(77)),
                c = y(i(80)),
                u = y(i(86)),
                h = y(i(88)),
                d = y(i(90)),
                f = y(i(92)),
                p = y(i(94)),
                g = y(i(96)),
                m = y(i(98)),
                v = y(i(100)),
                b = y(i(102));

            function y(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var _ = {
                    Shape: c.default,
                    Crop: u.default,
                    Flip: h.default,
                    Rotate: d.default,
                    Text: f.default,
                    Mask: p.default,
                    Icon: g.default,
                    Draw: m.default,
                    Filter: v.default
                },
                x = function() {
                    function t(e, i, n) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, t), this.options = this._initializeOption(i), this._actions = n, this.submenu = !1, this.imageSize = {}, this.uiSize = {}, this._locale = new b.default(this.options.locale), this.theme = new l.default(this.options.theme), this._submenuChangeTransection = !1, this._selectedElement = null, this._mainElement = null, this._editorElementWrap = null, this._editorElement = null, this._menuElement = null, this._subMenuElement = null, this._makeUiElement(e), this._setUiSize(), this._initMenuEvent = !1, this._els = {
                            undo: this._menuElement.querySelector("#tie-btn-undo"),
                            redo: this._menuElement.querySelector("#tie-btn-redo"),
                            reset: this._menuElement.querySelector("#tie-btn-reset"),
                            delete: this._menuElement.querySelector("#tie-btn-delete"),
                            deleteAll: this._menuElement.querySelector("#tie-btn-delete-all"),
                            download: this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),
                            load: this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")
                        }, this._makeSubMenu()
                    }
                    return n(t, [{
                        key: "setUiDefaultSelectionStyle",
                        value: function(t) {
                            return r.default.extend({
                                applyCropSelectionStyle: !0,
                                applyGroupSelectionStyle: !0,
                                selectionStyle: {
                                    cornerStyle: "circle",
                                    cornerSize: 16,
                                    cornerColor: "#fff",
                                    cornerStrokeColor: "#fff",
                                    transparentCorners: !1,
                                    lineWidth: 2,
                                    borderColor: "#fff"
                                }
                            }, t)
                        }
                    }, {
                        key: "resizeEditor",
                        value: function() {
                            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                                e = t.uiSize,
                                i = t.imageSize,
                                n = void 0 === i ? this.imageSize : i;
                            n !== this.imageSize && (this.imageSize = n), e && this._setUiSize(e);
                            var r = this._getEditorDimension(),
                                o = r.width,
                                a = r.height,
                                s = this._editorElement.style,
                                l = this.options.menuBarPosition;
                            s.height = a + "px", s.width = o + "px", this._setEditorPosition(l), this._editorElementWrap.style.bottom = "0px", this._editorElementWrap.style.top = "0px", this._editorElementWrap.style.left = "0px", this._editorElementWrap.style.width = "100%";
                            var c = this._selectedElement.classList;
                            "top" === l && this._selectedElement.offsetWidth < "1300" ? c.add("tui-image-editor-top-optimization") : c.remove("tui-image-editor-top-optimization")
                        }
                    }, {
                        key: "changeUndoButtonStatus",
                        value: function(t) {
                            t ? this._els.undo.classList.add("enabled") : this._els.undo.classList.remove("enabled")
                        }
                    }, {
                        key: "changeRedoButtonStatus",
                        value: function(t) {
                            t ? this._els.redo.classList.add("enabled") : this._els.redo.classList.remove("enabled")
                        }
                    }, {
                        key: "changeResetButtonStatus",
                        value: function(t) {
                            t ? this._els.reset.classList.add("enabled") : this._els.reset.classList.remove("enabled")
                        }
                    }, {
                        key: "changeDeleteAllButtonEnabled",
                        value: function(t) {
                            t ? this._els.deleteAll.classList.add("enabled") : this._els.deleteAll.classList.remove("enabled")
                        }
                    }, {
                        key: "changeDeleteButtonEnabled",
                        value: function(t) {
                            t ? this._els.delete.classList.add("enabled") : this._els.delete.classList.remove("enabled")
                        }
                    }, {
                        key: "_initializeOption",
                        value: function(t) {
                            return r.default.extend({
                                loadImage: {
                                    path: "",
                                    name: ""
                                },
                                locale: {},
                                menuIconPath: "",
                                menu: ["crop", "flip", "rotate", "draw", "shape", "icon", "text", "mask", "filter"],
                                initMenu: "",
                                uiSize: {
                                    width: "100%",
                                    height: "100%"
                                },
                                menuBarPosition: "bottom"
                            }, t)
                        }
                    }, {
                        key: "_setUiSize",
                        value: function() {
                            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.options.uiSize,
                                e = this._selectedElement.style;
                            e.width = t.width, e.height = t.height
                        }
                    }, {
                        key: "_makeSubMenu",
                        value: function() {
                            var t = this;
                            r.default.forEach(this.options.menu, function(e) {
                                var i = _[e.replace(/^[a-z]/, function(t) {
                                    return t.toUpperCase()
                                })];
                                t._makeMenuElement(e), t._els[e] = t._menuElement.querySelector("#tie-btn-" + e), t[e] = new i(t._subMenuElement, {
                                    locale: t._locale,
                                    iconStyle: t.theme.getStyle("submenu.icon"),
                                    menuBarPosition: t.options.menuBarPosition,
                                    usageStatistics: t.options.usageStatistics
                                })
                            })
                        }
                    }, {
                        key: "_makeUiElement",
                        value: function(t) {
                            var e = void 0;
                            window.snippet = r.default, e = t.nodeType ? t : document.querySelector(t);
                            var i = o.default.getSelector(e);
                            e.classList.add("tui-image-editor-container"), e.innerHTML = (0, s.default)({
                                locale: this._locale,
                                biImage: this.theme.getStyle("common.bi"),
                                iconStyle: this.theme.getStyle("menu.icon"),
                                loadButtonStyle: this.theme.getStyle("loadButton"),
                                downloadButtonStyle: this.theme.getStyle("downloadButton")
                            }) + (0, a.default)({
                                locale: this._locale,
                                biImage: this.theme.getStyle("common.bi"),
                                commonStyle: this.theme.getStyle("common"),
                                headerStyle: this.theme.getStyle("header"),
                                loadButtonStyle: this.theme.getStyle("loadButton"),
                                downloadButtonStyle: this.theme.getStyle("downloadButton"),
                                submenuStyle: this.theme.getStyle("submenu")
                            }), this._selectedElement = e, this._selectedElement.classList.add(this.options.menuBarPosition), this._mainElement = i(".tui-image-editor-main"), this._editorElementWrap = i(".tui-image-editor-wrap"), this._editorElement = i(".tui-image-editor"), this._menuElement = i(".tui-image-editor-menu"), this._subMenuElement = i(".tui-image-editor-submenu")
                        }
                    }, {
                        key: "_makeMenuElement",
                        value: function(t) {
                            var e = document.createElement("li"),
                                i = this.theme.getStyle("menu.icon"),
                                n = i.normal,
                                r = i.active,
                                o = i.hover,
                                a = '\n            <svg class="svg_ic-menu">\n                <use xlink:href="' + n.path + "#" + n.name + "-ic-" + t + '" class="normal"/>\n                <use xlink:href="' + r.path + "#" + r.name + "-ic-" + t + '" class="active"/>\n                <use xlink:href="' + o.path + "#" + o.name + "-ic-" + t + '" class="hover"/>\n            </svg>\n        ';
                            e.id = "tie-btn-" + t, e.className = "tui-image-editor-item normal", e.setAttribute("tooltip-content", this._locale.localize(t.replace(/^[a-z]/g, function(t) {
                                return t.toUpperCase()
                            }))), e.innerHTML = a, this._menuElement.appendChild(e)
                        }
                    }, {
                        key: "_addHelpActionEvent",
                        value: function(t) {
                            var e = this;
                            this._els[t].addEventListener("click", function() {
                                e._actions.main[t]()
                            })
                        }
                    }, {
                        key: "_addDownloadEvent",
                        value: function() {
                            var t = this;
                            r.default.forEach(this._els.download, function(e) {
                                e.addEventListener("click", function() {
                                    t._actions.main.download()
                                })
                            })
                        }
                    }, {
                        key: "_addLoadEvent",
                        value: function() {
                            var t = this;
                            r.default.forEach(this._els.load, function(e) {
                                e.addEventListener("change", function(e) {
                                    t._actions.main.load(e.target.files[0])
                                })
                            })
                        }
                    }, {
                        key: "_addMenuEvent",
                        value: function(t) {
                            var e = this;
                            this._els[t].addEventListener("click", function() {
                                e.changeMenu(t)
                            })
                        }
                    }, {
                        key: "_addSubMenuEvent",
                        value: function(t) {
                            this[t].addEvent(this._actions[t])
                        }
                    }, {
                        key: "getEditorArea",
                        value: function() {
                            return this._editorElement
                        }
                    }, {
                        key: "activeMenuEvent",
                        value: function() {
                            var t = this;
                            this._initMenuEvent || (this._addHelpActionEvent("undo"), this._addHelpActionEvent("redo"), this._addHelpActionEvent("reset"), this._addHelpActionEvent("delete"), this._addHelpActionEvent("deleteAll"), this._addDownloadEvent(), r.default.forEach(this.options.menu, function(e) {
                                t._addMenuEvent(e), t._addSubMenuEvent(e)
                            }), this._initMenu(), this._initMenuEvent = !0)
                        }
                    }, {
                        key: "initCanvas",
                        value: function() {
                            var t = this,
                                e = this._getLoadImage();
                            e.path && this._actions.main.initLoadImage(e.path, e.name).then(function() {
                                t.activeMenuEvent()
                            }), this._addLoadEvent();
                            var i = document.createElement("div");
                            i.className = "tui-image-editor-grid-visual";
                            i.innerHTML = '<table>\n           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>\n           <tr><td></td><td></td><td></td></tr>\n           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>\n         </table>', this._editorContainerElement = this._editorElement.querySelector(".tui-image-editor-canvas-container"), this._editorContainerElement.appendChild(i)
                        }
                    }, {
                        key: "_getLoadImage",
                        value: function() {
                            return this.options.loadImage
                        }
                    }, {
                        key: "changeMenu",
                        value: function(t) {
                            var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],
                                i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
                            this._submenuChangeTransection || (this._submenuChangeTransection = !0, this._changeMenu(t, e, i), this._submenuChangeTransection = !1)
                        }
                    }, {
                        key: "_changeMenu",
                        value: function(t, e, i) {
                            this.submenu && (this._els[this.submenu].classList.remove("active"), this._mainElement.classList.remove("tui-image-editor-menu-" + this.submenu), i && this._actions.main.discardSelection(), this._actions.main.changeSelectableAll(!0), this[this.submenu].changeStandbyMode()), this.submenu === t && e ? this.submenu = null : (this._els[t].classList.add("active"), this._mainElement.classList.add("tui-image-editor-menu-" + t), this.submenu = t, this[this.submenu].changeStartMode()), this.resizeEditor()
                        }
                    }, {
                        key: "_initMenu",
                        value: function() {
                            if (this.options.initMenu) {
                                var t = document.createEvent("MouseEvents");
                                t.initEvent("click", !0, !1), this._els[this.options.initMenu].dispatchEvent(t)
                            }
                            this.icon && this.icon.registDefaultIcon()
                        }
                    }, {
                        key: "_getEditorDimension",
                        value: function() {
                            var t = parseFloat(this._editorContainerElement.style.maxHeight),
                                e = this.imageSize.newHeight > t ? t : this.imageSize.newHeight,
                                i = parseFloat(this._editorContainerElement.style.maxWidth);
                            return {
                                width: this.imageSize.newWidth > i ? i : this.imageSize.newWidth,
                                height: e
                            }
                        }
                    }, {
                        key: "_setEditorPosition",
                        value: function(t) {
                            var e = this._getEditorDimension(),
                                i = e.width,
                                n = e.height,
                                r = this._editorElement.style,
                                o = 0,
                                a = 0;
                            this.submenu && ("bottom" === t ? o = n > this._editorElementWrap.scrollHeight - 150 ? (n - this._editorElementWrap.scrollHeight) / 2 : -75 : "top" === t ? o = n > this._editorElementWrap.offsetHeight - 150 ? 75 - (n - (this._editorElementWrap.offsetHeight - 150)) / 2 : 75 : "left" === t ? a = i > this._editorElementWrap.offsetWidth - 248 ? 124 - (i - (this._editorElementWrap.offsetWidth - 248)) / 2 : 124 : "right" === t && (a = i > this._editorElementWrap.scrollWidth - 248 ? (i - this._editorElementWrap.scrollWidth) / 2 : -124)), r.top = o + "px", r.left = a + "px"
                        }
                    }]), t
                }();
            e.default = x
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.biImage,
                    n = t.commonStyle,
                    r = t.headerStyle,
                    o = t.loadButtonStyle,
                    a = t.downloadButtonStyle,
                    s = t.submenuStyle;
                return '\n    <div class="tui-image-editor-main-container" style="' + n + '">\n        <div class="tui-image-editor-header" style="' + r + '">\n            <div class="tui-image-editor-header-logo">\n                <img src="' + i + '" />\n            </div>\n            <div class="tui-image-editor-header-buttons">\n                <div style="' + o + '">\n                    ' + e.localize("Load") + '\n                    <input type="file" class="tui-image-editor-load-btn" />\n                </div>\n                <button class="tui-image-editor-download-btn" style="' + a + '">\n                    ' + e.localize("Download") + '\n                </button>\n            </div>\n        </div>\n        <div class="tui-image-editor-main">\n            <div class="tui-image-editor-submenu">\n                <div class="tui-image-editor-submenu-style" style="' + s + '"></div>\n            </div>\n            <div class="tui-image-editor-wrap">\n                <div class="tui-image-editor-size-wrap">\n                    <div class="tui-image-editor-align-wrap">\n                        <div class="tui-image-editor"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'
            }
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.biImage,
                    n = t.iconStyle,
                    r = n.normal,
                    o = n.hover,
                    a = n.disabled,
                    s = t.loadButtonStyle,
                    l = t.downloadButtonStyle;
                return '\n    <div class="tui-image-editor-controls">\n        <div class="tui-image-editor-controls-logo">\n            <img src="' + i + '" />\n        </div>\n        <ul class="tui-image-editor-menu">\n            <li id="tie-btn-undo" class="tui-image-editor-item">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-undo" class="enabled"/>\n                    <use xlink:href="' + a.path + "#" + a.name + '-ic-undo" class="normal"/>\n                    <use xlink:href="' + o.path + "#" + o.name + '-ic-undo" class="hover"/>\n                </svg>\n            </li>\n            <li id="tie-btn-redo" class="tui-image-editor-item">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-redo" class="enabled"/>\n                    <use xlink:href="' + a.path + "#" + a.name + '-ic-redo" class="normal"/>\n                    <use xlink:href="' + o.path + "#" + o.name + '-ic-redo" class="hover"/>\n                </svg>\n            </li>\n            <li id="tie-btn-reset" class="tui-image-editor-item">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-reset" class="enabled"/>\n                    <use xlink:href="' + a.path + "#" + a.name + '-ic-reset" class="normal"/>\n                    <use xlink:href="' + o.path + "#" + o.name + '-ic-reset" class="hover"/>\n                </svg>\n            </li>\n            <li class="tui-image-editor-item">\n                <div class="tui-image-editor-icpartition"></div>\n            </li>\n            <li id="tie-btn-delete" class="tui-image-editor-item">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-delete" class="enabled"/>\n                    <use xlink:href="' + a.path + "#" + a.name + '-ic-delete" class="normal"/>\n                    <use xlink:href="' + o.path + "#" + o.name + '-ic-delete" class="hover"/>\n                </svg>\n            </li>\n            <li id="tie-btn-delete-all" class="tui-image-editor-item">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-delete-all" class="enabled"/>\n                    <use xlink:href="' + a.path + "#" + a.name + '-ic-delete-all" class="normal"/>\n                    <use xlink:href="' + o.path + "#" + o.name + '-ic-delete-all" class="hover"/>\n                </svg>\n            </li>\n            <li class="tui-image-editor-item">\n                <div class="tui-image-editor-icpartition"></div>\n            </li>\n        </ul>\n\n        <div class="tui-image-editor-controls-buttons">\n            <div style="' + s + '">\n                ' + e.localize("Load") + '\n                <input type="file" class="tui-image-editor-load-btn" />\n            </div>\n            <button class="tui-image-editor-download-btn" style="' + l + '">\n                ' + e.localize("Download") + "\n            </button>\n        </div>\n    </div>\n"
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(3),
                o = i(72),
                a = l(i(78)),
                s = l(i(79));

            function l(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var c = function() {
                function t(e) {
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this.styles = this._changeToObject((0, r.extend)(s.default, e)), (0, o.styleLoad)(this._styleMaker())
                }
                return n(t, [{
                    key: "getStyle",
                    value: function(t) {
                        var e = null,
                            i = t.replace(/\..+$/, ""),
                            n = this.styles[t];
                        switch (t) {
                            case "common.bi":
                                e = this.styles[t].image;
                                break;
                            case "menu.icon":
                            case "submenu.icon":
                                e = {
                                    active: this.styles[i + ".activeIcon"],
                                    normal: this.styles[i + ".normalIcon"],
                                    hover: this.styles[i + ".hoverIcon"],
                                    disabled: this.styles[i + ".disabledIcon"]
                                };
                                break;
                            case "submenu.label":
                                e = {
                                    active: this._makeCssText(this.styles[i + ".activeLabel"]),
                                    normal: this._makeCssText(this.styles[i + ".normalLabel"])
                                };
                                break;
                            case "submenu.partition":
                                e = {
                                    vertical: this._makeCssText((0, r.extend)({}, n, {
                                        borderLeft: "1px solid " + n.color
                                    })),
                                    horizontal: this._makeCssText((0, r.extend)({}, n, {
                                        borderBottom: "1px solid " + n.color
                                    }))
                                };
                                break;
                            case "range.disabledPointer":
                            case "range.disabledBar":
                            case "range.disabledSubbar":
                            case "range.pointer":
                            case "range.bar":
                            case "range.subbar":
                                n.backgroundColor = n.color, e = this._makeCssText(n);
                                break;
                            default:
                                e = this._makeCssText(n)
                        }
                        return e
                    }
                }, {
                    key: "_styleMaker",
                    value: function() {
                        var t = this.getStyle("submenu.label"),
                            e = this.getStyle("submenu.partition");
                        return (0, a.default)({
                            subMenuLabelActive: t.active,
                            subMenuLabelNormal: t.normal,
                            submenuPartitionVertical: e.vertical,
                            submenuPartitionHorizontal: e.horizontal,
                            biSize: this.getStyle("common.bisize"),
                            subMenuRangeTitle: this.getStyle("range.title"),
                            submenuRangePointer: this.getStyle("range.pointer"),
                            submenuRangeBar: this.getStyle("range.bar"),
                            submenuRangeSubbar: this.getStyle("range.subbar"),
                            submenuDisabledRangePointer: this.getStyle("range.disabledPointer"),
                            submenuDisabledRangeBar: this.getStyle("range.disabledBar"),
                            submenuDisabledRangeSubbar: this.getStyle("range.disabledSubbar"),
                            submenuRangeValue: this.getStyle("range.value"),
                            submenuColorpickerTitle: this.getStyle("colorpicker.title"),
                            submenuColorpickerButton: this.getStyle("colorpicker.button"),
                            submenuCheckbox: this.getStyle("checkbox"),
                            menuIconSize: this.getStyle("menu.iconSize"),
                            submenuIconSize: this.getStyle("submenu.iconSize")
                        })
                    }
                }, {
                    key: "_changeToObject",
                    value: function(t) {
                        var e = {};
                        return (0, r.forEach)(t, function(t, i) {
                            var n = i.match(/^(.+)\.([a-z]+)$/i),
                                r = n[1],
                                o = n[2];
                            e[r] || (e[r] = {}), e[r][o] = t
                        }), e
                    }
                }, {
                    key: "_makeCssText",
                    value: function(t) {
                        var e = this,
                            i = [];
                        return (0, r.forEach)(t, function(t, n) {
                            ["backgroundImage"].indexOf(n) > -1 && "none" !== t && (t = "url(" + t + ")"), i.push(e._toUnderScore(n) + ": " + t)
                        }), i.join(";")
                    }
                }, {
                    key: "_toUnderScore",
                    value: function(t) {
                        return t.replace(/([A-Z])/g, function(t, e) {
                            return "-" + e.toLowerCase()
                        })
                    }
                }]), t
            }();
            e.default = c
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.subMenuLabelActive,
                    i = t.subMenuLabelNormal,
                    n = t.subMenuRangeTitle,
                    r = t.submenuPartitionVertical,
                    o = t.submenuPartitionHorizontal,
                    a = t.submenuCheckbox,
                    s = t.submenuRangePointer,
                    l = t.submenuRangeValue,
                    c = t.submenuColorpickerTitle,
                    u = t.submenuColorpickerButton,
                    h = t.submenuRangeBar,
                    d = t.submenuRangeSubbar,
                    f = t.submenuDisabledRangePointer,
                    p = t.submenuDisabledRangeBar,
                    g = t.submenuDisabledRangeSubbar,
                    m = t.submenuIconSize;
                return '\n    #tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    #tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,\n    #tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,\n    #tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,\n    #tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,\n    #tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,\n    #tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,\n    #tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,\n    #tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,\n    #tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    #tie-draw-line-select-button.line .tui-image-editor-button.line label,\n    #tie-draw-line-select-button.free .tui-image-editor-button.free label,\n    #tie-flip-button.flipX .tui-image-editor-button.flipX label,\n    #tie-flip-button.flipY .tui-image-editor-button.flipY label,\n    #tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,\n    #tie-crop-button .tui-image-editor-button.apply.active label,\n    #tie-crop-preset-button .tui-image-editor-button.preset.active label,\n    #tie-shape-button.rect .tui-image-editor-button.rect label,\n    #tie-shape-button.circle .tui-image-editor-button.circle label,\n    #tie-shape-button.triangle .tui-image-editor-button.triangle label,\n    #tie-text-effect-button .tui-image-editor-button.active label,\n    #tie-text-align-button.left .tui-image-editor-button.left label,\n    #tie-text-align-button.center .tui-image-editor-button.center label,\n    #tie-text-align-button.right .tui-image-editor-button.right label,\n    #tie-mask-apply.apply.active .tui-image-editor-button.apply label,\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,\n    .tui-image-editor-container .tui-image-editor-checkbox input + label {\n        ' + e + "\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label {\n        " + i + "\n    }\n    .tui-image-editor-container .tui-image-editor-range-wrap label {\n        " + n + "\n    }\n    .tui-image-editor-container .tui-image-editor-partition > div {\n        " + r + "\n    }\n    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\n    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\n        " + o + "\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox input + label:before {\n        " + a + "\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox input:checked + label:before {\n        border: 0;\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {\n        " + s + "\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-bar {\n        " + h + "\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {\n        " + d + "\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {\n        " + f + "\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {\n        " + g + "\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {\n        " + p + "\n    }\n    .tui-image-editor-container .tui-image-editor-range-value {\n        " + l + "\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {\n        " + c + "\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {\n        " + u + "\n    }\n    .tui-image-editor-container .svg_ic-menu {\n        " + t.menuIconSize + "\n    }\n    .tui-image-editor-container .svg_ic-submenu {\n        " + m + "\n    }\n    .tui-image-editor-container .tui-image-editor-controls-logo > img,\n    .tui-image-editor-container .tui-image-editor-header-logo > img {\n        " + t.biSize + "\n    }\n\n"
            }
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = {
                "common.bi.image": "https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png",
                "common.bisize.width": "251px",
                "common.bisize.height": "21px",
                "common.backgroundImage": "none",
                "common.backgroundColor": "#1e1e1e",
                "common.border": "0px",
                "header.backgroundImage": "none",
                "header.backgroundColor": "transparent",
                "header.border": "0px",
                "loadButton.backgroundColor": "#fff",
                "loadButton.border": "1px solid #ddd",
                "loadButton.color": "#222",
                "loadButton.fontFamily": "'Noto Sans', sans-serif",
                "loadButton.fontSize": "12px",
                "downloadButton.backgroundColor": "#fdba3b",
                "downloadButton.border": "1px solid #fdba3b",
                "downloadButton.color": "#fff",
                "downloadButton.fontFamily": "'Noto Sans', sans-serif",
                "downloadButton.fontSize": "12px",
                "menu.normalIcon.path": "icon-d.svg",
                "menu.normalIcon.name": "icon-d",
                "menu.activeIcon.path": "icon-b.svg",
                "menu.activeIcon.name": "icon-b",
                "menu.disabledIcon.path": "icon-a.svg",
                "menu.disabledIcon.name": "icon-a",
                "menu.hoverIcon.path": "icon-c.svg",
                "menu.hoverIcon.name": "icon-c",
                "menu.iconSize.width": "24px",
                "menu.iconSize.height": "24px",
                "submenu.backgroundColor": "#1e1e1e",
                "submenu.partition.color": "#3c3c3c",
                "submenu.normalIcon.path": "icon-d.svg",
                "submenu.normalIcon.name": "icon-d",
                "submenu.activeIcon.path": "icon-c.svg",
                "submenu.activeIcon.name": "icon-c",
                "submenu.iconSize.width": "32px",
                "submenu.iconSize.height": "32px",
                "submenu.normalLabel.color": "#8a8a8a",
                "submenu.normalLabel.fontWeight": "lighter",
                "submenu.activeLabel.color": "#fff",
                "submenu.activeLabel.fontWeight": "lighter",
                "checkbox.border": "0px",
                "checkbox.backgroundColor": "#fff",
                "range.pointer.color": "#fff",
                "range.bar.color": "#666",
                "range.subbar.color": "#d1d1d1",
                "range.disabledPointer.color": "#414141",
                "range.disabledBar.color": "#282828",
                "range.disabledSubbar.color": "#414141",
                "range.value.color": "#fff",
                "range.value.fontWeight": "lighter",
                "range.value.fontSize": "11px",
                "range.value.border": "1px solid #353535",
                "range.value.backgroundColor": "#151515",
                "range.title.color": "#fff",
                "range.title.fontWeight": "lighter",
                "colorpicker.button.border": "1px solid #1e1e1e",
                "colorpicker.title.color": "#fff"
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = u(i(81)),
                o = u(i(83)),
                a = u(i(84)),
                s = u(i(85)),
                l = i(72),
                c = i(73);

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = {
                    stroke: "#ffbb3b",
                    fill: "",
                    strokeWidth: 3
                },
                d = function(t) {
                    function e(t, i) {
                        var n = i.locale,
                            a = i.iconStyle,
                            l = i.menuBarPosition,
                            u = i.usageStatistics;
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var d = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                            locale: n,
                            name: "shape",
                            iconStyle: a,
                            menuBarPosition: l,
                            templateHtml: s.default,
                            usageStatistics: u
                        }));
                        return d.type = null, d.options = h, d._els = {
                            shapeSelectButton: d.selector("#tie-shape-button"),
                            shapeColorButton: d.selector("#tie-shape-color-button"),
                            strokeRange: new o.default(d.selector("#tie-stroke-range"), c.defaultShapeStrokeValus),
                            strokeRangeValue: d.selector("#tie-stroke-range-value"),
                            fillColorpicker: new r.default(d.selector("#tie-color-fill"), "", d.toggleDirection, d.usageStatistics),
                            strokeColorpicker: new r.default(d.selector("#tie-color-stroke"), "#ffbb3b", d.toggleDirection, d.usageStatistics)
                        }, d.colorPickerControls.push(d._els.fillColorpicker), d.colorPickerControls.push(d._els.strokeColorpicker), d
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, a.default), n(e, [{
                        key: "addEvent",
                        value: function(t) {
                            this.actions = t, this._els.shapeSelectButton.addEventListener("click", this._changeShapeHandler.bind(this)), this._els.strokeRange.on("change", this._changeStrokeRangeHandler.bind(this)), this._els.fillColorpicker.on("change", this._changeFillColorHandler.bind(this)), this._els.strokeColorpicker.on("change", this._changeStrokeColorHandler.bind(this)), this._els.fillColorpicker.on("changeShow", this.colorPickerChangeShow.bind(this)), this._els.strokeColorpicker.on("changeShow", this.colorPickerChangeShow.bind(this)), this._els.strokeRangeValue.value = this._els.strokeRange.value, this._els.strokeRangeValue.setAttribute("readonly", !0)
                        }
                    }, {
                        key: "setShapeStatus",
                        value: function(t) {
                            var e = t.strokeWidth,
                                i = t.strokeColor,
                                n = t.fillColor;
                            this._els.strokeRange.value = e, this._els.strokeRange.trigger("change"), this._els.strokeColorpicker.color = i, this._els.fillColorpicker.color = n, this.options.stroke = i, this.options.fill = n, this.options.strokeWidth = e
                        }
                    }, {
                        key: "changeStartMode",
                        value: function() {
                            this.actions.stopDrawingMode()
                        }
                    }, {
                        key: "changeStandbyMode",
                        value: function() {
                            this.type = null, this.actions.changeSelectableAll(!0), this._els.shapeSelectButton.classList.remove("circle"), this._els.shapeSelectButton.classList.remove("triangle"), this._els.shapeSelectButton.classList.remove("rect")
                        }
                    }, {
                        key: "setMaxStrokeValue",
                        value: function(t) {
                            var e = t;
                            e <= 0 && (e = c.defaultShapeStrokeValus.max), this._els.strokeRange.max = e
                        }
                    }, {
                        key: "setStrokeValue",
                        value: function(t) {
                            this._els.strokeRange.value = t, this._els.strokeRange.trigger("change")
                        }
                    }, {
                        key: "getStrokeValue",
                        value: function() {
                            return this._els.strokeRange.value
                        }
                    }, {
                        key: "_changeShapeHandler",
                        value: function(t) {
                            var e = t.target.closest(".tui-image-editor-button");
                            if (e) {
                                this.actions.stopDrawingMode(), this.actions.discardSelection();
                                var i = this.getButtonType(e, ["circle", "triangle", "rect"]);
                                if (this.type === i) return void this.changeStandbyMode();
                                this.changeStandbyMode(), this.type = i, t.currentTarget.classList.add(i), this.actions.changeSelectableAll(!1), this.actions.modeChange("shape")
                            }
                        }
                    }, {
                        key: "_changeStrokeRangeHandler",
                        value: function(t) {
                            this.options.strokeWidth = (0, l.toInteger)(t), this._els.strokeRangeValue.value = (0, l.toInteger)(t), this.actions.changeShape({
                                strokeWidth: t
                            }), this.actions.setDrawingShape(this.type, this.options)
                        }
                    }, {
                        key: "_changeFillColorHandler",
                        value: function(t) {
                            t = t || "transparent", this.options.fill = t, this.actions.changeShape({
                                fill: t
                            })
                        }
                    }, {
                        key: "_changeStrokeColorHandler",
                        value: function(t) {
                            t = t || "transparent", this.options.stroke = t, this.actions.changeShape({
                                stroke: t
                            })
                        }
                    }]), e
                }();
            e.default = d
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = a(i(3)),
                o = a(i(82));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = ["#000000", "#2a2a2a", "#545454", "#7e7e7e", "#a8a8a8", "#d2d2d2", "#ffffff", "", "#ff4040", "#ff6518", "#ffbb3b", "#03bd9e", "#00a9ff", "#515ce6", "#9e5fff", "#ff5583"],
                l = function() {
                    function t(e) {
                        var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "#7e7e7e",
                            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "up",
                            r = arguments[3];
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, t);
                        var a = e.getAttribute("title");
                        this.usageStatistics = r, this._show = !1, this._colorpickerElement = e, this._toggleDirection = n, this._makePickerButtonElement(e, i), this._makePickerLayerElement(e, a), this._color = i, this.picker = o.default.create({
                            container: this.pickerElement,
                            preset: s,
                            color: i,
                            usageStatistics: this.usageStatistics
                        }), this._addEvent(e)
                    }
                    return n(t, [{
                        key: "_changeColorElement",
                        value: function(t) {
                            t ? (this.colorElement.classList.remove("transparent"), this.colorElement.style.backgroundColor = t) : (this.colorElement.style.backgroundColor = "#fff", this.colorElement.classList.add("transparent"))
                        }
                    }, {
                        key: "_makePickerButtonElement",
                        value: function(t, e) {
                            t.classList.add("tui-image-editor-button"), this.colorElement = document.createElement("div"), this.colorElement.className = "color-picker-value", e ? this.colorElement.style.backgroundColor = e : this.colorElement.classList.add("transparent")
                        }
                    }, {
                        key: "_makePickerLayerElement",
                        value: function(t, e) {
                            var i = document.createElement("label"),
                                n = document.createElement("div");
                            this.pickerControl = document.createElement("div"), this.pickerControl.className = "color-picker-control", this.pickerElement = document.createElement("div"), this.pickerElement.className = "color-picker", i.innerHTML = e, n.className = "triangle", this.pickerControl.appendChild(this.pickerElement), this.pickerControl.appendChild(n), t.appendChild(this.pickerControl), t.appendChild(this.colorElement), t.appendChild(i)
                        }
                    }, {
                        key: "_addEvent",
                        value: function(t) {
                            var e = this;
                            this.picker.on("selectColor", function(t) {
                                e._changeColorElement(t.color), e._color = t.color, e.fire("change", t.color)
                            }), t.addEventListener("click", function(t) {
                                var i = t.target,
                                    n = i && e._isElementInColorPickerControl(i);
                                (!n || n && e._isPaletteButton(i)) && (e._show = !e._show, e.pickerControl.style.display = e._show ? "block" : "none", e._setPickerControlPosition(), e.fire("changeShow", e)), t.stopPropagation()
                            }), document.body.addEventListener("click", function() {
                                e.hide()
                            })
                        }
                    }, {
                        key: "_isPaletteButton",
                        value: function(t) {
                            return "tui-colorpicker-palette-button" === t.className
                        }
                    }, {
                        key: "_isElementInColorPickerControl",
                        value: function(t) {
                            for (var e = t; e !== document.body && e;) {
                                if (e === this.pickerControl) return !0;
                                e = e.parentNode
                            }
                            return !1
                        }
                    }, {
                        key: "hide",
                        value: function() {
                            this._show = !1, this.pickerControl.style.display = "none"
                        }
                    }, {
                        key: "_setPickerControlPosition",
                        value: function() {
                            var t = this.pickerControl.style,
                                e = this._colorpickerElement.clientWidth / 2 + 2,
                                i = this.pickerControl.offsetWidth / 2 - e,
                                n = -1 * (this.pickerControl.offsetHeight + 10);
                            "down" === this._toggleDirection && (n = 30), t.top = n + "px", t.left = "-" + i + "px"
                        }
                    }, {
                        key: "color",
                        get: function() {
                            return this._color
                        },
                        set: function(t) {
                            this._color = t, this._changeColorElement(t)
                        }
                    }]), t
                }();
            r.default.CustomEvents.mixin(l), e.default = l
        }, function(t, i) {
            t.exports = e
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i(3)),
                o = i(72);
            var a = function() {
                function t(e) {
                    var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this._value = i.value || 0, this.rangeElement = e, this._drawRangeElement(), this.rangeWidth = (0, o.toInteger)(window.getComputedStyle(e, null).width) - 12, this._min = i.min || 0, this._max = i.max || 100, this._absMax = -1 * this._min + this._max, this.realTimeEvent = i.realTimeEvent || !1, this._addClickEvent(), this._addDragEvent(), this.value = i.value, this.trigger("change")
                }
                return n(t, [{
                    key: "trigger",
                    value: function(t) {
                        this.fire(t, this._value)
                    }
                }, {
                    key: "_drawRangeElement",
                    value: function() {
                        this.rangeElement.classList.add("tui-image-editor-range"), this.bar = document.createElement("div"), this.bar.className = "tui-image-editor-virtual-range-bar", this.subbar = document.createElement("div"), this.subbar.className = "tui-image-editor-virtual-range-subbar", this.pointer = document.createElement("div"), this.pointer.className = "tui-image-editor-virtual-range-pointer", this.bar.appendChild(this.subbar), this.bar.appendChild(this.pointer), this.rangeElement.appendChild(this.bar)
                    }
                }, {
                    key: "_addClickEvent",
                    value: function() {
                        var t = this;
                        this.rangeElement.addEventListener("click", function(e) {
                            if (e.stopPropagation(), "tui-image-editor-range" === e.target.className) {
                                var i = e.offsetX / t.rangeWidth,
                                    n = t._absMax * i + t._min;
                                t.pointer.style.left = i * t.rangeWidth + "px", t.subbar.style.right = (1 - i) * t.rangeWidth + "px", t._value = n, t.fire("change", n, !0)
                            }
                        })
                    }
                }, {
                    key: "_addDragEvent",
                    value: function() {
                        var t = this;
                        this.pointer.addEventListener("mousedown", function(e) {
                            t.firstPosition = e.screenX, t.firstLeft = (0, o.toInteger)(t.pointer.style.left) || 0, t.dragEventHandler = {
                                changeAngle: t._changeAngle.bind(t),
                                stopChangingAngle: t._stopChangingAngle.bind(t)
                            }, document.addEventListener("mousemove", t.dragEventHandler.changeAngle), document.addEventListener("mouseup", t.dragEventHandler.stopChangingAngle)
                        })
                    }
                }, {
                    key: "_changeAngle",
                    value: function(t) {
                        var e = t.screenX - this.firstPosition,
                            i = this.firstLeft + e;
                        i = (i = i > this.rangeWidth ? this.rangeWidth : i) < 0 ? 0 : i, this.pointer.style.left = i + "px", this.subbar.style.right = this.rangeWidth - i + "px";
                        var n = i / this.rangeWidth,
                            r = this._absMax * n + this._min;
                        this._value = r, this.realTimeEvent && this.fire("change", r, !1)
                    }
                }, {
                    key: "_stopChangingAngle",
                    value: function() {
                        this.fire("change", this._value, !0), document.removeEventListener("mousemove", this.dragEventHandler.changeAngle), document.removeEventListener("mouseup", this.dragEventHandler.stopChangingAngle)
                    }
                }, {
                    key: "max",
                    set: function(t) {
                        this._max = t, this._absMax = -1 * this._min + this._max, this.value = this._value
                    },
                    get: function() {
                        return this._max
                    }
                }, {
                    key: "value",
                    get: function() {
                        return this._value
                    },
                    set: function(t) {
                        var e = (t - this._min) * this.rangeWidth / this._absMax;
                        this.rangeWidth < e && (e = this.rangeWidth), this.pointer.style.left = e + "px", this.subbar.style.right = this.rangeWidth - e + "px", this._value = t
                    }
                }]), t
            }();
            r.default.CustomEvents.mixin(a), e.default = a
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = function() {
                function t(t, e) {
                    for (var i = 0; i < e.length; i++) {
                        var n = e[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                    }
                }
                return function(e, i, n) {
                    return i && t(e.prototype, i), n && t(e, n), e
                }
            }();
            var n = function() {
                function t(e, i) {
                    var n = i.locale,
                        r = i.name,
                        o = i.iconStyle,
                        a = i.menuBarPosition,
                        s = i.templateHtml,
                        l = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this.selector = function(t) {
                        return e.querySelector(t)
                    }, this.menuBarPosition = a, this.toggleDirection = "top" === a ? "down" : "up", this.colorPickerControls = [], this.usageStatistics = l, this._makeSubMenuElement(e, {
                        locale: n,
                        name: r,
                        iconStyle: o,
                        templateHtml: s
                    })
                }
                return i(t, [{
                    key: "colorPickerChangeShow",
                    value: function(t) {
                        this.colorPickerControls.forEach(function(e) {
                            t !== e && e.hide()
                        })
                    }
                }, {
                    key: "getButtonType",
                    value: function(t, e) {
                        return t.className.match(RegExp("(" + e.join("|") + ")"))[0]
                    }
                }, {
                    key: "changeClass",
                    value: function(t, e, i) {
                        t.classList.remove(e), t.classList.add(i)
                    }
                }, {
                    key: "changeStandbyMode",
                    value: function() {}
                }, {
                    key: "changeStartMode",
                    value: function() {}
                }, {
                    key: "_makeSubMenuElement",
                    value: function(t, e) {
                        var i = e.locale,
                            n = e.name,
                            r = e.iconStyle,
                            o = e.templateHtml,
                            a = document.createElement("div");
                        a.className = "tui-image-editor-menu-" + n, a.innerHTML = o({
                            locale: i,
                            iconStyle: r
                        }), t.appendChild(a)
                    }
                }]), t
            }();
            e.default = n
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-shape-button">\n            <div class="tui-image-editor-button rect">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-shape-rectangle"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-shape-rectangle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Rectangle") + ' </label>\n            </div>\n            <div class="tui-image-editor-button circle">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-shape-circle"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-shape-circle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Circle") + ' </label>\n            </div>\n            <div class="tui-image-editor-button triangle">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-shape-triangle"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-shape-triangle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Triangle") + ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li id="tie-shape-color-button">\n            <div id="tie-color-fill" title="' + e.localize("Fill") + '"></div>\n            <div id="tie-color-stroke" title="' + e.localize("Stroke") + '"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">' + e.localize("Stroke") + '</label>\n            <div id="tie-stroke-range"></div>\n            <input id="tie-stroke-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = s(i(3)),
                o = s(i(84)),
                a = s(i(87));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        r = i.iconStyle,
                        o = i.menuBarPosition,
                        s = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var l = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "crop",
                        iconStyle: r,
                        menuBarPosition: o,
                        templateHtml: a.default,
                        usageStatistics: s
                    }));
                    return l.status = "active", l._els = {
                        apply: l.selector("#tie-crop-button .apply"),
                        cancel: l.selector("#tie-crop-button .cancel"),
                        preset: l.selector("#tie-crop-preset-button")
                    }, l.defaultPresetButton = l._els.preset.querySelector(".preset-none"), l
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, o.default), n(e, [{
                    key: "addEvent",
                    value: function(t) {
                        var e = this;
                        this.actions = t, this._els.apply.addEventListener("click", function() {
                            e.actions.crop(), e._els.apply.classList.remove("active")
                        }), this._els.cancel.addEventListener("click", function() {
                            e.actions.cancel(), e._els.apply.classList.remove("active")
                        }), this._els.preset.addEventListener("click", function(t) {
                            var i = t.target.closest(".tui-image-editor-button.preset");
                            if (i) {
                                var n = i.className.match(/preset-[^\s]+/)[0];
                                e._setPresetButtonActive(i), e.actions.preset(n)
                            }
                        })
                    }
                }, {
                    key: "changeStartMode",
                    value: function() {
                        this.actions.modeChange("crop")
                    }
                }, {
                    key: "changeStandbyMode",
                    value: function() {
                        this.actions.stopDrawingMode(), this._setPresetButtonActive()
                    }
                }, {
                    key: "changeApplyButtonStatus",
                    value: function(t) {
                        t ? this._els.apply.classList.add("active") : this._els.apply.classList.remove("active")
                    }
                }, {
                    key: "_setPresetButtonActive",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.defaultPresetButton;
                        r.default.forEach([].slice.call(this._els.preset.querySelectorAll(".preset")), function(t) {
                            t.classList.remove("active")
                        }), t && t.classList.add("active")
                    }
                }]), e
            }();
            e.default = l
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-crop-preset-button">\n            <div class="tui-image-editor-button preset preset-none active">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-shape-rectangle"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-shape-rectangle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Custom") + ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-square">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Square") + ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-3-2">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("3:2") + ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-4-3">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("4:3") + ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-5-4">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("5:4") + ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-7-5">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("7:5") + ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-16-9">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("16:9") + ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline">\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li id="tie-crop-button" class="action">\n            <div class="tui-image-editor-button apply">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + n.path + "#" + n.name + '-ic-apply" class="normal"/>\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-apply" class="active"/>\n                </svg>\n                <label>\n                    ' + e.localize("Apply") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + n.path + "#" + n.name + '-ic-cancel" class="normal"/>\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-cancel" class="active"/>\n                </svg>\n                <label>\n                    ' + e.localize("Cancel") + "\n                </label>\n            </div>\n        </li>\n    </ul>\n"
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = s(i(3)),
                o = s(i(84)),
                a = s(i(89));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        r = i.iconStyle,
                        o = i.menuBarPosition,
                        s = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var l = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "flip",
                        iconStyle: r,
                        menuBarPosition: o,
                        templateHtml: a.default,
                        usageStatistics: s
                    }));
                    return l.flipStatus = !1, l._els = {
                        flipButton: l.selector("#tie-flip-button")
                    }, l
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, o.default), n(e, [{
                    key: "addEvent",
                    value: function(t) {
                        this._actions = t, this._els.flipButton.addEventListener("click", this._changeFlip.bind(this))
                    }
                }, {
                    key: "_changeFlip",
                    value: function(t) {
                        var e = this,
                            i = t.target.closest(".tui-image-editor-button");
                        if (i) {
                            var n = this.getButtonType(i, ["flipX", "flipY", "resetFlip"]);
                            if (!this.flipStatus && "resetFlip" === n) return;
                            this._actions.flip(n).then(function(t) {
                                var i = e._els.flipButton.classList;
                                e.flipStatus = !1, i.remove("resetFlip"), r.default.forEach(["flipX", "flipY"], function(n) {
                                    i.remove(n), t[n] && (i.add(n), i.add("resetFlip"), e.flipStatus = !0)
                                })
                            })
                        }
                    }
                }]), e
            }();
            e.default = l
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul id="tie-flip-button" class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button flipX">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-flip-x" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-flip-x" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Flip X") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button flipY">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-flip-y" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-flip-y" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Flip Y") + '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tui-image-editor-button resetFlip">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-flip-reset"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-flip-reset"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Reset") + "\n                </label>\n            </div>\n        </li>\n    </ul>\n"
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = c(i(83)),
                o = c(i(84)),
                a = c(i(91)),
                s = i(72),
                l = i(73);

            function c(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var u = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        o = i.iconStyle,
                        s = i.menuBarPosition,
                        c = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var u = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "rotate",
                        iconStyle: o,
                        menuBarPosition: s,
                        templateHtml: a.default,
                        usageStatistics: c
                    }));
                    return u._value = 0, u._els = {
                        rotateButton: u.selector("#tie-retate-button"),
                        rotateRange: new r.default(u.selector("#tie-rotate-range"), l.defaultRotateRangeValus),
                        rotateRangeValue: u.selector("#tie-ratate-range-value")
                    }, u
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, o.default), n(e, [{
                    key: "setRangeBarAngle",
                    value: function(t, e) {
                        var i = e;
                        "rotate" === t && (i = parseInt(this._els.rotateRangeValue.value, 10) + e), this._els.rotateRangeValue.value = i, this._setRangeBarRatio(i)
                    }
                }, {
                    key: "_setRangeBarRatio",
                    value: function(t) {
                        this._els.rotateRange.value = t
                    }
                }, {
                    key: "addEvent",
                    value: function(t) {
                        this.actions = t, this._els.rotateButton.addEventListener("click", this._changeRotateForButton.bind(this)), this._els.rotateRange.on("change", this._changeRotateForRange.bind(this)), this._els.rotateRangeValue.setAttribute("readonly", !0)
                    }
                }, {
                    key: "_changeRotateForRange",
                    value: function(t, e) {
                        var i = (0, s.toInteger)(t);
                        this._els.rotateRangeValue.value = i, this.actions.setAngle(i, !e), this._value = i
                    }
                }, {
                    key: "_changeRotateForButton",
                    value: function(t) {
                        var e = t.target.closest(".tui-image-editor-button"),
                            i = this._els.rotateRangeValue.value;
                        if (e) {
                            var n = {
                                    clockwise: 30,
                                    counterclockwise: -30
                                }[this.getButtonType(e, ["counterclockwise", "clockwise"])],
                                r = parseInt(i, 10) + n;
                            r >= -360 && r <= 360 && this.actions.rotate(n)
                        }
                    }
                }]), e
            }();
            e.default = u
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-retate-button">\n            <div class="tui-image-editor-button clockwise">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-rotate-clockwise"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-rotate-clockwise"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 30 </label>\n            </div>\n            <div class="tui-image-editor-button counterclockwise">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-rotate-counterclockwise"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-rotate-counterclockwise"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> -30 </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">' + e.localize("Range") + '</label>\n            <div id="tie-rotate-range"></div>\n            <input id="tie-ratate-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = u(i(83)),
                o = u(i(81)),
                a = u(i(84)),
                s = u(i(93)),
                l = i(72),
                c = i(73);

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        a = i.iconStyle,
                        l = i.menuBarPosition,
                        u = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var h = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "text",
                        iconStyle: a,
                        menuBarPosition: l,
                        templateHtml: s.default,
                        usageStatistics: u
                    }));
                    return h.effect = {
                        bold: !1,
                        italic: !1,
                        underline: !1
                    }, h.align = "left", h._els = {
                        textEffectButton: h.selector("#tie-text-effect-button"),
                        textAlignButton: h.selector("#tie-text-align-button"),
                        textColorpicker: new o.default(h.selector("#tie-text-color"), "#ffbb3b", h.toggleDirection, h.usageStatistics),
                        textRange: new r.default(h.selector("#tie-text-range"), c.defaultTextRangeValus),
                        textRangeValue: h.selector("#tie-text-range-value")
                    }, h
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, a.default), n(e, [{
                    key: "addEvent",
                    value: function(t) {
                        this.actions = t, this._els.textEffectButton.addEventListener("click", this._setTextEffectHandler.bind(this)), this._els.textAlignButton.addEventListener("click", this._setTextAlignHandler.bind(this)), this._els.textRange.on("change", this._changeTextRnageHandler.bind(this)), this._els.textRangeValue.value = this._els.textRange.value, this._els.textRangeValue.setAttribute("readonly", !0), this._els.textColorpicker.on("change", this._changeColorHandler.bind(this))
                    }
                }, {
                    key: "changeStandbyMode",
                    value: function() {
                        this.actions.stopDrawingMode()
                    }
                }, {
                    key: "changeStartMode",
                    value: function() {
                        this.actions.modeChange("text")
                    }
                }, {
                    key: "_setTextEffectHandler",
                    value: function(t) {
                        var e = t.target.closest(".tui-image-editor-button"),
                            i = e.className.match(/(bold|italic|underline)/)[0],
                            n = {
                                bold: {
                                    fontWeight: "bold"
                                },
                                italic: {
                                    fontStyle: "italic"
                                },
                                underline: {
                                    textDecoration: "underline"
                                }
                            }[i];
                        this.effect[i] = !this.effect[i], e.classList.toggle("active"), this.actions.changeTextStyle(n)
                    }
                }, {
                    key: "_setTextAlignHandler",
                    value: function(t) {
                        var e = t.target.closest(".tui-image-editor-button");
                        if (e) {
                            var i = this.getButtonType(e, ["left", "center", "right"]);
                            t.currentTarget.classList.remove(this.align), this.align !== i && t.currentTarget.classList.add(i), this.actions.changeTextStyle({
                                textAlign: i
                            }), this.align = i
                        }
                    }
                }, {
                    key: "_changeTextRnageHandler",
                    value: function(t) {
                        t = (0, l.toInteger)(t), (0, l.toInteger)(this._els.textRangeValue.value) !== t && (this.actions.changeTextStyle({
                            fontSize: t
                        }), this._els.textRangeValue.value = t)
                    }
                }, {
                    key: "_changeColorHandler",
                    value: function(t) {
                        t = t || "transparent", this.actions.changeTextStyle({
                            fill: t
                        })
                    }
                }, {
                    key: "textColor",
                    get: function() {
                        return this._els.textColorpicker.color
                    }
                }, {
                    key: "fontSize",
                    get: function() {
                        return this._els.textRange.value
                    },
                    set: function(t) {
                        this._els.textRange.value = t, this._els.textRangeValue.value = t
                    }
                }]), e
            }();
            e.default = h
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-text-effect-button">\n            <div class="tui-image-editor-button bold">\n                <div>\n                    <svg class="svg_ic-submenu">\n                    <use xlink:href="' + n.path + "#" + n.name + '-ic-text-bold" class="normal"/>\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-text-bold" class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Bold") + ' </label>\n            </div>\n            <div class="tui-image-editor-button italic">\n                <div>\n                    <svg class="svg_ic-submenu">\n                    <use xlink:href="' + n.path + "#" + n.name + '-ic-text-italic" class="normal"/>\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-text-italic" class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Italic") + ' </label>\n            </div>\n            <div class="tui-image-editor-button underline">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-text-underline"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-text-underline"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Underline") + ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li id="tie-text-align-button">\n            <div class="tui-image-editor-button left">\n                <div>\n                    <svg class="svg_ic-submenu">\n                     <use xlink:href="' + n.path + "#" + n.name + '-ic-text-align-left"\n                        class="normal"/>\n                     <use xlink:href="' + r.path + "#" + r.name + '-ic-text-align-left"\n                        class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Left") + ' </label>\n            </div>\n            <div class="tui-image-editor-button center">\n                <div>\n                    <svg class="svg_ic-submenu">\n                     <use xlink:href="' + n.path + "#" + n.name + '-ic-text-align-center"\n                        class="normal"/>\n                     <use xlink:href="' + r.path + "#" + r.name + '-ic-text-align-center"\n                        class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Center") + ' </label>\n            </div>\n            <div class="tui-image-editor-button right">\n                <div>\n                    <svg class="svg_ic-submenu">\n                     <use xlink:href="' + n.path + "#" + n.name + '-ic-text-align-right"\n                        class="normal"/>\n                     <use xlink:href="' + r.path + "#" + r.name + '-ic-text-align-right"\n                        class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Right") + ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div id="tie-text-color" title="' + e.localize("Color") + '"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">' + e.localize("Text size") + '</label>\n            <div id="tie-text-range"></div>\n            <input id="tie-text-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = s(i(84)),
                o = s(i(72)),
                a = s(i(95));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        r = i.iconStyle,
                        o = i.menuBarPosition,
                        s = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var l = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "mask",
                        iconStyle: r,
                        menuBarPosition: o,
                        templateHtml: a.default,
                        usageStatistics: s
                    }));
                    return l._els = {
                        applyButton: l.selector("#tie-mask-apply"),
                        maskImageButton: l.selector("#tie-mask-image-file")
                    }, l
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, r.default), n(e, [{
                    key: "addEvent",
                    value: function(t) {
                        this.actions = t, this._els.maskImageButton.addEventListener("change", this._loadMaskFile.bind(this)), this._els.applyButton.addEventListener("click", this._applyMask.bind(this))
                    }
                }, {
                    key: "_applyMask",
                    value: function() {
                        this.actions.applyFilter(), this._els.applyButton.classList.remove("active")
                    }
                }, {
                    key: "_loadMaskFile",
                    value: function(t) {
                        var e = void 0;
                        o.default.isSupportFileApi() || alert("This browser does not support file-api");
                        var i = t.target.files[0];
                        i && (e = URL.createObjectURL(i), this.actions.loadImageFromURL(e, i), this._els.applyButton.classList.add("active"))
                    }
                }]), e
            }();
            e.default = l
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button">\n                <div>\n                    <input type="file" accept="image/*" id="tie-mask-image-file">\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-mask-load" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-mask-load" class="active"/>\n                    </svg>\n                </div>\n                <label> ' + e.localize("Load Mask Image") + ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li id="tie-mask-apply" class="tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">\n            <div class="tui-image-editor-button apply">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="' + n.path + "#" + n.name + '-ic-apply" class="normal"/>\n                    <use xlink:href="' + r.path + "#" + r.name + '-ic-apply" class="active"/>\n                </svg>\n                <label>\n                    ' + e.localize("Apply") + "\n                </label>\n            </div>\n        </li>\n    </ul>\n"
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = u(i(3)),
                o = u(i(81)),
                a = u(i(84)),
                s = u(i(97)),
                l = i(72),
                c = i(73);

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        r = i.iconStyle,
                        a = i.menuBarPosition,
                        l = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var c = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "icon",
                        iconStyle: r,
                        menuBarPosition: a,
                        templateHtml: s.default,
                        usageStatistics: l
                    }));
                    return c.iconType = null, c._iconMap = {}, c._els = {
                        registIconButton: c.selector("#tie-icon-image-file"),
                        addIconButton: c.selector("#tie-icon-add-button"),
                        iconColorpicker: new o.default(c.selector("#tie-icon-color"), "#ffbb3b", c.toggleDirection, c.usageStatistics)
                    }, c
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, a.default), n(e, [{
                    key: "addEvent",
                    value: function(t) {
                        this.actions = t, this._els.iconColorpicker.on("change", this._changeColorHandler.bind(this)), this._els.registIconButton.addEventListener("change", this._registeIconHandler.bind(this)), this._els.addIconButton.addEventListener("click", this._addIconHandler.bind(this))
                    }
                }, {
                    key: "clearIconType",
                    value: function() {
                        this._els.addIconButton.classList.remove(this.iconType), this.iconType = null
                    }
                }, {
                    key: "registDefaultIcon",
                    value: function() {
                        var t = this;
                        r.default.forEach(c.defaultIconPath, function(e, i) {
                            t.actions.registDefalutIcons(i, e)
                        })
                    }
                }, {
                    key: "setIconPickerColor",
                    value: function(t) {
                        this._els.iconColorpicker.color = t
                    }
                }, {
                    key: "changeStandbyMode",
                    value: function() {
                        this.clearIconType(), this.actions.cancelAddIcon()
                    }
                }, {
                    key: "_changeColorHandler",
                    value: function(t) {
                        t = t || "transparent", this.actions.changeColor(t)
                    }
                }, {
                    key: "_addIconHandler",
                    value: function(t) {
                        var e = t.target.closest(".tui-image-editor-button");
                        if (e) {
                            var i = e.getAttribute("data-icontype"),
                                n = this._els.iconColorpicker.color;
                            this.actions.discardSelection(), this.actions.changeSelectableAll(!1), this._els.addIconButton.classList.remove(this.iconType), this._els.addIconButton.classList.add(i), this.iconType === i ? this.changeStandbyMode() : (this.actions.addIcon(i, n), this.iconType = i)
                        }
                    }
                }, {
                    key: "_registeIconHandler",
                    value: function(t) {
                        var e = void 0;
                        l.isSupportFileApi || alert("This browser does not support file-api");
                        var i = t.target.files[0];
                        i && (e = URL.createObjectURL(i), this.actions.registCustomIcon(e, i))
                    }
                }]), e
            }();
            e.default = h
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-icon-add-button">\n            <div class="tui-image-editor-button" data-icontype="icon-arrow">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-arrow"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-arrow"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Arrow") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-arrow-2"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-arrow-2"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Arrow-2") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-arrow-3"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-arrow-3"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Arrow-3") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-star" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-star" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Star-1") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star-2">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-star-2"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-star-2"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Star-2") + '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-polygon">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-polygon"\n                            class="normal"/>\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-polygon"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Polygon") + '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-location">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-location"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-location"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Location") + '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-heart">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-heart"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-heart"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Heart") + '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-bubble">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-bubble"\n                            class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-bubble"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Bubble") + '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li id="tie-icon-add-button">\n            <div class="tui-image-editor-button" style="margin:0">\n                <div>\n                    <input type="file" accept="image/*" id="tie-icon-image-file">\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-icon-load" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-icon-load" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Custom icon") + '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div id="tie-icon-color" title="' + e.localize("Color") + '"></div>\n        </li>\n    </ul>\n'
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = u(i(72)),
                o = u(i(81)),
                a = u(i(83)),
                s = u(i(84)),
                l = u(i(99)),
                c = i(73);

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = function(t) {
                function e(t, i) {
                    var n = i.locale,
                        r = i.iconStyle,
                        s = i.menuBarPosition,
                        u = i.usageStatistics;
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var h = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                        locale: n,
                        name: "draw",
                        iconStyle: r,
                        menuBarPosition: s,
                        templateHtml: l.default,
                        usageStatistics: u
                    }));
                    return h._els = {
                        lineSelectButton: h.selector("#tie-draw-line-select-button"),
                        drawColorpicker: new o.default(h.selector("#tie-draw-color"), "#00a9ff", h.toggleDirection, h.usageStatistics),
                        drawRange: new a.default(h.selector("#tie-draw-range"), c.defaultDrawRangeValus),
                        drawRangeValue: h.selector("#tie-draw-range-value")
                    }, h.type = null, h.color = h._els.drawColorpicker.color, h.width = h._els.drawRange.value, h
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, s.default), n(e, [{
                    key: "addEvent",
                    value: function(t) {
                        this.actions = t, this._els.lineSelectButton.addEventListener("click", this._changeDrawType.bind(this)), this._els.drawColorpicker.on("change", this._changeDrawColor.bind(this)), this._els.drawRange.on("change", this._changeDrawRange.bind(this)), this._els.drawRangeValue.value = this._els.drawRange.value, this._els.drawRangeValue.setAttribute("readonly", !0)
                    }
                }, {
                    key: "setDrawMode",
                    value: function() {
                        this.actions.setDrawMode(this.type, {
                            width: this.width,
                            color: r.default.getRgb(this.color, .7)
                        })
                    }
                }, {
                    key: "changeStandbyMode",
                    value: function() {
                        this.type = null, this.actions.stopDrawingMode(), this.actions.changeSelectableAll(!0), this._els.lineSelectButton.classList.remove("free"), this._els.lineSelectButton.classList.remove("line")
                    }
                }, {
                    key: "changeStartMode",
                    value: function() {
                        this.type = "free", this._els.lineSelectButton.classList.add("free"), this.setDrawMode()
                    }
                }, {
                    key: "_changeDrawType",
                    value: function(t) {
                        var e = t.target.closest(".tui-image-editor-button");
                        if (e) {
                            var i = this.getButtonType(e, ["free", "line"]);
                            if (this.actions.discardSelection(), this.type === i) return void this.changeStandbyMode();
                            this.changeStandbyMode(), this.type = i, this._els.lineSelectButton.classList.add(i), this.setDrawMode()
                        }
                    }
                }, {
                    key: "_changeDrawColor",
                    value: function(t) {
                        this.color = t || "transparent", this.type ? this.setDrawMode() : this.changeStartMode()
                    }
                }, {
                    key: "_changeDrawRange",
                    value: function(t) {
                        t = r.default.toInteger(t), this._els.drawRangeValue.value = t, this.width = t, this.type ? this.setDrawMode() : this.changeStartMode()
                    }
                }]), e
            }();
            e.default = h
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale,
                    i = t.iconStyle,
                    n = i.normal,
                    r = i.active;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-draw-line-select-button">\n            <div class="tui-image-editor-button free">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-draw-free" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-draw-free" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Free") + '\n                </label>\n            </div>\n            <div class="tui-image-editor-button line">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="' + n.path + "#" + n.name + '-ic-draw-line" class="normal"/>\n                        <use xlink:href="' + r.path + "#" + r.name + '-ic-draw-line" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    ' + e.localize("Straight") + '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div id="tie-draw-color" title="' + e.localize("Color") + '"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">' + e.localize("Range") + '</label>\n            <div id="tie-draw-range"></div>\n            <input id="tie-draw-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'
            }
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = h(i(3)),
                o = h(i(81)),
                a = h(i(83)),
                s = h(i(84)),
                l = h(i(101)),
                c = i(72),
                u = i(73);

            function h(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var d = ["add", "diff", "subtract", "multiply", "screen", "lighten", "darken"],
                f = ["grayscale", "invert", "sepia", "sepia2", "blur", "sharpen", "emboss", "remove-white", "brightness", "noise", "pixelate", "color-filter", "tint", "multiply", "blend"],
                p = {
                    grayscale: "grayscale",
                    invert: "invert",
                    sepia: "sepia",
                    sepia2: "vintage",
                    blur: "blur",
                    sharpen: "sharpen",
                    emboss: "emboss",
                    removeWhite: "removeColor",
                    brightness: "brightness",
                    contrast: "contrast",
                    saturation: "saturation",
                    vintage: "vintage",
                    polaroid: "polaroid",
                    noise: "noise",
                    pixelate: "pixelate",
                    colorFilter: "removeColor",
                    tint: "blendColor",
                    multiply: "blendColor",
                    blend: "blendColor",
                    hue: "hue",
                    gamma: "gamma"
                },
                g = function(t) {
                    function e(t, i) {
                        var n = i.locale,
                            r = i.iconStyle,
                            o = i.menuBarPosition,
                            a = i.usageStatistics;
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var s = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, {
                            locale: n,
                            name: "filter",
                            iconStyle: r,
                            menuBarPosition: o,
                            templateHtml: l.default,
                            usageStatistics: a
                        }));
                        return s.selectBoxShow = !1, s.checkedMap = {}, s._makeControlElement(), s
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, s.default), n(e, [{
                        key: "addEvent",
                        value: function(t) {
                            var e = this,
                                i = t.applyFilter,
                                n = this._changeRangeValue.bind(this, i);
                            r.default.forEach(f, function(t) {
                                var i = e.selector("#tie-" + t),
                                    r = (0, c.toCamelCase)(t);
                                e.checkedMap[r] = i, i.addEventListener("change", function() {
                                    return n(r)
                                })
                            }), this._els.removewhiteDistanceRange.on("change", function() {
                                return n("removeWhite")
                            }), this._els.colorfilterThresholeRange.on("change", function() {
                                return n("colorFilter")
                            }), this._els.pixelateRange.on("change", function() {
                                return n("pixelate")
                            }), this._els.noiseRange.on("change", function() {
                                return n("noise")
                            }), this._els.brightnessRange.on("change", function() {
                                return n("brightness")
                            }), this._els.blendType.addEventListener("change", function() {
                                return n("blend")
                            }), this._els.filterBlendColor.on("change", function() {
                                return n("blend")
                            }), this._els.filterMultiplyColor.on("change", function() {
                                return n("multiply")
                            }), this._els.tintOpacity.on("change", function() {
                                return n("tint")
                            }), this._els.filterTintColor.on("change", function() {
                                return n("tint")
                            }), this._els.blendType.addEventListener("click", function(t) {
                                return t.stopPropagation()
                            }), this._els.filterMultiplyColor.on("changeShow", this.colorPickerChangeShow.bind(this)), this._els.filterTintColor.on("changeShow", this.colorPickerChangeShow.bind(this)), this._els.filterBlendColor.on("changeShow", this.colorPickerChangeShow.bind(this))
                        }
                    }, {
                        key: "_changeRangeValue",
                        value: function(t, e) {
                            var i = this.checkedMap[e].checked,
                                n = p[e],
                                r = this.checkedMap[e].closest(".tui-image-editor-checkbox-group");
                            r && (i ? r.classList.remove("tui-image-editor-disabled") : r.classList.add("tui-image-editor-disabled")), t(i, n, this._getFilterOption(e))
                        }
                    }, {
                        key: "_getFilterOption",
                        value: function(t) {
                            var e = {};
                            switch (t) {
                                case "removeWhite":
                                    e.color = "#FFFFFF", e.useAlpha = !1, e.distance = parseFloat(this._els.removewhiteDistanceRange.value);
                                    break;
                                case "colorFilter":
                                    e.color = "#FFFFFF", e.distance = parseFloat(this._els.colorfilterThresholeRange.value);
                                    break;
                                case "pixelate":
                                    e.blocksize = (0, c.toInteger)(this._els.pixelateRange.value);
                                    break;
                                case "noise":
                                    e.noise = (0, c.toInteger)(this._els.noiseRange.value);
                                    break;
                                case "brightness":
                                    e.brightness = parseFloat(this._els.brightnessRange.value);
                                    break;
                                case "blend":
                                    e.mode = "add", e.color = this._els.filterBlendColor.color, e.mode = this._els.blendType.value;
                                    break;
                                case "multiply":
                                    e.mode = "multiply", e.color = this._els.filterMultiplyColor.color;
                                    break;
                                case "tint":
                                    e.mode = "tint", e.color = this._els.filterTintColor.color, e.alpha = this._els.tintOpacity.value
                            }
                            return e
                        }
                    }, {
                        key: "_makeControlElement",
                        value: function() {
                            var t = this.selector;
                            this._els = {
                                removewhiteDistanceRange: new a.default(t("#tie-removewhite-distance-range"), u.defaultFilterRangeValus.removewhiteDistanceRange),
                                brightnessRange: new a.default(t("#tie-brightness-range"), u.defaultFilterRangeValus.brightnessRange),
                                noiseRange: new a.default(t("#tie-noise-range"), u.defaultFilterRangeValus.noiseRange),
                                pixelateRange: new a.default(t("#tie-pixelate-range"), u.defaultFilterRangeValus.pixelateRange),
                                colorfilterThresholeRange: new a.default(t("#tie-colorfilter-threshole-range"), u.defaultFilterRangeValus.colorfilterThresholeRange),
                                filterTintColor: new o.default(t("#tie-filter-tint-color"), "#03bd9e", this.toggleDirection, this.usageStatistics),
                                filterMultiplyColor: new o.default(t("#tie-filter-multiply-color"), "#515ce6", this.toggleDirection, this.usageStatistics),
                                filterBlendColor: new o.default(t("#tie-filter-blend-color"), "#ffbb3b", this.toggleDirection, this.usageStatistics)
                            }, this._els.tintOpacity = this._pickerWithRange(this._els.filterTintColor.pickerControl), this._els.blendType = this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl), this.colorPickerControls.push(this._els.filterTintColor), this.colorPickerControls.push(this._els.filterMultiplyColor), this.colorPickerControls.push(this._els.filterBlendColor)
                        }
                    }, {
                        key: "_pickerWithRange",
                        value: function(t) {
                            var e = document.createElement("div"),
                                i = document.createElement("label"),
                                n = document.createElement("div");
                            return n.id = "tie-filter-tint-opacity", i.innerHTML = "Opacity", e.appendChild(i), e.appendChild(n), t.appendChild(e), t.style.height = "130px", new a.default(n, u.defaultFilterRangeValus.tintOpacityRange)
                        }
                    }, {
                        key: "_pickerWithSelectbox",
                        value: function(t) {
                            var e = document.createElement("div"),
                                i = document.createElement("select"),
                                n = document.createElement("ul");
                            return e.className = "tui-image-editor-selectlist-wrap", n.className = "tui-image-editor-selectlist", e.appendChild(i), e.appendChild(n), this._makeSelectOptionList(i), t.appendChild(e), t.style.height = "130px", this._drawSelectOptionList(i, n), this._pickerWithSelectboxForAddEvent(i, n), i
                        }
                    }, {
                        key: "_drawSelectOptionList",
                        value: function(t, e) {
                            var i = t.querySelectorAll("option");
                            r.default.forEach(i, function(t) {
                                var i = document.createElement("li");
                                i.innerHTML = t.innerHTML, i.setAttribute("data-item", t.value), e.appendChild(i)
                            })
                        }
                    }, {
                        key: "_pickerWithSelectboxForAddEvent",
                        value: function(t, e) {
                            var i = this;
                            e.addEventListener("click", function(n) {
                                var r = n.target.getAttribute("data-item"),
                                    o = document.createEvent("HTMLEvents");
                                t.querySelector('[value="' + r + '"]').selected = !0, o.initEvent("change", !0, !0), t.dispatchEvent(o), i.selectBoxShow = !1, e.style.display = "none"
                            }), t.addEventListener("mousedown", function(n) {
                                n.preventDefault(), i.selectBoxShow = !i.selectBoxShow, e.style.display = i.selectBoxShow ? "block" : "none", e.setAttribute("data-selectitem", t.value), e.querySelector("[data-item='" + t.value + "']").classList.add("active")
                            })
                        }
                    }, {
                        key: "_makeSelectOptionList",
                        value: function(t) {
                            r.default.forEach(d, function(e) {
                                var i = document.createElement("option");
                                i.setAttribute("value", e), i.innerHTML = e.replace(/^[a-z]/, function(t) {
                                    return t.toUpperCase()
                                }), t.appendChild(i)
                            })
                        }
                    }]), e
                }();
            e.default = g
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            }), e.default = function(t) {
                var e = t.locale;
                return '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap fixed-width">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-grayscale">\n                    <label for="tie-grayscale">' + e.localize("Grayscale") + '</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-invert">\n                    <label for="tie-invert">' + e.localize("Invert") + '</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-sepia">\n                    <label for="tie-sepia">' + e.localize("Sepia") + '</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-sepia2">\n                    <label for="tie-sepia2">' + e.localize("Sepia2") + '</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-blur">\n                    <label for="tie-blur">' + e.localize("Blur") + '</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-sharpen">\n                    <label for="tie-sharpen">' + e.localize("Sharpen") + '</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-emboss">\n                    <label for="tie-emboss">' + e.localize("Emboss") + '</label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">\n                <div class="tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <input type="checkbox" id="tie-remove-white">\n                        <label for="tie-remove-white">' + e.localize("Remove White") + '</label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>' + e.localize("Distance") + '</label>\n                    <div id="tie-removewhite-distance-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-brightness">\n                    <label for="tie-brightness">' + e.localize("Brightness") + '</label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div id="tie-brightness-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-noise">\n                    <label for="tie-noise">' + e.localize("Noise") + '</label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div id="tie-noise-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-pixelate">\n                    <label for="tie-pixelate">' + e.localize("Pixelate") + '</label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div id="tie-pixelate-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <input type="checkbox" id="tie-color-filter">\n                        <label for="tie-color-filter">' + e.localize("Color Filter") + '</label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>' + e.localize("Threshold") + '</label>\n                    <div id="tie-colorfilter-threshole-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="filter-color-item">\n                <div id="tie-filter-tint-color" title="' + e.localize("Tint") + '"></div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-tint">\n                    <label for="tie-tint"></label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div id="tie-filter-multiply-color" title="' + e.localize("Multiply") + '"></div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-multiply">\n                    <label for="tie-multiply"></label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div id="tie-filter-blend-color" title="' + e.localize("Blend") + '"></div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-blend">\n                    <label for="tie-blend"></label>\n                </div>\n            </div>\n        </li>\n    </ul>\n'
            }
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = function() {
                function t(t, e) {
                    for (var i = 0; i < e.length; i++) {
                        var n = e[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                    }
                }
                return function(e, i, n) {
                    return i && t(e.prototype, i), n && t(e, n), e
                }
            }();
            var n = function() {
                function t(e) {
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this._locale = e
                }
                return i(t, [{
                    key: "localize",
                    value: function(t) {
                        return this._locale[t] || t
                    }
                }]), t
            }();
            e.default = n
        }, function(t, e, i) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var n = i(3),
                r = a(i(72)),
                o = a(i(104));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            e.default = {
                getActions: function() {
                    return {
                        main: this._mainAction(),
                        shape: this._shapeAction(),
                        crop: this._cropAction(),
                        flip: this._flipAction(),
                        rotate: this._rotateAction(),
                        text: this._textAction(),
                        mask: this._maskAction(),
                        draw: this._drawAction(),
                        icon: this._iconAction(),
                        filter: this._filterAction()
                    }
                },
                _mainAction: function() {
                    var t = this,
                        e = function() {
                            "crop" === t.ui.submenu && (t.stopDrawingMode(), t.ui.changeMenu("crop"))
                        },
                        i = function(e) {
                            return function(e) {
                                "rotate" === t.ui.submenu && t.ui.rotate.setRangeBarAngle("setAngle", e)
                            }(e), e
                        };
                    return (0, n.extend)({
                        initLoadImage: function(i, n) {
                            return t.loadImageFromURL(i, n).then(function(n) {
                                e(), t.ui.initializeImgUrl = i, t.ui.resizeEditor({
                                    imageSize: n
                                }), t.clearUndoStack()
                            })
                        },
                        undo: function() {
                            t.isEmptyUndoStack() || (e(), t.undo().then(i))
                        },
                        redo: function() {
                            t.isEmptyRedoStack() || (e(), t.redo().then(i))
                        },
                        reset: function() {
                            e(), t.loadImageFromURL(t.ui.initializeImgUrl, "resetImage").then(function(i) {
                                e(), t.ui.resizeEditor({
                                    imageSize: i
                                }), t.clearUndoStack()
                            })
                        },
                        delete: function() {
                            t.ui.changeDeleteButtonEnabled(!1), e(), t.removeActiveObject(), t.activeObjectId = null
                        },
                        deleteAll: function() {
                            e(), t.clearObjects(), t.ui.changeDeleteButtonEnabled(!1), t.ui.changeDeleteAllButtonEnabled(!1)
                        },
                        load: function(i) {
                            r.default.isSupportFileApi() || alert("This browser does not support file-api"), t.ui.initializeImgUrl = URL.createObjectURL(i), t.loadImageFromFile(i).then(function(i) {
                                e(), t.clearUndoStack(), t.ui.activeMenuEvent(), t.ui.resizeEditor({
                                    imageSize: i
                                })
                            }).catch(function(t) {
                                return Promise.reject(t)
                            })
                        },
                        download: function() {
                            var e = t.toDataURL(),
                                i = t.getImageName(),
                                n = void 0,
                                o = void 0;
                            r.default.isSupportFileApi() && window.saveAs ? (o = (n = r.default.base64ToBlob(e)).type.split("/")[1], i.split(".").pop() !== o && (i += "." + o), saveAs(n, i)) : window.open().document.body.innerHTML = "<img src='" + e + "'>"
                        }
                    }, this._commonAction())
                },
                _iconAction: function() {
                    var t = this,
                        e = void 0,
                        i = void 0,
                        r = void 0,
                        a = void 0,
                        s = void 0,
                        l = void 0,
                        c = void 0;
                    this.on({
                        iconCreateResize: function(e) {
                            var i = e.moveOriginPointer,
                                n = (i.x - r) / s,
                                o = (i.y - a) / l;
                            t.setObjectPropertiesQuietly(c, {
                                scaleX: Math.abs(2 * n),
                                scaleY: Math.abs(2 * o)
                            })
                        },
                        iconCreateEnd: function() {
                            t.ui.icon.clearIconType(), t.changeSelectableAll(!0)
                        }
                    });
                    return (0, n.extend)({
                        changeColor: function(e) {
                            t.activeObjectId && t.changeIconColor(t.activeObjectId, e)
                        },
                        addIcon: function(n, o) {
                            e = n, i = o, t.changeCursor("crosshair"), t.off("mousedown"), t.once("mousedown", function(n, o) {
                                r = o.x, a = o.y, t.addIcon(e, {
                                    left: o.x,
                                    top: o.y,
                                    fill: i
                                }).then(function(t) {
                                    c = t.id, s = t.width, l = t.height
                                })
                            }.bind(t))
                        },
                        cancelAddIcon: function() {
                            t.off("mousedown"), t.ui.icon.clearIconType(), t.changeSelectableAll(!0), t.changeCursor("default")
                        },
                        registDefalutIcons: function(e, i) {
                            var n = {};
                            n[e] = i, t.registerIcons(n)
                        },
                        registCustomIcon: function(e, i) {
                            (new o.default).imageToSVG(e, function(e) {
                                var n = e.match(/path[^>]*d="([^"]*)"/)[1],
                                    r = {};
                                r[i.name] = n, t.registerIcons(r), t.addIcon(i.name, {
                                    left: 100,
                                    top: 100
                                })
                            }, o.default.tracerDefaultOption())
                        }
                    }, this._commonAction())
                },
                _drawAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        setDrawMode: function(e, i) {
                            t.stopDrawingMode(), "free" === e ? t.startDrawingMode("FREE_DRAWING", i) : t.startDrawingMode("LINE_DRAWING", i)
                        },
                        setColor: function(e) {
                            t.setBrush({
                                color: e
                            })
                        }
                    }, this._commonAction())
                },
                _maskAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        loadImageFromURL: function(e, i) {
                            return t.loadImageFromURL(t.toDataURL(), "FilterImage").then(function() {
                                t.addImageObject(e).then(function() {
                                    URL.revokeObjectURL(i)
                                })
                            })
                        },
                        applyFilter: function() {
                            t.applyFilter("mask", {
                                maskObjId: t.activeObjectId
                            })
                        }
                    }, this._commonAction())
                },
                _textAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        changeTextStyle: function(e) {
                            t.activeObjectId && t.changeTextStyle(t.activeObjectId, e)
                        }
                    }, this._commonAction())
                },
                _rotateAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        rotate: function(e, i) {
                            t.rotate(e, i), t.ui.resizeEditor(), t.ui.rotate.setRangeBarAngle("rotate", e)
                        },
                        setAngle: function(e, i) {
                            t.setAngle(e, i), t.ui.resizeEditor(), t.ui.rotate.setRangeBarAngle("setAngle", e)
                        }
                    }, this._commonAction())
                },
                _shapeAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        changeShape: function(e) {
                            t.activeObjectId && t.changeShape(t.activeObjectId, e)
                        },
                        setDrawingShape: function(e) {
                            t.setDrawingShape(e)
                        }
                    }, this._commonAction())
                },
                _cropAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        crop: function() {
                            var e = t.getCropzoneRect();
                            e && t.crop(e).then(function() {
                                t.stopDrawingMode(), t.ui.resizeEditor(), t.ui.changeMenu("crop")
                            }).catch(function(t) {
                                return Promise.reject(t)
                            })
                        },
                        cancel: function() {
                            t.stopDrawingMode(), t.ui.changeMenu("crop")
                        },
                        preset: function(e) {
                            switch (e) {
                                case "preset-square":
                                    t.setCropzoneRect(1);
                                    break;
                                case "preset-3-2":
                                    t.setCropzoneRect(1.5);
                                    break;
                                case "preset-4-3":
                                    t.setCropzoneRect(4 / 3);
                                    break;
                                case "preset-5-4":
                                    t.setCropzoneRect(5 / 4);
                                    break;
                                case "preset-7-5":
                                    t.setCropzoneRect(1.4);
                                    break;
                                case "preset-16-9":
                                    t.setCropzoneRect(16 / 9);
                                    break;
                                default:
                                    t.setCropzoneRect(), t.ui.crop.changeApplyButtonStatus(!1)
                            }
                        }
                    }, this._commonAction())
                },
                _flipAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        flip: function(e) {
                            return t[e]()
                        }
                    }, this._commonAction())
                },
                _filterAction: function() {
                    var t = this;
                    return (0, n.extend)({
                        applyFilter: function(e, i, n) {
                            e ? t.applyFilter(i, n) : t.hasFilter(i) && t.removeFilter(i)
                        }
                    }, this._commonAction())
                },
                setReAction: function() {
                    var t = this;
                    this.on({
                        undoStackChanged: function(e) {
                            e ? (t.ui.changeUndoButtonStatus(!0), t.ui.changeResetButtonStatus(!0)) : (t.ui.changeUndoButtonStatus(!1), t.ui.changeResetButtonStatus(!1)), t.ui.resizeEditor()
                        },
                        redoStackChanged: function(e) {
                            e ? t.ui.changeRedoButtonStatus(!0) : t.ui.changeRedoButtonStatus(!1), t.ui.resizeEditor()
                        },
                        objectActivated: function(e) {
                            t.activeObjectId = e.id, t.ui.changeDeleteButtonEnabled(!0), t.ui.changeDeleteAllButtonEnabled(!0), "cropzone" === e.type ? t.ui.crop.changeApplyButtonStatus(!0) : ["rect", "circle", "triangle"].indexOf(e.type) > -1 ? (t.stopDrawingMode(), "shape" !== t.ui.submenu && t.ui.changeMenu("shape", !1, !1), t.ui.shape.setShapeStatus({
                                strokeColor: e.stroke,
                                strokeWidth: e.strokeWidth,
                                fillColor: e.fill
                            }), t.ui.shape.setMaxStrokeValue(Math.min(e.width, e.height))) : "path" === e.type || "line" === e.type ? "draw" !== t.ui.submenu && (t.ui.changeMenu("draw", !1, !1), t.ui.draw.changeStandbyMode()) : ["i-text", "text"].indexOf(e.type) > -1 ? "text" !== t.ui.submenu && t.ui.changeMenu("text", !1, !1) : "icon" === e.type && (t.stopDrawingMode(), "icon" !== t.ui.submenu && t.ui.changeMenu("icon", !1, !1), t.ui.icon.setIconPickerColor(e.fill))
                        },
                        addText: function(e) {
                            t.addText("Double Click", {
                                position: e.originPosition,
                                styles: {
                                    fill: t.ui.text.textColor,
                                    fontSize: r.default.toInteger(t.ui.text.fontSize),
                                    fontFamily: "Noto Sans"
                                }
                            }).then(function() {
                                t.changeCursor("default")
                            })
                        },
                        addObjectAfter: function(e) {
                            ["rect", "circle", "triangle"].indexOf(e.type) > -1 && (t.ui.shape.setMaxStrokeValue(Math.min(e.width, e.height)), t.ui.shape.changeStandbyMode())
                        },
                        objectScaled: function(e) {
                            if (["i-text", "text"].indexOf(e.type) > -1) t.ui.text.fontSize = r.default.toInteger(e.fontSize);
                            else if (["rect", "circle", "triangle"].indexOf(e.type) >= 0) {
                                var i = e.width,
                                    n = e.height,
                                    o = t.ui.shape.getStrokeValue();
                                i < o && t.ui.shape.setStrokeValue(i), n < o && t.ui.shape.setStrokeValue(n)
                            }
                        },
                        selectionCleared: function() {
                            t.activeObjectId = null, "text" === t.ui.submenu ? t.changeCursor("text") : "draw" !== t.ui.submenu && "crop" !== t.ui.submenu && t.stopDrawingMode()
                        }
                    })
                },
                _commonAction: function() {
                    var t = this;
                    return {
                        modeChange: function(e) {
                            switch (e) {
                                case "text":
                                    t._changeActivateMode("TEXT");
                                    break;
                                case "crop":
                                    t.startDrawingMode("CROPPER");
                                    break;
                                case "shape":
                                    t._changeActivateMode("SHAPE"), t.setDrawingShape(t.ui.shape.type, t.ui.shape.options)
                            }
                        },
                        deactivateAll: this.deactivateAll.bind(this),
                        changeSelectableAll: this.changeSelectableAll.bind(this),
                        discardSelection: this.discardSelection.bind(this),
                        stopDrawingMode: this.stopDrawingMode.bind(this)
                    }
                },
                mixin: function(t) {
                    (0, n.extend)(t.prototype, this)
                }
            }
        }, function(t, e) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = function() {
                function t(t, e) {
                    for (var i = 0; i < e.length; i++) {
                        var n = e[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                    }
                }
                return function(e, i, n) {
                    return i && t(e.prototype, i), n && t(e, n), e
                }
            }();
            var n = function() {
                function t() {
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this.versionnumber = "1.2.4", this.optionpresets = {
                        default: {
                            corsenabled: !1,
                            ltres: 1,
                            qtres: 1,
                            pathomit: 8,
                            rightangleenhance: !0,
                            colorsampling: 2,
                            numberofcolors: 16,
                            mincolorratio: 0,
                            colorquantcycles: 3,
                            layering: 0,
                            strokewidth: 1,
                            linefilter: !1,
                            scale: 1,
                            roundcoords: 1,
                            viewbox: !1,
                            desc: !1,
                            lcpr: 0,
                            qcpr: 0,
                            blurradius: 0,
                            blurdelta: 20
                        },
                        posterized1: {
                            colorsampling: 0,
                            numberofcolors: 2
                        },
                        posterized2: {
                            numberofcolors: 4,
                            blurradius: 5
                        },
                        curvy: {
                            ltres: .01,
                            linefilter: !0,
                            rightangleenhance: !1
                        },
                        sharp: {
                            qtres: .01,
                            linefilter: !1
                        },
                        detailed: {
                            pathomit: 0,
                            roundcoords: 2,
                            ltres: .5,
                            qtres: .5,
                            numberofcolors: 64
                        },
                        smoothed: {
                            blurradius: 5,
                            blurdelta: 64
                        },
                        grayscale: {
                            colorsampling: 0,
                            colorquantcycles: 1,
                            numberofcolors: 7
                        },
                        fixedpalette: {
                            colorsampling: 0,
                            colorquantcycles: 1,
                            numberofcolors: 27
                        },
                        randomsampling1: {
                            colorsampling: 1,
                            numberofcolors: 8
                        },
                        randomsampling2: {
                            colorsampling: 1,
                            numberofcolors: 64
                        },
                        artistic1: {
                            colorsampling: 0,
                            colorquantcycles: 1,
                            pathomit: 0,
                            blurradius: 5,
                            blurdelta: 64,
                            ltres: .01,
                            linefilter: !0,
                            numberofcolors: 16,
                            strokewidth: 2
                        },
                        artistic2: {
                            qtres: .01,
                            colorsampling: 0,
                            colorquantcycles: 1,
                            numberofcolors: 4,
                            strokewidth: 0
                        },
                        artistic3: {
                            qtres: 10,
                            ltres: 10,
                            numberofcolors: 8
                        },
                        artistic4: {
                            qtres: 10,
                            ltres: 10,
                            numberofcolors: 64,
                            blurradius: 5,
                            blurdelta: 256,
                            strokewidth: 2
                        },
                        posterized3: {
                            ltres: 1,
                            qtres: 1,
                            pathomit: 20,
                            rightangleenhance: !0,
                            colorsampling: 0,
                            numberofcolors: 3,
                            mincolorratio: 0,
                            colorquantcycles: 3,
                            blurradius: 3,
                            blurdelta: 20,
                            strokewidth: 0,
                            linefilter: !1,
                            roundcoords: 1,
                            pal: [{
                                r: 0,
                                g: 0,
                                b: 100,
                                a: 255
                            }, {
                                r: 255,
                                g: 255,
                                b: 255,
                                a: 255
                            }]
                        }
                    }, this.pathscan_combined_lookup = [
                        [
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [0, 1, 0, -1],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [0, 2, -1, 0]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [0, 1, 0, -1],
                            [0, 0, 1, 0]
                        ],
                        [
                            [0, 0, 1, 0],
                            [-1, -1, -1, -1],
                            [0, 2, -1, 0],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [0, 0, 1, 0],
                            [0, 3, 0, 1],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [13, 3, 0, 1],
                            [13, 2, -1, 0],
                            [7, 1, 0, -1],
                            [7, 0, 1, 0]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [0, 1, 0, -1],
                            [-1, -1, -1, -1],
                            [0, 3, 0, 1]
                        ],
                        [
                            [0, 3, 0, 1],
                            [0, 2, -1, 0],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [0, 3, 0, 1],
                            [0, 2, -1, 0],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [0, 1, 0, -1],
                            [-1, -1, -1, -1],
                            [0, 3, 0, 1]
                        ],
                        [
                            [11, 1, 0, -1],
                            [14, 0, 1, 0],
                            [14, 3, 0, 1],
                            [11, 2, -1, 0]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [0, 0, 1, 0],
                            [0, 3, 0, 1],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [0, 0, 1, 0],
                            [-1, -1, -1, -1],
                            [0, 2, -1, 0],
                            [-1, -1, -1, -1]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [0, 1, 0, -1],
                            [0, 0, 1, 0]
                        ],
                        [
                            [0, 1, 0, -1],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [0, 2, -1, 0]
                        ],
                        [
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1],
                            [-1, -1, -1, -1]
                        ]
                    ], this.gks = [
                        [.27901, .44198, .27901],
                        [.135336, .228569, .272192, .228569, .135336],
                        [.086776, .136394, .178908, .195843, .178908, .136394, .086776],
                        [.063327, .093095, .122589, .144599, .152781, .144599, .122589, .093095, .063327],
                        [.049692, .069304, .089767, .107988, .120651, .125194, .120651, .107988, .089767, .069304, .049692]
                    ], this.specpalette = [{
                        r: 0,
                        g: 0,
                        b: 0,
                        a: 255
                    }, {
                        r: 128,
                        g: 128,
                        b: 128,
                        a: 255
                    }, {
                        r: 0,
                        g: 0,
                        b: 128,
                        a: 255
                    }, {
                        r: 64,
                        g: 64,
                        b: 128,
                        a: 255
                    }, {
                        r: 192,
                        g: 192,
                        b: 192,
                        a: 255
                    }, {
                        r: 255,
                        g: 255,
                        b: 255,
                        a: 255
                    }, {
                        r: 128,
                        g: 128,
                        b: 192,
                        a: 255
                    }, {
                        r: 0,
                        g: 0,
                        b: 192,
                        a: 255
                    }, {
                        r: 128,
                        g: 0,
                        b: 0,
                        a: 255
                    }, {
                        r: 128,
                        g: 64,
                        b: 64,
                        a: 255
                    }, {
                        r: 128,
                        g: 0,
                        b: 128,
                        a: 255
                    }, {
                        r: 168,
                        g: 168,
                        b: 168,
                        a: 255
                    }, {
                        r: 192,
                        g: 128,
                        b: 128,
                        a: 255
                    }, {
                        r: 192,
                        g: 0,
                        b: 0,
                        a: 255
                    }, {
                        r: 255,
                        g: 255,
                        b: 255,
                        a: 255
                    }, {
                        r: 0,
                        g: 128,
                        b: 0,
                        a: 255
                    }]
                }
                return i(t, null, [{
                    key: "tracerDefaultOption",
                    value: function() {
                        return {
                            pathomit: 100,
                            ltres: .1,
                            qtres: 1,
                            scale: 1,
                            strokewidth: 5,
                            viewbox: !1,
                            linefilter: !0,
                            desc: !1,
                            rightangleenhance: !1,
                            pal: [{
                                r: 0,
                                g: 0,
                                b: 0,
                                a: 255
                            }, {
                                r: 255,
                                g: 255,
                                b: 255,
                                a: 255
                            }]
                        }
                    }
                }]), i(t, [{
                    key: "imageToSVG",
                    value: function(t, e, i) {
                        var n = this;
                        i = this.checkoptions(i), this.loadImage(t, function(t) {
                            e(n.imagedataToSVG(n.getImgdata(t), i))
                        }, i)
                    }
                }, {
                    key: "imagedataToSVG",
                    value: function(t, e) {
                        e = this.checkoptions(e);
                        var i = this.imagedataToTracedata(t, e);
                        return this.getsvgstring(i, e)
                    }
                }, {
                    key: "imageToTracedata",
                    value: function(t, e, i) {
                        var n = this;
                        i = this.checkoptions(i), this.loadImage(t, function(t) {
                            e(n.imagedataToTracedata(n.getImgdata(t), i))
                        }, i)
                    }
                }, {
                    key: "imagedataToTracedata",
                    value: function(t, e) {
                        e = this.checkoptions(e);
                        var i = this.colorquantization(t, e),
                            n = void 0;
                        if (0 === e.layering) {
                            n = {
                                layers: [],
                                palette: i.palette,
                                width: i.array[0].length - 2,
                                height: i.array.length - 2
                            };
                            for (var r = 0; r < i.palette.length; r += 1) {
                                var o = this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(i, r), e.pathomit), e), e.ltres, e.qtres);
                                n.layers.push(o)
                            }
                        } else {
                            var a = this.layering(i);
                            e.layercontainerid && this.drawLayers(a, this.specpalette, e.scale, e.layercontainerid);
                            var s = this.batchpathscan(a, e.pathomit),
                                l = this.batchinternodes(s, e);
                            n = {
                                layers: this.batchtracelayers(l, e.ltres, e.qtres),
                                palette: i.palette,
                                width: t.width,
                                height: t.height
                            }
                        }
                        return n
                    }
                }, {
                    key: "checkoptions",
                    value: function(t) {
                        "string" == typeof(t = t || {}) && (t = t.toLowerCase(), t = this.optionpresets[t] ? this.optionpresets[t] : {});
                        for (var e = Object.keys(this.optionpresets.default), i = 0; i < e.length; i += 1) t.hasOwnProperty(e[i]) || (t[e[i]] = this.optionpresets.default[e[i]]);
                        return t
                    }
                }, {
                    key: "colorquantization",
                    value: function(t, e) {
                        var i = [],
                            n = 0,
                            r = void 0,
                            o = void 0,
                            a = void 0,
                            s = [],
                            l = t.width * t.height,
                            c = void 0,
                            u = void 0,
                            h = void 0,
                            d = void 0,
                            f = void 0;
                        for (u = 0; u < t.height + 2; u += 1)
                            for (i[u] = [], c = 0; c < t.width + 2; c += 1) i[u][c] = -1;
                        for (f = e.pal ? e.pal : 0 === e.colorsampling ? this.generatepalette(e.numberofcolors) : 1 === e.colorsampling ? this.samplepalette(e.numberofcolors, t) : this.samplepalette2(e.numberofcolors, t), e.blurradius > 0 && (t = this.blur(t, e.blurradius, e.blurdelta)), d = 0; d < e.colorquantcycles; d += 1) {
                            if (d > 0)
                                for (h = 0; h < f.length; h += 1) s[h].n > 0 && (f[h] = {
                                    r: Math.floor(s[h].r / s[h].n),
                                    g: Math.floor(s[h].g / s[h].n),
                                    b: Math.floor(s[h].b / s[h].n),
                                    a: Math.floor(s[h].a / s[h].n)
                                }), s[h].n / l < e.mincolorratio && d < e.colorquantcycles - 1 && (f[h] = {
                                    r: Math.floor(255 * Math.random()),
                                    g: Math.floor(255 * Math.random()),
                                    b: Math.floor(255 * Math.random()),
                                    a: Math.floor(255 * Math.random())
                                });
                            for (c = 0; c < f.length; c += 1) s[c] = {
                                r: 0,
                                g: 0,
                                b: 0,
                                a: 0,
                                n: 0
                            };
                            for (u = 0; u < t.height; u += 1)
                                for (c = 0; c < t.width; c += 1) {
                                    for (n = 4 * (u * t.width + c), a = 0, o = 1024, h = 0; h < f.length; h += 1)(r = Math.abs(f[h].r - t.data[n]) + Math.abs(f[h].g - t.data[n + 1]) + Math.abs(f[h].b - t.data[n + 2]) + Math.abs(f[h].a - t.data[n + 3])) < o && (o = r, a = h);
                                    s[a].r += t.data[n], s[a].g += t.data[n + 1], s[a].b += t.data[n + 2], s[a].a += t.data[n + 3], s[a].n += 1, i[u + 1][c + 1] = a
                                }
                        }
                        return {
                            array: i,
                            palette: f
                        }
                    }
                }, {
                    key: "samplepalette",
                    value: function(t, e) {
                        for (var i = void 0, n = [], r = 0; r < t; r += 1) i = 4 * Math.floor(Math.random() * e.data.length / 4), n.push({
                            r: e.data[i],
                            g: e.data[i + 1],
                            b: e.data[i + 2],
                            a: e.data[i + 3]
                        });
                        return n
                    }
                }, {
                    key: "samplepalette2",
                    value: function(t, e) {
                        for (var i = void 0, n = [], r = Math.ceil(Math.sqrt(t)), o = Math.ceil(t / r), a = e.width / (r + 1), s = e.height / (o + 1), l = 0; l < o; l += 1)
                            for (var c = 0; c < r && n.length !== t; c += 1) i = 4 * Math.floor((l + 1) * s * e.width + (c + 1) * a), n.push({
                                r: e.data[i],
                                g: e.data[i + 1],
                                b: e.data[i + 2],
                                a: e.data[i + 3]
                            });
                        return n
                    }
                }, {
                    key: "generatepalette",
                    value: function(t) {
                        var e = [],
                            i = void 0,
                            n = void 0,
                            r = void 0;
                        if (t < 8)
                            for (var o = Math.floor(255 / (t - 1)), a = 0; a < t; a += 1) e.push({
                                r: a * o,
                                g: a * o,
                                b: a * o,
                                a: 255
                            });
                        else {
                            var s = Math.floor(Math.pow(t, 1 / 3)),
                                l = Math.floor(255 / (s - 1)),
                                c = t - s * s * s;
                            for (i = 0; i < s; i += 1)
                                for (n = 0; n < s; n += 1)
                                    for (r = 0; r < s; r += 1) e.push({
                                        r: i * l,
                                        g: n * l,
                                        b: r * l,
                                        a: 255
                                    });
                            for (i = 0; i < c; i += 1) e.push({
                                r: Math.floor(255 * Math.random()),
                                g: Math.floor(255 * Math.random()),
                                b: Math.floor(255 * Math.random()),
                                a: Math.floor(255 * Math.random())
                            })
                        }
                        return e
                    }
                }, {
                    key: "layering",
                    value: function(t) {
                        var e = [],
                            i = 0,
                            n = t.array.length,
                            r = t.array[0].length,
                            o = void 0,
                            a = void 0,
                            s = void 0,
                            l = void 0,
                            c = void 0,
                            u = void 0,
                            h = void 0,
                            d = void 0,
                            f = void 0,
                            p = void 0,
                            g = void 0;
                        for (g = 0; g < t.palette.length; g += 1)
                            for (e[g] = [], p = 0; p < n; p += 1)
                                for (e[g][p] = [], f = 0; f < r; f += 1) e[g][p][f] = 0;
                        for (p = 1; p < n - 1; p += 1)
                            for (f = 1; f < r - 1; f += 1) i = t.array[p][f], o = t.array[p - 1][f - 1] === i ? 1 : 0, a = t.array[p - 1][f] === i ? 1 : 0, s = t.array[p - 1][f + 1] === i ? 1 : 0, l = t.array[p][f - 1] === i ? 1 : 0, c = t.array[p][f + 1] === i ? 1 : 0, u = t.array[p + 1][f - 1] === i ? 1 : 0, h = t.array[p + 1][f] === i ? 1 : 0, d = t.array[p + 1][f + 1] === i ? 1 : 0, e[i][p + 1][f + 1] = 1 + 2 * c + 4 * d + 8 * h, l || (e[i][p + 1][f] = 2 + 4 * h + 8 * u), a || (e[i][p][f + 1] = 0 + 2 * s + 4 * c + 8), o || (e[i][p][f] = 0 + 2 * a + 4 + 8 * l);
                        return e
                    }
                }, {
                    key: "layeringstep",
                    value: function(t, e) {
                        var i = [],
                            n = t.array.length,
                            r = t.array[0].length,
                            o = void 0,
                            a = void 0;
                        for (a = 0; a < n; a += 1)
                            for (i[a] = [], o = 0; o < r; o += 1) i[a][o] = 0;
                        for (a = 1; a < n; a += 1)
                            for (o = 1; o < r; o += 1) i[a][o] = (t.array[a - 1][o - 1] === e ? 1 : 0) + (t.array[a - 1][o] === e ? 2 : 0) + (t.array[a][o - 1] === e ? 8 : 0) + (t.array[a][o] === e ? 4 : 0);
                        return i
                    }
                }, {
                    key: "pathscan",
                    value: function(t, e) {
                        for (var i = [], n = 0, r = 0, o = 0, a = 0, s = t[0].length, l = t.length, c = 0, u = !0, h = !1, d = void 0, f = 0; f < l; f += 1)
                            for (var p = 0; p < s; p += 1)
                                if (4 === t[f][p] || 11 === t[f][p])
                                    for (o = p, a = f, i[n] = {}, i[n].points = [], i[n].boundingbox = [o, a, o, a], i[n].holechildren = [], u = !1, r = 0, h = 11 === t[f][p], c = 1; !u;) {
                                        if (i[n].points[r] = {}, i[n].points[r].x = o - 1, i[n].points[r].y = a - 1, i[n].points[r].t = t[a][o], o - 1 < i[n].boundingbox[0] && (i[n].boundingbox[0] = o - 1), o - 1 > i[n].boundingbox[2] && (i[n].boundingbox[2] = o - 1), a - 1 < i[n].boundingbox[1] && (i[n].boundingbox[1] = a - 1), a - 1 > i[n].boundingbox[3] && (i[n].boundingbox[3] = a - 1), d = this.pathscan_combined_lookup[t[a][o]][c], t[a][o] = d[0], c = d[1], o += d[2], a += d[3], o - 1 === i[n].points[0].x && a - 1 === i[n].points[0].y)
                                            if (u = !0, i[n].points.length < e) i.pop();
                                            else {
                                                if (i[n].isholepath = !!h, h) {
                                                    for (var g = 0, m = [-1, -1, s + 1, l + 1], v = 0; v < n; v++) !i[v].isholepath && this.boundingboxincludes(i[v].boundingbox, i[n].boundingbox) && this.boundingboxincludes(m, i[v].boundingbox) && (g = v, m = i[v].boundingbox);
                                                    i[g].holechildren.push(n)
                                                }
                                                n += 1
                                            }
                                        r += 1
                                    }
                                return i
                    }
                }, {
                    key: "boundingboxincludes",
                    value: function(t, e) {
                        return t[0] < e[0] && t[1] < e[1] && t[2] > e[2] && t[3] > e[3]
                    }
                }, {
                    key: "batchpathscan",
                    value: function(t, e) {
                        var i = [];
                        for (var n in t) t.hasOwnProperty(n) && (i[n] = this.pathscan(t[n], e));
                        return i
                    }
                }, {
                    key: "internodes",
                    value: function(t, e) {
                        var i = [],
                            n = 0,
                            r = 0,
                            o = 0,
                            a = 0,
                            s = 0,
                            l = void 0,
                            c = void 0;
                        for (l = 0; l < t.length; l += 1)
                            for (i[l] = {}, i[l].points = [], i[l].boundingbox = t[l].boundingbox, i[l].holechildren = t[l].holechildren, i[l].isholepath = t[l].isholepath, n = t[l].points.length, c = 0; c < n; c += 1) r = (c + 1) % n, o = (c + 2) % n, a = (c - 1 + n) % n, s = (c - 2 + n) % n, e.rightangleenhance && this.testrightangle(t[l], s, a, c, r, o) && (i[l].points.length > 0 && (i[l].points[i[l].points.length - 1].linesegment = this.getdirection(i[l].points[i[l].points.length - 1].x, i[l].points[i[l].points.length - 1].y, t[l].points[c].x, t[l].points[c].y)), i[l].points.push({
                                x: t[l].points[c].x,
                                y: t[l].points[c].y,
                                linesegment: this.getdirection(t[l].points[c].x, t[l].points[c].y, (t[l].points[c].x + t[l].points[r].x) / 2, (t[l].points[c].y + t[l].points[r].y) / 2)
                            })), i[l].points.push({
                                x: (t[l].points[c].x + t[l].points[r].x) / 2,
                                y: (t[l].points[c].y + t[l].points[r].y) / 2,
                                linesegment: this.getdirection((t[l].points[c].x + t[l].points[r].x) / 2, (t[l].points[c].y + t[l].points[r].y) / 2, (t[l].points[r].x + t[l].points[o].x) / 2, (t[l].points[r].y + t[l].points[o].y) / 2)
                            });
                        return i
                    }
                }, {
                    key: "testrightangle",
                    value: function(t, e, i, n, r, o) {
                        return t.points[n].x === t.points[e].x && t.points[n].x === t.points[i].x && t.points[n].y === t.points[r].y && t.points[n].y === t.points[o].y || t.points[n].y === t.points[e].y && t.points[n].y === t.points[i].y && t.points[n].x === t.points[r].x && t.points[n].x === t.points[o].x
                    }
                }, {
                    key: "getdirection",
                    value: function(t, e, i, n) {
                        return t < i ? e < n ? 1 : e > n ? 7 : 0 : t > i ? e < n ? 3 : e > n ? 5 : 4 : e < n ? 2 : e > n ? 6 : 8
                    }
                }, {
                    key: "batchinternodes",
                    value: function(t, e) {
                        var i = [];
                        for (var n in t) t.hasOwnProperty(n) && (i[n] = this.internodes(t[n], e));
                        return i
                    }
                }, {
                    key: "tracepath",
                    value: function(t, e, i) {
                        var n = 0,
                            r = void 0,
                            o = void 0,
                            a = void 0,
                            s = {
                                segments: []
                            };
                        for (s.boundingbox = t.boundingbox, s.holechildren = t.holechildren, s.isholepath = t.isholepath; n < t.points.length;) {
                            for (r = t.points[n].linesegment, o = -1, a = n + 1;
                                (t.points[a].linesegment === r || t.points[a].linesegment === o || -1 === o) && a < t.points.length - 1;) t.points[a].linesegment !== r && -1 === o && (o = t.points[a].linesegment), a += 1;
                            a === t.points.length - 1 && (a = 0), s.segments = s.segments.concat(this.fitseq(t, e, i, n, a)), n = a > 0 ? a : t.points.length
                        }
                        return s
                    }
                }, {
                    key: "fitseq",
                    value: function(t, e, i, n, r) {
                        if (r > t.points.length || r < 0) return [];
                        var o = n,
                            a = 0,
                            s = !0,
                            l = void 0,
                            c = void 0,
                            u = void 0,
                            h = r - n;
                        h < 0 && (h += t.points.length);
                        for (var d = (t.points[r].x - t.points[n].x) / h, f = (t.points[r].y - t.points[n].y) / h, p = (n + 1) % t.points.length, g = void 0; p != r;)(g = p - n) < 0 && (g += t.points.length), l = t.points[n].x + d * g, c = t.points[n].y + f * g, (u = (t.points[p].x - l) * (t.points[p].x - l) + (t.points[p].y - c) * (t.points[p].y - c)) > e && (s = !1), u > a && (o = p, a = u), p = (p + 1) % t.points.length;
                        if (s) return [{
                            type: "L",
                            x1: t.points[n].x,
                            y1: t.points[n].y,
                            x2: t.points[r].x,
                            y2: t.points[r].y
                        }];
                        var m = o;
                        s = !0, a = 0;
                        var v = (m - n) / h,
                            b = (1 - v) * (1 - v),
                            y = 2 * (1 - v) * v,
                            _ = v * v,
                            x = (b * t.points[n].x + _ * t.points[r].x - t.points[m].x) / -y,
                            w = (b * t.points[n].y + _ * t.points[r].y - t.points[m].y) / -y;
                        for (p = n + 1; p != r;) y = 2 * (1 - (v = (p - n) / h)) * v, _ = v * v, l = (b = (1 - v) * (1 - v)) * t.points[n].x + y * x + _ * t.points[r].x, c = b * t.points[n].y + y * w + _ * t.points[r].y, (u = (t.points[p].x - l) * (t.points[p].x - l) + (t.points[p].y - c) * (t.points[p].y - c)) > i && (s = !1), u > a && (o = p, a = u), p = (p + 1) % t.points.length;
                        if (s) return [{
                            type: "Q",
                            x1: t.points[n].x,
                            y1: t.points[n].y,
                            x2: x,
                            y2: w,
                            x3: t.points[r].x,
                            y3: t.points[r].y
                        }];
                        var C = m;
                        return this.fitseq(t, e, i, n, C).concat(this.fitseq(t, e, i, C, r))
                    }
                }, {
                    key: "batchtracepaths",
                    value: function(t, e, i) {
                        var n = [];
                        for (var r in t) t.hasOwnProperty(r) && n.push(this.tracepath(t[r], e, i));
                        return n
                    }
                }, {
                    key: "batchtracelayers",
                    value: function(t, e, i) {
                        var n = [];
                        for (var r in t) t.hasOwnProperty(r) && (n[r] = this.batchtracepaths(t[r], e, i));
                        return n
                    }
                }, {
                    key: "roundtodec",
                    value: function(t, e) {
                        return Number(t.toFixed(e))
                    }
                }, {
                    key: "svgpathstring",
                    value: function(t, e, i, n) {
                        var r = t.layers[e],
                            o = r[i],
                            a = "",
                            s = void 0;
                        if (n.linefilter && o.segments.length < 3) return a;
                        if (a = "<path " + (n.desc ? 'desc="l ' + e + " p " + i + '" ' : "") + this.tosvgcolorstr(t.palette[e], n) + 'd="', -1 === n.roundcoords) {
                            for (a += "M " + o.segments[0].x1 * n.scale + " " + o.segments[0].y1 * n.scale + " ", s = 0; s < o.segments.length; s++) a += o.segments[s].type + " " + o.segments[s].x2 * n.scale + " " + o.segments[s].y2 * n.scale + " ", o.segments[s].hasOwnProperty("x3") && (a += o.segments[s].x3 * n.scale + " " + o.segments[s].y3 * n.scale + " ");
                            a += "Z "
                        } else {
                            for (a += "M " + this.roundtodec(o.segments[0].x1 * n.scale, n.roundcoords) + " " + this.roundtodec(o.segments[0].y1 * n.scale, n.roundcoords) + " ", s = 0; s < o.segments.length; s++) a += o.segments[s].type + " " + this.roundtodec(o.segments[s].x2 * n.scale, n.roundcoords) + " " + this.roundtodec(o.segments[s].y2 * n.scale, n.roundcoords) + " ", o.segments[s].hasOwnProperty("x3") && (a += this.roundtodec(o.segments[s].x3 * n.scale, n.roundcoords) + " " + this.roundtodec(o.segments[s].y3 * n.scale, n.roundcoords) + " ");
                            a += "Z "
                        }
                        for (var l = 0; l < o.holechildren.length; l++) {
                            var c = r[o.holechildren[l]];
                            if (-1 === n.roundcoords)
                                for (c.segments[c.segments.length - 1].hasOwnProperty("x3") ? a += "M " + c.segments[c.segments.length - 1].x3 * n.scale + " " + c.segments[c.segments.length - 1].y3 * n.scale + " " : a += "M " + c.segments[c.segments.length - 1].x2 * n.scale + " " + c.segments[c.segments.length - 1].y2 * n.scale + " ", s = c.segments.length - 1; s >= 0; s--) a += c.segments[s].type + " ", c.segments[s].hasOwnProperty("x3") && (a += c.segments[s].x2 * n.scale + " " + c.segments[s].y2 * n.scale + " "), a += c.segments[s].x1 * n.scale + " " + c.segments[s].y1 * n.scale + " ";
                            else
                                for (c.segments[c.segments.length - 1].hasOwnProperty("x3") ? a += "M " + this.roundtodec(c.segments[c.segments.length - 1].x3 * n.scale) + " " + this.roundtodec(c.segments[c.segments.length - 1].y3 * n.scale) + " " : a += "M " + this.roundtodec(c.segments[c.segments.length - 1].x2 * n.scale) + " " + this.roundtodec(c.segments[c.segments.length - 1].y2 * n.scale) + " ", s = c.segments.length - 1; s >= 0; s--) a += c.segments[s].type + " ", c.segments[s].hasOwnProperty("x3") && (a += this.roundtodec(c.segments[s].x2 * n.scale) + " " + this.roundtodec(c.segments[s].y2 * n.scale) + " "), a += this.roundtodec(c.segments[s].x1 * n.scale) + " " + this.roundtodec(c.segments[s].y1 * n.scale) + " ";
                            a += "Z "
                        }
                        if (a += '" />', n.lcpr || n.qcpr) {
                            for (s = 0; s < o.segments.length; s++) o.segments[s].hasOwnProperty("x3") && n.qcpr && (a += '<circle cx="' + o.segments[s].x2 * n.scale + '" cy="' + o.segments[s].y2 * n.scale + '" r="' + n.qcpr + '" fill="cyan" stroke-width="' + .2 * n.qcpr + '" stroke="black" />', a += '<circle cx="' + o.segments[s].x3 * n.scale + '" cy="' + o.segments[s].y3 * n.scale + '" r="' + n.qcpr + '" fill="white" stroke-width="' + .2 * n.qcpr + '" stroke="black" />', a += '<line x1="' + o.segments[s].x1 * n.scale + '" y1="' + o.segments[s].y1 * n.scale + '" x2="' + o.segments[s].x2 * n.scale + '" y2="' + o.segments[s].y2 * n.scale + '" stroke-width="' + .2 * n.qcpr + '" stroke="cyan" />', a += '<line x1="' + o.segments[s].x2 * n.scale + '" y1="' + o.segments[s].y2 * n.scale + '" x2="' + o.segments[s].x3 * n.scale + '" y2="' + o.segments[s].y3 * n.scale + '" stroke-width="' + .2 * n.qcpr + '" stroke="cyan" />'), !o.segments[s].hasOwnProperty("x3") && n.lcpr && (a += '<circle cx="' + o.segments[s].x2 * n.scale + '" cy="' + o.segments[s].y2 * n.scale + '" r="' + n.lcpr + '" fill="white" stroke-width="' + .2 * n.lcpr + '" stroke="black" />');
                            for (l = 0; l < o.holechildren.length; l++) {
                                c = r[o.holechildren[l]];
                                for (s = 0; s < c.segments.length; s++) c.segments[s].hasOwnProperty("x3") && n.qcpr && (a += '<circle cx="' + c.segments[s].x2 * n.scale + '" cy="' + c.segments[s].y2 * n.scale + '" r="' + n.qcpr + '" fill="cyan" stroke-width="' + .2 * n.qcpr + '" stroke="black" />', a += '<circle cx="' + c.segments[s].x3 * n.scale + '" cy="' + c.segments[s].y3 * n.scale + '" r="' + n.qcpr + '" fill="white" stroke-width="' + .2 * n.qcpr + '" stroke="black" />', a += '<line x1="' + c.segments[s].x1 * n.scale + '" y1="' + c.segments[s].y1 * n.scale + '" x2="' + c.segments[s].x2 * n.scale + '" y2="' + c.segments[s].y2 * n.scale + '" stroke-width="' + .2 * n.qcpr + '" stroke="cyan" />', a += '<line x1="' + c.segments[s].x2 * n.scale + '" y1="' + c.segments[s].y2 * n.scale + '" x2="' + c.segments[s].x3 * n.scale + '" y2="' + c.segments[s].y3 * n.scale + '" stroke-width="' + .2 * n.qcpr + '" stroke="cyan" />'), !c.segments[s].hasOwnProperty("x3") && n.lcpr && (a += '<circle cx="' + c.segments[s].x2 * n.scale + '" cy="' + c.segments[s].y2 * n.scale + '" r="' + n.lcpr + '" fill="white" stroke-width="' + .2 * n.lcpr + '" stroke="black" />')
                            }
                        }
                        return a
                    }
                }, {
                    key: "getsvgstring",
                    value: function(t, e) {
                        e = this.checkoptions(e);
                        for (var i = t.width * e.scale, n = t.height * e.scale, r = "<svg " + (e.viewbox ? 'viewBox="0 0 ' + i + " " + n + '" ' : 'width="' + i + '" height="' + n + '" ') + 'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ' + this.versionnumber + '" >', o = 0; o < t.layers.length; o += 1)
                            for (var a = 0; a < t.layers[o].length; a += 1) t.layers[o][a].isholepath || (r += this.svgpathstring(t, o, a, e));
                        return r += "</svg>"
                    }
                }, {
                    key: "compareNumbers",
                    value: function(t, e) {
                        return t - e
                    }
                }, {
                    key: "torgbastr",
                    value: function(t) {
                        return "rgba(" + t.r + "," + t.g + "," + t.b + "," + t.a + ")"
                    }
                }, {
                    key: "tosvgcolorstr",
                    value: function(t, e) {
                        return 'fill="rgb(' + t.r + "," + t.g + "," + t.b + ')" stroke="rgb(' + t.r + "," + t.g + "," + t.b + ')" stroke-width="' + e.strokewidth + '" opacity="' + t.a / 255 + '" '
                    }
                }, {
                    key: "appendSVGString",
                    value: function(t, e) {
                        var i = void 0;
                        e ? (i = document.getElementById(e)) || ((i = document.createElement("div")).id = e, document.body.appendChild(i)) : (i = document.createElement("div"), document.body.appendChild(i)), i.innerHTML += t
                    }
                }, {
                    key: "blur",
                    value: function(t, e, i) {
                        var n = void 0,
                            r = void 0,
                            o = void 0,
                            a = void 0,
                            s = void 0,
                            l = void 0,
                            c = void 0,
                            u = void 0,
                            h = void 0,
                            d = {
                                width: t.width,
                                height: t.height,
                                data: []
                            };
                        if ((e = Math.floor(e)) < 1) return t;
                        e > 5 && (e = 5), (i = Math.abs(i)) > 1024 && (i = 1024);
                        var f = this.gks[e - 1];
                        for (r = 0; r < t.height; r++)
                            for (n = 0; n < t.width; n++) {
                                for (s = 0, l = 0, c = 0, u = 0, h = 0, o = -e; o < e + 1; o++) n + o > 0 && n + o < t.width && (a = 4 * (r * t.width + n + o), s += t.data[a] * f[o + e], l += t.data[a + 1] * f[o + e], c += t.data[a + 2] * f[o + e], u += t.data[a + 3] * f[o + e], h += f[o + e]);
                                a = 4 * (r * t.width + n), d.data[a] = Math.floor(s / h), d.data[a + 1] = Math.floor(l / h), d.data[a + 2] = Math.floor(c / h), d.data[a + 3] = Math.floor(u / h)
                            }
                        var p = new Uint8ClampedArray(d.data);
                        for (r = 0; r < t.height; r++)
                            for (n = 0; n < t.width; n++) {
                                for (s = 0, l = 0, c = 0, u = 0, h = 0, o = -e; o < e + 1; o++) r + o > 0 && r + o < t.height && (s += p[a = 4 * ((r + o) * t.width + n)] * f[o + e], l += p[a + 1] * f[o + e], c += p[a + 2] * f[o + e], u += p[a + 3] * f[o + e], h += f[o + e]);
                                a = 4 * (r * t.width + n), d.data[a] = Math.floor(s / h), d.data[a + 1] = Math.floor(l / h), d.data[a + 2] = Math.floor(c / h), d.data[a + 3] = Math.floor(u / h)
                            }
                        for (r = 0; r < t.height; r++)
                            for (n = 0; n < t.width; n++) a = 4 * (r * t.width + n), Math.abs(d.data[a] - t.data[a]) + Math.abs(d.data[a + 1] - t.data[a + 1]) + Math.abs(d.data[a + 2] - t.data[a + 2]) + Math.abs(d.data[a + 3] - t.data[a + 3]) > i && (d.data[a] = t.data[a], d.data[a + 1] = t.data[a + 1], d.data[a + 2] = t.data[a + 2], d.data[a + 3] = t.data[a + 3]);
                        return d
                    }
                }, {
                    key: "loadImage",
                    value: function(t, e, i) {
                        var n = new Image;
                        i && i.corsenabled && (n.crossOrigin = "Anonymous"), n.src = t, n.onload = function() {
                            var t = document.createElement("canvas");
                            t.width = n.width, t.height = n.height, t.getContext("2d").drawImage(n, 0, 0), e(t)
                        }
                    }
                }, {
                    key: "getImgdata",
                    value: function(t) {
                        return t.getContext("2d").getImageData(0, 0, t.width, t.height)
                    }
                }, {
                    key: "drawLayers",
                    value: function(t, e, i, n) {
                        i = i || 1;
                        var r = void 0,
                            o = void 0,
                            a = void 0,
                            s = void 0,
                            l = void 0,
                            c = void 0;
                        for (l in n ? (c = document.getElementById(n)) || ((c = document.createElement("div")).id = n, document.body.appendChild(c)) : (c = document.createElement("div"), document.body.appendChild(c)), t)
                            if (t.hasOwnProperty(l)) {
                                r = t[l][0].length, o = t[l].length;
                                var u = document.createElement("canvas");
                                u.width = r * i, u.height = o * i;
                                var h = u.getContext("2d");
                                for (s = 0; s < o; s += 1)
                                    for (a = 0; a < r; a += 1) h.fillStyle = this.torgbastr(e[t[l][s][a] % e.length]), h.fillRect(a * i, s * i, i, i);
                                c.appendChild(u)
                            }
                    }
                }]), t
            }();
            e.default = n
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = S(i(3)),
                o = S(i(4)),
                a = i(106),
                s = S(i(115)),
                l = S(i(117)),
                c = S(i(119)),
                u = S(i(120)),
                h = S(i(121)),
                d = S(i(122)),
                f = S(i(123)),
                p = S(i(124)),
                g = S(i(125)),
                m = S(i(131)),
                v = S(i(133)),
                b = S(i(135)),
                y = S(i(136)),
                _ = S(i(137)),
                x = S(i(138)),
                w = S(i(73)),
                C = S(i(72));

            function S(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var k = w.default.componentNames,
                O = w.default.eventNames,
                T = w.default.drawingModes,
                E = w.default.fObjectOptions,
                A = r.default.extend,
                P = r.default.stamp,
                M = r.default.isArray,
                j = r.default.isString,
                D = r.default.forEachArray,
                I = r.default.forEachOwnProperties,
                R = r.default.CustomEvents,
                L = 1e3,
                F = 800,
                B = {
                    cssOnly: !0
                },
                z = {
                    backstoreOnly: !0
                },
                N = function() {
                    function t(e) {
                        var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                            n = i.cssMaxWidth,
                            r = i.cssMaxHeight,
                            o = i.useItext,
                            a = void 0 !== o && o,
                            s = i.useDragAddIcon,
                            l = void 0 !== s && s;
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, t), this.canvasImage = null, this.cssMaxWidth = n || L, this.cssMaxHeight = r || F, this.useItext = a, this.useDragAddIcon = l, this.cropSelectionStyle = {}, this.imageName = "", this._objects = {}, this._canvas = null, this._drawingMode = T.NORMAL, this._drawingModeMap = {}, this._componentMap = {}, this._handler = {
                            onMouseDown: this._onMouseDown.bind(this),
                            onObjectAdded: this._onObjectAdded.bind(this),
                            onObjectRemoved: this._onObjectRemoved.bind(this),
                            onObjectMoved: this._onObjectMoved.bind(this),
                            onObjectScaled: this._onObjectScaled.bind(this),
                            onObjectSelected: this._onObjectSelected.bind(this),
                            onPathCreated: this._onPathCreated.bind(this),
                            onSelectionCleared: this._onSelectionCleared.bind(this),
                            onSelectionCreated: this._onSelectionCreated.bind(this)
                        }, this._setObjectCachingToFalse(), this._setCanvasElement(e), this._createDrawingModeInstances(), this._createComponents(), this._attachCanvasEvents()
                    }
                    return n(t, [{
                        key: "destroy",
                        value: function() {
                            var t = this._canvas.wrapperEl;
                            this._canvas.clear(), t.parentNode.removeChild(t)
                        }
                    }, {
                        key: "deactivateAll",
                        value: function() {
                            return this._canvas.discardActiveObject(), this
                        }
                    }, {
                        key: "renderAll",
                        value: function() {
                            return this._canvas.renderAll(), this
                        }
                    }, {
                        key: "add",
                        value: function(t) {
                            var e, i = [];
                            M(t) ? i = t : i.push(t), (e = this._canvas).add.apply(e, i)
                        }
                    }, {
                        key: "contains",
                        value: function(t) {
                            return this._canvas.contains(t)
                        }
                    }, {
                        key: "getObjects",
                        value: function() {
                            return this._canvas.getObjects().slice()
                        }
                    }, {
                        key: "getObject",
                        value: function(t) {
                            return this._objects[t]
                        }
                    }, {
                        key: "remove",
                        value: function(t) {
                            this._canvas.remove(t)
                        }
                    }, {
                        key: "removeAll",
                        value: function(t) {
                            var e = this._canvas,
                                i = e.getObjects().slice();
                            return e.remove.apply(e, this._canvas.getObjects()), t && e.clear(), i
                        }
                    }, {
                        key: "removeObjectById",
                        value: function(t) {
                            var e = [],
                                i = this._canvas,
                                n = this.getObject(t);
                            return n && n.isType("group") && !n.isEmpty() ? (i.discardActiveObject(), n.forEachObject(function(t) {
                                e.push(t), i.remove(t)
                            })) : i.contains(n) && (e.push(n), i.remove(n)), e
                        }
                    }, {
                        key: "getObjectId",
                        value: function(t) {
                            var e = null;
                            for (e in this._objects)
                                if (this._objects.hasOwnProperty(e) && t === this._objects[e]) return e;
                            return null
                        }
                    }, {
                        key: "getActiveObject",
                        value: function() {
                            return this._canvas._activeObject
                        }
                    }, {
                        key: "getActiveObjects",
                        value: function() {
                            var t = this._canvas._activeObject;
                            return t && "activeSelection" === t.type ? t : null
                        }
                    }, {
                        key: "setActiveObject",
                        value: function(t) {
                            this._canvas.setActiveObject(t)
                        }
                    }, {
                        key: "setCropSelectionStyle",
                        value: function(t) {
                            this.cropSelectionStyle = t
                        }
                    }, {
                        key: "getComponent",
                        value: function(t) {
                            return this._componentMap[t]
                        }
                    }, {
                        key: "getDrawingMode",
                        value: function() {
                            return this._drawingMode
                        }
                    }, {
                        key: "startDrawingMode",
                        value: function(t, e) {
                            if (this._isSameDrawingMode(t)) return !0;
                            this.stopDrawingMode();
                            var i = this._getDrawingModeInstance(t);
                            return i && i.start && (i.start(this, e), this._drawingMode = t), !!i
                        }
                    }, {
                        key: "stopDrawingMode",
                        value: function() {
                            if (!this._isSameDrawingMode(T.NORMAL)) {
                                var t = this._getDrawingModeInstance(this.getDrawingMode());
                                t && t.end && t.end(this), this._drawingMode = T.NORMAL
                            }
                        }
                    }, {
                        key: "toDataURL",
                        value: function(t) {
                            return this._canvas && this._canvas.toDataURL(t)
                        }
                    }, {
                        key: "setCanvasImage",
                        value: function(t, e) {
                            e && P(e), this.imageName = t, this.canvasImage = e
                        }
                    }, {
                        key: "setCssMaxDimension",
                        value: function(t) {
                            this.cssMaxWidth = t.width || this.cssMaxWidth, this.cssMaxHeight = t.height || this.cssMaxHeight
                        }
                    }, {
                        key: "adjustCanvasDimension",
                        value: function() {
                            var t = this.canvasImage.scale(1),
                                e = t.getBoundingRect(),
                                i = e.width,
                                n = e.height,
                                r = this._calcMaxDimension(i, n);
                            this.setCanvasCssDimension({
                                width: "100%",
                                height: "100%",
                                "max-width": r.width + "px",
                                "max-height": r.height + "px"
                            }), this.setCanvasBackstoreDimension({
                                width: i,
                                height: n
                            }), this._canvas.centerObject(t)
                        }
                    }, {
                        key: "setCanvasCssDimension",
                        value: function(t) {
                            this._canvas.setDimensions(t, B)
                        }
                    }, {
                        key: "setCanvasBackstoreDimension",
                        value: function(t) {
                            this._canvas.setDimensions(t, z)
                        }
                    }, {
                        key: "setImageProperties",
                        value: function(t, e) {
                            var i = this.canvasImage;
                            i && (i.set(t).setCoords(), e && this._canvas.renderAll())
                        }
                    }, {
                        key: "getCanvasElement",
                        value: function() {
                            return this._canvas.getElement()
                        }
                    }, {
                        key: "getCanvas",
                        value: function() {
                            return this._canvas
                        }
                    }, {
                        key: "getCanvasImage",
                        value: function() {
                            return this.canvasImage
                        }
                    }, {
                        key: "getImageName",
                        value: function() {
                            return this.imageName
                        }
                    }, {
                        key: "addImageObject",
                        value: function(t) {
                            var e = this,
                                i = this._callbackAfterLoadingImageObject.bind(this);
                            return new o.default(function(n) {
                                a.fabric.Image.fromURL(t, function(t) {
                                    i(t), n(e.createObjectProperties(t))
                                }, {
                                    crossOrigin: "Anonymous"
                                })
                            })
                        }
                    }, {
                        key: "getCenter",
                        value: function() {
                            return this._canvas.getCenter()
                        }
                    }, {
                        key: "getCropzoneRect",
                        value: function() {
                            return this.getComponent(k.CROPPER).getCropzoneRect()
                        }
                    }, {
                        key: "setCropzoneRect",
                        value: function(t) {
                            this.getComponent(k.CROPPER).setCropzoneRect(t)
                        }
                    }, {
                        key: "getCroppedImageData",
                        value: function(t) {
                            return this.getComponent(k.CROPPER).getCroppedImageData(t)
                        }
                    }, {
                        key: "setBrush",
                        value: function(t) {
                            var e = this._drawingMode,
                                i = k.FREE_DRAWING;
                            e === T.LINE && (i = T.LINE), this.getComponent(i).setBrush(t)
                        }
                    }, {
                        key: "setDrawingShape",
                        value: function(t, e) {
                            this.getComponent(k.SHAPE).setStates(t, e)
                        }
                    }, {
                        key: "registerPaths",
                        value: function(t) {
                            this.getComponent(k.ICON).registerPaths(t)
                        }
                    }, {
                        key: "changeCursor",
                        value: function(t) {
                            var e = this.getCanvas();
                            e.defaultCursor = t, e.renderAll()
                        }
                    }, {
                        key: "hasFilter",
                        value: function(t) {
                            return this.getComponent(k.FILTER).hasFilter(t)
                        }
                    }, {
                        key: "setSelectionStyle",
                        value: function(t) {
                            A(E.SELECTION_STYLE, t)
                        }
                    }, {
                        key: "setObjectProperties",
                        value: function(t, e) {
                            var i = this.getObject(t),
                                n = A({}, e);
                            return i.set(n), i.setCoords(), this.getCanvas().renderAll(), n
                        }
                    }, {
                        key: "getObjectProperties",
                        value: function(t, e) {
                            var i = this.getObject(t),
                                n = {};
                            return j(e) ? n[e] = i[e] : M(e) ? D(e, function(t) {
                                n[t] = i[t]
                            }) : I(e, function(t, e) {
                                n[e] = i[e]
                            }), n
                        }
                    }, {
                        key: "getObjectPosition",
                        value: function(t, e, i) {
                            var n = this.getObject(t);
                            return n ? n.getPointByOrigin(e, i) : null
                        }
                    }, {
                        key: "setObjectPosition",
                        value: function(t, e) {
                            var i = this.getObject(t),
                                n = e.x,
                                r = e.y,
                                o = e.originX,
                                a = e.originY;
                            if (!i) return !1;
                            var s = i.getPointByOrigin(o, a),
                                l = i.getPointByOrigin("center", "center"),
                                c = l.x - s.x,
                                u = l.y - s.y;
                            return i.set({
                                left: n + c,
                                top: r + u
                            }), i.setCoords(), !0
                        }
                    }, {
                        key: "getCanvasSize",
                        value: function() {
                            var t = this.getCanvasImage();
                            return {
                                width: t ? t.width : 0,
                                height: t ? t.height : 0
                            }
                        }
                    }, {
                        key: "_getDrawingModeInstance",
                        value: function(t) {
                            return this._drawingModeMap[t]
                        }
                    }, {
                        key: "_setObjectCachingToFalse",
                        value: function() {
                            a.fabric.Object.prototype.objectCaching = !1
                        }
                    }, {
                        key: "_setCanvasElement",
                        value: function(t) {
                            var e = void 0,
                                i = void 0;
                            "CANVAS" !== (e = t.nodeType ? t : document.querySelector(t)).nodeName.toUpperCase() && (i = document.createElement("canvas"), e.appendChild(i)), this._canvas = new a.fabric.Canvas(i, {
                                containerClass: "tui-image-editor-canvas-container",
                                enableRetinaScaling: !1
                            })
                        }
                    }, {
                        key: "_createDrawingModeInstances",
                        value: function() {
                            this._register(this._drawingModeMap, new v.default), this._register(this._drawingModeMap, new b.default), this._register(this._drawingModeMap, new y.default), this._register(this._drawingModeMap, new _.default), this._register(this._drawingModeMap, new x.default)
                        }
                    }, {
                        key: "_createComponents",
                        value: function() {
                            this._register(this._componentMap, new s.default(this)), this._register(this._componentMap, new l.default(this)), this._register(this._componentMap, new c.default(this)), this._register(this._componentMap, new u.default(this)), this._register(this._componentMap, new h.default(this)), this._register(this._componentMap, new d.default(this)), this._register(this._componentMap, new f.default(this)), this._register(this._componentMap, new p.default(this)), this._register(this._componentMap, new g.default(this)), this._register(this._componentMap, new m.default(this))
                        }
                    }, {
                        key: "_register",
                        value: function(t, e) {
                            t[e.getName()] = e
                        }
                    }, {
                        key: "_isSameDrawingMode",
                        value: function(t) {
                            return this.getDrawingMode() === t
                        }
                    }, {
                        key: "_calcMaxDimension",
                        value: function(t, e) {
                            var i = this.cssMaxWidth / t,
                                n = this.cssMaxHeight / e,
                                r = Math.min(t, this.cssMaxWidth),
                                o = Math.min(e, this.cssMaxHeight);
                            return i < 1 && i < n ? (r = t * i, o = e * i) : n < 1 && n < i && (r = t * n, o = e * n), {
                                width: Math.floor(r),
                                height: Math.floor(o)
                            }
                        }
                    }, {
                        key: "_callbackAfterLoadingImageObject",
                        value: function(t) {
                            var e = this.getCanvasImage().getCenterPoint();
                            t.set(w.default.fObjectOptions.SELECTION_STYLE), t.set({
                                left: e.x,
                                top: e.y,
                                crossOrigin: "Anonymous"
                            }), this.getCanvas().add(t).setActiveObject(t)
                        }
                    }, {
                        key: "_attachCanvasEvents",
                        value: function() {
                            var t = this._canvas,
                                e = this._handler;
                            t.on({
                                "mouse:down": e.onMouseDown,
                                "object:added": e.onObjectAdded,
                                "object:removed": e.onObjectRemoved,
                                "object:moving": e.onObjectMoved,
                                "object:scaling": e.onObjectScaled,
                                "object:selected": e.onObjectSelected,
                                "path:created": e.onPathCreated,
                                "selection:cleared": e.onSelectionCleared,
                                "selection:created": e.onSelectionCreated,
                                "selection:updated": e.onObjectSelected
                            })
                        }
                    }, {
                        key: "_onMouseDown",
                        value: function(t) {
                            var e = this._canvas.getPointer(t.e);
                            this.fire(O.MOUSE_DOWN, t.e, e)
                        }
                    }, {
                        key: "_onObjectAdded",
                        value: function(t) {
                            var e = t.target;
                            e.isType("cropzone") || this._addFabricObject(e)
                        }
                    }, {
                        key: "_onObjectRemoved",
                        value: function(t) {
                            var e = t.target;
                            this._removeFabricObject(P(e))
                        }
                    }, {
                        key: "_onObjectMoved",
                        value: function(t) {
                            var e = t.target,
                                i = this.createObjectProperties(e);
                            this.fire(O.OBJECT_MOVED, i)
                        }
                    }, {
                        key: "_onObjectScaled",
                        value: function(t) {
                            var e = t.target,
                                i = this.createObjectProperties(e);
                            this.fire(O.OBJECT_SCALED, i)
                        }
                    }, {
                        key: "_onObjectSelected",
                        value: function(t) {
                            var e = t.target,
                                i = this.createObjectProperties(e);
                            this.fire(O.OBJECT_ACTIVATED, i)
                        }
                    }, {
                        key: "_onPathCreated",
                        value: function(t) {
                            t.path.set(w.default.fObjectOptions.SELECTION_STYLE);
                            var e = this.createObjectProperties(t.path);
                            this.fire(O.ADD_OBJECT, e)
                        }
                    }, {
                        key: "_onSelectionCleared",
                        value: function() {
                            this.fire(O.SELECTION_CLEARED)
                        }
                    }, {
                        key: "_onSelectionCreated",
                        value: function(t) {
                            this.fire(O.SELECTION_CREATED, t.target)
                        }
                    }, {
                        key: "discardSelection",
                        value: function() {
                            this._canvas.discardActiveObject(), this._canvas.renderAll()
                        }
                    }, {
                        key: "changeSelectableAll",
                        value: function(t) {
                            this._canvas.forEachObject(function(e) {
                                e.selectable = t, e.hoverCursor = t ? "move" : "crosshair"
                            })
                        }
                    }, {
                        key: "createObjectProperties",
                        value: function(t) {
                            var e = {
                                id: P(t),
                                type: t.type
                            };
                            return A(e, C.default.getProperties(t, ["left", "top", "width", "height", "fill", "stroke", "strokeWidth", "opacity"])), ["i-text", "text"].indexOf(t.type) > -1 && A(e, this._createTextProperties(t, e)), e
                        }
                    }, {
                        key: "_createTextProperties",
                        value: function(t) {
                            var e = {};
                            return A(e, C.default.getProperties(t, ["text", "fontFamily", "fontSize", "fontStyle", "textAlign", "textDecoration"])), e
                        }
                    }, {
                        key: "_addFabricObject",
                        value: function(t) {
                            var e = P(t);
                            return this._objects[e] = t, e
                        }
                    }, {
                        key: "_removeFabricObject",
                        value: function(t) {
                            delete this._objects[t]
                        }
                    }]), t
                }();
            R.mixin(N), t.exports = N
        }, function(t, e, i) {
            (function(t) {
                var n = n || {
                    version: "2.7.0"
                };

                function r(t, e) {
                    var i = t.canvas,
                        n = e.targetCanvas,
                        r = n.getContext("2d");
                    r.translate(0, n.height), r.scale(1, -1);
                    var o = i.height - n.height;
                    r.drawImage(i, 0, o, n.width, n.height, 0, 0, n.width, n.height)
                }

                function o(t, e) {
                    var i = e.targetCanvas.getContext("2d"),
                        n = e.destinationWidth,
                        r = e.destinationHeight,
                        o = n * r * 4,
                        a = new Uint8Array(this.imageBuffer, 0, o),
                        s = new Uint8ClampedArray(this.imageBuffer, 0, o);
                    t.readPixels(0, 0, n, r, t.RGBA, t.UNSIGNED_BYTE, a);
                    var l = new ImageData(s, n, r);
                    i.putImageData(l, 0, 0)
                }
                e.fabric = n, "undefined" != typeof document && "undefined" != typeof window ? (document instanceof HTMLDocument ? n.document = document : n.document = document.implementation.createHTMLDocument(""), n.window = window) : (n.document = i(111).jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"), {
                        features: {
                            FetchExternalResources: ["img"]
                        }
                    }), n.jsdomImplForWrapper = i(112).implForWrapper, n.nodeCanvas = i(113).Canvas, n.window = n.document.defaultView, DOMParser = i(114).DOMParser), n.isTouchSupported = "ontouchstart" in n.window || "ontouchstart" in n.document || n.window && n.window.navigator && n.window.navigator.maxTouchPoints > 0, n.isLikelyNode = void 0 !== t && "undefined" == typeof window, n.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-dashoffset", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "id", "paint-order", "vector-effect", "instantiated_by_use", "clip-path"], n.DPI = 96, n.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)", n.fontPaths = {}, n.iMatrix = [1, 0, 0, 1, 0, 0], n.canvasModule = "canvas", n.perfLimitSizeTotal = 2097152, n.maxCacheSideLimit = 4096, n.minCacheSideLimit = 256, n.charWidthsCache = {}, n.textureSize = 2048, n.enableGLFiltering = !0, n.devicePixelRatio = n.window.devicePixelRatio || n.window.webkitDevicePixelRatio || n.window.mozDevicePixelRatio || 1, n.browserShadowBlurConstant = 1, n.arcToSegmentsCache = {}, n.boundsOfCurveCache = {}, n.cachesBoundsOfCurve = !0, n.initFilterBackend = function() {
                        return n.enableGLFiltering && n.isWebglSupported && n.isWebglSupported(n.textureSize) ? (console.log("max texture size: " + n.maxTextureSize), new n.WebglFilterBackend({
                            tileSize: n.textureSize
                        })) : n.Canvas2dFilterBackend ? new n.Canvas2dFilterBackend : void 0
                    }, "undefined" != typeof document && "undefined" != typeof window && (window.fabric = n),
                    function() {
                        function t(t, e) {
                            if (this.__eventListeners[t]) {
                                var i = this.__eventListeners[t];
                                e ? i[i.indexOf(e)] = !1 : n.util.array.fill(i, !1)
                            }
                        }

                        function e(t, e) {
                            if (this.__eventListeners || (this.__eventListeners = {}), 1 === arguments.length)
                                for (var i in t) this.on(i, t[i]);
                            else this.__eventListeners[t] || (this.__eventListeners[t] = []), this.__eventListeners[t].push(e);
                            return this
                        }

                        function i(e, i) {
                            if (this.__eventListeners) {
                                if (0 === arguments.length)
                                    for (e in this.__eventListeners) t.call(this, e);
                                else if (1 === arguments.length && "object" == typeof arguments[0])
                                    for (var n in e) t.call(this, n, e[n]);
                                else t.call(this, e, i);
                                return this
                            }
                        }

                        function r(t, e) {
                            if (this.__eventListeners) {
                                var i = this.__eventListeners[t];
                                if (i) {
                                    for (var n = 0, r = i.length; n < r; n++) i[n] && i[n].call(this, e || {});
                                    return this.__eventListeners[t] = i.filter(function(t) {
                                        return !1 !== t
                                    }), this
                                }
                            }
                        }
                        n.Observable = {
                            observe: e,
                            stopObserving: i,
                            fire: r,
                            on: e,
                            off: i,
                            trigger: r
                        }
                    }(), n.Collection = {
                        _objects: [],
                        add: function() {
                            if (this._objects.push.apply(this._objects, arguments), this._onObjectAdded)
                                for (var t = 0, e = arguments.length; t < e; t++) this._onObjectAdded(arguments[t]);
                            return this.renderOnAddRemove && this.requestRenderAll(), this
                        },
                        insertAt: function(t, e, i) {
                            var n = this._objects;
                            return i ? n[e] = t : n.splice(e, 0, t), this._onObjectAdded && this._onObjectAdded(t), this.renderOnAddRemove && this.requestRenderAll(), this
                        },
                        remove: function() {
                            for (var t, e = this._objects, i = !1, n = 0, r = arguments.length; n < r; n++) - 1 !== (t = e.indexOf(arguments[n])) && (i = !0, e.splice(t, 1), this._onObjectRemoved && this._onObjectRemoved(arguments[n]));
                            return this.renderOnAddRemove && i && this.requestRenderAll(), this
                        },
                        forEachObject: function(t, e) {
                            for (var i = this.getObjects(), n = 0, r = i.length; n < r; n++) t.call(e, i[n], n, i);
                            return this
                        },
                        getObjects: function(t) {
                            return void 0 === t ? this._objects.concat() : this._objects.filter(function(e) {
                                return e.type === t
                            })
                        },
                        item: function(t) {
                            return this._objects[t]
                        },
                        isEmpty: function() {
                            return 0 === this._objects.length
                        },
                        size: function() {
                            return this._objects.length
                        },
                        contains: function(t) {
                            return this._objects.indexOf(t) > -1
                        },
                        complexity: function() {
                            return this._objects.reduce(function(t, e) {
                                return t += e.complexity ? e.complexity() : 0
                            }, 0)
                        }
                    }, n.CommonMethods = {
                        _setOptions: function(t) {
                            for (var e in t) this.set(e, t[e])
                        },
                        _initGradient: function(t, e) {
                            !t || !t.colorStops || t instanceof n.Gradient || this.set(e, new n.Gradient(t))
                        },
                        _initPattern: function(t, e, i) {
                            !t || !t.source || t instanceof n.Pattern ? i && i() : this.set(e, new n.Pattern(t, i))
                        },
                        _initClipping: function(t) {
                            if (t.clipTo && "string" == typeof t.clipTo) {
                                var e = n.util.getFunctionBody(t.clipTo);
                                void 0 !== e && (this.clipTo = new Function("ctx", e))
                            }
                        },
                        _setObject: function(t) {
                            for (var e in t) this._set(e, t[e])
                        },
                        set: function(t, e) {
                            return "object" == typeof t ? this._setObject(t) : "function" == typeof e && "clipTo" !== t ? this._set(t, e(this.get(t))) : this._set(t, e), this
                        },
                        _set: function(t, e) {
                            this[t] = e
                        },
                        toggle: function(t) {
                            var e = this.get(t);
                            return "boolean" == typeof e && this.set(t, !e), this
                        },
                        get: function(t) {
                            return this[t]
                        }
                    },
                    function(t) {
                        var e = Math.sqrt,
                            i = Math.atan2,
                            r = Math.pow,
                            o = Math.abs,
                            a = Math.PI / 180,
                            s = Math.PI / 2;
                        n.util = {
                            cos: function(t) {
                                if (0 === t) return 1;
                                switch (t < 0 && (t = -t), t / s) {
                                    case 1:
                                    case 3:
                                        return 0;
                                    case 2:
                                        return -1
                                }
                                return Math.cos(t)
                            },
                            sin: function(t) {
                                if (0 === t) return 0;
                                var e = 1;
                                switch (t < 0 && (e = -1), t / s) {
                                    case 1:
                                        return e;
                                    case 2:
                                        return 0;
                                    case 3:
                                        return -e
                                }
                                return Math.sin(t)
                            },
                            removeFromArray: function(t, e) {
                                var i = t.indexOf(e);
                                return -1 !== i && t.splice(i, 1), t
                            },
                            getRandomInt: function(t, e) {
                                return Math.floor(Math.random() * (e - t + 1)) + t
                            },
                            degreesToRadians: function(t) {
                                return t * a
                            },
                            radiansToDegrees: function(t) {
                                return t / a
                            },
                            rotatePoint: function(t, e, i) {
                                t.subtractEquals(e);
                                var r = n.util.rotateVector(t, i);
                                return new n.Point(r.x, r.y).addEquals(e)
                            },
                            rotateVector: function(t, e) {
                                var i = n.util.sin(e),
                                    r = n.util.cos(e);
                                return {
                                    x: t.x * r - t.y * i,
                                    y: t.x * i + t.y * r
                                }
                            },
                            transformPoint: function(t, e, i) {
                                return i ? new n.Point(e[0] * t.x + e[2] * t.y, e[1] * t.x + e[3] * t.y) : new n.Point(e[0] * t.x + e[2] * t.y + e[4], e[1] * t.x + e[3] * t.y + e[5])
                            },
                            makeBoundingBoxFromPoints: function(t) {
                                var e = [t[0].x, t[1].x, t[2].x, t[3].x],
                                    i = n.util.array.min(e),
                                    r = n.util.array.max(e) - i,
                                    o = [t[0].y, t[1].y, t[2].y, t[3].y],
                                    a = n.util.array.min(o);
                                return {
                                    left: i,
                                    top: a,
                                    width: r,
                                    height: n.util.array.max(o) - a
                                }
                            },
                            invertTransform: function(t) {
                                var e = 1 / (t[0] * t[3] - t[1] * t[2]),
                                    i = [e * t[3], -e * t[1], -e * t[2], e * t[0]],
                                    r = n.util.transformPoint({
                                        x: t[4],
                                        y: t[5]
                                    }, i, !0);
                                return i[4] = -r.x, i[5] = -r.y, i
                            },
                            toFixed: function(t, e) {
                                return parseFloat(Number(t).toFixed(e))
                            },
                            parseUnit: function(t, e) {
                                var i = /\D{0,2}$/.exec(t),
                                    r = parseFloat(t);
                                switch (e || (e = n.Text.DEFAULT_SVG_FONT_SIZE), i[0]) {
                                    case "mm":
                                        return r * n.DPI / 25.4;
                                    case "cm":
                                        return r * n.DPI / 2.54;
                                    case "in":
                                        return r * n.DPI;
                                    case "pt":
                                        return r * n.DPI / 72;
                                    case "pc":
                                        return r * n.DPI / 72 * 12;
                                    case "em":
                                        return r * e;
                                    default:
                                        return r
                                }
                            },
                            falseFunction: function() {
                                return !1
                            },
                            getKlass: function(t, e) {
                                return t = n.util.string.camelize(t.charAt(0).toUpperCase() + t.slice(1)), n.util.resolveNamespace(e)[t]
                            },
                            getSvgAttributes: function(t) {
                                var e = ["instantiated_by_use", "style", "id", "class"];
                                switch (t) {
                                    case "linearGradient":
                                        e = e.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]);
                                        break;
                                    case "radialGradient":
                                        e = e.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]);
                                        break;
                                    case "stop":
                                        e = e.concat(["offset", "stop-color", "stop-opacity"])
                                }
                                return e
                            },
                            resolveNamespace: function(e) {
                                if (!e) return n;
                                var i, r = e.split("."),
                                    o = r.length,
                                    a = t || n.window;
                                for (i = 0; i < o; ++i) a = a[r[i]];
                                return a
                            },
                            loadImage: function(t, e, i, r) {
                                if (t) {
                                    var o = n.util.createImage(),
                                        a = function() {
                                            e && e.call(i, o), o = o.onload = o.onerror = null
                                        };
                                    o.onload = a, o.onerror = function() {
                                        n.log("Error loading " + o.src), e && e.call(i, null, !0), o = o.onload = o.onerror = null
                                    }, 0 !== t.indexOf("data") && r && (o.crossOrigin = r), "data:image/svg" === t.substring(0, 14) && (o.onload = null, n.util.loadImageInDom(o, a)), o.src = t
                                } else e && e.call(i, t)
                            },
                            loadImageInDom: function(t, e) {
                                var i = n.document.createElement("div");
                                i.style.width = i.style.height = "1px", i.style.left = i.style.top = "-100%", i.style.position = "absolute", i.appendChild(t), n.document.querySelector("body").appendChild(i), t.onload = function() {
                                    e(), i.parentNode.removeChild(i), i = null
                                }
                            },
                            enlivenObjects: function(t, e, i, r) {
                                function o() {
                                    ++s === l && e && e(a)
                                }
                                var a = [],
                                    s = 0,
                                    l = (t = t || []).length;
                                l ? t.forEach(function(t, e) {
                                    t && t.type ? n.util.getKlass(t.type, i).fromObject(t, function(i, n) {
                                        n || (a[e] = i), r && r(t, i, n), o()
                                    }) : o()
                                }) : e && e(a)
                            },
                            enlivenPatterns: function(t, e) {
                                function i() {
                                    ++o === a && e && e(r)
                                }
                                var r = [],
                                    o = 0,
                                    a = (t = t || []).length;
                                a ? t.forEach(function(t, e) {
                                    t && t.source ? new n.Pattern(t, function(t) {
                                        r[e] = t, i()
                                    }) : (r[e] = t, i())
                                }) : e && e(r)
                            },
                            groupSVGElements: function(t, e, i) {
                                var r;
                                return t && 1 === t.length ? t[0] : (e && (e.width && e.height ? e.centerPoint = {
                                    x: e.width / 2,
                                    y: e.height / 2
                                } : (delete e.width, delete e.height)), r = new n.Group(t, e), void 0 !== i && (r.sourcePath = i), r)
                            },
                            populateWithProperties: function(t, e, i) {
                                if (i && "[object Array]" === Object.prototype.toString.call(i))
                                    for (var n = 0, r = i.length; n < r; n++) i[n] in t && (e[i[n]] = t[i[n]])
                            },
                            drawDashedLine: function(t, n, r, o, a, s) {
                                var l = o - n,
                                    c = a - r,
                                    u = e(l * l + c * c),
                                    h = i(c, l),
                                    d = s.length,
                                    f = 0,
                                    p = !0;
                                for (t.save(), t.translate(n, r), t.moveTo(0, 0), t.rotate(h), n = 0; u > n;)(n += s[f++ % d]) > u && (n = u), t[p ? "lineTo" : "moveTo"](n, 0), p = !p;
                                t.restore()
                            },
                            createCanvasElement: function() {
                                return n.document.createElement("canvas")
                            },
                            copyCanvasElement: function(t) {
                                var e = n.util.createCanvasElement();
                                return e.width = t.width, e.height = t.height, e.getContext("2d").drawImage(t, 0, 0), e
                            },
                            toDataURL: function(t, e, i) {
                                return t.toDataURL("image/" + e, i)
                            },
                            createImage: function() {
                                return n.document.createElement("img")
                            },
                            clipContext: function(t, e) {
                                e.save(), e.beginPath(), t.clipTo(e), e.clip()
                            },
                            multiplyTransformMatrices: function(t, e, i) {
                                return [t[0] * e[0] + t[2] * e[1], t[1] * e[0] + t[3] * e[1], t[0] * e[2] + t[2] * e[3], t[1] * e[2] + t[3] * e[3], i ? 0 : t[0] * e[4] + t[2] * e[5] + t[4], i ? 0 : t[1] * e[4] + t[3] * e[5] + t[5]]
                            },
                            qrDecompose: function(t) {
                                var n = i(t[1], t[0]),
                                    o = r(t[0], 2) + r(t[1], 2),
                                    s = e(o),
                                    l = (t[0] * t[3] - t[2] * t[1]) / s,
                                    c = i(t[0] * t[2] + t[1] * t[3], o);
                                return {
                                    angle: n / a,
                                    scaleX: s,
                                    scaleY: l,
                                    skewX: c / a,
                                    skewY: 0,
                                    translateX: t[4],
                                    translateY: t[5]
                                }
                            },
                            customTransformMatrix: function(t, e, i) {
                                var r = [1, 0, o(Math.tan(i * a)), 1],
                                    s = [o(t), 0, 0, o(e)];
                                return n.util.multiplyTransformMatrices(s, r, !0)
                            },
                            resetObjectTransform: function(t) {
                                t.scaleX = 1, t.scaleY = 1, t.skewX = 0, t.skewY = 0, t.flipX = !1, t.flipY = !1, t.rotate(0)
                            },
                            saveObjectTransform: function(t) {
                                return {
                                    scaleX: t.scaleX,
                                    scaleY: t.scaleY,
                                    skewX: t.skewX,
                                    skewY: t.skewY,
                                    angle: t.angle,
                                    left: t.left,
                                    flipX: t.flipX,
                                    flipY: t.flipY,
                                    top: t.top
                                }
                            },
                            getFunctionBody: function(t) {
                                return (String(t).match(/function[^{]*\{([\s\S]*)\}/) || {})[1]
                            },
                            isTransparent: function(t, e, i, n) {
                                n > 0 && (e > n ? e -= n : e = 0, i > n ? i -= n : i = 0);
                                var r, o = !0,
                                    a = t.getImageData(e, i, 2 * n || 1, 2 * n || 1),
                                    s = a.data.length;
                                for (r = 3; r < s && !1 !== (o = a.data[r] <= 0); r += 4);
                                return a = null, o
                            },
                            parsePreserveAspectRatioAttribute: function(t) {
                                var e, i = "meet",
                                    n = t.split(" ");
                                return n && n.length && ("meet" !== (i = n.pop()) && "slice" !== i ? (e = i, i = "meet") : n.length && (e = n.pop())), {
                                    meetOrSlice: i,
                                    alignX: "none" !== e ? e.slice(1, 4) : "none",
                                    alignY: "none" !== e ? e.slice(5, 8) : "none"
                                }
                            },
                            clearFabricFontCache: function(t) {
                                (t = (t || "").toLowerCase()) ? n.charWidthsCache[t] && delete n.charWidthsCache[t]: n.charWidthsCache = {}
                            },
                            limitDimsByArea: function(t, e) {
                                var i = Math.sqrt(e * t),
                                    n = Math.floor(e / i);
                                return {
                                    x: Math.floor(i),
                                    y: n
                                }
                            },
                            capValue: function(t, e, i) {
                                return Math.max(t, Math.min(e, i))
                            },
                            findScaleToFit: function(t, e) {
                                return Math.min(e.width / t.width, e.height / t.height)
                            },
                            findScaleToCover: function(t, e) {
                                return Math.max(e.width / t.width, e.height / t.height)
                            }
                        }
                    }(e),
                    function() {
                        var t = Array.prototype.join;

                        function e(e, o, a, s, l, c, u) {
                            var h = t.call(arguments);
                            if (n.arcToSegmentsCache[h]) return n.arcToSegmentsCache[h];
                            var d = Math.PI,
                                f = u * d / 180,
                                p = n.util.sin(f),
                                g = n.util.cos(f),
                                m = 0,
                                v = 0,
                                b = -g * e * .5 - p * o * .5,
                                y = -g * o * .5 + p * e * .5,
                                _ = (a = Math.abs(a)) * a,
                                x = (s = Math.abs(s)) * s,
                                w = y * y,
                                C = b * b,
                                S = _ * x - _ * w - x * C,
                                k = 0;
                            if (S < 0) {
                                var O = Math.sqrt(1 - S / (_ * x));
                                a *= O, s *= O
                            } else k = (l === c ? -1 : 1) * Math.sqrt(S / (_ * w + x * C));
                            var T = k * a * y / s,
                                E = -k * s * b / a,
                                A = g * T - p * E + .5 * e,
                                P = p * T + g * E + .5 * o,
                                M = r(1, 0, (b - T) / a, (y - E) / s),
                                j = r((b - T) / a, (y - E) / s, (-b - T) / a, (-y - E) / s);
                            0 === c && j > 0 ? j -= 2 * d : 1 === c && j < 0 && (j += 2 * d);
                            for (var D = Math.ceil(Math.abs(j / d * 2)), I = [], R = j / D, L = 8 / 3 * Math.sin(R / 4) * Math.sin(R / 4) / Math.sin(R / 2), F = M + R, B = 0; B < D; B++) I[B] = i(M, F, g, p, a, s, A, P, L, m, v), m = I[B][4], v = I[B][5], M = F, F += R;
                            return n.arcToSegmentsCache[h] = I, I
                        }

                        function i(t, e, i, r, o, a, s, l, c, u, h) {
                            var d = n.util.cos(t),
                                f = n.util.sin(t),
                                p = n.util.cos(e),
                                g = n.util.sin(e),
                                m = i * o * p - r * a * g + s,
                                v = r * o * p + i * a * g + l;
                            return [u + c * (-i * o * f - r * a * d), h + c * (-r * o * f + i * a * d), m + c * (i * o * g + r * a * p), v + c * (r * o * g - i * a * p), m, v]
                        }

                        function r(t, e, i, n) {
                            var r = Math.atan2(e, t),
                                o = Math.atan2(n, i);
                            return o >= r ? o - r : 2 * Math.PI - (r - o)
                        }

                        function o(e, i, r, o, a, s, l, c) {
                            var u;
                            if (n.cachesBoundsOfCurve && (u = t.call(arguments), n.boundsOfCurveCache[u])) return n.boundsOfCurveCache[u];
                            var h, d, f, p, g, m, v, b, y = Math.sqrt,
                                _ = Math.min,
                                x = Math.max,
                                w = Math.abs,
                                C = [],
                                S = [
                                    [],
                                    []
                                ];
                            d = 6 * e - 12 * r + 6 * a, h = -3 * e + 9 * r - 9 * a + 3 * l, f = 3 * r - 3 * e;
                            for (var k = 0; k < 2; ++k)
                                if (k > 0 && (d = 6 * i - 12 * o + 6 * s, h = -3 * i + 9 * o - 9 * s + 3 * c, f = 3 * o - 3 * i), w(h) < 1e-12) {
                                    if (w(d) < 1e-12) continue;
                                    0 < (p = -f / d) && p < 1 && C.push(p)
                                } else(v = d * d - 4 * f * h) < 0 || (0 < (g = (-d + (b = y(v))) / (2 * h)) && g < 1 && C.push(g), 0 < (m = (-d - b) / (2 * h)) && m < 1 && C.push(m));
                            for (var O, T, E, A = C.length, P = A; A--;) O = (E = 1 - (p = C[A])) * E * E * e + 3 * E * E * p * r + 3 * E * p * p * a + p * p * p * l, S[0][A] = O, T = E * E * E * i + 3 * E * E * p * o + 3 * E * p * p * s + p * p * p * c, S[1][A] = T;
                            S[0][P] = e, S[1][P] = i, S[0][P + 1] = l, S[1][P + 1] = c;
                            var M = [{
                                x: _.apply(null, S[0]),
                                y: _.apply(null, S[1])
                            }, {
                                x: x.apply(null, S[0]),
                                y: x.apply(null, S[1])
                            }];
                            return n.cachesBoundsOfCurve && (n.boundsOfCurveCache[u] = M), M
                        }
                        n.util.drawArc = function(t, i, n, r) {
                            for (var o = r[0], a = r[1], s = r[2], l = r[3], c = r[4], u = [
                                    [],
                                    [],
                                    [],
                                    []
                                ], h = e(r[5] - i, r[6] - n, o, a, l, c, s), d = 0, f = h.length; d < f; d++) u[d][0] = h[d][0] + i, u[d][1] = h[d][1] + n, u[d][2] = h[d][2] + i, u[d][3] = h[d][3] + n, u[d][4] = h[d][4] + i, u[d][5] = h[d][5] + n, t.bezierCurveTo.apply(t, u[d])
                        }, n.util.getBoundsOfArc = function(t, i, n, r, a, s, l, c, u) {
                            for (var h, d = 0, f = 0, p = [], g = e(c - t, u - i, n, r, s, l, a), m = 0, v = g.length; m < v; m++) h = o(d, f, g[m][0], g[m][1], g[m][2], g[m][3], g[m][4], g[m][5]), p.push({
                                x: h[0].x + t,
                                y: h[0].y + i
                            }), p.push({
                                x: h[1].x + t,
                                y: h[1].y + i
                            }), d = g[m][4], f = g[m][5];
                            return p
                        }, n.util.getBoundsOfCurve = o
                    }(),
                    function() {
                        var t = Array.prototype.slice;

                        function e(t, e, i) {
                            if (t && 0 !== t.length) {
                                var n = t.length - 1,
                                    r = e ? t[n][e] : t[n];
                                if (e)
                                    for (; n--;) i(t[n][e], r) && (r = t[n][e]);
                                else
                                    for (; n--;) i(t[n], r) && (r = t[n]);
                                return r
                            }
                        }
                        n.util.array = {
                            fill: function(t, e) {
                                for (var i = t.length; i--;) t[i] = e;
                                return t
                            },
                            invoke: function(e, i) {
                                for (var n = t.call(arguments, 2), r = [], o = 0, a = e.length; o < a; o++) r[o] = n.length ? e[o][i].apply(e[o], n) : e[o][i].call(e[o]);
                                return r
                            },
                            min: function(t, i) {
                                return e(t, i, function(t, e) {
                                    return t < e
                                })
                            },
                            max: function(t, i) {
                                return e(t, i, function(t, e) {
                                    return t >= e
                                })
                            }
                        }
                    }(),
                    function() {
                        function t(e, i, r) {
                            if (r)
                                if (!n.isLikelyNode && i instanceof Element) e = i;
                                else if (i instanceof Array) {
                                e = [];
                                for (var o = 0, a = i.length; o < a; o++) e[o] = t({}, i[o], r)
                            } else if (i && "object" == typeof i)
                                for (var s in i) "canvas" === s ? e[s] = t({}, i[s]) : i.hasOwnProperty(s) && (e[s] = t({}, i[s], r));
                            else e = i;
                            else
                                for (var s in i) e[s] = i[s];
                            return e
                        }
                        n.util.object = {
                            extend: t,
                            clone: function(e, i) {
                                return t({}, e, i)
                            }
                        }, n.util.object.extend(n.util, n.Observable)
                    }(),
                    function() {
                        function t(t, e) {
                            var i = t.charCodeAt(e);
                            if (isNaN(i)) return "";
                            if (i < 55296 || i > 57343) return t.charAt(e);
                            if (55296 <= i && i <= 56319) {
                                if (t.length <= e + 1) throw "High surrogate without following low surrogate";
                                var n = t.charCodeAt(e + 1);
                                if (56320 > n || n > 57343) throw "High surrogate without following low surrogate";
                                return t.charAt(e) + t.charAt(e + 1)
                            }
                            if (0 === e) throw "Low surrogate without preceding high surrogate";
                            var r = t.charCodeAt(e - 1);
                            if (55296 > r || r > 56319) throw "Low surrogate without preceding high surrogate";
                            return !1
                        }
                        n.util.string = {
                            camelize: function(t) {
                                return t.replace(/-+(.)?/g, function(t, e) {
                                    return e ? e.toUpperCase() : ""
                                })
                            },
                            capitalize: function(t, e) {
                                return t.charAt(0).toUpperCase() + (e ? t.slice(1) : t.slice(1).toLowerCase())
                            },
                            escapeXml: function(t) {
                                return t.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
                            },
                            graphemeSplit: function(e) {
                                var i, n = 0,
                                    r = [];
                                for (n = 0; n < e.length; n++) !1 !== (i = t(e, n)) && r.push(i);
                                return r
                            }
                        }
                    }(),
                    function() {
                        var t = Array.prototype.slice,
                            e = function() {},
                            i = function() {
                                for (var t in {
                                        toString: 1
                                    })
                                    if ("toString" === t) return !1;
                                return !0
                            }(),
                            r = function(t, e, n) {
                                for (var r in e) r in t.prototype && "function" == typeof t.prototype[r] && (e[r] + "").indexOf("callSuper") > -1 ? t.prototype[r] = function(t) {
                                    return function() {
                                        var i = this.constructor.superclass;
                                        this.constructor.superclass = n;
                                        var r = e[t].apply(this, arguments);
                                        if (this.constructor.superclass = i, "initialize" !== t) return r
                                    }
                                }(r) : t.prototype[r] = e[r], i && (e.toString !== Object.prototype.toString && (t.prototype.toString = e.toString), e.valueOf !== Object.prototype.valueOf && (t.prototype.valueOf = e.valueOf))
                            };

                        function o() {}

                        function a(e) {
                            for (var i = null, n = this; n.constructor.superclass;) {
                                var r = n.constructor.superclass.prototype[e];
                                if (n[e] !== r) {
                                    i = r;
                                    break
                                }
                                n = n.constructor.superclass.prototype
                            }
                            return i ? arguments.length > 1 ? i.apply(this, t.call(arguments, 1)) : i.call(this) : console.log("tried to callSuper " + e + ", method not found in prototype chain", this)
                        }
                        n.util.createClass = function() {
                            var i = null,
                                n = t.call(arguments, 0);

                            function s() {
                                this.initialize.apply(this, arguments)
                            }
                            "function" == typeof n[0] && (i = n.shift()), s.superclass = i, s.subclasses = [], i && (o.prototype = i.prototype, s.prototype = new o, i.subclasses.push(s));
                            for (var l = 0, c = n.length; l < c; l++) r(s, n[l], i);
                            return s.prototype.initialize || (s.prototype.initialize = e), s.prototype.constructor = s, s.prototype.callSuper = a, s
                        }
                    }(),
                    function() {
                        var t = "unknown";

                        function e(t) {
                            var e, i, n = Array.prototype.slice.call(arguments, 1),
                                r = n.length;
                            for (i = 0; i < r; i++)
                                if (e = typeof t[n[i]], !/^(?:function|object|unknown)$/.test(e)) return !1;
                            return !0
                        }
                        var i, r, o = function() {
                            var t = 0;
                            return function(e) {
                                return e.__uniqueID || (e.__uniqueID = "uniqueID__" + t++)
                            }
                        }();

                        function a(t, e) {
                            return {
                                handler: e,
                                wrappedHandler: function(t, e) {
                                    return function(r) {
                                        e.call(i(t), r || n.window.event)
                                    }
                                }(t, e)
                            }
                        }! function() {
                            var t = {};
                            i = function(e) {
                                return t[e]
                            }, r = function(e, i) {
                                t[e] = i
                            }
                        }();
                        var s, l, c = e(n.document.documentElement, "addEventListener", "removeEventListener") && e(n.window, "addEventListener", "removeEventListener"),
                            u = e(n.document.documentElement, "attachEvent", "detachEvent") && e(n.window, "attachEvent", "detachEvent"),
                            h = {},
                            d = {};
                        c ? (s = function(t, e, i, n) {
                            t && t.addEventListener(e, i, !u && n)
                        }, l = function(t, e, i, n) {
                            t && t.removeEventListener(e, i, !u && n)
                        }) : u ? (s = function(t, e, i) {
                            if (t) {
                                var n = o(t);
                                r(n, t), h[n] || (h[n] = {}), h[n][e] || (h[n][e] = []);
                                var s = a(n, i);
                                h[n][e].push(s), t.attachEvent("on" + e, s.wrappedHandler)
                            }
                        }, l = function(t, e, i) {
                            if (t) {
                                var n, r = o(t);
                                if (h[r] && h[r][e])
                                    for (var a = 0, s = h[r][e].length; a < s; a++)(n = h[r][e][a]) && n.handler === i && (t.detachEvent("on" + e, n.wrappedHandler), h[r][e][a] = null)
                            }
                        }) : (s = function(t, e, i) {
                            if (t) {
                                var r = o(t);
                                if (d[r] || (d[r] = {}), !d[r][e]) {
                                    d[r][e] = [];
                                    var a = t["on" + e];
                                    a && d[r][e].push(a), t["on" + e] = function(t, e) {
                                        return function(i) {
                                            if (d[t] && d[t][e])
                                                for (var r = d[t][e], o = 0, a = r.length; o < a; o++) r[o].call(this, i || n.window.event)
                                        }
                                    }(r, e)
                                }
                                d[r][e].push(i)
                            }
                        }, l = function(t, e, i) {
                            if (t) {
                                var n = o(t);
                                if (d[n] && d[n][e])
                                    for (var r = d[n][e], a = 0, s = r.length; a < s; a++) r[a] === i && r.splice(a, 1)
                            }
                        }), n.util.addListener = s, n.util.removeListener = l;
                        var f = function(t) {
                                return t.clientX
                            },
                            p = function(t) {
                                return t.clientY
                            };

                        function g(t, e, i) {
                            var n, r = t["touchend" === t.type ? "changedTouches" : "touches"];
                            return r && r[0] && (n = r[0][i]), void 0 === n && (n = t[i]), n
                        }
                        n.isTouchSupported && (f = function(t) {
                            return g(t, 0, "clientX")
                        }, p = function(t) {
                            return g(t, 0, "clientY")
                        }), n.util.getPointer = function(e) {
                            e || (e = n.window.event);
                            var i = e.target || (typeof e.srcElement !== t ? e.srcElement : null),
                                r = n.util.getScrollLeftTop(i);
                            return {
                                x: f(e) + r.left,
                                y: p(e) + r.top
                            }
                        }
                    }(),
                    function() {
                        var t = n.document.createElement("div"),
                            e = "string" == typeof t.style.opacity,
                            i = "string" == typeof t.style.filter,
                            r = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,
                            o = function(t) {
                                return t
                            };
                        e ? o = function(t, e) {
                            return t.style.opacity = e, t
                        } : i && (o = function(t, e) {
                            var i = t.style;
                            return t.currentStyle && !t.currentStyle.hasLayout && (i.zoom = 1), r.test(i.filter) ? (e = e >= .9999 ? "" : "alpha(opacity=" + 100 * e + ")", i.filter = i.filter.replace(r, e)) : i.filter += " alpha(opacity=" + 100 * e + ")", t
                        }), n.util.setStyle = function(t, e) {
                            var i = t.style;
                            if (!i) return t;
                            if ("string" == typeof e) return t.style.cssText += ";" + e, e.indexOf("opacity") > -1 ? o(t, e.match(/opacity:\s*(\d?\.?\d*)/)[1]) : t;
                            for (var n in e) "opacity" === n ? o(t, e[n]) : i["float" === n || "cssFloat" === n ? void 0 === i.styleFloat ? "cssFloat" : "styleFloat" : n] = e[n];
                            return t
                        }
                    }(),
                    function() {
                        var t = Array.prototype.slice;
                        var e, i, r = function(e) {
                            return t.call(e, 0)
                        };
                        try {
                            e = r(n.document.childNodes) instanceof Array
                        } catch (t) {}

                        function o(t, e) {
                            var i = n.document.createElement(t);
                            for (var r in e) "class" === r ? i.className = e[r] : "for" === r ? i.htmlFor = e[r] : i.setAttribute(r, e[r]);
                            return i
                        }

                        function a(t) {
                            for (var e = 0, i = 0, r = n.document.documentElement, o = n.document.body || {
                                    scrollLeft: 0,
                                    scrollTop: 0
                                }; t && (t.parentNode || t.host) && ((t = t.parentNode || t.host) === n.document ? (e = o.scrollLeft || r.scrollLeft || 0, i = o.scrollTop || r.scrollTop || 0) : (e += t.scrollLeft || 0, i += t.scrollTop || 0), 1 !== t.nodeType || "fixed" !== t.style.position););
                            return {
                                left: e,
                                top: i
                            }
                        }
                        e || (r = function(t) {
                                for (var e = new Array(t.length), i = t.length; i--;) e[i] = t[i];
                                return e
                            }), i = n.document.defaultView && n.document.defaultView.getComputedStyle ? function(t, e) {
                                var i = n.document.defaultView.getComputedStyle(t, null);
                                return i ? i[e] : void 0
                            } : function(t, e) {
                                var i = t.style[e];
                                return !i && t.currentStyle && (i = t.currentStyle[e]), i
                            },
                            function() {
                                var t = n.document.documentElement.style,
                                    e = "userSelect" in t ? "userSelect" : "MozUserSelect" in t ? "MozUserSelect" : "WebkitUserSelect" in t ? "WebkitUserSelect" : "KhtmlUserSelect" in t ? "KhtmlUserSelect" : "";
                                n.util.makeElementUnselectable = function(t) {
                                    return void 0 !== t.onselectstart && (t.onselectstart = n.util.falseFunction), e ? t.style[e] = "none" : "string" == typeof t.unselectable && (t.unselectable = "on"), t
                                }, n.util.makeElementSelectable = function(t) {
                                    return void 0 !== t.onselectstart && (t.onselectstart = null), e ? t.style[e] = "" : "string" == typeof t.unselectable && (t.unselectable = ""), t
                                }
                            }(),
                            function() {
                                n.util.getScript = function(t, e) {
                                    var i = n.document.getElementsByTagName("head")[0],
                                        r = n.document.createElement("script"),
                                        o = !0;
                                    r.onload = r.onreadystatechange = function(t) {
                                        if (o) {
                                            if ("string" == typeof this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState) return;
                                            o = !1, e(t || n.window.event), r = r.onload = r.onreadystatechange = null
                                        }
                                    }, r.src = t, i.appendChild(r)
                                }
                            }(), n.util.getById = function(t) {
                                return "string" == typeof t ? n.document.getElementById(t) : t
                            }, n.util.toArray = r, n.util.makeElement = o, n.util.addClass = function(t, e) {
                                t && -1 === (" " + t.className + " ").indexOf(" " + e + " ") && (t.className += (t.className ? " " : "") + e)
                            }, n.util.wrapElement = function(t, e, i) {
                                return "string" == typeof e && (e = o(e, i)), t.parentNode && t.parentNode.replaceChild(e, t), e.appendChild(t), e
                            }, n.util.getScrollLeftTop = a, n.util.getElementOffset = function(t) {
                                var e, n, r = t && t.ownerDocument,
                                    o = {
                                        left: 0,
                                        top: 0
                                    },
                                    s = {
                                        left: 0,
                                        top: 0
                                    },
                                    l = {
                                        borderLeftWidth: "left",
                                        borderTopWidth: "top",
                                        paddingLeft: "left",
                                        paddingTop: "top"
                                    };
                                if (!r) return s;
                                for (var c in l) s[l[c]] += parseInt(i(t, c), 10) || 0;
                                return e = r.documentElement, void 0 !== t.getBoundingClientRect && (o = t.getBoundingClientRect()), n = a(t), {
                                    left: o.left + n.left - (e.clientLeft || 0) + s.left,
                                    top: o.top + n.top - (e.clientTop || 0) + s.top
                                }
                            }, n.util.getElementStyle = i, n.util.getNodeCanvas = function(t) {
                                var e = n.jsdomImplForWrapper(t);
                                return e._canvas || e._image
                            }, n.util.cleanUpJsdomNode = function(t) {
                                if (n.isLikelyNode) {
                                    var e = n.jsdomImplForWrapper(t);
                                    e && (e._image = null, e._canvas = null, e._currentSrc = null, e._attributes = null, e._classList = null)
                                }
                            }
                    }(),
                    function() {
                        function t() {}
                        n.util.request = function(e, i) {
                            i || (i = {});
                            var r = i.method ? i.method.toUpperCase() : "GET",
                                o = i.onComplete || function() {},
                                a = new n.window.XMLHttpRequest,
                                s = i.body || i.parameters;
                            return a.onreadystatechange = function() {
                                4 === a.readyState && (o(a), a.onreadystatechange = t)
                            }, "GET" === r && (s = null, "string" == typeof i.parameters && (e = function(t, e) {
                                return t + (/\?/.test(t) ? "&" : "?") + e
                            }(e, i.parameters))), a.open(r, e, !0), "POST" !== r && "PUT" !== r || a.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), a.send(s), a
                        }
                    }(), n.log = function() {}, n.warn = function() {}, "undefined" != typeof console && ["log", "warn"].forEach(function(t) {
                        void 0 !== console[t] && "function" == typeof console[t].apply && (n[t] = function() {
                            return console[t].apply(console, arguments)
                        })
                    }),
                    function() {
                        function t() {
                            return !1
                        }
                        var e = n.window.requestAnimationFrame || n.window.webkitRequestAnimationFrame || n.window.mozRequestAnimationFrame || n.window.oRequestAnimationFrame || n.window.msRequestAnimationFrame || function(t) {
                                return n.window.setTimeout(t, 1e3 / 60)
                            },
                            i = n.window.cancelAnimationFrame || n.window.clearTimeout;

                        function r() {
                            return e.apply(n.window, arguments)
                        }
                        n.util.animate = function(e) {
                            r(function(i) {
                                e || (e = {});
                                var n, o = i || +new Date,
                                    a = e.duration || 500,
                                    s = o + a,
                                    l = e.onChange || t,
                                    c = e.abort || t,
                                    u = e.onComplete || t,
                                    h = e.easing || function(t, e, i, n) {
                                        return -i * Math.cos(t / n * (Math.PI / 2)) + i + e
                                    },
                                    d = "startValue" in e ? e.startValue : 0,
                                    f = "endValue" in e ? e.endValue : 100,
                                    p = e.byValue || f - d;
                                e.onStart && e.onStart(),
                                    function t(i) {
                                        if (c()) u(f, 1, 1);
                                        else {
                                            var g = (n = i || +new Date) > s ? a : n - o,
                                                m = g / a,
                                                v = h(g, d, p, a),
                                                b = Math.abs((v - d) / p);
                                            l(v, b, m), n > s ? e.onComplete && e.onComplete() : r(t)
                                        }
                                    }(o)
                            })
                        }, n.util.requestAnimFrame = r, n.util.cancelAnimFrame = function() {
                            return i.apply(n.window, arguments)
                        }
                    }(),
                    function() {
                        n.util.animateColor = function(t, e, i, r) {
                            var o = new n.Color(t).getSource(),
                                a = new n.Color(e).getSource();
                            r = r || {}, n.util.animate(n.util.object.extend(r, {
                                duration: i || 500,
                                startValue: o,
                                endValue: a,
                                byValue: a,
                                easing: function(t, e, i, n) {
                                    return function(t, e, i) {
                                        var n = "rgba(" + parseInt(t[0] + i * (e[0] - t[0]), 10) + "," + parseInt(t[1] + i * (e[1] - t[1]), 10) + "," + parseInt(t[2] + i * (e[2] - t[2]), 10);
                                        return n += "," + (t && e ? parseFloat(t[3] + i * (e[3] - t[3])) : 1), n += ")"
                                    }(e, i, r.colorEasing ? r.colorEasing(t, n) : 1 - Math.cos(t / n * (Math.PI / 2)))
                                }
                            }))
                        }
                    }(),
                    function() {
                        function t(t, e, i, n) {
                            return t < Math.abs(e) ? (t = e, n = i / 4) : n = 0 === e && 0 === t ? i / (2 * Math.PI) * Math.asin(1) : i / (2 * Math.PI) * Math.asin(e / t), {
                                a: t,
                                c: e,
                                p: i,
                                s: n
                            }
                        }

                        function e(t, e, i) {
                            return t.a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * i - t.s) * (2 * Math.PI) / t.p)
                        }

                        function i(t, e, i, n) {
                            return i - r(n - t, 0, i, n) + e
                        }

                        function r(t, e, i, n) {
                            return (t /= n) < 1 / 2.75 ? i * (7.5625 * t * t) + e : t < 2 / 2.75 ? i * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + e : t < 2.5 / 2.75 ? i * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + e : i * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + e
                        }
                        n.util.ease = {
                            easeInQuad: function(t, e, i, n) {
                                return i * (t /= n) * t + e
                            },
                            easeOutQuad: function(t, e, i, n) {
                                return -i * (t /= n) * (t - 2) + e
                            },
                            easeInOutQuad: function(t, e, i, n) {
                                return (t /= n / 2) < 1 ? i / 2 * t * t + e : -i / 2 * (--t * (t - 2) - 1) + e
                            },
                            easeInCubic: function(t, e, i, n) {
                                return i * (t /= n) * t * t + e
                            },
                            easeOutCubic: function(t, e, i, n) {
                                return i * ((t = t / n - 1) * t * t + 1) + e
                            },
                            easeInOutCubic: function(t, e, i, n) {
                                return (t /= n / 2) < 1 ? i / 2 * t * t * t + e : i / 2 * ((t -= 2) * t * t + 2) + e
                            },
                            easeInQuart: function(t, e, i, n) {
                                return i * (t /= n) * t * t * t + e
                            },
                            easeOutQuart: function(t, e, i, n) {
                                return -i * ((t = t / n - 1) * t * t * t - 1) + e
                            },
                            easeInOutQuart: function(t, e, i, n) {
                                return (t /= n / 2) < 1 ? i / 2 * t * t * t * t + e : -i / 2 * ((t -= 2) * t * t * t - 2) + e
                            },
                            easeInQuint: function(t, e, i, n) {
                                return i * (t /= n) * t * t * t * t + e
                            },
                            easeOutQuint: function(t, e, i, n) {
                                return i * ((t = t / n - 1) * t * t * t * t + 1) + e
                            },
                            easeInOutQuint: function(t, e, i, n) {
                                return (t /= n / 2) < 1 ? i / 2 * t * t * t * t * t + e : i / 2 * ((t -= 2) * t * t * t * t + 2) + e
                            },
                            easeInSine: function(t, e, i, n) {
                                return -i * Math.cos(t / n * (Math.PI / 2)) + i + e
                            },
                            easeOutSine: function(t, e, i, n) {
                                return i * Math.sin(t / n * (Math.PI / 2)) + e
                            },
                            easeInOutSine: function(t, e, i, n) {
                                return -i / 2 * (Math.cos(Math.PI * t / n) - 1) + e
                            },
                            easeInExpo: function(t, e, i, n) {
                                return 0 === t ? e : i * Math.pow(2, 10 * (t / n - 1)) + e
                            },
                            easeOutExpo: function(t, e, i, n) {
                                return t === n ? e + i : i * (1 - Math.pow(2, -10 * t / n)) + e
                            },
                            easeInOutExpo: function(t, e, i, n) {
                                return 0 === t ? e : t === n ? e + i : (t /= n / 2) < 1 ? i / 2 * Math.pow(2, 10 * (t - 1)) + e : i / 2 * (2 - Math.pow(2, -10 * --t)) + e
                            },
                            easeInCirc: function(t, e, i, n) {
                                return -i * (Math.sqrt(1 - (t /= n) * t) - 1) + e
                            },
                            easeOutCirc: function(t, e, i, n) {
                                return i * Math.sqrt(1 - (t = t / n - 1) * t) + e
                            },
                            easeInOutCirc: function(t, e, i, n) {
                                return (t /= n / 2) < 1 ? -i / 2 * (Math.sqrt(1 - t * t) - 1) + e : i / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + e
                            },
                            easeInElastic: function(i, n, r, o) {
                                var a = 0;
                                return 0 === i ? n : 1 == (i /= o) ? n + r : (a || (a = .3 * o), -e(t(r, r, a, 1.70158), i, o) + n)
                            },
                            easeOutElastic: function(e, i, n, r) {
                                var o = 0,
                                    a = n;
                                if (0 === e) return i;
                                if (1 == (e /= r)) return i + n;
                                o || (o = .3 * r);
                                var s = t(a, n, o, 1.70158);
                                return s.a * Math.pow(2, -10 * e) * Math.sin((e * r - s.s) * (2 * Math.PI) / s.p) + s.c + i
                            },
                            easeInOutElastic: function(i, n, r, o) {
                                var a = 0,
                                    s = r;
                                if (0 === i) return n;
                                if (2 == (i /= o / 2)) return n + r;
                                a || (a = o * (.3 * 1.5));
                                var l = t(s, r, a, 1.70158);
                                return i < 1 ? -.5 * e(l, i, o) + n : l.a * Math.pow(2, -10 * (i -= 1)) * Math.sin((i * o - l.s) * (2 * Math.PI) / l.p) * .5 + l.c + n
                            },
                            easeInBack: function(t, e, i, n, r) {
                                return void 0 === r && (r = 1.70158), i * (t /= n) * t * ((r + 1) * t - r) + e
                            },
                            easeOutBack: function(t, e, i, n, r) {
                                return void 0 === r && (r = 1.70158), i * ((t = t / n - 1) * t * ((r + 1) * t + r) + 1) + e
                            },
                            easeInOutBack: function(t, e, i, n, r) {
                                return void 0 === r && (r = 1.70158), (t /= n / 2) < 1 ? i / 2 * (t * t * ((1 + (r *= 1.525)) * t - r)) + e : i / 2 * ((t -= 2) * t * ((1 + (r *= 1.525)) * t + r) + 2) + e
                            },
                            easeInBounce: i,
                            easeOutBounce: r,
                            easeInOutBounce: function(t, e, n, o) {
                                return t < o / 2 ? .5 * i(2 * t, 0, n, o) + e : .5 * r(2 * t - o, 0, n, o) + .5 * n + e
                            }
                        }
                    }(),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.util.object.clone,
                            r = e.util.toFixed,
                            o = e.util.parseUnit,
                            a = e.util.multiplyTransformMatrices,
                            s = {
                                cx: "left",
                                x: "left",
                                r: "radius",
                                cy: "top",
                                y: "top",
                                display: "visible",
                                visibility: "visible",
                                transform: "transformMatrix",
                                "fill-opacity": "fillOpacity",
                                "fill-rule": "fillRule",
                                "font-family": "fontFamily",
                                "font-size": "fontSize",
                                "font-style": "fontStyle",
                                "font-weight": "fontWeight",
                                "letter-spacing": "charSpacing",
                                "paint-order": "paintFirst",
                                "stroke-dasharray": "strokeDashArray",
                                "stroke-dashoffset": "strokeDashOffset",
                                "stroke-linecap": "strokeLineCap",
                                "stroke-linejoin": "strokeLineJoin",
                                "stroke-miterlimit": "strokeMiterLimit",
                                "stroke-opacity": "strokeOpacity",
                                "stroke-width": "strokeWidth",
                                "text-decoration": "textDecoration",
                                "text-anchor": "textAnchor",
                                opacity: "opacity",
                                "clip-path": "clipPath",
                                "clip-rule": "clipRule",
                                "vector-effect": "strokeUniform"
                            },
                            l = {
                                stroke: "strokeOpacity",
                                fill: "fillOpacity"
                            };

                        function c(t) {
                            return t in s ? s[t] : t
                        }

                        function u(t, i, n, r) {
                            var s, l = "[object Array]" === Object.prototype.toString.call(i);
                            if ("fill" !== t && "stroke" !== t || "none" !== i)
                                if ("vector-effect" === t) i = "non-scaling-stroke" === i;
                                else if ("strokeDashArray" === t) i = "none" === i ? null : i.replace(/,/g, " ").split(/\s+/).map(parseFloat);
                            else if ("transformMatrix" === t) i = n && n.transformMatrix ? a(n.transformMatrix, e.parseTransformAttribute(i)) : e.parseTransformAttribute(i);
                            else if ("visible" === t) i = "none" !== i && "hidden" !== i, n && !1 === n.visible && (i = !1);
                            else if ("opacity" === t) i = parseFloat(i), n && void 0 !== n.opacity && (i *= n.opacity);
                            else if ("textAnchor" === t) i = "start" === i ? "left" : "end" === i ? "right" : "center";
                            else if ("charSpacing" === t) s = o(i, r) / r * 1e3;
                            else if ("paintFirst" === t) {
                                var c = i.indexOf("fill"),
                                    u = i.indexOf("stroke");
                                i = "fill";
                                c > -1 && u > -1 && u < c ? i = "stroke" : -1 === c && u > -1 && (i = "stroke")
                            } else {
                                if ("href" === t || "xlink:href" === t) return i;
                                s = l ? i.map(o) : o(i, r)
                            } else i = "";
                            return !l && isNaN(s) ? i : s
                        }

                        function h(t) {
                            return new RegExp("^(" + t.join("|") + ")\\b", "i")
                        }

                        function d(t, e) {
                            var i, n, r, o, a = [];
                            for (r = 0, o = e.length; r < o; r++) i = e[r], n = t.getElementsByTagName(i), a = a.concat(Array.prototype.slice.call(n));
                            return a
                        }

                        function f(t, e) {
                            var i, n = !0;
                            return (i = p(t, e.pop())) && e.length && (n = function(t, e) {
                                var i, n = !0;
                                for (; t.parentNode && 1 === t.parentNode.nodeType && e.length;) n && (i = e.pop()), t = t.parentNode, n = p(t, i);
                                return 0 === e.length
                            }(t, e)), i && n && 0 === e.length
                        }

                        function p(t, e) {
                            var i, n, r = t.nodeName,
                                o = t.getAttribute("class"),
                                a = t.getAttribute("id");
                            if (i = new RegExp("^" + r, "i"), e = e.replace(i, ""), a && e.length && (i = new RegExp("#" + a + "(?![a-zA-Z\\-]+)", "i"), e = e.replace(i, "")), o && e.length)
                                for (n = (o = o.split(" ")).length; n--;) i = new RegExp("\\." + o[n] + "(?![a-zA-Z\\-]+)", "i"), e = e.replace(i, "");
                            return 0 === e.length
                        }

                        function g(t, e) {
                            var i;
                            if (t.getElementById && (i = t.getElementById(e)), i) return i;
                            var n, r, o, a = t.getElementsByTagName("*");
                            for (r = 0, o = a.length; r < o; r++)
                                if (e === (n = a[r]).getAttribute("id")) return n
                        }
                        e.svgValidTagNamesRegEx = h(["path", "circle", "polygon", "polyline", "ellipse", "rect", "line", "image", "text"]), e.svgViewBoxElementsRegEx = h(["symbol", "image", "marker", "pattern", "view", "svg"]), e.svgInvalidAncestorsRegEx = h(["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"]), e.svgValidParentsRegEx = h(["symbol", "g", "a", "svg", "clipPath", "defs"]), e.cssRules = {}, e.gradientDefs = {}, e.clipPaths = {}, e.parseTransformAttribute = function() {
                            function t(t, i, n) {
                                t[n] = Math.tan(e.util.degreesToRadians(i[0]))
                            }
                            var i = e.iMatrix,
                                n = e.reNum,
                                r = "(?:\\s+,?\\s*|,\\s*)",
                                o = "(?:" + ("(?:(matrix)\\s*\\(\\s*(" + n + ")" + r + "(" + n + ")" + r + "(" + n + ")" + r + "(" + n + ")" + r + "(" + n + ")" + r + "(" + n + ")\\s*\\))") + "|" + ("(?:(translate)\\s*\\(\\s*(" + n + ")(?:" + r + "(" + n + "))?\\s*\\))") + "|" + ("(?:(scale)\\s*\\(\\s*(" + n + ")(?:" + r + "(" + n + "))?\\s*\\))") + "|" + ("(?:(rotate)\\s*\\(\\s*(" + n + ")(?:" + r + "(" + n + ")" + r + "(" + n + "))?\\s*\\))") + "|" + ("(?:(skewX)\\s*\\(\\s*(" + n + ")\\s*\\))") + "|" + ("(?:(skewY)\\s*\\(\\s*(" + n + ")\\s*\\))") + ")",
                                a = new RegExp("^\\s*(?:" + ("(?:" + o + "(?:" + r + "*" + o + ")*)") + "?)\\s*$"),
                                s = new RegExp(o, "g");
                            return function(n) {
                                var r = i.concat(),
                                    l = [];
                                if (!n || n && !a.test(n)) return r;
                                n.replace(s, function(n) {
                                    var a = new RegExp(o).exec(n).filter(function(t) {
                                            return !!t
                                        }),
                                        s = a[1],
                                        c = a.slice(2).map(parseFloat);
                                    switch (s) {
                                        case "translate":
                                            ! function(t, e) {
                                                t[4] = e[0], 2 === e.length && (t[5] = e[1])
                                            }(r, c);
                                            break;
                                        case "rotate":
                                            c[0] = e.util.degreesToRadians(c[0]),
                                                function(t, i) {
                                                    var n = e.util.cos(i[0]),
                                                        r = e.util.sin(i[0]),
                                                        o = 0,
                                                        a = 0;
                                                    3 === i.length && (o = i[1], a = i[2]), t[0] = n, t[1] = r, t[2] = -r, t[3] = n, t[4] = o - (n * o - r * a), t[5] = a - (r * o + n * a)
                                                }(r, c);
                                            break;
                                        case "scale":
                                            ! function(t, e) {
                                                var i = e[0],
                                                    n = 2 === e.length ? e[1] : e[0];
                                                t[0] = i, t[3] = n
                                            }(r, c);
                                            break;
                                        case "skewX":
                                            t(r, c, 2);
                                            break;
                                        case "skewY":
                                            t(r, c, 1);
                                            break;
                                        case "matrix":
                                            r = c
                                    }
                                    l.push(r.concat()), r = i.concat()
                                });
                                for (var c = l[0]; l.length > 1;) l.shift(), c = e.util.multiplyTransformMatrices(c, l[0]);
                                return c
                            }
                        }();
                        var m = new RegExp("^\\s*(" + e.reNum + "+)\\s*,?\\s*(" + e.reNum + "+)\\s*,?\\s*(" + e.reNum + "+)\\s*,?\\s*(" + e.reNum + "+)\\s*$");

                        function v(t) {
                            var i, n, r, a, s, l, c = t.getAttribute("viewBox"),
                                u = 1,
                                h = 1,
                                d = t.getAttribute("width"),
                                f = t.getAttribute("height"),
                                p = t.getAttribute("x") || 0,
                                g = t.getAttribute("y") || 0,
                                v = t.getAttribute("preserveAspectRatio") || "",
                                b = !c || !e.svgViewBoxElementsRegEx.test(t.nodeName) || !(c = c.match(m)),
                                y = !d || !f || "100%" === d || "100%" === f,
                                _ = b && y,
                                x = {},
                                w = "",
                                C = 0,
                                S = 0;
                            if (x.width = 0, x.height = 0, x.toBeParsed = _, _) return x;
                            if (b) return x.width = o(d), x.height = o(f), x;
                            if (i = -parseFloat(c[1]), n = -parseFloat(c[2]), r = parseFloat(c[3]), a = parseFloat(c[4]), y ? (x.width = r, x.height = a) : (x.width = o(d), x.height = o(f), u = x.width / r, h = x.height / a), "none" !== (v = e.util.parsePreserveAspectRatioAttribute(v)).alignX && ("meet" === v.meetOrSlice && (h = u = u > h ? h : u), "slice" === v.meetOrSlice && (h = u = u > h ? u : h), C = x.width - r * u, S = x.height - a * u, "Mid" === v.alignX && (C /= 2), "Mid" === v.alignY && (S /= 2), "Min" === v.alignX && (C = 0), "Min" === v.alignY && (S = 0)), 1 === u && 1 === h && 0 === i && 0 === n && 0 === p && 0 === g) return x;
                            if ((p || g) && (w = " translate(" + o(p) + " " + o(g) + ") "), s = w + " matrix(" + u + " 0 0 " + h + " " + (i * u + C) + " " + (n * h + S) + ") ", x.viewboxTransform = e.parseTransformAttribute(s), "svg" === t.nodeName) {
                                for (l = t.ownerDocument.createElement("g"); t.firstChild;) l.appendChild(t.firstChild);
                                t.appendChild(l)
                            } else s = (l = t).getAttribute("transform") + s;
                            return l.setAttribute("transform", s), x
                        }

                        function b(t, e) {
                            var i = g(t, e.getAttribute("xlink:href").substr(1));
                            if (i && i.getAttribute("xlink:href") && b(t, i), ["gradientTransform", "x1", "x2", "y1", "y2", "gradientUnits", "cx", "cy", "r", "fx", "fy"].forEach(function(t) {
                                    e.hasAttribute(t) || e.setAttribute(t, i.getAttribute(t))
                                }), !e.children.length)
                                for (var n = i.cloneNode(!0); n.firstChild;) e.appendChild(n.firstChild);
                            e.removeAttribute("xlink:href")
                        }
                        e.parseSVGDocument = function(t, i, r, o) {
                            if (t) {
                                ! function(t) {
                                    for (var e = d(t, ["use", "svg:use"]), i = 0; e.length && i < e.length;) {
                                        var n, r, o, a, s = e[i],
                                            l = (s.getAttribute("xlink:href") || s.getAttribute("href")).substr(1),
                                            c = s.getAttribute("x") || 0,
                                            u = s.getAttribute("y") || 0,
                                            h = g(t, l).cloneNode(!0),
                                            f = (h.getAttribute("transform") || "") + " translate(" + c + ", " + u + ")",
                                            p = e.length;
                                        if (v(h), /^svg$/i.test(h.nodeName)) {
                                            var m = h.ownerDocument.createElement("g");
                                            for (r = 0, a = (o = h.attributes).length; r < a; r++) n = o.item(r), m.setAttribute(n.nodeName, n.nodeValue);
                                            for (; h.firstChild;) m.appendChild(h.firstChild);
                                            h = m
                                        }
                                        for (r = 0, a = (o = s.attributes).length; r < a; r++) "x" !== (n = o.item(r)).nodeName && "y" !== n.nodeName && "xlink:href" !== n.nodeName && "href" !== n.nodeName && ("transform" === n.nodeName ? f = n.nodeValue + " " + f : h.setAttribute(n.nodeName, n.nodeValue));
                                        h.setAttribute("transform", f), h.setAttribute("instantiated_by_use", "1"), h.removeAttribute("id"), s.parentNode.replaceChild(h, s), e.length === p && i++
                                    }
                                }(t);
                                var a, s, l = e.Object.__uid++,
                                    c = v(t),
                                    u = e.util.toArray(t.getElementsByTagName("*"));
                                if (c.crossOrigin = o && o.crossOrigin, c.svgUid = l, 0 === u.length && e.isLikelyNode) {
                                    var h = [];
                                    for (a = 0, s = (u = t.selectNodes('//*[name(.)!="svg"]')).length; a < s; a++) h[a] = u[a];
                                    u = h
                                }
                                var f = u.filter(function(t) {
                                    return v(t), e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:", "")) && ! function(t, e) {
                                        for (; t && (t = t.parentNode);)
                                            if (t.nodeName && e.test(t.nodeName.replace("svg:", "")) && !t.getAttribute("instantiated_by_use")) return !0;
                                        return !1
                                    }(t, e.svgInvalidAncestorsRegEx)
                                });
                                if (!f || f && !f.length) i && i([], {});
                                else {
                                    var p = {};
                                    u.filter(function(t) {
                                        return "clipPath" === t.nodeName.replace("svg:", "")
                                    }).forEach(function(t) {
                                        var i = t.getAttribute("id");
                                        p[i] = e.util.toArray(t.getElementsByTagName("*")).filter(function(t) {
                                            return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:", ""))
                                        })
                                    }), e.gradientDefs[l] = e.getGradientDefs(t), e.cssRules[l] = e.getCSSRules(t), e.clipPaths[l] = p, e.parseElements(f, function(t, n) {
                                        i && (i(t, c, n, u), delete e.gradientDefs[l], delete e.cssRules[l], delete e.clipPaths[l])
                                    }, n(c), r, o)
                                }
                            }
                        };
                        var y = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + e.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + e.reNum + "))?\\s+(.*)");
                        i(e, {
                            parseFontDeclaration: function(t, e) {
                                var i = t.match(y);
                                if (i) {
                                    var n = i[1],
                                        r = i[3],
                                        a = i[4],
                                        s = i[5],
                                        l = i[6];
                                    n && (e.fontStyle = n), r && (e.fontWeight = isNaN(parseFloat(r)) ? r : parseFloat(r)), a && (e.fontSize = o(a)), l && (e.fontFamily = l), s && (e.lineHeight = "normal" === s ? 1 : s)
                                }
                            },
                            getGradientDefs: function(t) {
                                var e, i = d(t, ["linearGradient", "radialGradient", "svg:linearGradient", "svg:radialGradient"]),
                                    n = 0,
                                    r = {};
                                for (n = i.length; n--;)(e = i[n]).getAttribute("xlink:href") && b(t, e), r[e.getAttribute("id")] = e;
                                return r
                            },
                            parseAttributes: function(t, n, a) {
                                if (t) {
                                    var s, h, d, p = {};
                                    void 0 === a && (a = t.getAttribute("svgUid")), t.parentNode && e.svgValidParentsRegEx.test(t.parentNode.nodeName) && (p = e.parseAttributes(t.parentNode, n, a));
                                    var g = n.reduce(function(e, i) {
                                        return (s = t.getAttribute(i)) && (e[i] = s), e
                                    }, {});
                                    g = i(g, i(function(t, i) {
                                        var n = {};
                                        for (var r in e.cssRules[i])
                                            if (f(t, r.split(" ")))
                                                for (var o in e.cssRules[i][r]) n[o] = e.cssRules[i][r][o];
                                        return n
                                    }(t, a), e.parseStyleAttribute(t))), h = d = p.fontSize || e.Text.DEFAULT_SVG_FONT_SIZE, g["font-size"] && (g["font-size"] = h = o(g["font-size"], d));
                                    var m, v, b = {};
                                    for (var y in g) v = u(m = c(y), g[y], p, h), b[m] = v;
                                    b && b.font && e.parseFontDeclaration(b.font, b);
                                    var _ = i(p, b);
                                    return e.svgValidParentsRegEx.test(t.nodeName) ? _ : function(t) {
                                        for (var i in l)
                                            if (void 0 !== t[l[i]] && "" !== t[i]) {
                                                if (void 0 === t[i]) {
                                                    if (!e.Object.prototype[i]) continue;
                                                    t[i] = e.Object.prototype[i]
                                                }
                                                if (0 !== t[i].indexOf("url(")) {
                                                    var n = new e.Color(t[i]);
                                                    t[i] = n.setAlpha(r(n.getAlpha() * t[l[i]], 2)).toRgba()
                                                }
                                            }
                                        return t
                                    }(_)
                                }
                            },
                            parseElements: function(t, i, n, r, o) {
                                new e.ElementsParser(t, i, n, r, o).parse()
                            },
                            parseStyleAttribute: function(t) {
                                var e = {},
                                    i = t.getAttribute("style");
                                return i ? ("string" == typeof i ? function(t, e) {
                                    var i, n;
                                    t.replace(/;\s*$/, "").split(";").forEach(function(t) {
                                        var r = t.split(":");
                                        i = r[0].trim().toLowerCase(), n = r[1].trim(), e[i] = n
                                    })
                                }(i, e) : function(t, e) {
                                    var i, n;
                                    for (var r in t) void 0 !== t[r] && (i = r.toLowerCase(), n = t[r], e[i] = n)
                                }(i, e), e) : e
                            },
                            parsePointsAttribute: function(t) {
                                if (!t) return null;
                                var e, i, n = [];
                                for (e = 0, i = (t = (t = t.replace(/,/g, " ").trim()).split(/\s+/)).length; e < i; e += 2) n.push({
                                    x: parseFloat(t[e]),
                                    y: parseFloat(t[e + 1])
                                });
                                return n
                            },
                            getCSSRules: function(t) {
                                var i, n, r = t.getElementsByTagName("style"),
                                    o = {};
                                for (i = 0, n = r.length; i < n; i++) {
                                    var a = r[i].textContent || r[i].text;
                                    "" !== (a = a.replace(/\/\*[\s\S]*?\*\//g, "")).trim() && a.match(/[^{]*\{[\s\S]*?\}/g).map(function(t) {
                                        return t.trim()
                                    }).forEach(function(t) {
                                        var r = t.match(/([\s\S]*?)\s*\{([^}]*)\}/),
                                            a = {},
                                            s = r[2].trim().replace(/;$/, "").split(/\s*;\s*/);
                                        for (i = 0, n = s.length; i < n; i++) {
                                            var l = s[i].split(/\s*:\s*/),
                                                c = l[0],
                                                u = l[1];
                                            a[c] = u
                                        }(t = r[1]).split(",").forEach(function(t) {
                                            "" !== (t = t.replace(/^svg/i, "").trim()) && (o[t] ? e.util.object.extend(o[t], a) : o[t] = e.util.object.clone(a))
                                        })
                                    })
                                }
                                return o
                            },
                            loadSVGFromURL: function(t, i, n, r) {
                                t = t.replace(/^\n\s*/, "").trim(), new e.util.request(t, {
                                    method: "get",
                                    onComplete: function(t) {
                                        var o = t.responseXML;
                                        o && !o.documentElement && e.window.ActiveXObject && t.responseText && ((o = new ActiveXObject("Microsoft.XMLDOM")).async = "false", o.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
                                        if (!o || !o.documentElement) return i && i(null), !1;
                                        e.parseSVGDocument(o.documentElement, function(t, e, n, r) {
                                            i && i(t, e, n, r)
                                        }, n, r)
                                    }
                                })
                            },
                            loadSVGFromString: function(t, i, n, r) {
                                var o;
                                if (t = t.trim(), "undefined" != typeof DOMParser) {
                                    var a = new DOMParser;
                                    a && a.parseFromString && (o = a.parseFromString(t, "text/xml"))
                                } else e.window.ActiveXObject && ((o = new ActiveXObject("Microsoft.XMLDOM")).async = "false", o.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
                                e.parseSVGDocument(o.documentElement, function(t, e, n, r) {
                                    i(t, e, n, r)
                                }, n, r)
                            }
                        })
                    }(e), n.ElementsParser = function(t, e, i, n, r) {
                        this.elements = t, this.callback = e, this.options = i, this.reviver = n, this.svgUid = i && i.svgUid || 0, this.parsingOptions = r, this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g
                    },
                    function(t) {
                        t.parse = function() {
                            this.instances = new Array(this.elements.length), this.numElements = this.elements.length, this.createObjects()
                        }, t.createObjects = function() {
                            var t = this;
                            this.elements.forEach(function(e, i) {
                                e.setAttribute("svgUid", t.svgUid), t.createObject(e, i)
                            })
                        }, t.findTag = function(t) {
                            return n[n.util.string.capitalize(t.tagName.replace("svg:", ""))]
                        }, t.createObject = function(t, e) {
                            var i = this.findTag(t);
                            if (i && i.fromElement) try {
                                i.fromElement(t, this.createCallback(e, t), this.options)
                            } catch (t) {
                                n.log(t)
                            } else this.checkIfDone()
                        }, t.createCallback = function(t, e) {
                            var i = this;
                            return function(r) {
                                var o;
                                i.resolveGradient(r, "fill"), i.resolveGradient(r, "stroke"), r instanceof n.Image && r._originalElement && (o = r.parsePreserveAspectRatioAttribute(e)), r._removeTransformMatrix(o), i.resolveClipPath(r), i.reviver && i.reviver(e, r), i.instances[t] = r, i.checkIfDone()
                            }
                        }, t.extractPropertyDefinition = function(t, e, i) {
                            var r = t[e];
                            if (/^url\(/.test(r)) {
                                var o = this.regexUrl.exec(r)[1];
                                return this.regexUrl.lastIndex = 0, n[i][this.svgUid][o]
                            }
                        }, t.resolveGradient = function(t, e) {
                            var i = this.extractPropertyDefinition(t, e, "gradientDefs");
                            i && t.set(e, n.Gradient.fromElement(i, t))
                        }, t.createClipPathCallback = function(t, e) {
                            return function(t) {
                                t._removeTransformMatrix(), t.fillRule = t.clipRule, e.push(t)
                            }
                        }, t.resolveClipPath = function(t) {
                            var e, i, r, o, a = this.extractPropertyDefinition(t, "clipPath", "clipPaths");
                            if (a) {
                                r = [], i = n.util.invertTransform(t.calcTransformMatrix());
                                for (var s = 0; s < a.length; s++) e = a[s], this.findTag(e).fromElement(e, this.createClipPathCallback(t, r), this.options);
                                a = 1 === r.length ? r[0] : new n.Group(r), o = n.util.multiplyTransformMatrices(i, a.calcTransformMatrix());
                                var l = n.util.qrDecompose(o);
                                a.flipX = !1, a.flipY = !1, a.set("scaleX", l.scaleX), a.set("scaleY", l.scaleY), a.angle = l.angle, a.skewX = l.skewX, a.skewY = 0, a.setPositionByOrigin({
                                    x: l.translateX,
                                    y: l.translateY
                                }, "center", "center"), t.clipPath = a
                            }
                        }, t.checkIfDone = function() {
                            0 == --this.numElements && (this.instances = this.instances.filter(function(t) {
                                return null != t
                            }), this.callback(this.instances, this.elements))
                        }
                    }(n.ElementsParser.prototype),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {});

                        function i(t, e) {
                            this.x = t, this.y = e
                        }
                        e.Point ? e.warn("fabric.Point is already defined") : (e.Point = i, i.prototype = {
                            type: "point",
                            constructor: i,
                            add: function(t) {
                                return new i(this.x + t.x, this.y + t.y)
                            },
                            addEquals: function(t) {
                                return this.x += t.x, this.y += t.y, this
                            },
                            scalarAdd: function(t) {
                                return new i(this.x + t, this.y + t)
                            },
                            scalarAddEquals: function(t) {
                                return this.x += t, this.y += t, this
                            },
                            subtract: function(t) {
                                return new i(this.x - t.x, this.y - t.y)
                            },
                            subtractEquals: function(t) {
                                return this.x -= t.x, this.y -= t.y, this
                            },
                            scalarSubtract: function(t) {
                                return new i(this.x - t, this.y - t)
                            },
                            scalarSubtractEquals: function(t) {
                                return this.x -= t, this.y -= t, this
                            },
                            multiply: function(t) {
                                return new i(this.x * t, this.y * t)
                            },
                            multiplyEquals: function(t) {
                                return this.x *= t, this.y *= t, this
                            },
                            divide: function(t) {
                                return new i(this.x / t, this.y / t)
                            },
                            divideEquals: function(t) {
                                return this.x /= t, this.y /= t, this
                            },
                            eq: function(t) {
                                return this.x === t.x && this.y === t.y
                            },
                            lt: function(t) {
                                return this.x < t.x && this.y < t.y
                            },
                            lte: function(t) {
                                return this.x <= t.x && this.y <= t.y
                            },
                            gt: function(t) {
                                return this.x > t.x && this.y > t.y
                            },
                            gte: function(t) {
                                return this.x >= t.x && this.y >= t.y
                            },
                            lerp: function(t, e) {
                                return void 0 === e && (e = .5), e = Math.max(Math.min(1, e), 0), new i(this.x + (t.x - this.x) * e, this.y + (t.y - this.y) * e)
                            },
                            distanceFrom: function(t) {
                                var e = this.x - t.x,
                                    i = this.y - t.y;
                                return Math.sqrt(e * e + i * i)
                            },
                            midPointFrom: function(t) {
                                return this.lerp(t)
                            },
                            min: function(t) {
                                return new i(Math.min(this.x, t.x), Math.min(this.y, t.y))
                            },
                            max: function(t) {
                                return new i(Math.max(this.x, t.x), Math.max(this.y, t.y))
                            },
                            toString: function() {
                                return this.x + "," + this.y
                            },
                            setXY: function(t, e) {
                                return this.x = t, this.y = e, this
                            },
                            setX: function(t) {
                                return this.x = t, this
                            },
                            setY: function(t) {
                                return this.y = t, this
                            },
                            setFromPoint: function(t) {
                                return this.x = t.x, this.y = t.y, this
                            },
                            swap: function(t) {
                                var e = this.x,
                                    i = this.y;
                                this.x = t.x, this.y = t.y, t.x = e, t.y = i
                            },
                            clone: function() {
                                return new i(this.x, this.y)
                            }
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {});

                        function i(t) {
                            this.status = t, this.points = []
                        }
                        e.Intersection ? e.warn("fabric.Intersection is already defined") : (e.Intersection = i, e.Intersection.prototype = {
                            constructor: i,
                            appendPoint: function(t) {
                                return this.points.push(t), this
                            },
                            appendPoints: function(t) {
                                return this.points = this.points.concat(t), this
                            }
                        }, e.Intersection.intersectLineLine = function(t, n, r, o) {
                            var a, s = (o.x - r.x) * (t.y - r.y) - (o.y - r.y) * (t.x - r.x),
                                l = (n.x - t.x) * (t.y - r.y) - (n.y - t.y) * (t.x - r.x),
                                c = (o.y - r.y) * (n.x - t.x) - (o.x - r.x) * (n.y - t.y);
                            if (0 !== c) {
                                var u = s / c,
                                    h = l / c;
                                0 <= u && u <= 1 && 0 <= h && h <= 1 ? (a = new i("Intersection")).appendPoint(new e.Point(t.x + u * (n.x - t.x), t.y + u * (n.y - t.y))) : a = new i
                            } else a = new i(0 === s || 0 === l ? "Coincident" : "Parallel");
                            return a
                        }, e.Intersection.intersectLinePolygon = function(t, e, n) {
                            var r, o, a, s, l = new i,
                                c = n.length;
                            for (s = 0; s < c; s++) r = n[s], o = n[(s + 1) % c], a = i.intersectLineLine(t, e, r, o), l.appendPoints(a.points);
                            return l.points.length > 0 && (l.status = "Intersection"), l
                        }, e.Intersection.intersectPolygonPolygon = function(t, e) {
                            var n, r = new i,
                                o = t.length;
                            for (n = 0; n < o; n++) {
                                var a = t[n],
                                    s = t[(n + 1) % o],
                                    l = i.intersectLinePolygon(a, s, e);
                                r.appendPoints(l.points)
                            }
                            return r.points.length > 0 && (r.status = "Intersection"), r
                        }, e.Intersection.intersectPolygonRectangle = function(t, n, r) {
                            var o = n.min(r),
                                a = n.max(r),
                                s = new e.Point(a.x, o.y),
                                l = new e.Point(o.x, a.y),
                                c = i.intersectLinePolygon(o, s, t),
                                u = i.intersectLinePolygon(s, a, t),
                                h = i.intersectLinePolygon(a, l, t),
                                d = i.intersectLinePolygon(l, o, t),
                                f = new i;
                            return f.appendPoints(c.points), f.appendPoints(u.points), f.appendPoints(h.points), f.appendPoints(d.points), f.points.length > 0 && (f.status = "Intersection"), f
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {});

                        function i(t) {
                            t ? this._tryParsingColor(t) : this.setSource([0, 0, 0, 1])
                        }

                        function n(t, e, i) {
                            return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? t + 6 * (e - t) * i : i < .5 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t
                        }
                        e.Color ? e.warn("fabric.Color is already defined.") : (e.Color = i, e.Color.prototype = {
                            _tryParsingColor: function(t) {
                                var e;
                                t in i.colorNameMap && (t = i.colorNameMap[t]), "transparent" === t && (e = [255, 255, 255, 0]), e || (e = i.sourceFromHex(t)), e || (e = i.sourceFromRgb(t)), e || (e = i.sourceFromHsl(t)), e || (e = [0, 0, 0, 1]), e && this.setSource(e)
                            },
                            _rgbToHsl: function(t, i, n) {
                                t /= 255, i /= 255, n /= 255;
                                var r, o, a, s = e.util.array.max([t, i, n]),
                                    l = e.util.array.min([t, i, n]);
                                if (a = (s + l) / 2, s === l) r = o = 0;
                                else {
                                    var c = s - l;
                                    switch (o = a > .5 ? c / (2 - s - l) : c / (s + l), s) {
                                        case t:
                                            r = (i - n) / c + (i < n ? 6 : 0);
                                            break;
                                        case i:
                                            r = (n - t) / c + 2;
                                            break;
                                        case n:
                                            r = (t - i) / c + 4
                                    }
                                    r /= 6
                                }
                                return [Math.round(360 * r), Math.round(100 * o), Math.round(100 * a)]
                            },
                            getSource: function() {
                                return this._source
                            },
                            setSource: function(t) {
                                this._source = t
                            },
                            toRgb: function() {
                                var t = this.getSource();
                                return "rgb(" + t[0] + "," + t[1] + "," + t[2] + ")"
                            },
                            toRgba: function() {
                                var t = this.getSource();
                                return "rgba(" + t[0] + "," + t[1] + "," + t[2] + "," + t[3] + ")"
                            },
                            toHsl: function() {
                                var t = this.getSource(),
                                    e = this._rgbToHsl(t[0], t[1], t[2]);
                                return "hsl(" + e[0] + "," + e[1] + "%," + e[2] + "%)"
                            },
                            toHsla: function() {
                                var t = this.getSource(),
                                    e = this._rgbToHsl(t[0], t[1], t[2]);
                                return "hsla(" + e[0] + "," + e[1] + "%," + e[2] + "%," + t[3] + ")"
                            },
                            toHex: function() {
                                var t, e, i, n = this.getSource();
                                return t = 1 === (t = n[0].toString(16)).length ? "0" + t : t, e = 1 === (e = n[1].toString(16)).length ? "0" + e : e, i = 1 === (i = n[2].toString(16)).length ? "0" + i : i, t.toUpperCase() + e.toUpperCase() + i.toUpperCase()
                            },
                            toHexa: function() {
                                var t, e = this.getSource();
                                return t = 1 === (t = (t = Math.round(255 * e[3])).toString(16)).length ? "0" + t : t, this.toHex() + t.toUpperCase()
                            },
                            getAlpha: function() {
                                return this.getSource()[3]
                            },
                            setAlpha: function(t) {
                                var e = this.getSource();
                                return e[3] = t, this.setSource(e), this
                            },
                            toGrayscale: function() {
                                var t = this.getSource(),
                                    e = parseInt((.3 * t[0] + .59 * t[1] + .11 * t[2]).toFixed(0), 10),
                                    i = t[3];
                                return this.setSource([e, e, e, i]), this
                            },
                            toBlackWhite: function(t) {
                                var e = this.getSource(),
                                    i = (.3 * e[0] + .59 * e[1] + .11 * e[2]).toFixed(0),
                                    n = e[3];
                                return t = t || 127, i = Number(i) < Number(t) ? 0 : 255, this.setSource([i, i, i, n]), this
                            },
                            overlayWith: function(t) {
                                t instanceof i || (t = new i(t));
                                var e, n = [],
                                    r = this.getAlpha(),
                                    o = this.getSource(),
                                    a = t.getSource();
                                for (e = 0; e < 3; e++) n.push(Math.round(.5 * o[e] + .5 * a[e]));
                                return n[3] = r, this.setSource(n), this
                            }
                        }, e.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i, e.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i, e.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i, e.Color.colorNameMap = {
                            aliceblue: "#F0F8FF",
                            antiquewhite: "#FAEBD7",
                            aqua: "#00FFFF",
                            aquamarine: "#7FFFD4",
                            azure: "#F0FFFF",
                            beige: "#F5F5DC",
                            bisque: "#FFE4C4",
                            black: "#000000",
                            blanchedalmond: "#FFEBCD",
                            blue: "#0000FF",
                            blueviolet: "#8A2BE2",
                            brown: "#A52A2A",
                            burlywood: "#DEB887",
                            cadetblue: "#5F9EA0",
                            chartreuse: "#7FFF00",
                            chocolate: "#D2691E",
                            coral: "#FF7F50",
                            cornflowerblue: "#6495ED",
                            cornsilk: "#FFF8DC",
                            crimson: "#DC143C",
                            cyan: "#00FFFF",
                            darkblue: "#00008B",
                            darkcyan: "#008B8B",
                            darkgoldenrod: "#B8860B",
                            darkgray: "#A9A9A9",
                            darkgrey: "#A9A9A9",
                            darkgreen: "#006400",
                            darkkhaki: "#BDB76B",
                            darkmagenta: "#8B008B",
                            darkolivegreen: "#556B2F",
                            darkorange: "#FF8C00",
                            darkorchid: "#9932CC",
                            darkred: "#8B0000",
                            darksalmon: "#E9967A",
                            darkseagreen: "#8FBC8F",
                            darkslateblue: "#483D8B",
                            darkslategray: "#2F4F4F",
                            darkslategrey: "#2F4F4F",
                            darkturquoise: "#00CED1",
                            darkviolet: "#9400D3",
                            deeppink: "#FF1493",
                            deepskyblue: "#00BFFF",
                            dimgray: "#696969",
                            dimgrey: "#696969",
                            dodgerblue: "#1E90FF",
                            firebrick: "#B22222",
                            floralwhite: "#FFFAF0",
                            forestgreen: "#228B22",
                            fuchsia: "#FF00FF",
                            gainsboro: "#DCDCDC",
                            ghostwhite: "#F8F8FF",
                            gold: "#FFD700",
                            goldenrod: "#DAA520",
                            gray: "#808080",
                            grey: "#808080",
                            green: "#008000",
                            greenyellow: "#ADFF2F",
                            honeydew: "#F0FFF0",
                            hotpink: "#FF69B4",
                            indianred: "#CD5C5C",
                            indigo: "#4B0082",
                            ivory: "#FFFFF0",
                            khaki: "#F0E68C",
                            lavender: "#E6E6FA",
                            lavenderblush: "#FFF0F5",
                            lawngreen: "#7CFC00",
                            lemonchiffon: "#FFFACD",
                            lightblue: "#ADD8E6",
                            lightcoral: "#F08080",
                            lightcyan: "#E0FFFF",
                            lightgoldenrodyellow: "#FAFAD2",
                            lightgray: "#D3D3D3",
                            lightgrey: "#D3D3D3",
                            lightgreen: "#90EE90",
                            lightpink: "#FFB6C1",
                            lightsalmon: "#FFA07A",
                            lightseagreen: "#20B2AA",
                            lightskyblue: "#87CEFA",
                            lightslategray: "#778899",
                            lightslategrey: "#778899",
                            lightsteelblue: "#B0C4DE",
                            lightyellow: "#FFFFE0",
                            lime: "#00FF00",
                            limegreen: "#32CD32",
                            linen: "#FAF0E6",
                            magenta: "#FF00FF",
                            maroon: "#800000",
                            mediumaquamarine: "#66CDAA",
                            mediumblue: "#0000CD",
                            mediumorchid: "#BA55D3",
                            mediumpurple: "#9370DB",
                            mediumseagreen: "#3CB371",
                            mediumslateblue: "#7B68EE",
                            mediumspringgreen: "#00FA9A",
                            mediumturquoise: "#48D1CC",
                            mediumvioletred: "#C71585",
                            midnightblue: "#191970",
                            mintcream: "#F5FFFA",
                            mistyrose: "#FFE4E1",
                            moccasin: "#FFE4B5",
                            navajowhite: "#FFDEAD",
                            navy: "#000080",
                            oldlace: "#FDF5E6",
                            olive: "#808000",
                            olivedrab: "#6B8E23",
                            orange: "#FFA500",
                            orangered: "#FF4500",
                            orchid: "#DA70D6",
                            palegoldenrod: "#EEE8AA",
                            palegreen: "#98FB98",
                            paleturquoise: "#AFEEEE",
                            palevioletred: "#DB7093",
                            papayawhip: "#FFEFD5",
                            peachpuff: "#FFDAB9",
                            peru: "#CD853F",
                            pink: "#FFC0CB",
                            plum: "#DDA0DD",
                            powderblue: "#B0E0E6",
                            purple: "#800080",
                            rebeccapurple: "#663399",
                            red: "#FF0000",
                            rosybrown: "#BC8F8F",
                            royalblue: "#4169E1",
                            saddlebrown: "#8B4513",
                            salmon: "#FA8072",
                            sandybrown: "#F4A460",
                            seagreen: "#2E8B57",
                            seashell: "#FFF5EE",
                            sienna: "#A0522D",
                            silver: "#C0C0C0",
                            skyblue: "#87CEEB",
                            slateblue: "#6A5ACD",
                            slategray: "#708090",
                            slategrey: "#708090",
                            snow: "#FFFAFA",
                            springgreen: "#00FF7F",
                            steelblue: "#4682B4",
                            tan: "#D2B48C",
                            teal: "#008080",
                            thistle: "#D8BFD8",
                            tomato: "#FF6347",
                            turquoise: "#40E0D0",
                            violet: "#EE82EE",
                            wheat: "#F5DEB3",
                            white: "#FFFFFF",
                            whitesmoke: "#F5F5F5",
                            yellow: "#FFFF00",
                            yellowgreen: "#9ACD32"
                        }, e.Color.fromRgb = function(t) {
                            return i.fromSource(i.sourceFromRgb(t))
                        }, e.Color.sourceFromRgb = function(t) {
                            var e = t.match(i.reRGBa);
                            if (e) {
                                var n = parseInt(e[1], 10) / (/%$/.test(e[1]) ? 100 : 1) * (/%$/.test(e[1]) ? 255 : 1),
                                    r = parseInt(e[2], 10) / (/%$/.test(e[2]) ? 100 : 1) * (/%$/.test(e[2]) ? 255 : 1),
                                    o = parseInt(e[3], 10) / (/%$/.test(e[3]) ? 100 : 1) * (/%$/.test(e[3]) ? 255 : 1);
                                return [parseInt(n, 10), parseInt(r, 10), parseInt(o, 10), e[4] ? parseFloat(e[4]) : 1]
                            }
                        }, e.Color.fromRgba = i.fromRgb, e.Color.fromHsl = function(t) {
                            return i.fromSource(i.sourceFromHsl(t))
                        }, e.Color.sourceFromHsl = function(t) {
                            var e = t.match(i.reHSLa);
                            if (e) {
                                var r, o, a, s = (parseFloat(e[1]) % 360 + 360) % 360 / 360,
                                    l = parseFloat(e[2]) / (/%$/.test(e[2]) ? 100 : 1),
                                    c = parseFloat(e[3]) / (/%$/.test(e[3]) ? 100 : 1);
                                if (0 === l) r = o = a = c;
                                else {
                                    var u = c <= .5 ? c * (l + 1) : c + l - c * l,
                                        h = 2 * c - u;
                                    r = n(h, u, s + 1 / 3), o = n(h, u, s), a = n(h, u, s - 1 / 3)
                                }
                                return [Math.round(255 * r), Math.round(255 * o), Math.round(255 * a), e[4] ? parseFloat(e[4]) : 1]
                            }
                        }, e.Color.fromHsla = i.fromHsl, e.Color.fromHex = function(t) {
                            return i.fromSource(i.sourceFromHex(t))
                        }, e.Color.sourceFromHex = function(t) {
                            if (t.match(i.reHex)) {
                                var e = t.slice(t.indexOf("#") + 1),
                                    n = 3 === e.length || 4 === e.length,
                                    r = 8 === e.length || 4 === e.length,
                                    o = n ? e.charAt(0) + e.charAt(0) : e.substring(0, 2),
                                    a = n ? e.charAt(1) + e.charAt(1) : e.substring(2, 4),
                                    s = n ? e.charAt(2) + e.charAt(2) : e.substring(4, 6),
                                    l = r ? n ? e.charAt(3) + e.charAt(3) : e.substring(6, 8) : "FF";
                                return [parseInt(o, 16), parseInt(a, 16), parseInt(s, 16), parseFloat((parseInt(l, 16) / 255).toFixed(2))]
                            }
                        }, e.Color.fromSource = function(t) {
                            var e = new i;
                            return e.setSource(t), e
                        })
                    }(e),
                    function() {
                        function t(t) {
                            var e, i, r, o, a = t.getAttribute("style"),
                                s = t.getAttribute("offset") || 0;
                            if (s = (s = parseFloat(s) / (/%$/.test(s) ? 100 : 1)) < 0 ? 0 : s > 1 ? 1 : s, a) {
                                var l = a.split(/\s*;\s*/);
                                for ("" === l[l.length - 1] && l.pop(), o = l.length; o--;) {
                                    var c = l[o].split(/\s*:\s*/),
                                        u = c[0].trim(),
                                        h = c[1].trim();
                                    "stop-color" === u ? e = h : "stop-opacity" === u && (r = h)
                                }
                            }
                            return e || (e = t.getAttribute("stop-color") || "rgb(0,0,0)"), r || (r = t.getAttribute("stop-opacity")), i = (e = new n.Color(e)).getAlpha(), r = isNaN(parseFloat(r)) ? 1 : parseFloat(r), r *= i, {
                                offset: s,
                                color: e.toRgb(),
                                opacity: r
                            }
                        }
                        var e = n.util.object.clone;

                        function i(t, e, i) {
                            var n, r = 0,
                                o = 1,
                                a = "";
                            for (var s in e) "Infinity" === e[s] ? e[s] = 1 : "-Infinity" === e[s] && (e[s] = 0), n = parseFloat(e[s], 10), o = "string" == typeof e[s] && /^(\d+\.\d+)%|(\d+)%$/.test(e[s]) ? .01 : 1, "x1" === s || "x2" === s || "r2" === s ? (o *= "objectBoundingBox" === i ? t.width : 1, r = "objectBoundingBox" === i && t.left || 0) : "y1" !== s && "y2" !== s || (o *= "objectBoundingBox" === i ? t.height : 1, r = "objectBoundingBox" === i && t.top || 0), e[s] = n * o + r;
                            if ("ellipse" === t.type && null !== e.r2 && "objectBoundingBox" === i && t.rx !== t.ry) {
                                var l = t.ry / t.rx;
                                a = " scale(1, " + l + ")", e.y1 && (e.y1 /= l), e.y2 && (e.y2 /= l)
                            }
                            return a
                        }
                        n.Gradient = n.util.createClass({
                            offsetX: 0,
                            offsetY: 0,
                            initialize: function(t) {
                                t || (t = {});
                                var e = {};
                                this.id = n.Object.__uid++, this.type = t.type || "linear", e = {
                                    x1: t.coords.x1 || 0,
                                    y1: t.coords.y1 || 0,
                                    x2: t.coords.x2 || 0,
                                    y2: t.coords.y2 || 0
                                }, "radial" === this.type && (e.r1 = t.coords.r1 || 0, e.r2 = t.coords.r2 || 0), this.coords = e, this.colorStops = t.colorStops.slice(), t.gradientTransform && (this.gradientTransform = t.gradientTransform), this.offsetX = t.offsetX || this.offsetX, this.offsetY = t.offsetY || this.offsetY
                            },
                            addColorStop: function(t) {
                                for (var e in t) {
                                    var i = new n.Color(t[e]);
                                    this.colorStops.push({
                                        offset: parseFloat(e),
                                        color: i.toRgb(),
                                        opacity: i.getAlpha()
                                    })
                                }
                                return this
                            },
                            toObject: function(t) {
                                var e = {
                                    type: this.type,
                                    coords: this.coords,
                                    colorStops: this.colorStops,
                                    offsetX: this.offsetX,
                                    offsetY: this.offsetY,
                                    gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform
                                };
                                return n.util.populateWithProperties(this, e, t), e
                            },
                            toSVG: function(t) {
                                var i, r, o, a, s = e(this.coords, !0),
                                    l = e(this.colorStops, !0),
                                    c = s.r1 > s.r2,
                                    u = this.gradientTransform ? this.gradientTransform.concat() : n.iMatrix.concat(),
                                    h = t.width / 2 - this.offsetX,
                                    d = t.height / 2 - this.offsetY;
                                if (l.sort(function(t, e) {
                                        return t.offset - e.offset
                                    }), "path" === t.type && (h -= t.pathOffset.x, d -= t.pathOffset.y), u[4] -= h, u[5] -= d, a = 'id="SVGID_' + this.id + '" gradientUnits="userSpaceOnUse"', a += ' gradientTransform="matrix(' + u.join(" ") + ')" ', "linear" === this.type ? o = ["<linearGradient ", a, ' x1="', s.x1, '" y1="', s.y1, '" x2="', s.x2, '" y2="', s.y2, '">\n'] : "radial" === this.type && (o = ["<radialGradient ", a, ' cx="', c ? s.x1 : s.x2, '" cy="', c ? s.y1 : s.y2, '" r="', c ? s.r1 : s.r2, '" fx="', c ? s.x2 : s.x1, '" fy="', c ? s.y2 : s.y1, '">\n']), "radial" === this.type) {
                                    if (c)
                                        for ((l = l.concat()).reverse(), i = 0, r = l.length; i < r; i++) l[i].offset = 1 - l[i].offset;
                                    var f = Math.min(s.r1, s.r2);
                                    if (f > 0) {
                                        var p = f / Math.max(s.r1, s.r2);
                                        for (i = 0, r = l.length; i < r; i++) l[i].offset += p * (1 - l[i].offset)
                                    }
                                }
                                for (i = 0, r = l.length; i < r; i++) {
                                    var g = l[i];
                                    o.push("<stop ", 'offset="', 100 * g.offset + "%", '" style="stop-color:', g.color, void 0 !== g.opacity ? ";stop-opacity: " + g.opacity : ";", '"/>\n')
                                }
                                return o.push("linear" === this.type ? "</linearGradient>\n" : "</radialGradient>\n"), o.join("")
                            },
                            toLive: function(t) {
                                var e, i, r, o = n.util.object.clone(this.coords);
                                if (this.type) {
                                    for ("linear" === this.type ? e = t.createLinearGradient(o.x1, o.y1, o.x2, o.y2) : "radial" === this.type && (e = t.createRadialGradient(o.x1, o.y1, o.r1, o.x2, o.y2, o.r2)), i = 0, r = this.colorStops.length; i < r; i++) {
                                        var a = this.colorStops[i].color,
                                            s = this.colorStops[i].opacity,
                                            l = this.colorStops[i].offset;
                                        void 0 !== s && (a = new n.Color(a).setAlpha(s).toRgba()), e.addColorStop(l, a)
                                    }
                                    return e
                                }
                            }
                        }), n.util.object.extend(n.Gradient, {
                            fromElement: function(e, r) {
                                var o, a, s, l, c = e.getElementsByTagName("stop"),
                                    u = e.getAttribute("gradientUnits") || "objectBoundingBox",
                                    h = e.getAttribute("gradientTransform"),
                                    d = [];
                                for ("linear" === (o = "linearGradient" === e.nodeName || "LINEARGRADIENT" === e.nodeName ? "linear" : "radial") ? a = function(t) {
                                        return {
                                            x1: t.getAttribute("x1") || 0,
                                            y1: t.getAttribute("y1") || 0,
                                            x2: t.getAttribute("x2") || "100%",
                                            y2: t.getAttribute("y2") || 0
                                        }
                                    }(e) : "radial" === o && (a = function(t) {
                                        return {
                                            x1: t.getAttribute("fx") || t.getAttribute("cx") || "50%",
                                            y1: t.getAttribute("fy") || t.getAttribute("cy") || "50%",
                                            r1: 0,
                                            x2: t.getAttribute("cx") || "50%",
                                            y2: t.getAttribute("cy") || "50%",
                                            r2: t.getAttribute("r") || "50%"
                                        }
                                    }(e)), l = c.length; l--;) d.push(t(c[l]));
                                s = i(r, a, u);
                                var f = new n.Gradient({
                                    type: o,
                                    coords: a,
                                    colorStops: d,
                                    offsetX: -r.left,
                                    offsetY: -r.top
                                });
                                return (h || "" !== s) && (f.gradientTransform = n.parseTransformAttribute((h || "") + s)), f
                            },
                            forObject: function(t, e) {
                                return e || (e = {}), i(t, e.coords, "userSpaceOnUse"), new n.Gradient(e)
                            }
                        })
                    }(),
                    function() {
                        "use strict";
                        var t = n.util.toFixed;
                        n.Pattern = n.util.createClass({
                            repeat: "repeat",
                            offsetX: 0,
                            offsetY: 0,
                            crossOrigin: "",
                            patternTransform: null,
                            initialize: function(t, e) {
                                if (t || (t = {}), this.id = n.Object.__uid++, this.setOptions(t), !t.source || t.source && "string" != typeof t.source) e && e(this);
                                else if (void 0 !== n.util.getFunctionBody(t.source)) this.source = new Function(n.util.getFunctionBody(t.source)), e && e(this);
                                else {
                                    var i = this;
                                    this.source = n.util.createImage(), n.util.loadImage(t.source, function(t) {
                                        i.source = t, e && e(i)
                                    }, null, this.crossOrigin)
                                }
                            },
                            toObject: function(e) {
                                var i, r, o = n.Object.NUM_FRACTION_DIGITS;
                                return "function" == typeof this.source ? i = String(this.source) : "string" == typeof this.source.src ? i = this.source.src : "object" == typeof this.source && this.source.toDataURL && (i = this.source.toDataURL()), r = {
                                    type: "pattern",
                                    source: i,
                                    repeat: this.repeat,
                                    crossOrigin: this.crossOrigin,
                                    offsetX: t(this.offsetX, o),
                                    offsetY: t(this.offsetY, o),
                                    patternTransform: this.patternTransform ? this.patternTransform.concat() : null
                                }, n.util.populateWithProperties(this, r, e), r
                            },
                            toSVG: function(t) {
                                var e = "function" == typeof this.source ? this.source() : this.source,
                                    i = e.width / t.width,
                                    n = e.height / t.height,
                                    r = this.offsetX / t.width,
                                    o = this.offsetY / t.height,
                                    a = "";
                                return "repeat-x" !== this.repeat && "no-repeat" !== this.repeat || (n = 1, o && (n += Math.abs(o))), "repeat-y" !== this.repeat && "no-repeat" !== this.repeat || (i = 1, r && (i += Math.abs(r))), e.src ? a = e.src : e.toDataURL && (a = e.toDataURL()), '<pattern id="SVGID_' + this.id + '" x="' + r + '" y="' + o + '" width="' + i + '" height="' + n + '">\n<image x="0" y="0" width="' + e.width + '" height="' + e.height + '" xlink:href="' + a + '"></image>\n</pattern>\n'
                            },
                            setOptions: function(t) {
                                for (var e in t) this[e] = t[e]
                            },
                            toLive: function(t) {
                                var e = "function" == typeof this.source ? this.source() : this.source;
                                if (!e) return "";
                                if (void 0 !== e.src) {
                                    if (!e.complete) return "";
                                    if (0 === e.naturalWidth || 0 === e.naturalHeight) return ""
                                }
                                return t.createPattern(e, this.repeat)
                            }
                        })
                    }(),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.toFixed;
                        e.Shadow ? e.warn("fabric.Shadow is already defined.") : (e.Shadow = e.util.createClass({
                            color: "rgb(0,0,0)",
                            blur: 0,
                            offsetX: 0,
                            offsetY: 0,
                            affectStroke: !1,
                            includeDefaultValues: !0,
                            initialize: function(t) {
                                for (var i in "string" == typeof t && (t = this._parseShadow(t)), t) this[i] = t[i];
                                this.id = e.Object.__uid++
                            },
                            _parseShadow: function(t) {
                                var i = t.trim(),
                                    n = e.Shadow.reOffsetsAndBlur.exec(i) || [];
                                return {
                                    color: (i.replace(e.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)").trim(),
                                    offsetX: parseInt(n[1], 10) || 0,
                                    offsetY: parseInt(n[2], 10) || 0,
                                    blur: parseInt(n[3], 10) || 0
                                }
                            },
                            toString: function() {
                                return [this.offsetX, this.offsetY, this.blur, this.color].join("px ")
                            },
                            toSVG: function(t) {
                                var n = 40,
                                    r = 40,
                                    o = e.Object.NUM_FRACTION_DIGITS,
                                    a = e.util.rotateVector({
                                        x: this.offsetX,
                                        y: this.offsetY
                                    }, e.util.degreesToRadians(-t.angle)),
                                    s = new e.Color(this.color);
                                return t.width && t.height && (n = 100 * i((Math.abs(a.x) + this.blur) / t.width, o) + 20, r = 100 * i((Math.abs(a.y) + this.blur) / t.height, o) + 20), t.flipX && (a.x *= -1), t.flipY && (a.y *= -1), '<filter id="SVGID_' + this.id + '" y="-' + r + '%" height="' + (100 + 2 * r) + '%" x="-' + n + '%" width="' + (100 + 2 * n) + '%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="' + i(this.blur ? this.blur / 2 : 0, o) + '"></feGaussianBlur>\n\t<feOffset dx="' + i(a.x, o) + '" dy="' + i(a.y, o) + '" result="oBlur" ></feOffset>\n\t<feFlood flood-color="' + s.toRgb() + '" flood-opacity="' + s.getAlpha() + '"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'
                            },
                            toObject: function() {
                                if (this.includeDefaultValues) return {
                                    color: this.color,
                                    blur: this.blur,
                                    offsetX: this.offsetX,
                                    offsetY: this.offsetY,
                                    affectStroke: this.affectStroke
                                };
                                var t = {},
                                    i = e.Shadow.prototype;
                                return ["color", "blur", "offsetX", "offsetY", "affectStroke"].forEach(function(e) {
                                    this[e] !== i[e] && (t[e] = this[e])
                                }, this), t
                            }
                        }), e.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)
                    }(e),
                    function() {
                        "use strict";
                        if (n.StaticCanvas) n.warn("fabric.StaticCanvas is already defined.");
                        else {
                            var t = n.util.object.extend,
                                e = n.util.getElementOffset,
                                i = n.util.removeFromArray,
                                r = n.util.toFixed,
                                o = n.util.transformPoint,
                                a = n.util.invertTransform,
                                s = n.util.getNodeCanvas,
                                l = n.util.createCanvasElement,
                                c = new Error("Could not initialize `canvas` element");
                            n.StaticCanvas = n.util.createClass(n.CommonMethods, {
                                initialize: function(t, e) {
                                    e || (e = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(t, e)
                                },
                                backgroundColor: "",
                                backgroundImage: null,
                                overlayColor: "",
                                overlayImage: null,
                                includeDefaultValues: !0,
                                stateful: !1,
                                renderOnAddRemove: !0,
                                clipTo: null,
                                controlsAboveOverlay: !1,
                                allowTouchScrolling: !1,
                                imageSmoothingEnabled: !0,
                                viewportTransform: n.iMatrix.concat(),
                                backgroundVpt: !0,
                                overlayVpt: !0,
                                onBeforeScaleRotate: function() {},
                                enableRetinaScaling: !0,
                                vptCoords: {},
                                skipOffscreen: !0,
                                clipPath: void 0,
                                _initStatic: function(t, e) {
                                    var i = this.requestRenderAllBound;
                                    this._objects = [], this._createLowerCanvas(t), this._initOptions(e), this._setImageSmoothing(), this.interactive || this._initRetinaScaling(), e.overlayImage && this.setOverlayImage(e.overlayImage, i), e.backgroundImage && this.setBackgroundImage(e.backgroundImage, i), e.backgroundColor && this.setBackgroundColor(e.backgroundColor, i), e.overlayColor && this.setOverlayColor(e.overlayColor, i), this.calcOffset()
                                },
                                _isRetinaScaling: function() {
                                    return 1 !== n.devicePixelRatio && this.enableRetinaScaling
                                },
                                getRetinaScaling: function() {
                                    return this._isRetinaScaling() ? n.devicePixelRatio : 1
                                },
                                _initRetinaScaling: function() {
                                    this._isRetinaScaling() && (this.lowerCanvasEl.setAttribute("width", this.width * n.devicePixelRatio), this.lowerCanvasEl.setAttribute("height", this.height * n.devicePixelRatio), this.contextContainer.scale(n.devicePixelRatio, n.devicePixelRatio))
                                },
                                calcOffset: function() {
                                    return this._offset = e(this.lowerCanvasEl), this
                                },
                                setOverlayImage: function(t, e, i) {
                                    return this.__setBgOverlayImage("overlayImage", t, e, i)
                                },
                                setBackgroundImage: function(t, e, i) {
                                    return this.__setBgOverlayImage("backgroundImage", t, e, i)
                                },
                                setOverlayColor: function(t, e) {
                                    return this.__setBgOverlayColor("overlayColor", t, e)
                                },
                                setBackgroundColor: function(t, e) {
                                    return this.__setBgOverlayColor("backgroundColor", t, e)
                                },
                                _setImageSmoothing: function() {
                                    var t = this.getContext();
                                    t.imageSmoothingEnabled = t.imageSmoothingEnabled || t.webkitImageSmoothingEnabled || t.mozImageSmoothingEnabled || t.msImageSmoothingEnabled || t.oImageSmoothingEnabled, t.imageSmoothingEnabled = this.imageSmoothingEnabled
                                },
                                __setBgOverlayImage: function(t, e, i, r) {
                                    return "string" == typeof e ? n.util.loadImage(e, function(e) {
                                        if (e) {
                                            var o = new n.Image(e, r);
                                            this[t] = o, o.canvas = this
                                        }
                                        i && i(e)
                                    }, this, r && r.crossOrigin) : (r && e.setOptions(r), this[t] = e, e && (e.canvas = this), i && i(e)), this
                                },
                                __setBgOverlayColor: function(t, e, i) {
                                    return this[t] = e, this._initGradient(e, t), this._initPattern(e, t, i), this
                                },
                                _createCanvasElement: function() {
                                    var t = l();
                                    if (!t) throw c;
                                    if (t.style || (t.style = {}), void 0 === t.getContext) throw c;
                                    return t
                                },
                                _initOptions: function(t) {
                                    var e = this.lowerCanvasEl;
                                    this._setOptions(t), this.width = this.width || parseInt(e.width, 10) || 0, this.height = this.height || parseInt(e.height, 10) || 0, this.lowerCanvasEl.style && (e.width = this.width, e.height = this.height, e.style.width = this.width + "px", e.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice())
                                },
                                _createLowerCanvas: function(t) {
                                    t && t.getContext ? this.lowerCanvasEl = t : this.lowerCanvasEl = n.util.getById(t) || this._createCanvasElement(), n.util.addClass(this.lowerCanvasEl, "lower-canvas"), this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d")
                                },
                                getWidth: function() {
                                    return this.width
                                },
                                getHeight: function() {
                                    return this.height
                                },
                                setWidth: function(t, e) {
                                    return this.setDimensions({
                                        width: t
                                    }, e)
                                },
                                setHeight: function(t, e) {
                                    return this.setDimensions({
                                        height: t
                                    }, e)
                                },
                                setDimensions: function(t, e) {
                                    var i;
                                    for (var n in e = e || {}, t) i = t[n], e.cssOnly || (this._setBackstoreDimension(n, t[n]), i += "px", this.hasLostContext = !0), e.backstoreOnly || this._setCssDimension(n, i);
                                    return this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(), this._initRetinaScaling(), this._setImageSmoothing(), this.calcOffset(), e.cssOnly || this.requestRenderAll(), this
                                },
                                _setBackstoreDimension: function(t, e) {
                                    return this.lowerCanvasEl[t] = e, this.upperCanvasEl && (this.upperCanvasEl[t] = e), this.cacheCanvasEl && (this.cacheCanvasEl[t] = e), this[t] = e, this
                                },
                                _setCssDimension: function(t, e) {
                                    return this.lowerCanvasEl.style[t] = e, this.upperCanvasEl && (this.upperCanvasEl.style[t] = e), this.wrapperEl && (this.wrapperEl.style[t] = e), this
                                },
                                getZoom: function() {
                                    return this.viewportTransform[0]
                                },
                                setViewportTransform: function(t) {
                                    var e, i, n, r = this._activeObject;
                                    for (this.viewportTransform = t, i = 0, n = this._objects.length; i < n; i++)(e = this._objects[i]).group || e.setCoords(!1, !0);
                                    return r && "activeSelection" === r.type && r.setCoords(!1, !0), this.calcViewportBoundaries(), this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                zoomToPoint: function(t, e) {
                                    var i = t,
                                        n = this.viewportTransform.slice(0);
                                    t = o(t, a(this.viewportTransform)), n[0] = e, n[3] = e;
                                    var r = o(t, n);
                                    return n[4] += i.x - r.x, n[5] += i.y - r.y, this.setViewportTransform(n)
                                },
                                setZoom: function(t) {
                                    return this.zoomToPoint(new n.Point(0, 0), t), this
                                },
                                absolutePan: function(t) {
                                    var e = this.viewportTransform.slice(0);
                                    return e[4] = -t.x, e[5] = -t.y, this.setViewportTransform(e)
                                },
                                relativePan: function(t) {
                                    return this.absolutePan(new n.Point(-t.x - this.viewportTransform[4], -t.y - this.viewportTransform[5]))
                                },
                                getElement: function() {
                                    return this.lowerCanvasEl
                                },
                                _onObjectAdded: function(t) {
                                    this.stateful && t.setupState(), t._set("canvas", this), t.setCoords(), this.fire("object:added", {
                                        target: t
                                    }), t.fire("added")
                                },
                                _onObjectRemoved: function(t) {
                                    this.fire("object:removed", {
                                        target: t
                                    }), t.fire("removed"), delete t.canvas
                                },
                                clearContext: function(t) {
                                    return t.clearRect(0, 0, this.width, this.height), this
                                },
                                getContext: function() {
                                    return this.contextContainer
                                },
                                clear: function() {
                                    return this._objects.length = 0, this.backgroundImage = null, this.overlayImage = null, this.backgroundColor = "", this.overlayColor = "", this._hasITextHandlers && (this.off("mouse:up", this._mouseUpITextHandler), this._iTextInstances = null, this._hasITextHandlers = !1), this.clearContext(this.contextContainer), this.fire("canvas:cleared"), this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                renderAll: function() {
                                    var t = this.contextContainer;
                                    return this.renderCanvas(t, this._objects), this
                                },
                                renderAndReset: function() {
                                    this.isRendering = 0, this.renderAll()
                                },
                                requestRenderAll: function() {
                                    return this.isRendering || (this.isRendering = n.util.requestAnimFrame(this.renderAndResetBound)), this
                                },
                                calcViewportBoundaries: function() {
                                    var t = {},
                                        e = this.width,
                                        i = this.height,
                                        r = a(this.viewportTransform);
                                    return t.tl = o({
                                        x: 0,
                                        y: 0
                                    }, r), t.br = o({
                                        x: e,
                                        y: i
                                    }, r), t.tr = new n.Point(t.br.x, t.tl.y), t.bl = new n.Point(t.tl.x, t.br.y), this.vptCoords = t, t
                                },
                                cancelRequestedRender: function() {
                                    this.isRendering && (n.util.cancelAnimFrame(this.isRendering), this.isRendering = 0)
                                },
                                renderCanvas: function(t, e) {
                                    var i = this.viewportTransform,
                                        r = this.clipPath;
                                    this.cancelRequestedRender(), this.calcViewportBoundaries(), this.clearContext(t), this.fire("before:render", {
                                        ctx: t
                                    }), this.clipTo && n.util.clipContext(this, t), this._renderBackground(t), t.save(), t.transform(i[0], i[1], i[2], i[3], i[4], i[5]), this._renderObjects(t, e), t.restore(), !this.controlsAboveOverlay && this.interactive && this.drawControls(t), this.clipTo && t.restore(), r && (r.canvas = this, r.shouldCache(), r._transformDone = !0, r.renderCache({
                                        forClipping: !0
                                    }), this.drawClipPathOnCanvas(t)), this._renderOverlay(t), this.controlsAboveOverlay && this.interactive && this.drawControls(t), this.fire("after:render", {
                                        ctx: t
                                    })
                                },
                                drawClipPathOnCanvas: function(t) {
                                    var e = this.viewportTransform,
                                        i = this.clipPath;
                                    t.save(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5]), t.globalCompositeOperation = "destination-in", i.transform(t), t.scale(1 / i.zoomX, 1 / i.zoomY), t.drawImage(i._cacheCanvas, -i.cacheTranslationX, -i.cacheTranslationY), t.restore()
                                },
                                _renderObjects: function(t, e) {
                                    var i, n;
                                    for (i = 0, n = e.length; i < n; ++i) e[i] && e[i].render(t)
                                },
                                _renderBackgroundOrOverlay: function(t, e) {
                                    var i, n = this[e + "Color"];
                                    n && (t.fillStyle = n.toLive ? n.toLive(t, this) : n, t.fillRect(n.offsetX || 0, n.offsetY || 0, this.width, this.height)), (n = this[e + "Image"]) && (this[e + "Vpt"] && (i = this.viewportTransform, t.save(), t.transform(i[0], i[1], i[2], i[3], i[4], i[5])), n.render(t), this[e + "Vpt"] && t.restore())
                                },
                                _renderBackground: function(t) {
                                    this._renderBackgroundOrOverlay(t, "background")
                                },
                                _renderOverlay: function(t) {
                                    this._renderBackgroundOrOverlay(t, "overlay")
                                },
                                getCenter: function() {
                                    return {
                                        top: this.height / 2,
                                        left: this.width / 2
                                    }
                                },
                                centerObjectH: function(t) {
                                    return this._centerObject(t, new n.Point(this.getCenter().left, t.getCenterPoint().y))
                                },
                                centerObjectV: function(t) {
                                    return this._centerObject(t, new n.Point(t.getCenterPoint().x, this.getCenter().top))
                                },
                                centerObject: function(t) {
                                    var e = this.getCenter();
                                    return this._centerObject(t, new n.Point(e.left, e.top))
                                },
                                viewportCenterObject: function(t) {
                                    var e = this.getVpCenter();
                                    return this._centerObject(t, e)
                                },
                                viewportCenterObjectH: function(t) {
                                    var e = this.getVpCenter();
                                    return this._centerObject(t, new n.Point(e.x, t.getCenterPoint().y)), this
                                },
                                viewportCenterObjectV: function(t) {
                                    var e = this.getVpCenter();
                                    return this._centerObject(t, new n.Point(t.getCenterPoint().x, e.y))
                                },
                                getVpCenter: function() {
                                    var t = this.getCenter(),
                                        e = a(this.viewportTransform);
                                    return o({
                                        x: t.left,
                                        y: t.top
                                    }, e)
                                },
                                _centerObject: function(t, e) {
                                    return t.setPositionByOrigin(e, "center", "center"), t.setCoords(), this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                toDatalessJSON: function(t) {
                                    return this.toDatalessObject(t)
                                },
                                toObject: function(t) {
                                    return this._toObjectMethod("toObject", t)
                                },
                                toDatalessObject: function(t) {
                                    return this._toObjectMethod("toDatalessObject", t)
                                },
                                _toObjectMethod: function(e, i) {
                                    var r = this.clipPath,
                                        o = {
                                            version: n.version,
                                            objects: this._toObjects(e, i)
                                        };
                                    return r && (o.clipPath = this._toObjectMethod(r, e, i)), t(o, this.__serializeBgOverlay(e, i)), n.util.populateWithProperties(this, o, i), o
                                },
                                _toObjects: function(t, e) {
                                    return this._objects.filter(function(t) {
                                        return !t.excludeFromExport
                                    }).map(function(i) {
                                        return this._toObject(i, t, e)
                                    }, this)
                                },
                                _toObject: function(t, e, i) {
                                    var n;
                                    this.includeDefaultValues || (n = t.includeDefaultValues, t.includeDefaultValues = !1);
                                    var r = t[e](i);
                                    return this.includeDefaultValues || (t.includeDefaultValues = n), r
                                },
                                __serializeBgOverlay: function(t, e) {
                                    var i = {},
                                        n = this.backgroundImage,
                                        r = this.overlayImage;
                                    return this.backgroundColor && (i.background = this.backgroundColor.toObject ? this.backgroundColor.toObject(e) : this.backgroundColor), this.overlayColor && (i.overlay = this.overlayColor.toObject ? this.overlayColor.toObject(e) : this.overlayColor), n && !n.excludeFromExport && (i.backgroundImage = this._toObject(n, t, e)), r && !r.excludeFromExport && (i.overlayImage = this._toObject(r, t, e)), i
                                },
                                svgViewportTransformation: !0,
                                toSVG: function(t, e) {
                                    t || (t = {}), t.reviver = e;
                                    var i = [];
                                    return this._setSVGPreamble(i, t), this._setSVGHeader(i, t), this.clipPath && i.push('<g clip-path="url(#' + this.clipPath.clipPathId + ')" >\n'), this._setSVGBgOverlayColor(i, "backgroundColor"), this._setSVGBgOverlayImage(i, "backgroundImage", e), this._setSVGObjects(i, e), this.clipPath && i.push("</g>\n"), this._setSVGBgOverlayColor(i, "overlayColor"), this._setSVGBgOverlayImage(i, "overlayImage", e), i.push("</svg>"), i.join("")
                                },
                                _setSVGPreamble: function(t, e) {
                                    e.suppressPreamble || t.push('<?xml version="1.0" encoding="', e.encoding || "UTF-8", '" standalone="no" ?>\n', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
                                },
                                _setSVGHeader: function(t, e) {
                                    var i, o = e.width || this.width,
                                        a = e.height || this.height,
                                        s = 'viewBox="0 0 ' + this.width + " " + this.height + '" ',
                                        l = n.Object.NUM_FRACTION_DIGITS;
                                    e.viewBox ? s = 'viewBox="' + e.viewBox.x + " " + e.viewBox.y + " " + e.viewBox.width + " " + e.viewBox.height + '" ' : this.svgViewportTransformation && (i = this.viewportTransform, s = 'viewBox="' + r(-i[4] / i[0], l) + " " + r(-i[5] / i[3], l) + " " + r(this.width / i[0], l) + " " + r(this.height / i[3], l) + '" '), t.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', o, '" ', 'height="', a, '" ', s, 'xml:space="preserve">\n', "<desc>Created with Fabric.js ", n.version, "</desc>\n", "<defs>\n", this.createSVGFontFacesMarkup(), this.createSVGRefElementsMarkup(), this.createSVGClipPathMarkup(e), "</defs>\n")
                                },
                                createSVGClipPathMarkup: function(t) {
                                    var e = this.clipPath;
                                    return e ? (e.clipPathId = "CLIPPATH_" + n.Object.__uid++, '<clipPath id="' + e.clipPathId + '" >\n' + this.clipPath.toClipPathSVG(t.reviver) + "</clipPath>\n") : ""
                                },
                                createSVGRefElementsMarkup: function() {
                                    var t = this;
                                    return ["backgroundColor", "overlayColor"].map(function(e) {
                                        var i = t[e];
                                        if (i && i.toLive) return i.toSVG(t, !1)
                                    }).join("")
                                },
                                createSVGFontFacesMarkup: function() {
                                    var t, e, i, r, o, a, s, l, c = "",
                                        u = {},
                                        h = n.fontPaths,
                                        d = this._objects;
                                    for (s = 0, l = d.length; s < l; s++)
                                        if (e = (t = d[s]).fontFamily, -1 !== t.type.indexOf("text") && !u[e] && h[e] && (u[e] = !0, t.styles))
                                            for (o in i = t.styles)
                                                for (a in r = i[o]) !u[e = r[a].fontFamily] && h[e] && (u[e] = !0);
                                    for (var f in u) c += ["\t\t@font-face {\n", "\t\t\tfont-family: '", f, "';\n", "\t\t\tsrc: url('", h[f], "');\n", "\t\t}\n"].join("");
                                    return c && (c = ['\t<style type="text/css">', "<![CDATA[\n", c, "]]>", "</style>\n"].join("")), c
                                },
                                _setSVGObjects: function(t, e) {
                                    var i, n, r, o = this._objects;
                                    for (n = 0, r = o.length; n < r; n++)(i = o[n]).excludeFromExport || this._setSVGObject(t, i, e)
                                },
                                _setSVGObject: function(t, e, i) {
                                    t.push(e.toSVG(i))
                                },
                                _setSVGBgOverlayImage: function(t, e, i) {
                                    this[e] && !this[e].excludeFromExport && this[e].toSVG && t.push(this[e].toSVG(i))
                                },
                                _setSVGBgOverlayColor: function(t, e) {
                                    var i = this[e],
                                        n = this.viewportTransform,
                                        r = this.width / n[0],
                                        o = this.height / n[3];
                                    if (i)
                                        if (i.toLive) {
                                            var a = i.repeat;
                                            t.push('<rect transform="translate(', r / 2, ",", o / 2, ')"', ' x="', i.offsetX - r / 2, '" y="', i.offsetY - o / 2, '" ', 'width="', "repeat-y" === a || "no-repeat" === a ? i.source.width : r, '" height="', "repeat-x" === a || "no-repeat" === a ? i.source.height : o, '" fill="url(#SVGID_' + i.id + ')"', "></rect>\n")
                                        } else t.push('<rect x="0" y="0" width="100%" height="100%" ', 'fill="', this[e], '"', "></rect>\n")
                                },
                                sendToBack: function(t) {
                                    if (!t) return this;
                                    var e, n, r, o = this._activeObject;
                                    if (t === o && "activeSelection" === t.type)
                                        for (e = (r = o._objects).length; e--;) n = r[e], i(this._objects, n), this._objects.unshift(n);
                                    else i(this._objects, t), this._objects.unshift(t);
                                    return this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                bringToFront: function(t) {
                                    if (!t) return this;
                                    var e, n, r, o = this._activeObject;
                                    if (t === o && "activeSelection" === t.type)
                                        for (r = o._objects, e = 0; e < r.length; e++) n = r[e], i(this._objects, n), this._objects.push(n);
                                    else i(this._objects, t), this._objects.push(t);
                                    return this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                sendBackwards: function(t, e) {
                                    if (!t) return this;
                                    var n, r, o, a, s, l = this._activeObject,
                                        c = 0;
                                    if (t === l && "activeSelection" === t.type)
                                        for (s = l._objects, n = 0; n < s.length; n++) r = s[n], (o = this._objects.indexOf(r)) > 0 + c && (a = o - 1, i(this._objects, r), this._objects.splice(a, 0, r)), c++;
                                    else 0 !== (o = this._objects.indexOf(t)) && (a = this._findNewLowerIndex(t, o, e), i(this._objects, t), this._objects.splice(a, 0, t));
                                    return this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                _findNewLowerIndex: function(t, e, i) {
                                    var n, r;
                                    if (i)
                                        for (n = e, r = e - 1; r >= 0; --r) {
                                            if (t.intersectsWithObject(this._objects[r]) || t.isContainedWithinObject(this._objects[r]) || this._objects[r].isContainedWithinObject(t)) {
                                                n = r;
                                                break
                                            }
                                        } else n = e - 1;
                                    return n
                                },
                                bringForward: function(t, e) {
                                    if (!t) return this;
                                    var n, r, o, a, s, l = this._activeObject,
                                        c = 0;
                                    if (t === l && "activeSelection" === t.type)
                                        for (n = (s = l._objects).length; n--;) r = s[n], (o = this._objects.indexOf(r)) < this._objects.length - 1 - c && (a = o + 1, i(this._objects, r), this._objects.splice(a, 0, r)), c++;
                                    else(o = this._objects.indexOf(t)) !== this._objects.length - 1 && (a = this._findNewUpperIndex(t, o, e), i(this._objects, t), this._objects.splice(a, 0, t));
                                    return this.renderOnAddRemove && this.requestRenderAll(), this
                                },
                                _findNewUpperIndex: function(t, e, i) {
                                    var n, r, o;
                                    if (i)
                                        for (n = e, r = e + 1, o = this._objects.length; r < o; ++r) {
                                            if (t.intersectsWithObject(this._objects[r]) || t.isContainedWithinObject(this._objects[r]) || this._objects[r].isContainedWithinObject(t)) {
                                                n = r;
                                                break
                                            }
                                        } else n = e + 1;
                                    return n
                                },
                                moveTo: function(t, e) {
                                    return i(this._objects, t), this._objects.splice(e, 0, t), this.renderOnAddRemove && this.requestRenderAll()
                                },
                                dispose: function() {
                                    return this.isRendering && (n.util.cancelAnimFrame(this.isRendering), this.isRendering = 0), this.forEachObject(function(t) {
                                        t.dispose && t.dispose()
                                    }), this._objects = [], this.backgroundImage && this.backgroundImage.dispose && this.backgroundImage.dispose(), this.backgroundImage = null, this.overlayImage && this.overlayImage.dispose && this.overlayImage.dispose(), this.overlayImage = null, this._iTextInstances = null, this.contextContainer = null, n.util.cleanUpJsdomNode(this.lowerCanvasEl), this.lowerCanvasEl = void 0, this
                                },
                                toString: function() {
                                    return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this._objects.length + " }>"
                                }
                            }), t(n.StaticCanvas.prototype, n.Observable), t(n.StaticCanvas.prototype, n.Collection), t(n.StaticCanvas.prototype, n.DataURLExporter), t(n.StaticCanvas, {
                                EMPTY_JSON: '{"objects": [], "background": "white"}',
                                supports: function(t) {
                                    var e = l();
                                    if (!e || !e.getContext) return null;
                                    var i = e.getContext("2d");
                                    if (!i) return null;
                                    switch (t) {
                                        case "setLineDash":
                                            return void 0 !== i.setLineDash;
                                        default:
                                            return null
                                    }
                                }
                            }), n.StaticCanvas.prototype.toJSON = n.StaticCanvas.prototype.toObject, n.isLikelyNode && (n.StaticCanvas.prototype.createPNGStream = function() {
                                var t = s(this.lowerCanvasEl);
                                return t && t.createPNGStream()
                            }, n.StaticCanvas.prototype.createJPEGStream = function(t) {
                                var e = s(this.lowerCanvasEl);
                                return e && e.createJPEGStream(t)
                            })
                        }
                    }(), n.BaseBrush = n.util.createClass({
                        color: "rgb(0, 0, 0)",
                        width: 1,
                        shadow: null,
                        strokeLineCap: "round",
                        strokeLineJoin: "round",
                        strokeMiterLimit: 10,
                        strokeDashArray: null,
                        setShadow: function(t) {
                            return this.shadow = new n.Shadow(t), this
                        },
                        _setBrushStyles: function() {
                            var t = this.canvas.contextTop;
                            t.strokeStyle = this.color, t.lineWidth = this.width, t.lineCap = this.strokeLineCap, t.miterLimit = this.strokeMiterLimit, t.lineJoin = this.strokeLineJoin, n.StaticCanvas.supports("setLineDash") && t.setLineDash(this.strokeDashArray || [])
                        },
                        _saveAndTransform: function(t) {
                            var e = this.canvas.viewportTransform;
                            t.save(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5])
                        },
                        _setShadow: function() {
                            if (this.shadow) {
                                var t = this.canvas.contextTop,
                                    e = this.canvas.getZoom();
                                t.shadowColor = this.shadow.color, t.shadowBlur = this.shadow.blur * e, t.shadowOffsetX = this.shadow.offsetX * e, t.shadowOffsetY = this.shadow.offsetY * e
                            }
                        },
                        _resetShadow: function() {
                            var t = this.canvas.contextTop;
                            t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0
                        }
                    }), n.PencilBrush = n.util.createClass(n.BaseBrush, {
                        initialize: function(t) {
                            this.canvas = t, this._points = []
                        },
                        _drawSegment: function(t, e, i) {
                            var n = e.midPointFrom(i);
                            return t.quadraticCurveTo(e.x, e.y, n.x, n.y), n
                        },
                        onMouseDown: function(t) {
                            this._prepareForDrawing(t), this._captureDrawingPath(t), this._render()
                        },
                        onMouseMove: function(t) {
                            if (this._captureDrawingPath(t) && this._points.length > 1)
                                if (this.needsFullRender) this.canvas.clearContext(this.canvas.contextTop), this._render();
                                else {
                                    var e = this._points,
                                        i = e.length,
                                        n = this.canvas.contextTop;
                                    this._saveAndTransform(n), this.oldEnd && (n.beginPath(), n.moveTo(this.oldEnd.x, this.oldEnd.y)), this.oldEnd = this._drawSegment(n, e[i - 2], e[i - 1], !0), n.stroke(), n.restore()
                                }
                        },
                        onMouseUp: function() {
                            this.oldEnd = void 0, this._finalizeAndAddPath()
                        },
                        _prepareForDrawing: function(t) {
                            var e = new n.Point(t.x, t.y);
                            this._reset(), this._addPoint(e), this.canvas.contextTop.moveTo(e.x, e.y)
                        },
                        _addPoint: function(t) {
                            return !(this._points.length > 1 && t.eq(this._points[this._points.length - 1]) || (this._points.push(t), 0))
                        },
                        _reset: function() {
                            this._points.length = 0, this._setBrushStyles();
                            var t = new n.Color(this.color);
                            this.needsFullRender = t.getAlpha() < 1, this._setShadow()
                        },
                        _captureDrawingPath: function(t) {
                            var e = new n.Point(t.x, t.y);
                            return this._addPoint(e)
                        },
                        _render: function() {
                            var t, e, i = this.canvas.contextTop,
                                r = this._points[0],
                                o = this._points[1];
                            if (this._saveAndTransform(i), i.beginPath(), 2 === this._points.length && r.x === o.x && r.y === o.y) {
                                var a = this.width / 1e3;
                                r = new n.Point(r.x, r.y), o = new n.Point(o.x, o.y), r.x -= a, o.x += a
                            }
                            for (i.moveTo(r.x, r.y), t = 1, e = this._points.length; t < e; t++) this._drawSegment(i, r, o), r = this._points[t], o = this._points[t + 1];
                            i.lineTo(r.x, r.y), i.stroke(), i.restore()
                        },
                        convertPointsToSVGPath: function(t) {
                            var e, i = [],
                                r = this.width / 1e3,
                                o = new n.Point(t[0].x, t[0].y),
                                a = new n.Point(t[1].x, t[1].y),
                                s = t.length,
                                l = 1,
                                c = 1,
                                u = s > 2;
                            for (u && (l = t[2].x < a.x ? -1 : t[2].x === a.x ? 0 : 1, c = t[2].y < a.y ? -1 : t[2].y === a.y ? 0 : 1), i.push("M ", o.x - l * r, " ", o.y - c * r, " "), e = 1; e < s; e++) {
                                if (!o.eq(a)) {
                                    var h = o.midPointFrom(a);
                                    i.push("Q ", o.x, " ", o.y, " ", h.x, " ", h.y, " ")
                                }
                                o = t[e], e + 1 < t.length && (a = t[e + 1])
                            }
                            return u && (l = o.x > t[e - 2].x ? 1 : o.x === t[e - 2].x ? 0 : -1, c = o.y > t[e - 2].y ? 1 : o.y === t[e - 2].y ? 0 : -1), i.push("L ", o.x + l * r, " ", o.y + c * r), i
                        },
                        createPath: function(t) {
                            var e = new n.Path(t, {
                                    fill: null,
                                    stroke: this.color,
                                    strokeWidth: this.width,
                                    strokeLineCap: this.strokeLineCap,
                                    strokeMiterLimit: this.strokeMiterLimit,
                                    strokeLineJoin: this.strokeLineJoin,
                                    strokeDashArray: this.strokeDashArray
                                }),
                                i = new n.Point(e.left + e.width / 2, e.top + e.height / 2);
                            return i = e.translateToGivenOrigin(i, "center", "center", e.originX, e.originY), e.top = i.y, e.left = i.x, this.shadow && (this.shadow.affectStroke = !0, e.setShadow(this.shadow)), e
                        },
                        _finalizeAndAddPath: function() {
                            this.canvas.contextTop.closePath();
                            var t = this.convertPointsToSVGPath(this._points).join("");
                            if ("M 0 0 Q 0 0 0 0 L 0 0" !== t) {
                                var e = this.createPath(t);
                                this.canvas.clearContext(this.canvas.contextTop), this.canvas.add(e), this.canvas.renderAll(), e.setCoords(), this._resetShadow(), this.canvas.fire("path:created", {
                                    path: e
                                })
                            } else this.canvas.requestRenderAll()
                        }
                    }), n.CircleBrush = n.util.createClass(n.BaseBrush, {
                        width: 10,
                        initialize: function(t) {
                            this.canvas = t, this.points = []
                        },
                        drawDot: function(t) {
                            var e = this.addPoint(t),
                                i = this.canvas.contextTop;
                            this._saveAndTransform(i), i.fillStyle = e.fill, i.beginPath(), i.arc(e.x, e.y, e.radius, 0, 2 * Math.PI, !1), i.closePath(), i.fill(), i.restore()
                        },
                        onMouseDown: function(t) {
                            this.points.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.drawDot(t)
                        },
                        _render: function() {
                            var t, e, i, n = this.canvas.contextTop,
                                r = this.points;
                            for (this._saveAndTransform(n), t = 0, e = r.length; t < e; t++) i = r[t], n.fillStyle = i.fill, n.beginPath(), n.arc(i.x, i.y, i.radius, 0, 2 * Math.PI, !1), n.closePath(), n.fill();
                            n.restore()
                        },
                        onMouseMove: function(t) {
                            this.drawDot(t)
                        },
                        onMouseUp: function() {
                            var t, e, i = this.canvas.renderOnAddRemove;
                            this.canvas.renderOnAddRemove = !1;
                            var r = [];
                            for (t = 0, e = this.points.length; t < e; t++) {
                                var o = this.points[t],
                                    a = new n.Circle({
                                        radius: o.radius,
                                        left: o.x,
                                        top: o.y,
                                        originX: "center",
                                        originY: "center",
                                        fill: o.fill
                                    });
                                this.shadow && a.setShadow(this.shadow), r.push(a)
                            }
                            var s = new n.Group(r);
                            s.canvas = this.canvas, this.canvas.add(s), this.canvas.fire("path:created", {
                                path: s
                            }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = i, this.canvas.requestRenderAll()
                        },
                        addPoint: function(t) {
                            var e = new n.Point(t.x, t.y),
                                i = n.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2,
                                r = new n.Color(this.color).setAlpha(n.util.getRandomInt(0, 100) / 100).toRgba();
                            return e.radius = i, e.fill = r, this.points.push(e), e
                        }
                    }), n.SprayBrush = n.util.createClass(n.BaseBrush, {
                        width: 10,
                        density: 20,
                        dotWidth: 1,
                        dotWidthVariance: 1,
                        randomOpacity: !1,
                        optimizeOverlapping: !0,
                        initialize: function(t) {
                            this.canvas = t, this.sprayChunks = []
                        },
                        onMouseDown: function(t) {
                            this.sprayChunks.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.addSprayChunk(t), this.render(this.sprayChunkPoints)
                        },
                        onMouseMove: function(t) {
                            this.addSprayChunk(t), this.render(this.sprayChunkPoints)
                        },
                        onMouseUp: function() {
                            var t = this.canvas.renderOnAddRemove;
                            this.canvas.renderOnAddRemove = !1;
                            for (var e = [], i = 0, r = this.sprayChunks.length; i < r; i++)
                                for (var o = this.sprayChunks[i], a = 0, s = o.length; a < s; a++) {
                                    var l = new n.Rect({
                                        width: o[a].width,
                                        height: o[a].width,
                                        left: o[a].x + 1,
                                        top: o[a].y + 1,
                                        originX: "center",
                                        originY: "center",
                                        fill: this.color
                                    });
                                    e.push(l)
                                }
                            this.optimizeOverlapping && (e = this._getOptimizedRects(e));
                            var c = new n.Group(e);
                            this.shadow && c.setShadow(this.shadow), this.canvas.add(c), this.canvas.fire("path:created", {
                                path: c
                            }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = t, this.canvas.requestRenderAll()
                        },
                        _getOptimizedRects: function(t) {
                            var e, i, n, r = {};
                            for (i = 0, n = t.length; i < n; i++) r[e = t[i].left + "" + t[i].top] || (r[e] = t[i]);
                            var o = [];
                            for (e in r) o.push(r[e]);
                            return o
                        },
                        render: function(t) {
                            var e, i, n = this.canvas.contextTop;
                            for (n.fillStyle = this.color, this._saveAndTransform(n), e = 0, i = t.length; e < i; e++) {
                                var r = t[e];
                                void 0 !== r.opacity && (n.globalAlpha = r.opacity), n.fillRect(r.x, r.y, r.width, r.width)
                            }
                            n.restore()
                        },
                        _render: function() {
                            var t, e, i = this.canvas.contextTop;
                            for (i.fillStyle = this.color, this._saveAndTransform(i), t = 0, e = this.sprayChunks.length; t < e; t++) this.render(this.sprayChunks[t]);
                            i.restore()
                        },
                        addSprayChunk: function(t) {
                            this.sprayChunkPoints = [];
                            var e, i, r, o, a = this.width / 2;
                            for (o = 0; o < this.density; o++) {
                                e = n.util.getRandomInt(t.x - a, t.x + a), i = n.util.getRandomInt(t.y - a, t.y + a), r = this.dotWidthVariance ? n.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth;
                                var s = new n.Point(e, i);
                                s.width = r, this.randomOpacity && (s.opacity = n.util.getRandomInt(0, 100) / 100), this.sprayChunkPoints.push(s)
                            }
                            this.sprayChunks.push(this.sprayChunkPoints)
                        }
                    }), n.PatternBrush = n.util.createClass(n.PencilBrush, {
                        getPatternSrc: function() {
                            var t = n.util.createCanvasElement(),
                                e = t.getContext("2d");
                            return t.width = t.height = 25, e.fillStyle = this.color, e.beginPath(), e.arc(10, 10, 10, 0, 2 * Math.PI, !1), e.closePath(), e.fill(), t
                        },
                        getPatternSrcFunction: function() {
                            return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"')
                        },
                        getPattern: function() {
                            return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat")
                        },
                        _setBrushStyles: function() {
                            this.callSuper("_setBrushStyles"), this.canvas.contextTop.strokeStyle = this.getPattern()
                        },
                        createPath: function(t) {
                            var e = this.callSuper("createPath", t),
                                i = e._getLeftTopCoords().scalarAdd(e.strokeWidth / 2);
                            return e.stroke = new n.Pattern({
                                source: this.source || this.getPatternSrcFunction(),
                                offsetX: -i.x,
                                offsetY: -i.y
                            }), e
                        }
                    }),
                    function() {
                        var t = n.util.getPointer,
                            e = n.util.degreesToRadians,
                            i = n.util.radiansToDegrees,
                            r = Math.atan2,
                            o = Math.abs,
                            a = n.StaticCanvas.supports("setLineDash");
                        for (var s in n.Canvas = n.util.createClass(n.StaticCanvas, {
                                initialize: function(t, e) {
                                    e || (e = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(t, e), this._initInteractive(), this._createCacheCanvas()
                                },
                                uniScaleTransform: !1,
                                uniScaleKey: "shiftKey",
                                centeredScaling: !1,
                                centeredRotation: !1,
                                centeredKey: "altKey",
                                altActionKey: "shiftKey",
                                interactive: !0,
                                selection: !0,
                                selectionKey: "shiftKey",
                                altSelectionKey: null,
                                selectionColor: "rgba(100, 100, 255, 0.3)",
                                selectionDashArray: [],
                                selectionBorderColor: "rgba(255, 255, 255, 0.3)",
                                selectionLineWidth: 1,
                                selectionFullyContained: !1,
                                hoverCursor: "move",
                                moveCursor: "move",
                                defaultCursor: "default",
                                freeDrawingCursor: "crosshair",
                                rotationCursor: "crosshair",
                                notAllowedCursor: "not-allowed",
                                containerClass: "canvas-container",
                                perPixelTargetFind: !1,
                                targetFindTolerance: 0,
                                skipTargetFind: !1,
                                isDrawingMode: !1,
                                preserveObjectStacking: !1,
                                snapAngle: 0,
                                snapThreshold: null,
                                stopContextMenu: !1,
                                fireRightClick: !1,
                                fireMiddleClick: !1,
                                _initInteractive: function() {
                                    this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this._initRetinaScaling(), this.freeDrawingBrush = n.PencilBrush && new n.PencilBrush(this), this.calcOffset()
                                },
                                _chooseObjectsToRender: function() {
                                    var t, e, i, n = this.getActiveObjects();
                                    if (n.length > 0 && !this.preserveObjectStacking) {
                                        e = [], i = [];
                                        for (var r = 0, o = this._objects.length; r < o; r++) t = this._objects[r], -1 === n.indexOf(t) ? e.push(t) : i.push(t);
                                        n.length > 1 && (this._activeObject._objects = i), e.push.apply(e, i)
                                    } else e = this._objects;
                                    return e
                                },
                                renderAll: function() {
                                    !this.contextTopDirty || this._groupSelector || this.isDrawingMode || (this.clearContext(this.contextTop), this.contextTopDirty = !1), this.hasLostContext && this.renderTopLayer(this.contextTop);
                                    var t = this.contextContainer;
                                    return this.renderCanvas(t, this._chooseObjectsToRender()), this
                                },
                                renderTopLayer: function(t) {
                                    t.save(), this.isDrawingMode && this._isCurrentlyDrawing && (this.freeDrawingBrush && this.freeDrawingBrush._render(), this.contextTopDirty = !0), this.selection && this._groupSelector && (this._drawSelection(t), this.contextTopDirty = !0), t.restore()
                                },
                                renderTop: function() {
                                    var t = this.contextTop;
                                    return this.clearContext(t), this.renderTopLayer(t), this.fire("after:render"), this
                                },
                                _resetCurrentTransform: function() {
                                    var t = this._currentTransform;
                                    t.target.set({
                                        scaleX: t.original.scaleX,
                                        scaleY: t.original.scaleY,
                                        skewX: t.original.skewX,
                                        skewY: t.original.skewY,
                                        left: t.original.left,
                                        top: t.original.top
                                    }), this._shouldCenterTransform(t.target) ? ("center" !== t.originX && ("right" === t.originX ? t.mouseXSign = -1 : t.mouseXSign = 1), "center" !== t.originY && ("bottom" === t.originY ? t.mouseYSign = -1 : t.mouseYSign = 1), t.originX = "center", t.originY = "center") : (t.originX = t.original.originX, t.originY = t.original.originY)
                                },
                                containsPoint: function(t, e, i) {
                                    var n, r = i || this.getPointer(t, !0);
                                    return n = e.group && e.group === this._activeObject && "activeSelection" === e.group.type ? this._normalizePointer(e.group, r) : {
                                        x: r.x,
                                        y: r.y
                                    }, e.containsPoint(n) || e._findTargetCorner(r)
                                },
                                _normalizePointer: function(t, e) {
                                    var i = t.calcTransformMatrix(),
                                        r = n.util.invertTransform(i),
                                        o = this.restorePointerVpt(e);
                                    return n.util.transformPoint(o, r)
                                },
                                isTargetTransparent: function(t, e, i) {
                                    if (t.shouldCache() && t._cacheCanvas && t !== this._activeObject) {
                                        var r = this._normalizePointer(t, {
                                                x: e,
                                                y: i
                                            }),
                                            o = Math.max(t.cacheTranslationX + r.x * t.zoomX, 0),
                                            a = Math.max(t.cacheTranslationY + r.y * t.zoomY, 0);
                                        return n.util.isTransparent(t._cacheContext, Math.round(o), Math.round(a), this.targetFindTolerance)
                                    }
                                    var s = this.contextCache,
                                        l = t.selectionBackgroundColor,
                                        c = this.viewportTransform;
                                    return t.selectionBackgroundColor = "", this.clearContext(s), s.save(), s.transform(c[0], c[1], c[2], c[3], c[4], c[5]), t.render(s), s.restore(), t === this._activeObject && t._renderControls(s, {
                                        hasBorders: !1,
                                        transparentCorners: !1
                                    }, {
                                        hasBorders: !1
                                    }), t.selectionBackgroundColor = l, n.util.isTransparent(s, e, i, this.targetFindTolerance)
                                },
                                _isSelectionKeyPressed: function(t) {
                                    return "[object Array]" === Object.prototype.toString.call(this.selectionKey) ? !!this.selectionKey.find(function(e) {
                                        return !0 === t[e]
                                    }) : t[this.selectionKey]
                                },
                                _shouldClearSelection: function(t, e) {
                                    var i = this.getActiveObjects(),
                                        n = this._activeObject;
                                    return !e || e && n && i.length > 1 && -1 === i.indexOf(e) && n !== e && !this._isSelectionKeyPressed(t) || e && !e.evented || e && !e.selectable && n && n !== e
                                },
                                _shouldCenterTransform: function(t) {
                                    if (t) {
                                        var e, i = this._currentTransform;
                                        return "scale" === i.action || "scaleX" === i.action || "scaleY" === i.action ? e = this.centeredScaling || t.centeredScaling : "rotate" === i.action && (e = this.centeredRotation || t.centeredRotation), e ? !i.altKey : i.altKey
                                    }
                                },
                                _getOriginFromCorner: function(t, e) {
                                    var i = {
                                        x: t.originX,
                                        y: t.originY
                                    };
                                    return "ml" === e || "tl" === e || "bl" === e ? i.x = "right" : "mr" !== e && "tr" !== e && "br" !== e || (i.x = "left"), "tl" === e || "mt" === e || "tr" === e ? i.y = "bottom" : "bl" !== e && "mb" !== e && "br" !== e || (i.y = "top"), i
                                },
                                _getActionFromCorner: function(t, e, i) {
                                    if (!e || !t) return "drag";
                                    switch (e) {
                                        case "mtr":
                                            return "rotate";
                                        case "ml":
                                        case "mr":
                                            return i[this.altActionKey] ? "skewY" : "scaleX";
                                        case "mt":
                                        case "mb":
                                            return i[this.altActionKey] ? "skewX" : "scaleY";
                                        default:
                                            return "scale"
                                    }
                                },
                                _setupCurrentTransform: function(t, i, r) {
                                    if (i) {
                                        var o = this.getPointer(t),
                                            a = i._findTargetCorner(this.getPointer(t, !0)),
                                            s = this._getActionFromCorner(r, a, t, i),
                                            l = this._getOriginFromCorner(i, a);
                                        this._currentTransform = {
                                            target: i,
                                            action: s,
                                            corner: a,
                                            scaleX: i.scaleX,
                                            scaleY: i.scaleY,
                                            skewX: i.skewX,
                                            skewY: i.skewY,
                                            offsetX: o.x - i.left,
                                            offsetY: o.y - i.top,
                                            originX: l.x,
                                            originY: l.y,
                                            ex: o.x,
                                            ey: o.y,
                                            lastX: o.x,
                                            lastY: o.y,
                                            theta: e(i.angle),
                                            width: i.width * i.scaleX,
                                            mouseXSign: 1,
                                            mouseYSign: 1,
                                            shiftKey: t.shiftKey,
                                            altKey: t[this.centeredKey],
                                            original: n.util.saveObjectTransform(i)
                                        }, this._currentTransform.original.originX = l.x, this._currentTransform.original.originY = l.y, this._resetCurrentTransform(), this._beforeTransform(t)
                                    }
                                },
                                _translateObject: function(t, e) {
                                    var i = this._currentTransform,
                                        n = i.target,
                                        r = t - i.offsetX,
                                        o = e - i.offsetY,
                                        a = !n.get("lockMovementX") && n.left !== r,
                                        s = !n.get("lockMovementY") && n.top !== o;
                                    return a && n.set("left", r), s && n.set("top", o), a || s
                                },
                                _changeSkewTransformOrigin: function(t, e, i) {
                                    var n = "originX",
                                        r = {
                                            0: "center"
                                        },
                                        o = e.target.skewX,
                                        a = "left",
                                        s = "right",
                                        l = "mt" === e.corner || "ml" === e.corner ? 1 : -1,
                                        c = 1;
                                    t = t > 0 ? 1 : -1, "y" === i && (o = e.target.skewY, a = "top", s = "bottom", n = "originY"), r[-1] = a, r[1] = s, e.target.flipX && (c *= -1), e.target.flipY && (c *= -1), 0 === o ? (e.skewSign = -l * t * c, e[n] = r[-t]) : (o = o > 0 ? 1 : -1, e.skewSign = o, e[n] = r[o * l * c])
                                },
                                _skewObject: function(t, e, i) {
                                    var r, o = this._currentTransform,
                                        a = o.target,
                                        s = a.get("lockSkewingX"),
                                        l = a.get("lockSkewingY");
                                    if (s && "x" === i || l && "y" === i) return !1;
                                    var c, u, h = a.getCenterPoint(),
                                        d = a.toLocalPoint(new n.Point(t, e), "center", "center")[i],
                                        f = a.toLocalPoint(new n.Point(o.lastX, o.lastY), "center", "center")[i],
                                        p = a._getTransformedDimensions();
                                    return this._changeSkewTransformOrigin(d - f, o, i), c = a.toLocalPoint(new n.Point(t, e), o.originX, o.originY)[i], u = a.translateToOriginPoint(h, o.originX, o.originY), r = this._setObjectSkew(c, o, i, p), o.lastX = t, o.lastY = e, a.setPositionByOrigin(u, o.originX, o.originY), r
                                },
                                _setObjectSkew: function(t, e, i, r) {
                                    var o, a, s, l, c, u, h, d, f, p, g = e.target,
                                        m = e.skewSign;
                                    return "x" === i ? (c = "y", u = "Y", h = "X", f = 0, p = g.skewY) : (c = "x", u = "X", h = "Y", f = g.skewX, p = 0), l = g._getTransformedDimensions(f, p), (d = 2 * Math.abs(t) - l[i]) <= 2 ? o = 0 : (o = m * Math.atan(d / g["scale" + h] / (l[c] / g["scale" + u])), o = n.util.radiansToDegrees(o)), a = g["skew" + h] !== o, g.set("skew" + h, o), 0 !== g["skew" + u] && (s = g._getTransformedDimensions(), o = r[c] / s[c] * g["scale" + u], g.set("scale" + u, o)), a
                                },
                                _scaleObject: function(t, e, i) {
                                    var r = this._currentTransform,
                                        o = r.target,
                                        a = o.lockScalingX,
                                        s = o.lockScalingY,
                                        l = o.lockScalingFlip;
                                    if (a && s) return !1;
                                    var c, u = o.translateToOriginPoint(o.getCenterPoint(), r.originX, r.originY),
                                        h = o.toLocalPoint(new n.Point(t, e), r.originX, r.originY),
                                        d = o._getTransformedDimensions();
                                    return this._setLocalMouse(h, r), c = this._setObjectScale(h, r, a, s, i, l, d), o.setPositionByOrigin(u, r.originX, r.originY), c
                                },
                                _setObjectScale: function(t, e, i, n, r, o, a) {
                                    var s = e.target,
                                        l = !1,
                                        c = !1,
                                        u = !1,
                                        h = t.x * s.scaleX / a.x,
                                        d = t.y * s.scaleY / a.y,
                                        f = s.scaleX !== h,
                                        p = s.scaleY !== d;
                                    return o && h <= 0 && h < s.scaleX && (l = !0, t.x = 0), o && d <= 0 && d < s.scaleY && (c = !0, t.y = 0), "equally" !== r || i || n ? r ? "x" !== r || s.get("lockUniScaling") ? "y" !== r || s.get("lockUniScaling") || c || n || s.set("scaleY", d) && (u = p) : l || i || s.set("scaleX", h) && (u = f) : (l || i || s.set("scaleX", h) && (u = u || f), c || n || s.set("scaleY", d) && (u = u || p)) : u = this._scaleObjectEqually(t, s, e, a), e.newScaleX = h, e.newScaleY = d, l || c || this._flipObject(e, r), u
                                },
                                _scaleObjectEqually: function(t, e, i, n) {
                                    var r, o, a, s = t.y + t.x,
                                        l = n.y * i.original.scaleY / e.scaleY + n.x * i.original.scaleX / e.scaleX,
                                        c = t.x < 0 ? -1 : 1,
                                        u = t.y < 0 ? -1 : 1;
                                    return o = c * Math.abs(i.original.scaleX * s / l), a = u * Math.abs(i.original.scaleY * s / l), r = o !== e.scaleX || a !== e.scaleY, e.set("scaleX", o), e.set("scaleY", a), r
                                },
                                _flipObject: function(t, e) {
                                    t.newScaleX < 0 && "y" !== e && ("left" === t.originX ? t.originX = "right" : "right" === t.originX && (t.originX = "left")), t.newScaleY < 0 && "x" !== e && ("top" === t.originY ? t.originY = "bottom" : "bottom" === t.originY && (t.originY = "top"))
                                },
                                _setLocalMouse: function(t, e) {
                                    var i = e.target,
                                        n = this.getZoom(),
                                        r = i.padding / n;
                                    "right" === e.originX ? t.x *= -1 : "center" === e.originX && (t.x *= 2 * e.mouseXSign, t.x < 0 && (e.mouseXSign = -e.mouseXSign)), "bottom" === e.originY ? t.y *= -1 : "center" === e.originY && (t.y *= 2 * e.mouseYSign, t.y < 0 && (e.mouseYSign = -e.mouseYSign)), o(t.x) > r ? t.x < 0 ? t.x += r : t.x -= r : t.x = 0, o(t.y) > r ? t.y < 0 ? t.y += r : t.y -= r : t.y = 0
                                },
                                _rotateObject: function(t, e) {
                                    var n = this._currentTransform,
                                        o = n.target,
                                        a = o.translateToOriginPoint(o.getCenterPoint(), n.originX, n.originY);
                                    if (o.lockRotation) return !1;
                                    var s = r(n.ey - a.y, n.ex - a.x),
                                        l = r(e - a.y, t - a.x),
                                        c = i(l - s + n.theta),
                                        u = !0;
                                    if (o.snapAngle > 0) {
                                        var h = o.snapAngle,
                                            d = o.snapThreshold || h,
                                            f = Math.ceil(c / h) * h,
                                            p = Math.floor(c / h) * h;
                                        Math.abs(c - p) < d ? c = p : Math.abs(c - f) < d && (c = f)
                                    }
                                    return c < 0 && (c = 360 + c), c %= 360, o.angle === c ? u = !1 : (o.angle = c, o.setPositionByOrigin(a, n.originX, n.originY)), u
                                },
                                setCursor: function(t) {
                                    this.upperCanvasEl.style.cursor = t
                                },
                                _drawSelection: function(t) {
                                    var e = this._groupSelector,
                                        i = e.left,
                                        r = e.top,
                                        s = o(i),
                                        l = o(r);
                                    if (this.selectionColor && (t.fillStyle = this.selectionColor, t.fillRect(e.ex - (i > 0 ? 0 : -i), e.ey - (r > 0 ? 0 : -r), s, l)), this.selectionLineWidth && this.selectionBorderColor)
                                        if (t.lineWidth = this.selectionLineWidth, t.strokeStyle = this.selectionBorderColor, this.selectionDashArray.length > 1 && !a) {
                                            var c = e.ex + .5 - (i > 0 ? 0 : s),
                                                u = e.ey + .5 - (r > 0 ? 0 : l);
                                            t.beginPath(), n.util.drawDashedLine(t, c, u, c + s, u, this.selectionDashArray), n.util.drawDashedLine(t, c, u + l - 1, c + s, u + l - 1, this.selectionDashArray), n.util.drawDashedLine(t, c, u, c, u + l, this.selectionDashArray), n.util.drawDashedLine(t, c + s - 1, u, c + s - 1, u + l, this.selectionDashArray), t.closePath(), t.stroke()
                                        } else n.Object.prototype._setLineDash.call(this, t, this.selectionDashArray), t.strokeRect(e.ex + .5 - (i > 0 ? 0 : s), e.ey + .5 - (r > 0 ? 0 : l), s, l)
                                },
                                findTarget: function(t, e) {
                                    if (!this.skipTargetFind) {
                                        var i, n, r = this.getPointer(t, !0),
                                            o = this._activeObject,
                                            a = this.getActiveObjects();
                                        if (this.targets = [], a.length > 1 && !e && o === this._searchPossibleTargets([o], r)) return o;
                                        if (1 === a.length && o._findTargetCorner(r)) return o;
                                        if (1 === a.length && o === this._searchPossibleTargets([o], r)) {
                                            if (!this.preserveObjectStacking) return o;
                                            i = o, n = this.targets, this.targets = []
                                        }
                                        var s = this._searchPossibleTargets(this._objects, r);
                                        return t[this.altSelectionKey] && s && i && s !== i && (s = i, this.targets = n), s
                                    }
                                },
                                _checkTarget: function(t, e, i) {
                                    if (e && e.visible && e.evented && this.containsPoint(null, e, t)) {
                                        if (!this.perPixelTargetFind && !e.perPixelTargetFind || e.isEditing) return !0;
                                        if (!this.isTargetTransparent(e, i.x, i.y)) return !0
                                    }
                                },
                                _searchPossibleTargets: function(t, e) {
                                    for (var i, r, o = t.length; o--;) {
                                        var a = t[o],
                                            s = a.group && "activeSelection" !== a.group.type ? this._normalizePointer(a.group, e) : e;
                                        if (this._checkTarget(s, a, e)) {
                                            (i = t[o]).subTargetCheck && i instanceof n.Group && (r = this._searchPossibleTargets(i._objects, e)) && this.targets.push(r);
                                            break
                                        }
                                    }
                                    return i
                                },
                                restorePointerVpt: function(t) {
                                    return n.util.transformPoint(t, n.util.invertTransform(this.viewportTransform))
                                },
                                getPointer: function(e, i) {
                                    if (this._absolutePointer && !i) return this._absolutePointer;
                                    if (this._pointer && i) return this._pointer;
                                    var n, r = t(e),
                                        o = this.upperCanvasEl,
                                        a = o.getBoundingClientRect(),
                                        s = a.width || 0,
                                        l = a.height || 0;
                                    return s && l || ("top" in a && "bottom" in a && (l = Math.abs(a.top - a.bottom)), "right" in a && "left" in a && (s = Math.abs(a.right - a.left))), this.calcOffset(), r.x = r.x - this._offset.left, r.y = r.y - this._offset.top, i || (r = this.restorePointerVpt(r)), n = 0 === s || 0 === l ? {
                                        width: 1,
                                        height: 1
                                    } : {
                                        width: o.width / s,
                                        height: o.height / l
                                    }, {
                                        x: r.x * n.width,
                                        y: r.y * n.height
                                    }
                                },
                                _createUpperCanvas: function() {
                                    var t = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, "");
                                    this.upperCanvasEl ? this.upperCanvasEl.className = "" : this.upperCanvasEl = this._createCanvasElement(), n.util.addClass(this.upperCanvasEl, "upper-canvas " + t), this.wrapperEl.appendChild(this.upperCanvasEl), this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl), this._applyCanvasStyle(this.upperCanvasEl), this.contextTop = this.upperCanvasEl.getContext("2d")
                                },
                                _createCacheCanvas: function() {
                                    this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d")
                                },
                                _initWrapperElement: function() {
                                    this.wrapperEl = n.util.wrapElement(this.lowerCanvasEl, "div", {
                                        class: this.containerClass
                                    }), n.util.setStyle(this.wrapperEl, {
                                        width: this.width + "px",
                                        height: this.height + "px",
                                        position: "relative"
                                    }), n.util.makeElementUnselectable(this.wrapperEl)
                                },
                                _applyCanvasStyle: function(t) {
                                    var e = this.width || t.width,
                                        i = this.height || t.height;
                                    n.util.setStyle(t, {
                                        position: "absolute",
                                        width: e + "px",
                                        height: i + "px",
                                        left: 0,
                                        top: 0,
                                        "touch-action": this.allowTouchScrolling ? "manipulation" : "none"
                                    }), t.width = e, t.height = i, n.util.makeElementUnselectable(t)
                                },
                                _copyCanvasStyle: function(t, e) {
                                    e.style.cssText = t.style.cssText
                                },
                                getSelectionContext: function() {
                                    return this.contextTop
                                },
                                getSelectionElement: function() {
                                    return this.upperCanvasEl
                                },
                                getActiveObject: function() {
                                    return this._activeObject
                                },
                                getActiveObjects: function() {
                                    var t = this._activeObject;
                                    return t ? "activeSelection" === t.type && t._objects ? t._objects.slice(0) : [t] : []
                                },
                                _onObjectRemoved: function(t) {
                                    t === this._activeObject && (this.fire("before:selection:cleared", {
                                        target: t
                                    }), this._discardActiveObject(), this.fire("selection:cleared", {
                                        target: t
                                    }), t.fire("deselected")), this._hoveredTarget === t && (this._hoveredTarget = null), this.callSuper("_onObjectRemoved", t)
                                },
                                _fireSelectionEvents: function(t, e) {
                                    var i = !1,
                                        n = this.getActiveObjects(),
                                        r = [],
                                        o = [],
                                        a = {
                                            e: e
                                        };
                                    t.forEach(function(t) {
                                        -1 === n.indexOf(t) && (i = !0, t.fire("deselected", a), o.push(t))
                                    }), n.forEach(function(e) {
                                        -1 === t.indexOf(e) && (i = !0, e.fire("selected", a), r.push(e))
                                    }), t.length > 0 && n.length > 0 ? (a.selected = r, a.deselected = o, a.updated = r[0] || o[0], a.target = this._activeObject, i && this.fire("selection:updated", a)) : n.length > 0 ? (1 === n.length && (a.target = r[0], this.fire("object:selected", a)), a.selected = r, a.target = this._activeObject, this.fire("selection:created", a)) : t.length > 0 && (a.deselected = o, this.fire("selection:cleared", a))
                                },
                                setActiveObject: function(t, e) {
                                    var i = this.getActiveObjects();
                                    return this._setActiveObject(t, e), this._fireSelectionEvents(i, e), this
                                },
                                _setActiveObject: function(t, e) {
                                    return this._activeObject !== t && (!!this._discardActiveObject(e, t) && (!t.onSelect({
                                        e: e
                                    }) && (this._activeObject = t, !0)))
                                },
                                _discardActiveObject: function(t, e) {
                                    var i = this._activeObject;
                                    if (i) {
                                        if (i.onDeselect({
                                                e: t,
                                                object: e
                                            })) return !1;
                                        this._activeObject = null
                                    }
                                    return !0
                                },
                                discardActiveObject: function(t) {
                                    var e = this.getActiveObjects();
                                    return e.length && this.fire("before:selection:cleared", {
                                        target: e[0],
                                        e: t
                                    }), this._discardActiveObject(t), this._fireSelectionEvents(e, t), this
                                },
                                dispose: function() {
                                    var t = this.wrapperEl;
                                    return this.removeListeners(), t.removeChild(this.upperCanvasEl), t.removeChild(this.lowerCanvasEl), this.contextCache = null, this.contextTop = null, ["upperCanvasEl", "cacheCanvasEl"].forEach(function(t) {
                                        n.util.cleanUpJsdomNode(this[t]), this[t] = void 0
                                    }.bind(this)), t.parentNode && t.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl), delete this.wrapperEl, n.StaticCanvas.prototype.dispose.call(this), this
                                },
                                clear: function() {
                                    return this.discardActiveObject(), this.clearContext(this.contextTop), this.callSuper("clear")
                                },
                                drawControls: function(t) {
                                    var e = this._activeObject;
                                    e && e._renderControls(t)
                                },
                                _toObject: function(t, e, i) {
                                    var n = this._realizeGroupTransformOnObject(t),
                                        r = this.callSuper("_toObject", t, e, i);
                                    return this._unwindGroupTransformOnObject(t, n), r
                                },
                                _realizeGroupTransformOnObject: function(t) {
                                    if (t.group && "activeSelection" === t.group.type && this._activeObject === t.group) {
                                        var e = {};
                                        return ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"].forEach(function(i) {
                                            e[i] = t[i]
                                        }), this._activeObject.realizeTransform(t), e
                                    }
                                    return null
                                },
                                _unwindGroupTransformOnObject: function(t, e) {
                                    e && t.set(e)
                                },
                                _setSVGObject: function(t, e, i) {
                                    var n = this._realizeGroupTransformOnObject(e);
                                    this.callSuper("_setSVGObject", t, e, i), this._unwindGroupTransformOnObject(e, n)
                                },
                                setViewportTransform: function(t) {
                                    this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing && this._activeObject.clearContextTop(), n.StaticCanvas.prototype.setViewportTransform.call(this, t)
                                }
                            }), n.StaticCanvas) "prototype" !== s && (n.Canvas[s] = n.StaticCanvas[s]);
                        n.isTouchSupported && (n.Canvas.prototype._setCursorFromEvent = function() {})
                    }(),
                    function() {
                        var t = {
                                mt: 0,
                                tr: 1,
                                mr: 2,
                                br: 3,
                                mb: 4,
                                bl: 5,
                                ml: 6,
                                tl: 7
                            },
                            e = n.util.addListener,
                            i = n.util.removeListener,
                            r = {
                                passive: !1
                            };

                        function o(t, e) {
                            return "which" in t ? t.which === e : t.button === e - 1
                        }
                        n.util.object.extend(n.Canvas.prototype, {
                            cursorMap: ["n-resize", "ne-resize", "e-resize", "se-resize", "s-resize", "sw-resize", "w-resize", "nw-resize"],
                            _initEventListeners: function() {
                                this.removeListeners(), this._bindEvents(), this.addOrRemove(e, "add")
                            },
                            addOrRemove: function(t, e) {
                                t(n.window, "resize", this._onResize), t(this.upperCanvasEl, "mousedown", this._onMouseDown), t(this.upperCanvasEl, "mousemove", this._onMouseMove, r), t(this.upperCanvasEl, "mouseout", this._onMouseOut), t(this.upperCanvasEl, "mouseenter", this._onMouseEnter), t(this.upperCanvasEl, "wheel", this._onMouseWheel), t(this.upperCanvasEl, "contextmenu", this._onContextMenu), t(this.upperCanvasEl, "dblclick", this._onDoubleClick), t(this.upperCanvasEl, "touchstart", this._onMouseDown, r), t(this.upperCanvasEl, "touchmove", this._onMouseMove, r), t(this.upperCanvasEl, "dragover", this._onDragOver), t(this.upperCanvasEl, "dragenter", this._onDragEnter), t(this.upperCanvasEl, "dragleave", this._onDragLeave), t(this.upperCanvasEl, "drop", this._onDrop), "undefined" != typeof eventjs && e in eventjs && (eventjs[e](this.upperCanvasEl, "gesture", this._onGesture), eventjs[e](this.upperCanvasEl, "drag", this._onDrag), eventjs[e](this.upperCanvasEl, "orientation", this._onOrientationChange), eventjs[e](this.upperCanvasEl, "shake", this._onShake), eventjs[e](this.upperCanvasEl, "longpress", this._onLongPress))
                            },
                            removeListeners: function() {
                                this.addOrRemove(i, "remove"), i(n.document, "mouseup", this._onMouseUp), i(n.document, "touchend", this._onMouseUp, r), i(n.document, "mousemove", this._onMouseMove, r), i(n.document, "touchmove", this._onMouseMove, r)
                            },
                            _bindEvents: function() {
                                this.eventsBound || (this._onMouseDown = this._onMouseDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this), this._onMouseOut = this._onMouseOut.bind(this), this._onMouseEnter = this._onMouseEnter.bind(this), this._onContextMenu = this._onContextMenu.bind(this), this._onDoubleClick = this._onDoubleClick.bind(this), this._onDragOver = this._onDragOver.bind(this), this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter"), this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave"), this._onDrop = this._simpleEventHandler.bind(this, "drop"), this.eventsBound = !0)
                            },
                            _onGesture: function(t, e) {
                                this.__onTransformGesture && this.__onTransformGesture(t, e)
                            },
                            _onDrag: function(t, e) {
                                this.__onDrag && this.__onDrag(t, e)
                            },
                            _onMouseWheel: function(t) {
                                this.__onMouseWheel(t)
                            },
                            _onMouseOut: function(t) {
                                var e = this._hoveredTarget;
                                this.fire("mouse:out", {
                                    target: e,
                                    e: t
                                }), this._hoveredTarget = null, e && e.fire("mouseout", {
                                    e: t
                                }), this._iTextInstances && this._iTextInstances.forEach(function(t) {
                                    t.isEditing && t.hiddenTextarea.focus()
                                })
                            },
                            _onMouseEnter: function(t) {
                                this.findTarget(t) || (this.fire("mouse:over", {
                                    target: null,
                                    e: t
                                }), this._hoveredTarget = null)
                            },
                            _onOrientationChange: function(t, e) {
                                this.__onOrientationChange && this.__onOrientationChange(t, e)
                            },
                            _onShake: function(t, e) {
                                this.__onShake && this.__onShake(t, e)
                            },
                            _onLongPress: function(t, e) {
                                this.__onLongPress && this.__onLongPress(t, e)
                            },
                            _onDragOver: function(t) {
                                t.preventDefault();
                                var e = this._simpleEventHandler("dragover", t);
                                this._fireEnterLeaveEvents(e, t)
                            },
                            _onContextMenu: function(t) {
                                return this.stopContextMenu && (t.stopPropagation(), t.preventDefault()), !1
                            },
                            _onDoubleClick: function(t) {
                                this._cacheTransformEventData(t), this._handleEvent(t, "dblclick"), this._resetTransformEventData(t)
                            },
                            _onMouseDown: function(t) {
                                this.__onMouseDown(t), this._resetTransformEventData(), e(n.document, "touchend", this._onMouseUp, r), e(n.document, "touchmove", this._onMouseMove, r), i(this.upperCanvasEl, "mousemove", this._onMouseMove, r), i(this.upperCanvasEl, "touchmove", this._onMouseMove, r), "touchstart" === t.type ? i(this.upperCanvasEl, "mousedown", this._onMouseDown) : (e(n.document, "mouseup", this._onMouseUp), e(n.document, "mousemove", this._onMouseMove, r))
                            },
                            _onMouseUp: function(t) {
                                if (this.__onMouseUp(t), this._resetTransformEventData(), i(n.document, "mouseup", this._onMouseUp), i(n.document, "touchend", this._onMouseUp, r), i(n.document, "mousemove", this._onMouseMove, r), i(n.document, "touchmove", this._onMouseMove, r), e(this.upperCanvasEl, "mousemove", this._onMouseMove, r), e(this.upperCanvasEl, "touchmove", this._onMouseMove, r), "touchend" === t.type) {
                                    var o = this;
                                    setTimeout(function() {
                                        e(o.upperCanvasEl, "mousedown", o._onMouseDown)
                                    }, 400)
                                }
                            },
                            _onMouseMove: function(t) {
                                !this.allowTouchScrolling && t.preventDefault && t.preventDefault(), this.__onMouseMove(t)
                            },
                            _onResize: function() {
                                this.calcOffset()
                            },
                            _shouldRender: function(t) {
                                var e = this._activeObject;
                                return !!(!!e != !!t || e && t && e !== t) || (e && e.isEditing, !1)
                            },
                            __onMouseUp: function(t) {
                                var e, i = this._currentTransform,
                                    n = this._groupSelector,
                                    r = !1,
                                    a = !n || 0 === n.left && 0 === n.top;
                                if (this._cacheTransformEventData(t), e = this._target, this._handleEvent(t, "up:before"), !o(t, 3)) return o(t, 2) ? (this.fireMiddleClick && this._handleEvent(t, "up", 2, a), void this._resetTransformEventData()) : void(this.isDrawingMode && this._isCurrentlyDrawing ? this._onMouseUpInDrawingMode(t) : (i && (this._finalizeCurrentTransform(t), r = i.actionPerformed), a || (this._maybeGroupObjects(t), r || (r = this._shouldRender(e))), e && (e.isMoving = !1), this._setCursorFromEvent(t, e), this._handleEvent(t, "up", 1, a), this._groupSelector = null, this._currentTransform = null, e && (e.__corner = 0), r ? this.requestRenderAll() : a || this.renderTop()));
                                this.fireRightClick && this._handleEvent(t, "up", 3, a)
                            },
                            _simpleEventHandler: function(t, e) {
                                var i = this.findTarget(e),
                                    n = this.targets,
                                    r = {
                                        e: e,
                                        target: i,
                                        subTargets: n
                                    };
                                if (this.fire(t, r), i && i.fire(t, r), !n) return i;
                                for (var o = 0; o < n.length; o++) n[o].fire(t, r);
                                return i
                            },
                            _handleEvent: function(t, e, i, n) {
                                var r = this._target,
                                    o = this.targets || [],
                                    a = {
                                        e: t,
                                        target: r,
                                        subTargets: o,
                                        button: i || 1,
                                        isClick: n || !1,
                                        pointer: this._pointer,
                                        absolutePointer: this._absolutePointer,
                                        transform: this._currentTransform
                                    };
                                this.fire("mouse:" + e, a), r && r.fire("mouse" + e, a);
                                for (var s = 0; s < o.length; s++) o[s].fire("mouse" + e, a)
                            },
                            _finalizeCurrentTransform: function(t) {
                                var e, i = this._currentTransform,
                                    n = i.target,
                                    r = {
                                        e: t,
                                        target: n,
                                        transform: i
                                    };
                                n._scaling && (n._scaling = !1), n.setCoords(), (i.actionPerformed || this.stateful && n.hasStateChanged()) && (i.actionPerformed && (e = this._addEventOptions(r, i), this._fire(e, r)), this._fire("modified", r))
                            },
                            _addEventOptions: function(t, e) {
                                var i, n;
                                switch (e.action) {
                                    case "scaleX":
                                        i = "scaled", n = "x";
                                        break;
                                    case "scaleY":
                                        i = "scaled", n = "y";
                                        break;
                                    case "skewX":
                                        i = "skewed", n = "x";
                                        break;
                                    case "skewY":
                                        i = "skewed", n = "y";
                                        break;
                                    case "scale":
                                        i = "scaled", n = "equally";
                                        break;
                                    case "rotate":
                                        i = "rotated";
                                        break;
                                    case "drag":
                                        i = "moved"
                                }
                                return t.by = n, i
                            },
                            _onMouseDownInDrawingMode: function(t) {
                                this._isCurrentlyDrawing = !0, this.getActiveObject() && this.discardActiveObject(t).requestRenderAll(), this.clipTo && n.util.clipContext(this, this.contextTop);
                                var e = this.getPointer(t);
                                this.freeDrawingBrush.onMouseDown(e), this._handleEvent(t, "down")
                            },
                            _onMouseMoveInDrawingMode: function(t) {
                                if (this._isCurrentlyDrawing) {
                                    var e = this.getPointer(t);
                                    this.freeDrawingBrush.onMouseMove(e)
                                }
                                this.setCursor(this.freeDrawingCursor), this._handleEvent(t, "move")
                            },
                            _onMouseUpInDrawingMode: function(t) {
                                this._isCurrentlyDrawing = !1, this.clipTo && this.contextTop.restore(), this.freeDrawingBrush.onMouseUp(), this._handleEvent(t, "up")
                            },
                            __onMouseDown: function(t) {
                                this._cacheTransformEventData(t), this._handleEvent(t, "down:before");
                                var e = this._target;
                                if (o(t, 3)) this.fireRightClick && this._handleEvent(t, "down", 3);
                                else if (o(t, 2)) this.fireMiddleClick && this._handleEvent(t, "down", 2);
                                else if (this.isDrawingMode) this._onMouseDownInDrawingMode(t);
                                else if (!this._currentTransform) {
                                    var i = this._pointer;
                                    this._previousPointer = i;
                                    var n = this._shouldRender(e),
                                        r = this._shouldGroup(t, e);
                                    if (this._shouldClearSelection(t, e) ? this.discardActiveObject(t) : r && (this._handleGrouping(t, e), e = this._activeObject), !this.selection || e && (e.selectable || e.isEditing || e === this._activeObject) || (this._groupSelector = {
                                            ex: i.x,
                                            ey: i.y,
                                            top: 0,
                                            left: 0
                                        }), e) {
                                        var a = e === this._activeObject;
                                        e.selectable && this.setActiveObject(e, t), e !== this._activeObject || !e.__corner && r || this._setupCurrentTransform(t, e, a)
                                    }
                                    this._handleEvent(t, "down"), (n || r) && this.requestRenderAll()
                                }
                            },
                            _resetTransformEventData: function() {
                                this._target = null, this._pointer = null, this._absolutePointer = null
                            },
                            _cacheTransformEventData: function(t) {
                                this._resetTransformEventData(), this._pointer = this.getPointer(t, !0), this._absolutePointer = this.restorePointerVpt(this._pointer), this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(t) || null
                            },
                            _beforeTransform: function(t) {
                                var e = this._currentTransform;
                                this.stateful && e.target.saveState(), this.fire("before:transform", {
                                    e: t,
                                    transform: e
                                }), e.corner && this.onBeforeScaleRotate(e.target)
                            },
                            __onMouseMove: function(t) {
                                var e, i;
                                if (this._handleEvent(t, "move:before"), this._cacheTransformEventData(t), this.isDrawingMode) this._onMouseMoveInDrawingMode(t);
                                else if (!(void 0 !== t.touches && t.touches.length > 1)) {
                                    var n = this._groupSelector;
                                    n ? (i = this._pointer, n.left = i.x - n.ex, n.top = i.y - n.ey, this.renderTop()) : this._currentTransform ? this._transformObject(t) : (e = this.findTarget(t) || null, this._setCursorFromEvent(t, e), this._fireOverOutEvents(e, t)), this._handleEvent(t, "move"), this._resetTransformEventData()
                                }
                            },
                            _fireOverOutEvents: function(t, e) {
                                this.fireSynteticInOutEvents(t, e, {
                                    targetName: "_hoveredTarget",
                                    canvasEvtOut: "mouse:out",
                                    evtOut: "mouseout",
                                    canvasEvtIn: "mouse:over",
                                    evtIn: "mouseover"
                                })
                            },
                            _fireEnterLeaveEvents: function(t, e) {
                                this.fireSynteticInOutEvents(t, e, {
                                    targetName: "_draggedoverTarget",
                                    evtOut: "dragleave",
                                    evtIn: "dragenter"
                                })
                            },
                            fireSynteticInOutEvents: function(t, e, i) {
                                var n, r, o, a = this[i.targetName],
                                    s = a !== t,
                                    l = i.canvasEvtIn,
                                    c = i.canvasEvtOut;
                                s && (n = {
                                    e: e,
                                    target: t,
                                    previousTarget: a
                                }, r = {
                                    e: e,
                                    target: a,
                                    nextTarget: t
                                }, this[i.targetName] = t), o = t && s, a && s && (c && this.fire(c, r), a.fire(i.evtOut, r)), o && (l && this.fire(l, n), t.fire(i.evtIn, n))
                            },
                            __onMouseWheel: function(t) {
                                this._cacheTransformEventData(t), this._handleEvent(t, "wheel"), this._resetTransformEventData()
                            },
                            _transformObject: function(t) {
                                var e = this.getPointer(t),
                                    i = this._currentTransform;
                                i.reset = !1, i.target.isMoving = !0, i.shiftKey = t.shiftKey, i.altKey = t[this.centeredKey], this._beforeScaleTransform(t, i), this._performTransformAction(t, i, e), i.actionPerformed && this.requestRenderAll()
                            },
                            _performTransformAction: function(t, e, i) {
                                var n = i.x,
                                    r = i.y,
                                    o = e.action,
                                    a = !1,
                                    s = {
                                        target: e.target,
                                        e: t,
                                        transform: e,
                                        pointer: i
                                    };
                                "rotate" === o ? (a = this._rotateObject(n, r)) && this._fire("rotating", s) : "scale" === o ? (a = this._onScale(t, e, n, r)) && this._fire("scaling", s) : "scaleX" === o ? (a = this._scaleObject(n, r, "x")) && this._fire("scaling", s) : "scaleY" === o ? (a = this._scaleObject(n, r, "y")) && this._fire("scaling", s) : "skewX" === o ? (a = this._skewObject(n, r, "x")) && this._fire("skewing", s) : "skewY" === o ? (a = this._skewObject(n, r, "y")) && this._fire("skewing", s) : (a = this._translateObject(n, r)) && (this._fire("moving", s), this.setCursor(s.target.moveCursor || this.moveCursor)), e.actionPerformed = e.actionPerformed || a
                            },
                            _fire: function(t, e) {
                                this.fire("object:" + t, e), e.target.fire(t, e)
                            },
                            _beforeScaleTransform: function(t, e) {
                                if ("scale" === e.action || "scaleX" === e.action || "scaleY" === e.action) {
                                    var i = this._shouldCenterTransform(e.target);
                                    (i && ("center" !== e.originX || "center" !== e.originY) || !i && "center" === e.originX && "center" === e.originY) && (this._resetCurrentTransform(), e.reset = !0)
                                }
                            },
                            _onScale: function(t, e, i, n) {
                                return this._isUniscalePossible(t, e.target) ? (e.currentAction = "scale", this._scaleObject(i, n)) : (e.reset || "scale" !== e.currentAction || this._resetCurrentTransform(), e.currentAction = "scaleEqually", this._scaleObject(i, n, "equally"))
                            },
                            _isUniscalePossible: function(t, e) {
                                return (t[this.uniScaleKey] || this.uniScaleTransform) && !e.get("lockUniScaling")
                            },
                            _setCursorFromEvent: function(t, e) {
                                if (!e) return this.setCursor(this.defaultCursor), !1;
                                var i = e.hoverCursor || this.hoverCursor,
                                    n = this._activeObject && "activeSelection" === this._activeObject.type ? this._activeObject : null,
                                    r = (!n || !n.contains(e)) && e._findTargetCorner(this.getPointer(t, !0));
                                r ? this.setCursor(this.getCornerCursor(r, e, t)) : this.setCursor(i)
                            },
                            getCornerCursor: function(e, i, n) {
                                return this.actionIsDisabled(e, i, n) ? this.notAllowedCursor : e in t ? this._getRotatedCornerCursor(e, i, n) : "mtr" === e && i.hasRotatingPoint ? this.rotationCursor : this.defaultCursor
                            },
                            actionIsDisabled: function(t, e, i) {
                                return "mt" === t || "mb" === t ? i[this.altActionKey] ? e.lockSkewingX : e.lockScalingY : "ml" === t || "mr" === t ? i[this.altActionKey] ? e.lockSkewingY : e.lockScalingX : "mtr" === t ? e.lockRotation : this._isUniscalePossible(i, e) ? e.lockScalingX && e.lockScalingY : e.lockScalingX || e.lockScalingY
                            },
                            _getRotatedCornerCursor: function(e, i, n) {
                                var r = Math.round(i.angle % 360 / 45);
                                return r < 0 && (r += 8), r += t[e], n[this.altActionKey] && t[e] % 2 == 0 && (r += 2), r %= 8, this.cursorMap[r]
                            }
                        })
                    }(),
                    function() {
                        var t = Math.min,
                            e = Math.max;
                        n.util.object.extend(n.Canvas.prototype, {
                            _shouldGroup: function(t, e) {
                                var i = this._activeObject;
                                return i && this._isSelectionKeyPressed(t) && e && e.selectable && this.selection && (i !== e || "activeSelection" === i.type) && !e.onSelect({
                                    e: t
                                })
                            },
                            _handleGrouping: function(t, e) {
                                var i = this._activeObject;
                                i.__corner || (e !== i || (e = this.findTarget(t, !0)) && e.selectable) && (i && "activeSelection" === i.type ? this._updateActiveSelection(e, t) : this._createActiveSelection(e, t))
                            },
                            _updateActiveSelection: function(t, e) {
                                var i = this._activeObject,
                                    n = i._objects.slice(0);
                                i.contains(t) ? (i.removeWithUpdate(t), this._hoveredTarget = t, 1 === i.size() && this._setActiveObject(i.item(0), e)) : (i.addWithUpdate(t), this._hoveredTarget = i), this._fireSelectionEvents(n, e)
                            },
                            _createActiveSelection: function(t, e) {
                                var i = this.getActiveObjects(),
                                    n = this._createGroup(t);
                                this._hoveredTarget = n, this._setActiveObject(n, e), this._fireSelectionEvents(i, e)
                            },
                            _createGroup: function(t) {
                                var e = this._objects,
                                    i = e.indexOf(this._activeObject) < e.indexOf(t) ? [this._activeObject, t] : [t, this._activeObject];
                                return this._activeObject.isEditing && this._activeObject.exitEditing(), new n.ActiveSelection(i, {
                                    canvas: this
                                })
                            },
                            _groupSelectedObjects: function(t) {
                                var e, i = this._collectObjects(t);
                                1 === i.length ? this.setActiveObject(i[0], t) : i.length > 1 && (e = new n.ActiveSelection(i.reverse(), {
                                    canvas: this
                                }), this.setActiveObject(e, t))
                            },
                            _collectObjects: function(i) {
                                for (var r, o = [], a = this._groupSelector.ex, s = this._groupSelector.ey, l = a + this._groupSelector.left, c = s + this._groupSelector.top, u = new n.Point(t(a, l), t(s, c)), h = new n.Point(e(a, l), e(s, c)), d = !this.selectionFullyContained, f = a === l && s === c, p = this._objects.length; p-- && !((r = this._objects[p]) && r.selectable && r.visible && !r.onSelect({
                                        e: i
                                    }) && (d && r.intersectsWithRect(u, h) || r.isContainedWithinRect(u, h) || d && r.containsPoint(u) || d && r.containsPoint(h)) && (o.push(r), f)););
                                return o
                            },
                            _maybeGroupObjects: function(t) {
                                this.selection && this._groupSelector && this._groupSelectedObjects(t), this.setCursor(this.defaultCursor), this._groupSelector = null
                            }
                        })
                    }(), n.util.object.extend(n.StaticCanvas.prototype, {
                        toDataURL: function(t) {
                            t || (t = {});
                            var e = t.format || "png",
                                i = t.quality || 1,
                                r = (t.multiplier || 1) * (t.enableRetinaScaling ? this.getRetinaScaling() : 1),
                                o = this.toCanvasElement(r, t);
                            return n.util.toDataURL(o, e, i)
                        },
                        toCanvasElement: function(t, e) {
                            t = t || 1;
                            var i = ((e = e || {}).width || this.width) * t,
                                r = (e.height || this.height) * t,
                                o = this.getZoom(),
                                a = this.width,
                                s = this.height,
                                l = o * t,
                                c = this.viewportTransform,
                                u = (c[4] - (e.left || 0)) * t,
                                h = (c[5] - (e.top || 0)) * t,
                                d = this.interactive,
                                f = this.contextContainer,
                                p = [l, 0, 0, l, u, h],
                                g = n.util.createCanvasElement();
                            return g.width = i, g.height = r, this.interactive = !1, this.viewportTransform = p, this.width = i, this.height = r, this.calcViewportBoundaries(), this.contextContainer = g.getContext("2d"), this.renderAll(), this.viewportTransform = c, this.width = a, this.height = s, this.calcViewportBoundaries(), this.contextContainer = f, this.interactive = d, g
                        }
                    }), n.util.object.extend(n.StaticCanvas.prototype, {
                        loadFromDatalessJSON: function(t, e, i) {
                            return this.loadFromJSON(t, e, i)
                        },
                        loadFromJSON: function(t, e, i) {
                            if (t) {
                                var r = "string" == typeof t ? JSON.parse(t) : n.util.object.clone(t),
                                    o = this,
                                    a = this.renderOnAddRemove;
                                return this.renderOnAddRemove = !1, this._enlivenObjects(r.objects, function(t) {
                                    o.clear(), o._setBgOverlay(r, function() {
                                        t.forEach(function(t, e) {
                                            o.insertAt(t, e)
                                        }), o.renderOnAddRemove = a, delete r.objects, delete r.backgroundImage, delete r.overlayImage, delete r.background, delete r.overlay, o._setOptions(r), o.renderAll(), e && e()
                                    })
                                }, i), this
                            }
                        },
                        _setBgOverlay: function(t, e) {
                            var i = {
                                backgroundColor: !1,
                                overlayColor: !1,
                                backgroundImage: !1,
                                overlayImage: !1
                            };
                            if (t.backgroundImage || t.overlayImage || t.background || t.overlay) {
                                var n = function() {
                                    i.backgroundImage && i.overlayImage && i.backgroundColor && i.overlayColor && e && e()
                                };
                                this.__setBgOverlay("backgroundImage", t.backgroundImage, i, n), this.__setBgOverlay("overlayImage", t.overlayImage, i, n), this.__setBgOverlay("backgroundColor", t.background, i, n), this.__setBgOverlay("overlayColor", t.overlay, i, n)
                            } else e && e()
                        },
                        __setBgOverlay: function(t, e, i, r) {
                            var o = this;
                            if (!e) return i[t] = !0, void(r && r());
                            "backgroundImage" === t || "overlayImage" === t ? n.util.enlivenObjects([e], function(e) {
                                o[t] = e[0], i[t] = !0, r && r()
                            }) : this["set" + n.util.string.capitalize(t, !0)](e, function() {
                                i[t] = !0, r && r()
                            })
                        },
                        _enlivenObjects: function(t, e, i) {
                            t && 0 !== t.length ? n.util.enlivenObjects(t, function(t) {
                                e && e(t)
                            }, null, i) : e && e([])
                        },
                        _toDataURL: function(t, e) {
                            this.clone(function(i) {
                                e(i.toDataURL(t))
                            })
                        },
                        _toDataURLWithMultiplier: function(t, e, i) {
                            this.clone(function(n) {
                                i(n.toDataURLWithMultiplier(t, e))
                            })
                        },
                        clone: function(t, e) {
                            var i = JSON.stringify(this.toJSON(e));
                            this.cloneWithoutData(function(e) {
                                e.loadFromJSON(i, function() {
                                    t && t(e)
                                })
                            })
                        },
                        cloneWithoutData: function(t) {
                            var e = n.util.createCanvasElement();
                            e.width = this.width, e.height = this.height;
                            var i = new n.Canvas(e);
                            i.clipTo = this.clipTo, this.backgroundImage ? (i.setBackgroundImage(this.backgroundImage.src, function() {
                                i.renderAll(), t && t(i)
                            }), i.backgroundImageOpacity = this.backgroundImageOpacity, i.backgroundImageStretch = this.backgroundImageStretch) : t && t(i)
                        }
                    }),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.util.object.clone,
                            r = e.util.toFixed,
                            o = e.util.string.capitalize,
                            a = e.util.degreesToRadians,
                            s = e.StaticCanvas.supports("setLineDash"),
                            l = !e.isLikelyNode;
                        e.Object || (e.Object = e.util.createClass(e.CommonMethods, {
                            type: "object",
                            originX: "left",
                            originY: "top",
                            top: 0,
                            left: 0,
                            width: 0,
                            height: 0,
                            scaleX: 1,
                            scaleY: 1,
                            flipX: !1,
                            flipY: !1,
                            opacity: 1,
                            angle: 0,
                            skewX: 0,
                            skewY: 0,
                            cornerSize: 13,
                            transparentCorners: !0,
                            hoverCursor: null,
                            moveCursor: null,
                            padding: 0,
                            borderColor: "rgba(102,153,255,0.75)",
                            borderDashArray: null,
                            cornerColor: "rgba(102,153,255,0.5)",
                            cornerStrokeColor: null,
                            cornerStyle: "rect",
                            cornerDashArray: null,
                            centeredScaling: !1,
                            centeredRotation: !0,
                            fill: "rgb(0,0,0)",
                            fillRule: "nonzero",
                            globalCompositeOperation: "source-over",
                            backgroundColor: "",
                            selectionBackgroundColor: "",
                            stroke: null,
                            strokeWidth: 1,
                            strokeDashArray: null,
                            strokeDashOffset: 0,
                            strokeLineCap: "butt",
                            strokeLineJoin: "miter",
                            strokeMiterLimit: 4,
                            shadow: null,
                            borderOpacityWhenMoving: .4,
                            borderScaleFactor: 1,
                            transformMatrix: null,
                            minScaleLimit: 0,
                            selectable: !0,
                            evented: !0,
                            visible: !0,
                            hasControls: !0,
                            hasBorders: !0,
                            hasRotatingPoint: !0,
                            rotatingPointOffset: 40,
                            perPixelTargetFind: !1,
                            includeDefaultValues: !0,
                            clipTo: null,
                            lockMovementX: !1,
                            lockMovementY: !1,
                            lockRotation: !1,
                            lockScalingX: !1,
                            lockScalingY: !1,
                            lockUniScaling: !1,
                            lockSkewingX: !1,
                            lockSkewingY: !1,
                            lockScalingFlip: !1,
                            excludeFromExport: !1,
                            objectCaching: l,
                            statefullCache: !1,
                            noScaleCache: !0,
                            strokeUniform: !1,
                            dirty: !0,
                            __corner: 0,
                            paintFirst: "fill",
                            stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),
                            cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),
                            clipPath: void 0,
                            inverted: !1,
                            absolutePositioned: !1,
                            initialize: function(t) {
                                t && this.setOptions(t)
                            },
                            _createCacheCanvas: function() {
                                this._cacheProperties = {}, this._cacheCanvas = e.util.createCanvasElement(), this._cacheContext = this._cacheCanvas.getContext("2d"), this._updateCacheCanvas(), this.dirty = !0
                            },
                            _limitCacheSize: function(t) {
                                var i = e.perfLimitSizeTotal,
                                    n = t.width,
                                    r = t.height,
                                    o = e.maxCacheSideLimit,
                                    a = e.minCacheSideLimit;
                                if (n <= o && r <= o && n * r <= i) return n < a && (t.width = a), r < a && (t.height = a), t;
                                var s = n / r,
                                    l = e.util.limitDimsByArea(s, i),
                                    c = e.util.capValue,
                                    u = c(a, l.x, o),
                                    h = c(a, l.y, o);
                                return n > u && (t.zoomX /= n / u, t.width = u, t.capped = !0), r > h && (t.zoomY /= r / h, t.height = h, t.capped = !0), t
                            },
                            _getCacheCanvasDimensions: function() {
                                var t = this.getTotalObjectScaling(),
                                    e = this._getNonTransformedDimensions(),
                                    i = t.scaleX,
                                    n = t.scaleY;
                                return {
                                    width: e.x * i + 2,
                                    height: e.y * n + 2,
                                    zoomX: i,
                                    zoomY: n,
                                    x: e.x,
                                    y: e.y
                                }
                            },
                            _updateCacheCanvas: function() {
                                var t = this.canvas;
                                if (this.noScaleCache && t && t._currentTransform) {
                                    var i = t._currentTransform.target,
                                        n = t._currentTransform.action;
                                    if (this === i && n.slice && "scale" === n.slice(0, 5)) return !1
                                }
                                var r, o, a = this._cacheCanvas,
                                    s = this._limitCacheSize(this._getCacheCanvasDimensions()),
                                    l = e.minCacheSideLimit,
                                    c = s.width,
                                    u = s.height,
                                    h = s.zoomX,
                                    d = s.zoomY,
                                    f = c !== this.cacheWidth || u !== this.cacheHeight,
                                    p = this.zoomX !== h || this.zoomY !== d,
                                    g = f || p,
                                    m = 0,
                                    v = 0,
                                    b = !1;
                                if (f) {
                                    var y = this._cacheCanvas.width,
                                        _ = this._cacheCanvas.height,
                                        x = c > y || u > _;
                                    b = x || (c < .9 * y || u < .9 * _) && y > l && _ > l, x && !s.capped && (c > l || u > l) && (m = .1 * c, v = .1 * u)
                                }
                                return !!g && (b ? (a.width = Math.ceil(c + m), a.height = Math.ceil(u + v)) : (this._cacheContext.setTransform(1, 0, 0, 1, 0, 0), this._cacheContext.clearRect(0, 0, a.width, a.height)), r = s.x * h / 2, o = s.y * d / 2, this.cacheTranslationX = Math.round(a.width / 2 - r) + r, this.cacheTranslationY = Math.round(a.height / 2 - o) + o, this.cacheWidth = c, this.cacheHeight = u, this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY), this._cacheContext.scale(h, d), this.zoomX = h, this.zoomY = d, !0)
                            },
                            setOptions: function(t) {
                                this._setOptions(t), this._initGradient(t.fill, "fill"), this._initGradient(t.stroke, "stroke"), this._initClipping(t), this._initPattern(t.fill, "fill"), this._initPattern(t.stroke, "stroke")
                            },
                            transform: function(t) {
                                var e;
                                e = this.group && !this.group._transformDone ? this.calcTransformMatrix() : this.calcOwnMatrix(), t.transform(e[0], e[1], e[2], e[3], e[4], e[5])
                            },
                            toObject: function(t) {
                                var i = e.Object.NUM_FRACTION_DIGITS,
                                    n = {
                                        type: this.type,
                                        version: e.version,
                                        originX: this.originX,
                                        originY: this.originY,
                                        left: r(this.left, i),
                                        top: r(this.top, i),
                                        width: r(this.width, i),
                                        height: r(this.height, i),
                                        fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                                        stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                                        strokeWidth: r(this.strokeWidth, i),
                                        strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,
                                        strokeLineCap: this.strokeLineCap,
                                        strokeDashOffset: this.strokeDashOffset,
                                        strokeLineJoin: this.strokeLineJoin,
                                        strokeMiterLimit: r(this.strokeMiterLimit, i),
                                        scaleX: r(this.scaleX, i),
                                        scaleY: r(this.scaleY, i),
                                        angle: r(this.angle, i),
                                        flipX: this.flipX,
                                        flipY: this.flipY,
                                        opacity: r(this.opacity, i),
                                        shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                                        visible: this.visible,
                                        clipTo: this.clipTo && String(this.clipTo),
                                        backgroundColor: this.backgroundColor,
                                        fillRule: this.fillRule,
                                        paintFirst: this.paintFirst,
                                        globalCompositeOperation: this.globalCompositeOperation,
                                        transformMatrix: this.transformMatrix ? this.transformMatrix.concat() : null,
                                        skewX: r(this.skewX, i),
                                        skewY: r(this.skewY, i)
                                    };
                                return this.clipPath && (n.clipPath = this.clipPath.toObject(t), n.clipPath.inverted = this.clipPath.inverted, n.clipPath.absolutePositioned = this.clipPath.absolutePositioned), e.util.populateWithProperties(this, n, t), this.includeDefaultValues || (n = this._removeDefaultValues(n)), n
                            },
                            toDatalessObject: function(t) {
                                return this.toObject(t)
                            },
                            _removeDefaultValues: function(t) {
                                var i = e.util.getKlass(t.type).prototype;
                                return i.stateProperties.forEach(function(e) {
                                    t[e] === i[e] && delete t[e], "[object Array]" === Object.prototype.toString.call(t[e]) && "[object Array]" === Object.prototype.toString.call(i[e]) && 0 === t[e].length && 0 === i[e].length && delete t[e]
                                }), t
                            },
                            toString: function() {
                                return "#<fabric." + o(this.type) + ">"
                            },
                            getObjectScaling: function() {
                                var t = this.scaleX,
                                    e = this.scaleY;
                                if (this.group) {
                                    var i = this.group.getObjectScaling();
                                    t *= i.scaleX, e *= i.scaleY
                                }
                                return {
                                    scaleX: t,
                                    scaleY: e
                                }
                            },
                            getTotalObjectScaling: function() {
                                var t = this.getObjectScaling(),
                                    e = t.scaleX,
                                    i = t.scaleY;
                                if (this.canvas) {
                                    var n = this.canvas.getZoom(),
                                        r = this.canvas.getRetinaScaling();
                                    e *= n * r, i *= n * r
                                }
                                return {
                                    scaleX: e,
                                    scaleY: i
                                }
                            },
                            getObjectOpacity: function() {
                                var t = this.opacity;
                                return this.group && (t *= this.group.getObjectOpacity()), t
                            },
                            _set: function(t, i) {
                                var n = "scaleX" === t || "scaleY" === t,
                                    r = this[t] !== i,
                                    o = !1;
                                return n && (i = this._constrainScale(i)), "scaleX" === t && i < 0 ? (this.flipX = !this.flipX, i *= -1) : "scaleY" === t && i < 0 ? (this.flipY = !this.flipY, i *= -1) : "shadow" !== t || !i || i instanceof e.Shadow ? "dirty" === t && this.group && this.group.set("dirty", i) : i = new e.Shadow(i), this[t] = i, r && (o = this.group && this.group.isOnACache(), this.cacheProperties.indexOf(t) > -1 ? (this.dirty = !0, o && this.group.set("dirty", !0)) : o && this.stateProperties.indexOf(t) > -1 && this.group.set("dirty", !0)), this
                            },
                            setOnGroup: function() {},
                            getViewportTransform: function() {
                                return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : e.iMatrix.concat()
                            },
                            isNotVisible: function() {
                                return 0 === this.opacity || 0 === this.width && 0 === this.height && 0 === this.strokeWidth || !this.visible
                            },
                            render: function(t) {
                                this.isNotVisible() || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (t.save(), this._setupCompositeOperation(t), this.drawSelectionBackground(t), this.transform(t), this._setOpacity(t), this._setShadow(t, this), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this.clipTo && e.util.clipContext(this, t), this.shouldCache() ? (this.renderCache(), this.drawCacheOnCanvas(t)) : (this._removeCacheCanvas(), this.dirty = !1, this.drawObject(t), this.objectCaching && this.statefullCache && this.saveState({
                                    propertySet: "cacheProperties"
                                })), this.clipTo && t.restore(), t.restore())
                            },
                            renderCache: function(t) {
                                t = t || {}, this._cacheCanvas || this._createCacheCanvas(), this.isCacheDirty() && (this.statefullCache && this.saveState({
                                    propertySet: "cacheProperties"
                                }), this.drawObject(this._cacheContext, t.forClipping), this.dirty = !1)
                            },
                            _removeCacheCanvas: function() {
                                this._cacheCanvas = null, this.cacheWidth = 0, this.cacheHeight = 0
                            },
                            needsItsOwnCache: function() {
                                return "stroke" === this.paintFirst && "object" == typeof this.shadow || !!this.clipPath
                            },
                            shouldCache: function() {
                                return this.ownCaching = this.objectCaching && (!this.group || this.needsItsOwnCache() || !this.group.isOnACache()), this.ownCaching
                            },
                            willDrawShadow: function() {
                                return !!this.shadow && (0 !== this.shadow.offsetX || 0 !== this.shadow.offsetY)
                            },
                            drawClipPathOnCache: function(t) {
                                var i = this.clipPath;
                                if (t.save(), i.inverted ? t.globalCompositeOperation = "destination-out" : t.globalCompositeOperation = "destination-in", i.absolutePositioned) {
                                    var n = e.util.invertTransform(this.calcTransformMatrix());
                                    t.transform(n[0], n[1], n[2], n[3], n[4], n[5])
                                }
                                i.transform(t), t.scale(1 / i.zoomX, 1 / i.zoomY), t.drawImage(i._cacheCanvas, -i.cacheTranslationX, -i.cacheTranslationY), t.restore()
                            },
                            drawObject: function(t, e) {
                                var i = this.fill,
                                    n = this.stroke;
                                e ? (this.fill = "black", this.stroke = "", this._setClippingProperties(t)) : (this._renderBackground(t), this._setStrokeStyles(t, this), this._setFillStyles(t, this)), this._render(t), this._drawClipPath(t), this.fill = i, this.stroke = n
                            },
                            _drawClipPath: function(t) {
                                var e = this.clipPath;
                                e && (e.canvas = this.canvas, e.shouldCache(), e._transformDone = !0, e.renderCache({
                                    forClipping: !0
                                }), this.drawClipPathOnCache(t))
                            },
                            drawCacheOnCanvas: function(t) {
                                t.scale(1 / this.zoomX, 1 / this.zoomY), t.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY)
                            },
                            isCacheDirty: function(t) {
                                if (this.isNotVisible()) return !1;
                                if (this._cacheCanvas && !t && this._updateCacheCanvas()) return !0;
                                if (this.dirty || this.clipPath && this.clipPath.absolutePositioned || this.statefullCache && this.hasStateChanged("cacheProperties")) {
                                    if (this._cacheCanvas && !t) {
                                        var e = this.cacheWidth / this.zoomX,
                                            i = this.cacheHeight / this.zoomY;
                                        this._cacheContext.clearRect(-e / 2, -i / 2, e, i)
                                    }
                                    return !0
                                }
                                return !1
                            },
                            _renderBackground: function(t) {
                                if (this.backgroundColor) {
                                    var e = this._getNonTransformedDimensions();
                                    t.fillStyle = this.backgroundColor, t.fillRect(-e.x / 2, -e.y / 2, e.x, e.y), this._removeShadow(t)
                                }
                            },
                            _setOpacity: function(t) {
                                this.group && !this.group._transformDone ? t.globalAlpha = this.getObjectOpacity() : t.globalAlpha *= this.opacity
                            },
                            _setStrokeStyles: function(t, e) {
                                e.stroke && (t.lineWidth = e.strokeWidth, t.lineCap = e.strokeLineCap, t.lineDashOffset = e.strokeDashOffset, t.lineJoin = e.strokeLineJoin, t.miterLimit = e.strokeMiterLimit, t.strokeStyle = e.stroke.toLive ? e.stroke.toLive(t, this) : e.stroke)
                            },
                            _setFillStyles: function(t, e) {
                                e.fill && (t.fillStyle = e.fill.toLive ? e.fill.toLive(t, this) : e.fill)
                            },
                            _setClippingProperties: function(t) {
                                t.globalAlpha = 1, t.strokeStyle = "transparent", t.fillStyle = "#000000"
                            },
                            _setLineDash: function(t, e, i) {
                                e && (1 & e.length && e.push.apply(e, e), s ? t.setLineDash(e) : i && i(t), this.strokeUniform && t.setLineDash(t.getLineDash().map(function(e) {
                                    return e * t.lineWidth
                                })))
                            },
                            _renderControls: function(t, i) {
                                var n, r, o, s = this.getViewportTransform(),
                                    l = this.calcTransformMatrix();
                                r = void 0 !== (i = i || {}).hasBorders ? i.hasBorders : this.hasBorders, o = void 0 !== i.hasControls ? i.hasControls : this.hasControls, l = e.util.multiplyTransformMatrices(s, l), n = e.util.qrDecompose(l), t.save(), t.translate(n.translateX, n.translateY), t.lineWidth = 1 * this.borderScaleFactor, this.group || (t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1), i.forActiveSelection ? (t.rotate(a(n.angle)), r && this.drawBordersInGroup(t, n, i)) : (t.rotate(a(this.angle)), r && this.drawBorders(t, i)), o && this.drawControls(t, i), t.restore()
                            },
                            _setShadow: function(t) {
                                if (this.shadow) {
                                    var i = this.shadow,
                                        n = this.canvas,
                                        r = n && n.viewportTransform[0] || 1,
                                        o = n && n.viewportTransform[3] || 1,
                                        a = this.getObjectScaling();
                                    n && n._isRetinaScaling() && (r *= e.devicePixelRatio, o *= e.devicePixelRatio), t.shadowColor = i.color, t.shadowBlur = i.blur * e.browserShadowBlurConstant * (r + o) * (a.scaleX + a.scaleY) / 4, t.shadowOffsetX = i.offsetX * r * a.scaleX, t.shadowOffsetY = i.offsetY * o * a.scaleY
                                }
                            },
                            _removeShadow: function(t) {
                                this.shadow && (t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0)
                            },
                            _applyPatternGradientTransform: function(t, e) {
                                if (!e || !e.toLive) return {
                                    offsetX: 0,
                                    offsetY: 0
                                };
                                var i = e.gradientTransform || e.patternTransform,
                                    n = -this.width / 2 + e.offsetX || 0,
                                    r = -this.height / 2 + e.offsetY || 0;
                                return t.translate(n, r), i && t.transform(i[0], i[1], i[2], i[3], i[4], i[5]), {
                                    offsetX: n,
                                    offsetY: r
                                }
                            },
                            _renderPaintInOrder: function(t) {
                                "stroke" === this.paintFirst ? (this._renderStroke(t), this._renderFill(t)) : (this._renderFill(t), this._renderStroke(t))
                            },
                            _renderFill: function(t) {
                                this.fill && (t.save(), this._applyPatternGradientTransform(t, this.fill), "evenodd" === this.fillRule ? t.fill("evenodd") : t.fill(), t.restore())
                            },
                            _renderStroke: function(t) {
                                this.stroke && 0 !== this.strokeWidth && (this.shadow && !this.shadow.affectStroke && this._removeShadow(t), t.save(), this.strokeUniform && t.scale(1 / this.scaleX, 1 / this.scaleY), this._setLineDash(t, this.strokeDashArray, this._renderDashedStroke), this._applyPatternGradientTransform(t, this.stroke), t.stroke(), t.restore())
                            },
                            _findCenterFromElement: function() {
                                return {
                                    x: this.left + this.width / 2,
                                    y: this.top + this.height / 2
                                }
                            },
                            _assignTransformMatrixProps: function() {
                                if (this.transformMatrix) {
                                    var t = e.util.qrDecompose(this.transformMatrix);
                                    this.flipX = !1, this.flipY = !1, this.set("scaleX", t.scaleX), this.set("scaleY", t.scaleY), this.angle = t.angle, this.skewX = t.skewX, this.skewY = 0
                                }
                            },
                            _removeTransformMatrix: function(t) {
                                var i = this._findCenterFromElement();
                                this.transformMatrix && (this._assignTransformMatrixProps(), i = e.util.transformPoint(i, this.transformMatrix)), this.transformMatrix = null, t && (this.scaleX *= t.scaleX, this.scaleY *= t.scaleY, this.cropX = t.cropX, this.cropY = t.cropY, i.x += t.offsetLeft, i.y += t.offsetTop, this.width = t.width, this.height = t.height), this.setPositionByOrigin(i, "center", "center")
                            },
                            clone: function(t, i) {
                                var n = this.toObject(i);
                                this.constructor.fromObject ? this.constructor.fromObject(n, t) : e.Object._fromObject("Object", n, t)
                            },
                            cloneAsImage: function(t, i) {
                                var n = this.toCanvasElement(i);
                                return t && t(new e.Image(n)), this
                            },
                            toCanvasElement: function(t) {
                                t || (t = {});
                                var i = e.util,
                                    n = i.saveObjectTransform(this),
                                    r = this.shadow,
                                    o = Math.abs,
                                    a = (t.multiplier || 1) * (t.enableRetinaScaling ? e.devicePixelRatio : 1);
                                t.withoutTransform && i.resetObjectTransform(this), t.withoutShadow && (this.shadow = null);
                                var s, l, c = e.util.createCanvasElement(),
                                    u = this.getBoundingRect(!0, !0),
                                    h = this.shadow,
                                    d = {
                                        x: 0,
                                        y: 0
                                    };
                                h && (l = h.blur, s = this.getObjectScaling(), d.x = 2 * Math.round((o(h.offsetX) + l) * o(s.scaleX)), d.y = 2 * Math.round((o(h.offsetY) + l) * o(s.scaleY))), c.width = u.width + d.x, c.height = u.height + d.y, c.width += c.width % 2 ? 2 - c.width % 2 : 0, c.height += c.height % 2 ? 2 - c.height % 2 : 0;
                                var f = new e.StaticCanvas(c, {
                                    enableRetinaScaling: !1,
                                    renderOnAddRemove: !1,
                                    skipOffscreen: !1
                                });
                                "jpeg" === t.format && (f.backgroundColor = "#fff"), this.setPositionByOrigin(new e.Point(f.width / 2, f.height / 2), "center", "center");
                                var p = this.canvas;
                                f.add(this);
                                var g = f.toCanvasElement(a || 1, t);
                                return this.shadow = r, this.canvas = p, this.set(n).setCoords(), f._objects = [], f.dispose(), f = null, g
                            },
                            toDataURL: function(t) {
                                return t || (t = {}), e.util.toDataURL(this.toCanvasElement(t), t.format || "png", t.quality || 1)
                            },
                            isType: function(t) {
                                return this.type === t
                            },
                            complexity: function() {
                                return 1
                            },
                            toJSON: function(t) {
                                return this.toObject(t)
                            },
                            setGradient: function(t, i) {
                                i || (i = {});
                                var n = {
                                    colorStops: []
                                };
                                return n.type = i.type || (i.r1 || i.r2 ? "radial" : "linear"), n.coords = {
                                    x1: i.x1,
                                    y1: i.y1,
                                    x2: i.x2,
                                    y2: i.y2
                                }, (i.r1 || i.r2) && (n.coords.r1 = i.r1, n.coords.r2 = i.r2), n.gradientTransform = i.gradientTransform, e.Gradient.prototype.addColorStop.call(n, i.colorStops), this.set(t, e.Gradient.forObject(this, n))
                            },
                            setPatternFill: function(t, i) {
                                return this.set("fill", new e.Pattern(t, i))
                            },
                            setShadow: function(t) {
                                return this.set("shadow", t ? new e.Shadow(t) : null)
                            },
                            setColor: function(t) {
                                return this.set("fill", t), this
                            },
                            rotate: function(t) {
                                var e = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation;
                                return e && this._setOriginToCenter(), this.set("angle", t), e && this._resetOrigin(), this
                            },
                            centerH: function() {
                                return this.canvas && this.canvas.centerObjectH(this), this
                            },
                            viewportCenterH: function() {
                                return this.canvas && this.canvas.viewportCenterObjectH(this), this
                            },
                            centerV: function() {
                                return this.canvas && this.canvas.centerObjectV(this), this
                            },
                            viewportCenterV: function() {
                                return this.canvas && this.canvas.viewportCenterObjectV(this), this
                            },
                            center: function() {
                                return this.canvas && this.canvas.centerObject(this), this
                            },
                            viewportCenter: function() {
                                return this.canvas && this.canvas.viewportCenterObject(this), this
                            },
                            getLocalPointer: function(t, i) {
                                i = i || this.canvas.getPointer(t);
                                var n = new e.Point(i.x, i.y),
                                    r = this._getLeftTopCoords();
                                return this.angle && (n = e.util.rotatePoint(n, r, a(-this.angle))), {
                                    x: n.x - r.x,
                                    y: n.y - r.y
                                }
                            },
                            _setupCompositeOperation: function(t) {
                                this.globalCompositeOperation && (t.globalCompositeOperation = this.globalCompositeOperation)
                            }
                        }), e.util.createAccessors && e.util.createAccessors(e.Object), i(e.Object.prototype, e.Observable), e.Object.NUM_FRACTION_DIGITS = 2, e.Object._fromObject = function(t, i, r, o) {
                            var a = e[t];
                            i = n(i, !0), e.util.enlivenPatterns([i.fill, i.stroke], function(t) {
                                void 0 !== t[0] && (i.fill = t[0]), void 0 !== t[1] && (i.stroke = t[1]), e.util.enlivenObjects([i.clipPath], function(t) {
                                    i.clipPath = t[0];
                                    var e = o ? new a(i[o], i) : new a(i);
                                    r && r(e)
                                })
                            })
                        }, e.Object.__uid = 0)
                    }(e),
                    function() {
                        var t = n.util.degreesToRadians,
                            e = {
                                left: -.5,
                                center: 0,
                                right: .5
                            },
                            i = {
                                top: -.5,
                                center: 0,
                                bottom: .5
                            };
                        n.util.object.extend(n.Object.prototype, {
                            translateToGivenOrigin: function(t, r, o, a, s) {
                                var l, c, u, h = t.x,
                                    d = t.y;
                                return "string" == typeof r ? r = e[r] : r -= .5, "string" == typeof a ? a = e[a] : a -= .5, l = a - r, "string" == typeof o ? o = i[o] : o -= .5, "string" == typeof s ? s = i[s] : s -= .5, c = s - o, (l || c) && (u = this._getTransformedDimensions(), h = t.x + l * u.x, d = t.y + c * u.y), new n.Point(h, d)
                            },
                            translateToCenterPoint: function(e, i, r) {
                                var o = this.translateToGivenOrigin(e, i, r, "center", "center");
                                return this.angle ? n.util.rotatePoint(o, e, t(this.angle)) : o
                            },
                            translateToOriginPoint: function(e, i, r) {
                                var o = this.translateToGivenOrigin(e, "center", "center", i, r);
                                return this.angle ? n.util.rotatePoint(o, e, t(this.angle)) : o
                            },
                            getCenterPoint: function() {
                                var t = new n.Point(this.left, this.top);
                                return this.translateToCenterPoint(t, this.originX, this.originY)
                            },
                            getPointByOrigin: function(t, e) {
                                var i = this.getCenterPoint();
                                return this.translateToOriginPoint(i, t, e)
                            },
                            toLocalPoint: function(e, i, r) {
                                var o, a, s = this.getCenterPoint();
                                return o = void 0 !== i && void 0 !== r ? this.translateToGivenOrigin(s, "center", "center", i, r) : new n.Point(this.left, this.top), a = new n.Point(e.x, e.y), this.angle && (a = n.util.rotatePoint(a, s, -t(this.angle))), a.subtractEquals(o)
                            },
                            setPositionByOrigin: function(t, e, i) {
                                var n = this.translateToCenterPoint(t, e, i),
                                    r = this.translateToOriginPoint(n, this.originX, this.originY);
                                this.set("left", r.x), this.set("top", r.y)
                            },
                            adjustPosition: function(i) {
                                var r, o, a = t(this.angle),
                                    s = this.getScaledWidth(),
                                    l = n.util.cos(a) * s,
                                    c = n.util.sin(a) * s;
                                r = "string" == typeof this.originX ? e[this.originX] : this.originX - .5, o = "string" == typeof i ? e[i] : i - .5, this.left += l * (o - r), this.top += c * (o - r), this.setCoords(), this.originX = i
                            },
                            _setOriginToCenter: function() {
                                this._originalOriginX = this.originX, this._originalOriginY = this.originY;
                                var t = this.getCenterPoint();
                                this.originX = "center", this.originY = "center", this.left = t.x, this.top = t.y
                            },
                            _resetOrigin: function() {
                                var t = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                                this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = t.x, this.top = t.y, this._originalOriginX = null, this._originalOriginY = null
                            },
                            _getLeftTopCoords: function() {
                                return this.translateToOriginPoint(this.getCenterPoint(), "left", "top")
                            }
                        })
                    }(),
                    function() {
                        var t = n.util.degreesToRadians,
                            e = n.util.multiplyTransformMatrices,
                            i = n.util.transformPoint;
                        n.util.object.extend(n.Object.prototype, {
                            oCoords: null,
                            aCoords: null,
                            ownMatrixCache: null,
                            matrixCache: null,
                            getCoords: function(t, e) {
                                this.oCoords || this.setCoords();
                                var i = t ? this.aCoords : this.oCoords;
                                return function(t) {
                                    return [new n.Point(t.tl.x, t.tl.y), new n.Point(t.tr.x, t.tr.y), new n.Point(t.br.x, t.br.y), new n.Point(t.bl.x, t.bl.y)]
                                }(e ? this.calcCoords(t) : i)
                            },
                            intersectsWithRect: function(t, e, i, r) {
                                var o = this.getCoords(i, r);
                                return "Intersection" === n.Intersection.intersectPolygonRectangle(o, t, e).status
                            },
                            intersectsWithObject: function(t, e, i) {
                                return "Intersection" === n.Intersection.intersectPolygonPolygon(this.getCoords(e, i), t.getCoords(e, i)).status || t.isContainedWithinObject(this, e, i) || this.isContainedWithinObject(t, e, i)
                            },
                            isContainedWithinObject: function(t, e, i) {
                                for (var n = this.getCoords(e, i), r = 0, o = t._getImageLines(i ? t.calcCoords(e) : e ? t.aCoords : t.oCoords); r < 4; r++)
                                    if (!t.containsPoint(n[r], o)) return !1;
                                return !0
                            },
                            isContainedWithinRect: function(t, e, i, n) {
                                var r = this.getBoundingRect(i, n);
                                return r.left >= t.x && r.left + r.width <= e.x && r.top >= t.y && r.top + r.height <= e.y
                            },
                            containsPoint: function(t, e, i, n) {
                                e = e || this._getImageLines(n ? this.calcCoords(i) : i ? this.aCoords : this.oCoords);
                                var r = this._findCrossPoints(t, e);
                                return 0 !== r && r % 2 == 1
                            },
                            isOnScreen: function(t) {
                                if (!this.canvas) return !1;
                                for (var e, i = this.canvas.vptCoords.tl, n = this.canvas.vptCoords.br, r = this.getCoords(!0, t), o = 0; o < 4; o++)
                                    if ((e = r[o]).x <= n.x && e.x >= i.x && e.y <= n.y && e.y >= i.y) return !0;
                                return !!this.intersectsWithRect(i, n, !0, t) || this._containsCenterOfCanvas(i, n, t)
                            },
                            _containsCenterOfCanvas: function(t, e, i) {
                                var n = {
                                    x: (t.x + e.x) / 2,
                                    y: (t.y + e.y) / 2
                                };
                                return !!this.containsPoint(n, null, !0, i)
                            },
                            isPartiallyOnScreen: function(t) {
                                if (!this.canvas) return !1;
                                var e = this.canvas.vptCoords.tl,
                                    i = this.canvas.vptCoords.br;
                                return !!this.intersectsWithRect(e, i, !0, t) || this._containsCenterOfCanvas(e, i, t)
                            },
                            _getImageLines: function(t) {
                                return {
                                    topline: {
                                        o: t.tl,
                                        d: t.tr
                                    },
                                    rightline: {
                                        o: t.tr,
                                        d: t.br
                                    },
                                    bottomline: {
                                        o: t.br,
                                        d: t.bl
                                    },
                                    leftline: {
                                        o: t.bl,
                                        d: t.tl
                                    }
                                }
                            },
                            _findCrossPoints: function(t, e) {
                                var i, n, r, o, a = 0;
                                for (var s in e)
                                    if (!((o = e[s]).o.y < t.y && o.d.y < t.y || o.o.y >= t.y && o.d.y >= t.y || (o.o.x === o.d.x && o.o.x >= t.x ? r = o.o.x : (i = 0, n = (o.d.y - o.o.y) / (o.d.x - o.o.x), r = -(t.y - i * t.x - (o.o.y - n * o.o.x)) / (i - n)), r >= t.x && (a += 1), 2 !== a))) break;
                                return a
                            },
                            getBoundingRect: function(t, e) {
                                var i = this.getCoords(t, e);
                                return n.util.makeBoundingBoxFromPoints(i)
                            },
                            getScaledWidth: function() {
                                return this._getTransformedDimensions().x
                            },
                            getScaledHeight: function() {
                                return this._getTransformedDimensions().y
                            },
                            _constrainScale: function(t) {
                                return Math.abs(t) < this.minScaleLimit ? t < 0 ? -this.minScaleLimit : this.minScaleLimit : 0 === t ? 1e-4 : t
                            },
                            scale: function(t) {
                                return this._set("scaleX", t), this._set("scaleY", t), this.setCoords()
                            },
                            scaleToWidth: function(t, e) {
                                var i = this.getBoundingRect(e).width / this.getScaledWidth();
                                return this.scale(t / this.width / i)
                            },
                            scaleToHeight: function(t, e) {
                                var i = this.getBoundingRect(e).height / this.getScaledHeight();
                                return this.scale(t / this.height / i)
                            },
                            calcCoords: function(r) {
                                var o = this._calcRotateMatrix(),
                                    a = this._calcTranslateMatrix(),
                                    s = e(a, o),
                                    l = this.getViewportTransform(),
                                    c = r ? s : e(l, s),
                                    u = this._getTransformedDimensions(),
                                    h = u.x / 2,
                                    d = u.y / 2,
                                    f = i({
                                        x: -h,
                                        y: -d
                                    }, c),
                                    p = i({
                                        x: h,
                                        y: -d
                                    }, c),
                                    g = i({
                                        x: -h,
                                        y: d
                                    }, c),
                                    m = i({
                                        x: h,
                                        y: d
                                    }, c);
                                if (!r) {
                                    var v = this.padding,
                                        b = t(this.angle),
                                        y = n.util.cos(b),
                                        _ = n.util.sin(b),
                                        x = y * v,
                                        w = _ * v,
                                        C = x + w,
                                        S = x - w;
                                    v && (f.x -= S, f.y -= C, p.x += C, p.y -= S, g.x -= C, g.y += S, m.x += S, m.y += C);
                                    var k = new n.Point((f.x + g.x) / 2, (f.y + g.y) / 2),
                                        O = new n.Point((p.x + f.x) / 2, (p.y + f.y) / 2),
                                        T = new n.Point((m.x + p.x) / 2, (m.y + p.y) / 2),
                                        E = new n.Point((m.x + g.x) / 2, (m.y + g.y) / 2),
                                        A = new n.Point(O.x + _ * this.rotatingPointOffset, O.y - y * this.rotatingPointOffset)
                                }
                                var P = {
                                    tl: f,
                                    tr: p,
                                    br: m,
                                    bl: g
                                };
                                return r || (P.ml = k, P.mt = O, P.mr = T, P.mb = E, P.mtr = A), P
                            },
                            setCoords: function(t, e) {
                                return this.oCoords = this.calcCoords(t), e || (this.aCoords = this.calcCoords(!0)), t || this._setCornerCoords && this._setCornerCoords(), this
                            },
                            _calcRotateMatrix: function() {
                                if (this.angle) {
                                    var e = t(this.angle),
                                        i = n.util.cos(e),
                                        r = n.util.sin(e);
                                    return [i, r, -r, i, 0, 0]
                                }
                                return n.iMatrix.concat()
                            },
                            _calcTranslateMatrix: function() {
                                var t = this.getCenterPoint();
                                return [1, 0, 0, 1, t.x, t.y]
                            },
                            transformMatrixKey: function(t) {
                                var e = "";
                                return !t && this.group && (e = this.group.transformMatrixKey(t) + "_"), e + this.top + "_" + this.left + "_" + this.scaleX + "_" + this.scaleY + "_" + this.skewX + "_" + this.skewY + "_" + this.angle + "_" + this.originX + "_" + this.originY + "_" + this.width + "_" + this.height + "_" + this.strokeWidth + this.flipX + this.flipY
                            },
                            calcTransformMatrix: function(t) {
                                if (t) return this.calcOwnMatrix();
                                var i = this.transformMatrixKey(),
                                    n = this.matrixCache || (this.matrixCache = {});
                                if (n.key === i) return n.value;
                                var r = this.calcOwnMatrix();
                                return this.group && (r = e(this.group.calcTransformMatrix(), r)), n.key = i, n.value = r, r
                            },
                            calcOwnMatrix: function() {
                                var t = this.transformMatrixKey(!0),
                                    i = this.ownMatrixCache || (this.ownMatrixCache = {});
                                if (i.key === t) return i.value;
                                var n, r = this._calcTranslateMatrix(),
                                    o = this._calcDimensionsTransformMatrix(this.skewX, this.skewY, !0);
                                return this.angle && (n = this._calcRotateMatrix(), r = e(r, n)), r = e(r, o), i.key = t, i.value = r, r
                            },
                            _calcDimensionsTransformMatrix: function(i, n, r) {
                                var o, a = [this.scaleX * (r && this.flipX ? -1 : 1), 0, 0, this.scaleY * (r && this.flipY ? -1 : 1), 0, 0];
                                return i && (o = [1, 0, Math.tan(t(i)), 1], a = e(a, o, !0)), n && (o = [1, Math.tan(t(n)), 0, 1], a = e(a, o, !0)), a
                            },
                            _getNonTransformedDimensions: function() {
                                var t = this.strokeWidth;
                                return {
                                    x: this.width + t,
                                    y: this.height + t
                                }
                            },
                            _getTransformedDimensions: function(t, e) {
                                void 0 === t && (t = this.skewX), void 0 === e && (e = this.skewY);
                                var i, r, o = this._getNonTransformedDimensions(),
                                    a = 0 === t && 0 === e;
                                if (this.strokeUniform ? (i = this.width, r = this.height) : (i = o.x, r = o.y), a) return this._finalizeDiemensions(i * this.scaleX, r * this.scaleY);
                                var s, l, c = [{
                                        x: -(i /= 2),
                                        y: -(r /= 2)
                                    }, {
                                        x: i,
                                        y: -r
                                    }, {
                                        x: -i,
                                        y: r
                                    }, {
                                        x: i,
                                        y: r
                                    }],
                                    u = this._calcDimensionsTransformMatrix(t, e, !1);
                                for (s = 0; s < c.length; s++) c[s] = n.util.transformPoint(c[s], u);
                                return l = n.util.makeBoundingBoxFromPoints(c), this._finalizeDiemensions(l.width, l.height)
                            },
                            _finalizeDiemensions: function(t, e) {
                                return this.strokeUniform ? {
                                    x: t + this.strokeWidth,
                                    y: e + this.strokeWidth
                                } : {
                                    x: t,
                                    y: e
                                }
                            },
                            _calculateCurrentDimensions: function() {
                                var t = this.getViewportTransform(),
                                    e = this._getTransformedDimensions();
                                return n.util.transformPoint(e, t, !0).scalarAdd(2 * this.padding)
                            }
                        })
                    }(), n.util.object.extend(n.Object.prototype, {
                        sendToBack: function() {
                            return this.group ? n.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas.sendToBack(this), this
                        },
                        bringToFront: function() {
                            return this.group ? n.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas.bringToFront(this), this
                        },
                        sendBackwards: function(t) {
                            return this.group ? n.StaticCanvas.prototype.sendBackwards.call(this.group, this, t) : this.canvas.sendBackwards(this, t), this
                        },
                        bringForward: function(t) {
                            return this.group ? n.StaticCanvas.prototype.bringForward.call(this.group, this, t) : this.canvas.bringForward(this, t), this
                        },
                        moveTo: function(t) {
                            return this.group && "activeSelection" !== this.group.type ? n.StaticCanvas.prototype.moveTo.call(this.group, this, t) : this.canvas.moveTo(this, t), this
                        }
                    }),
                    function() {
                        function t(t, e) {
                            if (e) {
                                if (e.toLive) return t + ": url(#SVGID_" + e.id + "); ";
                                var i = new n.Color(e),
                                    r = t + ": " + i.toRgb() + "; ",
                                    o = i.getAlpha();
                                return 1 !== o && (r += t + "-opacity: " + o.toString() + "; "), r
                            }
                            return t + ": none; "
                        }
                        var e = n.util.toFixed;
                        n.util.object.extend(n.Object.prototype, {
                            getSvgStyles: function(e) {
                                var i = this.fillRule ? this.fillRule : "nonzero",
                                    n = this.strokeWidth ? this.strokeWidth : "0",
                                    r = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none",
                                    o = this.strokeDashOffset ? this.strokeDashOffset : "0",
                                    a = this.strokeLineCap ? this.strokeLineCap : "butt",
                                    s = this.strokeLineJoin ? this.strokeLineJoin : "miter",
                                    l = this.strokeMiterLimit ? this.strokeMiterLimit : "4",
                                    c = void 0 !== this.opacity ? this.opacity : "1",
                                    u = this.visible ? "" : " visibility: hidden;",
                                    h = e ? "" : this.getSvgFilter(),
                                    d = t("fill", this.fill);
                                return [t("stroke", this.stroke), "stroke-width: ", n, "; ", "stroke-dasharray: ", r, "; ", "stroke-linecap: ", a, "; ", "stroke-dashoffset: ", o, "; ", "stroke-linejoin: ", s, "; ", "stroke-miterlimit: ", l, "; ", d, "fill-rule: ", i, "; ", "opacity: ", c, ";", h, u].join("")
                            },
                            getSvgSpanStyles: function(e, i) {
                                var n = e.fontFamily ? "font-family: " + (-1 === e.fontFamily.indexOf("'") && -1 === e.fontFamily.indexOf('"') ? "'" + e.fontFamily + "'" : e.fontFamily) + "; " : "",
                                    r = e.strokeWidth ? "stroke-width: " + e.strokeWidth + "; " : "",
                                    o = (n = n, e.fontSize ? "font-size: " + e.fontSize + "px; " : ""),
                                    a = e.fontStyle ? "font-style: " + e.fontStyle + "; " : "",
                                    s = e.fontWeight ? "font-weight: " + e.fontWeight + "; " : "",
                                    l = e.fill ? t("fill", e.fill) : "",
                                    c = e.stroke ? t("stroke", e.stroke) : "",
                                    u = this.getSvgTextDecoration(e),
                                    h = e.deltaY ? "baseline-shift: " + -e.deltaY + "; " : "";
                                return u && (u = "text-decoration: " + u + "; "), [c, r, n, o, a, s, u, l, h, i ? "white-space: pre; " : ""].join("")
                            },
                            getSvgTextDecoration: function(t) {
                                return "overline" in t || "underline" in t || "linethrough" in t ? (t.overline ? "overline " : "") + (t.underline ? "underline " : "") + (t.linethrough ? "line-through " : "") : ""
                            },
                            getSvgFilter: function() {
                                return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : ""
                            },
                            getSvgCommons: function() {
                                return [this.id ? 'id="' + this.id + '" ' : "", this.clipPath ? 'clip-path="url(#' + this.clipPath.clipPathId + ')" ' : ""].join("")
                            },
                            getSvgTransform: function(t, i) {
                                return 'transform="matrix(' + (t ? this.calcTransformMatrix() : this.calcOwnMatrix()).map(function(t) {
                                    return e(t, n.Object.NUM_FRACTION_DIGITS)
                                }).join(" ") + ")" + (i || "") + this.getSvgTransformMatrix() + '" '
                            },
                            getSvgTransformMatrix: function() {
                                return this.transformMatrix ? " matrix(" + this.transformMatrix.join(" ") + ")" : ""
                            },
                            _setSVGBg: function(t) {
                                if (this.backgroundColor) {
                                    var i = n.Object.NUM_FRACTION_DIGITS;
                                    t.push("\t\t<rect ", this._getFillAttributes(this.backgroundColor), ' x="', e(-this.width / 2, i), '" y="', e(-this.height / 2, i), '" width="', e(this.width, i), '" height="', e(this.height, i), '"></rect>\n')
                                }
                            },
                            toSVG: function(t) {
                                return this._createBaseSVGMarkup(this._toSVG(), {
                                    reviver: t
                                })
                            },
                            toClipPathSVG: function(t) {
                                return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(), {
                                    reviver: t
                                })
                            },
                            _createBaseClipPathSVGMarkup: function(t, e) {
                                var i = (e = e || {}).reviver,
                                    n = e.additionalTransform || "",
                                    r = [this.getSvgTransform(!0, n), this.getSvgCommons()].join("");
                                return t[t.indexOf("COMMON_PARTS")] = r, i ? i(t.join("")) : t.join("")
                            },
                            _createBaseSVGMarkup: function(t, e) {
                                var i, r, o = (e = e || {}).noStyle,
                                    a = e.withShadow,
                                    s = e.reviver,
                                    l = o ? "" : 'style="' + this.getSvgStyles() + '" ',
                                    c = a ? 'style="' + this.getSvgFilter() + '" ' : "",
                                    u = this.clipPath,
                                    h = this.strokeUniform ? 'vector-effect="non-scaling-stroke" ' : "",
                                    d = this.clipPath && this.clipPath.absolutePositioned,
                                    f = [],
                                    p = t.indexOf("COMMON_PARTS"),
                                    g = e.additionalTransform;
                                return u && (u.clipPathId = "CLIPPATH_" + n.Object.__uid++, r = '<clipPath id="' + u.clipPathId + '" >\n' + this.clipPath.toClipPathSVG(s) + "</clipPath>\n"), d && f.push("<g ", c, this.getSvgCommons(), " >\n"), f.push("<g ", this.getSvgTransform(!1), d ? "" : c + this.getSvgCommons(), " >\n"), i = [l, h, o ? "" : this.addPaintOrder(), " ", g ? 'transform="' + g + '" ' : ""].join(""), t[p] = i, this.fill && this.fill.toLive && f.push(this.fill.toSVG(this, !1)), this.stroke && this.stroke.toLive && f.push(this.stroke.toSVG(this, !1)), this.shadow && f.push(this.shadow.toSVG(this)), u && f.push(r), f.push(t.join("")), f.push("</g>\n"), d && f.push("</g>\n"), s ? s(f.join("")) : f.join("")
                            },
                            addPaintOrder: function() {
                                return "fill" !== this.paintFirst ? ' paint-order="' + this.paintFirst + '" ' : ""
                            }
                        })
                    }(),
                    function() {
                        var t = n.util.object.extend;

                        function e(e, i, n) {
                            var r = {};
                            n.forEach(function(t) {
                                r[t] = e[t]
                            }), t(e[i], r, !0)
                        }
                        n.util.object.extend(n.Object.prototype, {
                            hasStateChanged: function(t) {
                                var e = "_" + (t = t || "stateProperties");
                                return Object.keys(this[e]).length < this[t].length || ! function t(e, i, n) {
                                    if (e === i) return !0;
                                    if (Array.isArray(e)) {
                                        if (!Array.isArray(i) || e.length !== i.length) return !1;
                                        for (var r = 0, o = e.length; r < o; r++)
                                            if (!t(e[r], i[r])) return !1;
                                        return !0
                                    }
                                    if (e && "object" == typeof e) {
                                        var a, s = Object.keys(e);
                                        if (!i || "object" != typeof i || !n && s.length !== Object.keys(i).length) return !1;
                                        for (r = 0, o = s.length; r < o; r++)
                                            if ("canvas" !== (a = s[r]) && !t(e[a], i[a])) return !1;
                                        return !0
                                    }
                                }(this[e], this, !0)
                            },
                            saveState: function(t) {
                                var i = t && t.propertySet || "stateProperties",
                                    n = "_" + i;
                                return this[n] ? (e(this, n, this[i]), t && t.stateProperties && e(this, n, t.stateProperties), this) : this.setupState(t)
                            },
                            setupState: function(t) {
                                var e = (t = t || {}).propertySet || "stateProperties";
                                return t.propertySet = e, this["_" + e] = {}, this.saveState(t), this
                            }
                        })
                    }(),
                    function() {
                        var t = n.util.degreesToRadians;
                        n.util.object.extend(n.Object.prototype, {
                            _controlsVisibility: null,
                            _findTargetCorner: function(t) {
                                if (!this.hasControls || this.group || !this.canvas || this.canvas._activeObject !== this) return !1;
                                var e, i, n = t.x,
                                    r = t.y;
                                for (var o in this.__corner = 0, this.oCoords)
                                    if (this.isControlVisible(o) && ("mtr" !== o || this.hasRotatingPoint) && (!this.get("lockUniScaling") || "mt" !== o && "mr" !== o && "mb" !== o && "ml" !== o) && (i = this._getImageLines(this.oCoords[o].corner), 0 !== (e = this._findCrossPoints({
                                            x: n,
                                            y: r
                                        }, i)) && e % 2 == 1)) return this.__corner = o, o;
                                return !1
                            },
                            _setCornerCoords: function() {
                                var e, i, r = this.oCoords,
                                    o = t(45 - this.angle),
                                    a = .707106 * this.cornerSize,
                                    s = a * n.util.cos(o),
                                    l = a * n.util.sin(o);
                                for (var c in r) e = r[c].x, i = r[c].y, r[c].corner = {
                                    tl: {
                                        x: e - l,
                                        y: i - s
                                    },
                                    tr: {
                                        x: e + s,
                                        y: i - l
                                    },
                                    bl: {
                                        x: e - s,
                                        y: i + l
                                    },
                                    br: {
                                        x: e + l,
                                        y: i + s
                                    }
                                }
                            },
                            drawSelectionBackground: function(e) {
                                if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this) return this;
                                e.save();
                                var i = this.getCenterPoint(),
                                    n = this._calculateCurrentDimensions(),
                                    r = this.canvas.viewportTransform;
                                return e.translate(i.x, i.y), e.scale(1 / r[0], 1 / r[3]), e.rotate(t(this.angle)), e.fillStyle = this.selectionBackgroundColor, e.fillRect(-n.x / 2, -n.y / 2, n.x, n.y), e.restore(), this
                            },
                            drawBorders: function(t, e) {
                                e = e || {};
                                var i = this._calculateCurrentDimensions(),
                                    n = 1 / this.borderScaleFactor,
                                    r = i.x + n,
                                    o = i.y + n,
                                    a = void 0 !== e.hasRotatingPoint ? e.hasRotatingPoint : this.hasRotatingPoint,
                                    s = void 0 !== e.hasControls ? e.hasControls : this.hasControls,
                                    l = void 0 !== e.rotatingPointOffset ? e.rotatingPointOffset : this.rotatingPointOffset;
                                if (t.save(), t.strokeStyle = e.borderColor || this.borderColor, this._setLineDash(t, e.borderDashArray || this.borderDashArray, null), t.strokeRect(-r / 2, -o / 2, r, o), a && this.isControlVisible("mtr") && s) {
                                    var c = -o / 2;
                                    t.beginPath(), t.moveTo(0, c), t.lineTo(0, c - l), t.stroke()
                                }
                                return t.restore(), this
                            },
                            drawBordersInGroup: function(t, e, i) {
                                i = i || {};
                                var r = this._getNonTransformedDimensions(),
                                    o = n.util.customTransformMatrix(e.scaleX, e.scaleY, e.skewX),
                                    a = n.util.transformPoint(r, o),
                                    s = 1 / this.borderScaleFactor,
                                    l = a.x + s,
                                    c = a.y + s;
                                return t.save(), this._setLineDash(t, i.borderDashArray || this.borderDashArray, null), t.strokeStyle = i.borderColor || this.borderColor, t.strokeRect(-l / 2, -c / 2, l, c), t.restore(), this
                            },
                            drawControls: function(t, e) {
                                e = e || {};
                                var i = this._calculateCurrentDimensions(),
                                    n = i.x,
                                    r = i.y,
                                    o = e.cornerSize || this.cornerSize,
                                    a = -(n + o) / 2,
                                    s = -(r + o) / 2,
                                    l = void 0 !== e.transparentCorners ? e.transparentCorners : this.transparentCorners,
                                    c = void 0 !== e.hasRotatingPoint ? e.hasRotatingPoint : this.hasRotatingPoint,
                                    u = l ? "stroke" : "fill";
                                return t.save(), t.strokeStyle = t.fillStyle = e.cornerColor || this.cornerColor, this.transparentCorners || (t.strokeStyle = e.cornerStrokeColor || this.cornerStrokeColor), this._setLineDash(t, e.cornerDashArray || this.cornerDashArray, null), this._drawControl("tl", t, u, a, s, e), this._drawControl("tr", t, u, a + n, s, e), this._drawControl("bl", t, u, a, s + r, e), this._drawControl("br", t, u, a + n, s + r, e), this.get("lockUniScaling") || (this._drawControl("mt", t, u, a + n / 2, s, e), this._drawControl("mb", t, u, a + n / 2, s + r, e), this._drawControl("mr", t, u, a + n, s + r / 2, e), this._drawControl("ml", t, u, a, s + r / 2, e)), c && this._drawControl("mtr", t, u, a + n / 2, s - this.rotatingPointOffset, e), t.restore(), this
                            },
                            _drawControl: function(t, e, i, n, r, o) {
                                if (o = o || {}, this.isControlVisible(t)) {
                                    var a = this.cornerSize,
                                        s = !this.transparentCorners && this.cornerStrokeColor;
                                    switch (o.cornerStyle || this.cornerStyle) {
                                        case "circle":
                                            e.beginPath(), e.arc(n + a / 2, r + a / 2, a / 2, 0, 2 * Math.PI, !1), e[i](), s && e.stroke();
                                            break;
                                        default:
                                            this.transparentCorners || e.clearRect(n, r, a, a), e[i + "Rect"](n, r, a, a), s && e.strokeRect(n, r, a, a)
                                    }
                                }
                            },
                            isControlVisible: function(t) {
                                return this._getControlsVisibility()[t]
                            },
                            setControlVisible: function(t, e) {
                                return this._getControlsVisibility()[t] = e, this
                            },
                            setControlsVisibility: function(t) {
                                for (var e in t || (t = {}), t) this.setControlVisible(e, t[e]);
                                return this
                            },
                            _getControlsVisibility: function() {
                                return this._controlsVisibility || (this._controlsVisibility = {
                                    tl: !0,
                                    tr: !0,
                                    br: !0,
                                    bl: !0,
                                    ml: !0,
                                    mt: !0,
                                    mr: !0,
                                    mb: !0,
                                    mtr: !0
                                }), this._controlsVisibility
                            },
                            onDeselect: function() {},
                            onSelect: function() {}
                        })
                    }(), n.util.object.extend(n.StaticCanvas.prototype, {
                        FX_DURATION: 500,
                        fxCenterObjectH: function(t, e) {
                            var i = function() {},
                                r = (e = e || {}).onComplete || i,
                                o = e.onChange || i,
                                a = this;
                            return n.util.animate({
                                startValue: t.left,
                                endValue: this.getCenter().left,
                                duration: this.FX_DURATION,
                                onChange: function(e) {
                                    t.set("left", e), a.requestRenderAll(), o()
                                },
                                onComplete: function() {
                                    t.setCoords(), r()
                                }
                            }), this
                        },
                        fxCenterObjectV: function(t, e) {
                            var i = function() {},
                                r = (e = e || {}).onComplete || i,
                                o = e.onChange || i,
                                a = this;
                            return n.util.animate({
                                startValue: t.top,
                                endValue: this.getCenter().top,
                                duration: this.FX_DURATION,
                                onChange: function(e) {
                                    t.set("top", e), a.requestRenderAll(), o()
                                },
                                onComplete: function() {
                                    t.setCoords(), r()
                                }
                            }), this
                        },
                        fxRemove: function(t, e) {
                            var i = function() {},
                                r = (e = e || {}).onComplete || i,
                                o = e.onChange || i,
                                a = this;
                            return n.util.animate({
                                startValue: t.opacity,
                                endValue: 0,
                                duration: this.FX_DURATION,
                                onChange: function(e) {
                                    t.set("opacity", e), a.requestRenderAll(), o()
                                },
                                onComplete: function() {
                                    a.remove(t), r()
                                }
                            }), this
                        }
                    }), n.util.object.extend(n.Object.prototype, {
                        animate: function() {
                            if (arguments[0] && "object" == typeof arguments[0]) {
                                var t, e, i = [];
                                for (t in arguments[0]) i.push(t);
                                for (var n = 0, r = i.length; n < r; n++) t = i[n], e = n !== r - 1, this._animate(t, arguments[0][t], arguments[1], e)
                            } else this._animate.apply(this, arguments);
                            return this
                        },
                        _animate: function(t, e, i, r) {
                            var o, a = this;
                            e = e.toString(), i = i ? n.util.object.clone(i) : {}, ~t.indexOf(".") && (o = t.split("."));
                            var s = o ? this.get(o[0])[o[1]] : this.get(t);
                            "from" in i || (i.from = s), e = ~e.indexOf("=") ? s + parseFloat(e.replace("=", "")) : parseFloat(e), n.util.animate({
                                startValue: i.from,
                                endValue: e,
                                byValue: i.by,
                                easing: i.easing,
                                duration: i.duration,
                                abort: i.abort && function() {
                                    return i.abort.call(a)
                                },
                                onChange: function(e, n, s) {
                                    o ? a[o[0]][o[1]] = e : a.set(t, e), r || i.onChange && i.onChange(e, n, s)
                                },
                                onComplete: function(t, e, n) {
                                    r || (a.setCoords(), i.onComplete && i.onComplete(t, e, n))
                                }
                            })
                        }
                    }),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.util.object.clone,
                            r = {
                                x1: 1,
                                x2: 1,
                                y1: 1,
                                y2: 1
                            },
                            o = e.StaticCanvas.supports("setLineDash");

                        function a(t, e) {
                            var i = t.origin,
                                n = t.axis1,
                                r = t.axis2,
                                o = t.dimension,
                                a = e.nearest,
                                s = e.center,
                                l = e.farthest;
                            return function() {
                                switch (this.get(i)) {
                                    case a:
                                        return Math.min(this.get(n), this.get(r));
                                    case s:
                                        return Math.min(this.get(n), this.get(r)) + .5 * this.get(o);
                                    case l:
                                        return Math.max(this.get(n), this.get(r))
                                }
                            }
                        }
                        e.Line ? e.warn("fabric.Line is already defined") : (e.Line = e.util.createClass(e.Object, {
                            type: "line",
                            x1: 0,
                            y1: 0,
                            x2: 0,
                            y2: 0,
                            cacheProperties: e.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"),
                            initialize: function(t, e) {
                                t || (t = [0, 0, 0, 0]), this.callSuper("initialize", e), this.set("x1", t[0]), this.set("y1", t[1]), this.set("x2", t[2]), this.set("y2", t[3]), this._setWidthHeight(e)
                            },
                            _setWidthHeight: function(t) {
                                t || (t = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in t ? t.left : this._getLeftToOriginX(), this.top = "top" in t ? t.top : this._getTopToOriginY()
                            },
                            _set: function(t, e) {
                                return this.callSuper("_set", t, e), void 0 !== r[t] && this._setWidthHeight(), this
                            },
                            _getLeftToOriginX: a({
                                origin: "originX",
                                axis1: "x1",
                                axis2: "x2",
                                dimension: "width"
                            }, {
                                nearest: "left",
                                center: "center",
                                farthest: "right"
                            }),
                            _getTopToOriginY: a({
                                origin: "originY",
                                axis1: "y1",
                                axis2: "y2",
                                dimension: "height"
                            }, {
                                nearest: "top",
                                center: "center",
                                farthest: "bottom"
                            }),
                            _render: function(t) {
                                if (t.beginPath(), !this.strokeDashArray || this.strokeDashArray && o) {
                                    var e = this.calcLinePoints();
                                    t.moveTo(e.x1, e.y1), t.lineTo(e.x2, e.y2)
                                }
                                t.lineWidth = this.strokeWidth;
                                var i = t.strokeStyle;
                                t.strokeStyle = this.stroke || t.fillStyle, this.stroke && this._renderStroke(t), t.strokeStyle = i
                            },
                            _renderDashedStroke: function(t) {
                                var i = this.calcLinePoints();
                                t.beginPath(), e.util.drawDashedLine(t, i.x1, i.y1, i.x2, i.y2, this.strokeDashArray), t.closePath()
                            },
                            _findCenterFromElement: function() {
                                return {
                                    x: (this.x1 + this.x2) / 2,
                                    y: (this.y1 + this.y2) / 2
                                }
                            },
                            toObject: function(t) {
                                return i(this.callSuper("toObject", t), this.calcLinePoints())
                            },
                            _getNonTransformedDimensions: function() {
                                var t = this.callSuper("_getNonTransformedDimensions");
                                return "butt" === this.strokeLineCap && (0 === this.width && (t.y -= this.strokeWidth), 0 === this.height && (t.x -= this.strokeWidth)), t
                            },
                            calcLinePoints: function() {
                                var t = this.x1 <= this.x2 ? -1 : 1,
                                    e = this.y1 <= this.y2 ? -1 : 1,
                                    i = t * this.width * .5,
                                    n = e * this.height * .5;
                                return {
                                    x1: i,
                                    x2: t * this.width * -.5,
                                    y1: n,
                                    y2: e * this.height * -.5
                                }
                            },
                            _toSVG: function() {
                                var t = this.calcLinePoints();
                                return ["<line ", "COMMON_PARTS", 'x1="', t.x1, '" y1="', t.y1, '" x2="', t.x2, '" y2="', t.y2, '" />\n']
                            }
                        }), e.Line.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), e.Line.fromElement = function(t, n, r) {
                            r = r || {};
                            var o = e.parseAttributes(t, e.Line.ATTRIBUTE_NAMES),
                                a = [o.x1 || 0, o.y1 || 0, o.x2 || 0, o.y2 || 0];
                            n(new e.Line(a, i(o, r)))
                        }, e.Line.fromObject = function(t, i) {
                            var r = n(t, !0);
                            r.points = [t.x1, t.y1, t.x2, t.y2], e.Object._fromObject("Line", r, function(t) {
                                delete t.points, i && i(t)
                            }, "points")
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = Math.PI;
                        e.Circle ? e.warn("fabric.Circle is already defined.") : (e.Circle = e.util.createClass(e.Object, {
                            type: "circle",
                            radius: 0,
                            startAngle: 0,
                            endAngle: 2 * i,
                            cacheProperties: e.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"),
                            _set: function(t, e) {
                                return this.callSuper("_set", t, e), "radius" === t && this.setRadius(e), this
                            },
                            toObject: function(t) {
                                return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(t))
                            },
                            _toSVG: function() {
                                var t, n = (this.endAngle - this.startAngle) % (2 * i);
                                if (0 === n) t = ["<circle ", "COMMON_PARTS", 'cx="0" cy="0" ', 'r="', this.radius, '" />\n'];
                                else {
                                    var r = e.util.cos(this.startAngle) * this.radius,
                                        o = e.util.sin(this.startAngle) * this.radius,
                                        a = e.util.cos(this.endAngle) * this.radius,
                                        s = e.util.sin(this.endAngle) * this.radius,
                                        l = n > i ? "1" : "0";
                                    t = ['<path d="M ' + r + " " + o, " A " + this.radius + " " + this.radius, " 0 ", +l + " 1", " " + a + " " + s, '" ', "COMMON_PARTS", " />\n"]
                                }
                                return t
                            },
                            _render: function(t) {
                                t.beginPath(), t.arc(0, 0, this.radius, this.startAngle, this.endAngle, !1), this._renderPaintInOrder(t)
                            },
                            getRadiusX: function() {
                                return this.get("radius") * this.get("scaleX")
                            },
                            getRadiusY: function() {
                                return this.get("radius") * this.get("scaleY")
                            },
                            setRadius: function(t) {
                                return this.radius = t, this.set("width", 2 * t).set("height", 2 * t)
                            }
                        }), e.Circle.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), e.Circle.fromElement = function(t, i) {
                            var n = e.parseAttributes(t, e.Circle.ATTRIBUTE_NAMES);
                            if (! function(t) {
                                    return "radius" in t && t.radius >= 0
                                }(n)) throw new Error("value of `r` attribute is required and can not be negative");
                            n.left = (n.left || 0) - n.radius, n.top = (n.top || 0) - n.radius, i(new e.Circle(n))
                        }, e.Circle.fromObject = function(t, i) {
                            return e.Object._fromObject("Circle", t, i)
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {});
                        e.Triangle ? e.warn("fabric.Triangle is already defined") : (e.Triangle = e.util.createClass(e.Object, {
                            type: "triangle",
                            width: 100,
                            height: 100,
                            _render: function(t) {
                                var e = this.width / 2,
                                    i = this.height / 2;
                                t.beginPath(), t.moveTo(-e, i), t.lineTo(0, -i), t.lineTo(e, i), t.closePath(), this._renderPaintInOrder(t)
                            },
                            _renderDashedStroke: function(t) {
                                var i = this.width / 2,
                                    n = this.height / 2;
                                t.beginPath(), e.util.drawDashedLine(t, -i, n, 0, -n, this.strokeDashArray), e.util.drawDashedLine(t, 0, -n, i, n, this.strokeDashArray), e.util.drawDashedLine(t, i, n, -i, n, this.strokeDashArray), t.closePath()
                            },
                            _toSVG: function() {
                                var t = this.width / 2,
                                    e = this.height / 2;
                                return ["<polygon ", "COMMON_PARTS", 'points="', [-t + " " + e, "0 " + -e, t + " " + e].join(","), '" />']
                            }
                        }), e.Triangle.fromObject = function(t, i) {
                            return e.Object._fromObject("Triangle", t, i)
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = 2 * Math.PI;
                        e.Ellipse ? e.warn("fabric.Ellipse is already defined.") : (e.Ellipse = e.util.createClass(e.Object, {
                            type: "ellipse",
                            rx: 0,
                            ry: 0,
                            cacheProperties: e.Object.prototype.cacheProperties.concat("rx", "ry"),
                            initialize: function(t) {
                                this.callSuper("initialize", t), this.set("rx", t && t.rx || 0), this.set("ry", t && t.ry || 0)
                            },
                            _set: function(t, e) {
                                switch (this.callSuper("_set", t, e), t) {
                                    case "rx":
                                        this.rx = e, this.set("width", 2 * e);
                                        break;
                                    case "ry":
                                        this.ry = e, this.set("height", 2 * e)
                                }
                                return this
                            },
                            getRx: function() {
                                return this.get("rx") * this.get("scaleX")
                            },
                            getRy: function() {
                                return this.get("ry") * this.get("scaleY")
                            },
                            toObject: function(t) {
                                return this.callSuper("toObject", ["rx", "ry"].concat(t))
                            },
                            _toSVG: function() {
                                return ["<ellipse ", "COMMON_PARTS", 'cx="0" cy="0" ', 'rx="', this.rx, '" ry="', this.ry, '" />\n']
                            },
                            _render: function(t) {
                                t.beginPath(), t.save(), t.transform(1, 0, 0, this.ry / this.rx, 0, 0), t.arc(0, 0, this.rx, 0, i, !1), t.restore(), this._renderPaintInOrder(t)
                            }
                        }), e.Ellipse.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), e.Ellipse.fromElement = function(t, i) {
                            var n = e.parseAttributes(t, e.Ellipse.ATTRIBUTE_NAMES);
                            n.left = (n.left || 0) - n.rx, n.top = (n.top || 0) - n.ry, i(new e.Ellipse(n))
                        }, e.Ellipse.fromObject = function(t, i) {
                            return e.Object._fromObject("Ellipse", t, i)
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend;
                        e.Rect ? e.warn("fabric.Rect is already defined") : (e.Rect = e.util.createClass(e.Object, {
                            stateProperties: e.Object.prototype.stateProperties.concat("rx", "ry"),
                            type: "rect",
                            rx: 0,
                            ry: 0,
                            cacheProperties: e.Object.prototype.cacheProperties.concat("rx", "ry"),
                            initialize: function(t) {
                                this.callSuper("initialize", t), this._initRxRy()
                            },
                            _initRxRy: function() {
                                this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
                            },
                            _render: function(t) {
                                var e = this.rx ? Math.min(this.rx, this.width / 2) : 0,
                                    i = this.ry ? Math.min(this.ry, this.height / 2) : 0,
                                    n = this.width,
                                    r = this.height,
                                    o = -this.width / 2,
                                    a = -this.height / 2,
                                    s = 0 !== e || 0 !== i,
                                    l = .4477152502;
                                t.beginPath(), t.moveTo(o + e, a), t.lineTo(o + n - e, a), s && t.bezierCurveTo(o + n - l * e, a, o + n, a + l * i, o + n, a + i), t.lineTo(o + n, a + r - i), s && t.bezierCurveTo(o + n, a + r - l * i, o + n - l * e, a + r, o + n - e, a + r), t.lineTo(o + e, a + r), s && t.bezierCurveTo(o + l * e, a + r, o, a + r - l * i, o, a + r - i), t.lineTo(o, a + i), s && t.bezierCurveTo(o, a + l * i, o + l * e, a, o + e, a), t.closePath(), this._renderPaintInOrder(t)
                            },
                            _renderDashedStroke: function(t) {
                                var i = -this.width / 2,
                                    n = -this.height / 2,
                                    r = this.width,
                                    o = this.height;
                                t.beginPath(), e.util.drawDashedLine(t, i, n, i + r, n, this.strokeDashArray), e.util.drawDashedLine(t, i + r, n, i + r, n + o, this.strokeDashArray), e.util.drawDashedLine(t, i + r, n + o, i, n + o, this.strokeDashArray), e.util.drawDashedLine(t, i, n + o, i, n, this.strokeDashArray), t.closePath()
                            },
                            toObject: function(t) {
                                return this.callSuper("toObject", ["rx", "ry"].concat(t))
                            },
                            _toSVG: function() {
                                return ["<rect ", "COMMON_PARTS", 'x="', -this.width / 2, '" y="', -this.height / 2, '" rx="', this.rx, '" ry="', this.ry, '" width="', this.width, '" height="', this.height, '" />\n']
                            }
                        }), e.Rect.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), e.Rect.fromElement = function(t, n, r) {
                            if (!t) return n(null);
                            r = r || {};
                            var o = e.parseAttributes(t, e.Rect.ATTRIBUTE_NAMES);
                            o.left = o.left || 0, o.top = o.top || 0;
                            var a = new e.Rect(i(r ? e.util.object.clone(r) : {}, o));
                            a.visible = a.visible && a.width > 0 && a.height > 0, n(a)
                        }, e.Rect.fromObject = function(t, i) {
                            return e.Object._fromObject("Rect", t, i)
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.util.array.min,
                            r = e.util.array.max,
                            o = e.util.toFixed;
                        e.Polyline ? e.warn("fabric.Polyline is already defined") : (e.Polyline = e.util.createClass(e.Object, {
                            type: "polyline",
                            points: null,
                            cacheProperties: e.Object.prototype.cacheProperties.concat("points"),
                            initialize: function(t, e) {
                                e = e || {}, this.points = t || [], this.callSuper("initialize", e);
                                var i = this._calcDimensions();
                                void 0 === e.left && (this.left = i.left), void 0 === e.top && (this.top = i.top), this.width = i.width, this.height = i.height, this.pathOffset = {
                                    x: i.left + this.width / 2,
                                    y: i.top + this.height / 2
                                }
                            },
                            _calcDimensions: function() {
                                var t = this.points,
                                    e = n(t, "x") || 0,
                                    i = n(t, "y") || 0;
                                return {
                                    left: e,
                                    top: i,
                                    width: (r(t, "x") || 0) - e,
                                    height: (r(t, "y") || 0) - i
                                }
                            },
                            toObject: function(t) {
                                return i(this.callSuper("toObject", t), {
                                    points: this.points.concat()
                                })
                            },
                            _toSVG: function() {
                                for (var t = [], i = this.pathOffset.x, n = this.pathOffset.y, r = e.Object.NUM_FRACTION_DIGITS, a = 0, s = this.points.length; a < s; a++) t.push(o(this.points[a].x - i, r), ",", o(this.points[a].y - n, r), " ");
                                return ["<" + this.type + " ", "COMMON_PARTS", 'points="', t.join(""), '" />\n']
                            },
                            commonRender: function(t) {
                                var e, i = this.points.length,
                                    n = this.pathOffset.x,
                                    r = this.pathOffset.y;
                                if (!i || isNaN(this.points[i - 1].y)) return !1;
                                t.beginPath(), t.moveTo(this.points[0].x - n, this.points[0].y - r);
                                for (var o = 0; o < i; o++) e = this.points[o], t.lineTo(e.x - n, e.y - r);
                                return !0
                            },
                            _render: function(t) {
                                this.commonRender(t) && this._renderPaintInOrder(t)
                            },
                            _renderDashedStroke: function(t) {
                                var i, n;
                                t.beginPath();
                                for (var r = 0, o = this.points.length; r < o; r++) i = this.points[r], n = this.points[r + 1] || i, e.util.drawDashedLine(t, i.x, i.y, n.x, n.y, this.strokeDashArray)
                            },
                            complexity: function() {
                                return this.get("points").length
                            }
                        }), e.Polyline.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(), e.Polyline.fromElement = function(t, i, n) {
                            if (!t) return i(null);
                            n || (n = {});
                            var r = e.parsePointsAttribute(t.getAttribute("points")),
                                o = e.parseAttributes(t, e.Polyline.ATTRIBUTE_NAMES);
                            i(new e.Polyline(r, e.util.object.extend(o, n)))
                        }, e.Polyline.fromObject = function(t, i) {
                            return e.Object._fromObject("Polyline", t, i, "points")
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend;
                        e.Polygon ? e.warn("fabric.Polygon is already defined") : (e.Polygon = e.util.createClass(e.Polyline, {
                            type: "polygon",
                            _render: function(t) {
                                this.commonRender(t) && (t.closePath(), this._renderPaintInOrder(t))
                            },
                            _renderDashedStroke: function(t) {
                                this.callSuper("_renderDashedStroke", t), t.closePath()
                            }
                        }), e.Polygon.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(), e.Polygon.fromElement = function(t, n, r) {
                            if (!t) return n(null);
                            r || (r = {});
                            var o = e.parsePointsAttribute(t.getAttribute("points")),
                                a = e.parseAttributes(t, e.Polygon.ATTRIBUTE_NAMES);
                            n(new e.Polygon(o, i(a, r)))
                        }, e.Polygon.fromObject = function(t, i) {
                            return e.Object._fromObject("Polygon", t, i, "points")
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.array.min,
                            n = e.util.array.max,
                            r = e.util.object.extend,
                            o = Object.prototype.toString,
                            a = e.util.drawArc,
                            s = e.util.toFixed,
                            l = {
                                m: 2,
                                l: 2,
                                h: 1,
                                v: 1,
                                c: 6,
                                s: 4,
                                q: 4,
                                t: 2,
                                a: 7
                            },
                            c = {
                                m: "l",
                                M: "L"
                            };
                        e.Path ? e.warn("fabric.Path is already defined") : (e.Path = e.util.createClass(e.Object, {
                            type: "path",
                            path: null,
                            cacheProperties: e.Object.prototype.cacheProperties.concat("path", "fillRule"),
                            stateProperties: e.Object.prototype.stateProperties.concat("path"),
                            initialize: function(t, e) {
                                e = e || {}, this.callSuper("initialize", e), t || (t = []);
                                var i = "[object Array]" === o.call(t);
                                this.path = i ? t : t.match && t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi), this.path && (i || (this.path = this._parsePath()), this._setPositionDimensions(e))
                            },
                            _setPositionDimensions: function(t) {
                                var e = this._parseDimensions();
                                this.width = e.width, this.height = e.height, void 0 === t.left && (this.left = e.left), void 0 === t.top && (this.top = e.top), this.pathOffset = this.pathOffset || {
                                    x: e.left + this.width / 2,
                                    y: e.top + this.height / 2
                                }
                            },
                            _renderPathCommands: function(t) {
                                var e, i, n, r = null,
                                    o = 0,
                                    s = 0,
                                    l = 0,
                                    c = 0,
                                    u = 0,
                                    h = 0,
                                    d = -this.pathOffset.x,
                                    f = -this.pathOffset.y;
                                t.beginPath();
                                for (var p = 0, g = this.path.length; p < g; ++p) {
                                    switch ((e = this.path[p])[0]) {
                                        case "l":
                                            l += e[1], c += e[2], t.lineTo(l + d, c + f);
                                            break;
                                        case "L":
                                            l = e[1], c = e[2], t.lineTo(l + d, c + f);
                                            break;
                                        case "h":
                                            l += e[1], t.lineTo(l + d, c + f);
                                            break;
                                        case "H":
                                            l = e[1], t.lineTo(l + d, c + f);
                                            break;
                                        case "v":
                                            c += e[1], t.lineTo(l + d, c + f);
                                            break;
                                        case "V":
                                            c = e[1], t.lineTo(l + d, c + f);
                                            break;
                                        case "m":
                                            o = l += e[1], s = c += e[2], t.moveTo(l + d, c + f);
                                            break;
                                        case "M":
                                            o = l = e[1], s = c = e[2], t.moveTo(l + d, c + f);
                                            break;
                                        case "c":
                                            i = l + e[5], n = c + e[6], u = l + e[3], h = c + e[4], t.bezierCurveTo(l + e[1] + d, c + e[2] + f, u + d, h + f, i + d, n + f), l = i, c = n;
                                            break;
                                        case "C":
                                            l = e[5], c = e[6], u = e[3], h = e[4], t.bezierCurveTo(e[1] + d, e[2] + f, u + d, h + f, l + d, c + f);
                                            break;
                                        case "s":
                                            i = l + e[3], n = c + e[4], null === r[0].match(/[CcSs]/) ? (u = l, h = c) : (u = 2 * l - u, h = 2 * c - h), t.bezierCurveTo(u + d, h + f, l + e[1] + d, c + e[2] + f, i + d, n + f), u = l + e[1], h = c + e[2], l = i, c = n;
                                            break;
                                        case "S":
                                            i = e[3], n = e[4], null === r[0].match(/[CcSs]/) ? (u = l, h = c) : (u = 2 * l - u, h = 2 * c - h), t.bezierCurveTo(u + d, h + f, e[1] + d, e[2] + f, i + d, n + f), l = i, c = n, u = e[1], h = e[2];
                                            break;
                                        case "q":
                                            i = l + e[3], n = c + e[4], u = l + e[1], h = c + e[2], t.quadraticCurveTo(u + d, h + f, i + d, n + f), l = i, c = n;
                                            break;
                                        case "Q":
                                            i = e[3], n = e[4], t.quadraticCurveTo(e[1] + d, e[2] + f, i + d, n + f), l = i, c = n, u = e[1], h = e[2];
                                            break;
                                        case "t":
                                            i = l + e[1], n = c + e[2], null === r[0].match(/[QqTt]/) ? (u = l, h = c) : (u = 2 * l - u, h = 2 * c - h), t.quadraticCurveTo(u + d, h + f, i + d, n + f), l = i, c = n;
                                            break;
                                        case "T":
                                            i = e[1], n = e[2], null === r[0].match(/[QqTt]/) ? (u = l, h = c) : (u = 2 * l - u, h = 2 * c - h), t.quadraticCurveTo(u + d, h + f, i + d, n + f), l = i, c = n;
                                            break;
                                        case "a":
                                            a(t, l + d, c + f, [e[1], e[2], e[3], e[4], e[5], e[6] + l + d, e[7] + c + f]), l += e[6], c += e[7];
                                            break;
                                        case "A":
                                            a(t, l + d, c + f, [e[1], e[2], e[3], e[4], e[5], e[6] + d, e[7] + f]), l = e[6], c = e[7];
                                            break;
                                        case "z":
                                        case "Z":
                                            l = o, c = s, t.closePath()
                                    }
                                    r = e
                                }
                            },
                            _render: function(t) {
                                this._renderPathCommands(t), this._renderPaintInOrder(t)
                            },
                            toString: function() {
                                return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
                            },
                            toObject: function(t) {
                                return r(this.callSuper("toObject", t), {
                                    path: this.path.map(function(t) {
                                        return t.slice()
                                    }),
                                    top: this.top,
                                    left: this.left
                                })
                            },
                            toDatalessObject: function(t) {
                                var e = this.toObject(["sourcePath"].concat(t));
                                return e.sourcePath && delete e.path, e
                            },
                            _toSVG: function() {
                                return ["<path ", "COMMON_PARTS", 'd="', this.path.map(function(t) {
                                    return t.join(" ")
                                }).join(" "), '" stroke-linecap="round" ', "/>\n"]
                            },
                            _getOffsetTransform: function() {
                                var t = e.Object.NUM_FRACTION_DIGITS;
                                return " translate(" + s(-this.pathOffset.x, t) + ", " + s(-this.pathOffset.y, t) + ")"
                            },
                            toClipPathSVG: function(t) {
                                var e = this._getOffsetTransform();
                                return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(), {
                                    reviver: t,
                                    additionalTransform: e
                                })
                            },
                            toSVG: function(t) {
                                var e = this._getOffsetTransform();
                                return this._createBaseSVGMarkup(this._toSVG(), {
                                    reviver: t,
                                    additionalTransform: e
                                })
                            },
                            complexity: function() {
                                return this.path.length
                            },
                            _parsePath: function() {
                                for (var t, e, i, n, r, o = [], a = [], s = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi, u = 0, h = this.path.length; u < h; u++) {
                                    for (n = (t = this.path[u]).slice(1).trim(), a.length = 0; i = s.exec(n);) a.push(i[0]);
                                    r = [t.charAt(0)];
                                    for (var d = 0, f = a.length; d < f; d++) e = parseFloat(a[d]), isNaN(e) || r.push(e);
                                    var p = r[0],
                                        g = l[p.toLowerCase()],
                                        m = c[p] || p;
                                    if (r.length - 1 > g)
                                        for (var v = 1, b = r.length; v < b; v += g) o.push([p].concat(r.slice(v, v + g))), p = m;
                                    else o.push(r)
                                }
                                return o
                            },
                            _parseDimensions: function() {
                                for (var t, r, o, a, s = [], l = [], c = null, u = 0, h = 0, d = 0, f = 0, p = 0, g = 0, m = 0, v = this.path.length; m < v; ++m) {
                                    switch ((t = this.path[m])[0]) {
                                        case "l":
                                            d += t[1], f += t[2], a = [];
                                            break;
                                        case "L":
                                            d = t[1], f = t[2], a = [];
                                            break;
                                        case "h":
                                            d += t[1], a = [];
                                            break;
                                        case "H":
                                            d = t[1], a = [];
                                            break;
                                        case "v":
                                            f += t[1], a = [];
                                            break;
                                        case "V":
                                            f = t[1], a = [];
                                            break;
                                        case "m":
                                            u = d += t[1], h = f += t[2], a = [];
                                            break;
                                        case "M":
                                            u = d = t[1], h = f = t[2], a = [];
                                            break;
                                        case "c":
                                            r = d + t[5], o = f + t[6], p = d + t[3], g = f + t[4], a = e.util.getBoundsOfCurve(d, f, d + t[1], f + t[2], p, g, r, o), d = r, f = o;
                                            break;
                                        case "C":
                                            p = t[3], g = t[4], a = e.util.getBoundsOfCurve(d, f, t[1], t[2], p, g, t[5], t[6]), d = t[5], f = t[6];
                                            break;
                                        case "s":
                                            r = d + t[3], o = f + t[4], null === c[0].match(/[CcSs]/) ? (p = d, g = f) : (p = 2 * d - p, g = 2 * f - g), a = e.util.getBoundsOfCurve(d, f, p, g, d + t[1], f + t[2], r, o), p = d + t[1], g = f + t[2], d = r, f = o;
                                            break;
                                        case "S":
                                            r = t[3], o = t[4], null === c[0].match(/[CcSs]/) ? (p = d, g = f) : (p = 2 * d - p, g = 2 * f - g), a = e.util.getBoundsOfCurve(d, f, p, g, t[1], t[2], r, o), d = r, f = o, p = t[1], g = t[2];
                                            break;
                                        case "q":
                                            r = d + t[3], o = f + t[4], p = d + t[1], g = f + t[2], a = e.util.getBoundsOfCurve(d, f, p, g, p, g, r, o), d = r, f = o;
                                            break;
                                        case "Q":
                                            p = t[1], g = t[2], a = e.util.getBoundsOfCurve(d, f, p, g, p, g, t[3], t[4]), d = t[3], f = t[4];
                                            break;
                                        case "t":
                                            r = d + t[1], o = f + t[2], null === c[0].match(/[QqTt]/) ? (p = d, g = f) : (p = 2 * d - p, g = 2 * f - g), a = e.util.getBoundsOfCurve(d, f, p, g, p, g, r, o), d = r, f = o;
                                            break;
                                        case "T":
                                            r = t[1], o = t[2], null === c[0].match(/[QqTt]/) ? (p = d, g = f) : (p = 2 * d - p, g = 2 * f - g), a = e.util.getBoundsOfCurve(d, f, p, g, p, g, r, o), d = r, f = o;
                                            break;
                                        case "a":
                                            a = e.util.getBoundsOfArc(d, f, t[1], t[2], t[3], t[4], t[5], t[6] + d, t[7] + f), d += t[6], f += t[7];
                                            break;
                                        case "A":
                                            a = e.util.getBoundsOfArc(d, f, t[1], t[2], t[3], t[4], t[5], t[6], t[7]), d = t[6], f = t[7];
                                            break;
                                        case "z":
                                        case "Z":
                                            d = u, f = h
                                    }
                                    c = t, a.forEach(function(t) {
                                        s.push(t.x), l.push(t.y)
                                    }), s.push(d), l.push(f)
                                }
                                var b = i(s) || 0,
                                    y = i(l) || 0;
                                return {
                                    left: b,
                                    top: y,
                                    width: (n(s) || 0) - b,
                                    height: (n(l) || 0) - y
                                }
                            }
                        }), e.Path.fromObject = function(t, i) {
                            if ("string" == typeof t.sourcePath) {
                                var n = t.sourcePath;
                                e.loadSVGFromURL(n, function(e) {
                                    var n = e[0];
                                    n.setOptions(t), i && i(n)
                                })
                            } else e.Object._fromObject("Path", t, i, "path")
                        }, e.Path.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(["d"]), e.Path.fromElement = function(t, i, n) {
                            var o = e.parseAttributes(t, e.Path.ATTRIBUTE_NAMES);
                            i(new e.Path(o.d, r(o, n)))
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.array.min,
                            n = e.util.array.max;
                        e.Group || (e.Group = e.util.createClass(e.Object, e.Collection, {
                            type: "group",
                            strokeWidth: 0,
                            subTargetCheck: !1,
                            cacheProperties: [],
                            useSetOnGroup: !1,
                            initialize: function(t, e, i) {
                                e = e || {}, this._objects = [], i && this.callSuper("initialize", e), this._objects = t || [];
                                for (var n = this._objects.length; n--;) this._objects[n].group = this;
                                if (i) this._updateObjectsACoords();
                                else {
                                    var r = e && e.centerPoint;
                                    void 0 !== e.originX && (this.originX = e.originX), void 0 !== e.originY && (this.originY = e.originY), r || this._calcBounds(), this._updateObjectsCoords(r), delete e.centerPoint, this.callSuper("initialize", e)
                                }
                                this.setCoords()
                            },
                            _updateObjectsACoords: function() {
                                for (var t = this._objects.length; t--;) this._objects[t].setCoords(!0, !0)
                            },
                            _updateObjectsCoords: function(t) {
                                t = t || this.getCenterPoint();
                                for (var e = this._objects.length; e--;) this._updateObjectCoords(this._objects[e], t)
                            },
                            _updateObjectCoords: function(t, e) {
                                var i = t.left,
                                    n = t.top;
                                t.set({
                                    left: i - e.x,
                                    top: n - e.y
                                }), t.group = this, t.setCoords(!0, !0)
                            },
                            toString: function() {
                                return "#<fabric.Group: (" + this.complexity() + ")>"
                            },
                            addWithUpdate: function(t) {
                                return this._restoreObjectsState(), e.util.resetObjectTransform(this), t && (this._objects.push(t), t.group = this, t._set("canvas", this.canvas)), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this
                            },
                            removeWithUpdate: function(t) {
                                return this._restoreObjectsState(), e.util.resetObjectTransform(this), this.remove(t), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this
                            },
                            _onObjectAdded: function(t) {
                                this.dirty = !0, t.group = this, t._set("canvas", this.canvas)
                            },
                            _onObjectRemoved: function(t) {
                                this.dirty = !0, delete t.group
                            },
                            _set: function(t, i) {
                                var n = this._objects.length;
                                if (this.useSetOnGroup)
                                    for (; n--;) this._objects[n].setOnGroup(t, i);
                                if ("canvas" === t)
                                    for (; n--;) this._objects[n]._set(t, i);
                                e.Object.prototype._set.call(this, t, i)
                            },
                            toObject: function(t) {
                                var i = this.includeDefaultValues,
                                    n = this._objects.map(function(e) {
                                        var n = e.includeDefaultValues;
                                        e.includeDefaultValues = i;
                                        var r = e.toObject(t);
                                        return e.includeDefaultValues = n, r
                                    }),
                                    r = e.Object.prototype.toObject.call(this, t);
                                return r.objects = n, r
                            },
                            toDatalessObject: function(t) {
                                var i, n = this.sourcePath;
                                if (n) i = n;
                                else {
                                    var r = this.includeDefaultValues;
                                    i = this._objects.map(function(e) {
                                        var i = e.includeDefaultValues;
                                        e.includeDefaultValues = r;
                                        var n = e.toDatalessObject(t);
                                        return e.includeDefaultValues = i, n
                                    })
                                }
                                var o = e.Object.prototype.toDatalessObject.call(this, t);
                                return o.objects = i, o
                            },
                            render: function(t) {
                                this._transformDone = !0, this.callSuper("render", t), this._transformDone = !1
                            },
                            shouldCache: function() {
                                var t = this.objectCaching && (!this.group || this.needsItsOwnCache() || !this.group.isOnACache());
                                if (this.ownCaching = t, t)
                                    for (var e = 0, i = this._objects.length; e < i; e++)
                                        if (this._objects[e].willDrawShadow()) return this.ownCaching = !1, !1;
                                return t
                            },
                            willDrawShadow: function() {
                                if (this.shadow) return e.Object.prototype.willDrawShadow.call(this);
                                for (var t = 0, i = this._objects.length; t < i; t++)
                                    if (this._objects[t].willDrawShadow()) return !0;
                                return !1
                            },
                            isOnACache: function() {
                                return this.ownCaching || this.group && this.group.isOnACache()
                            },
                            drawObject: function(t) {
                                for (var e = 0, i = this._objects.length; e < i; e++) this._objects[e].render(t);
                                this._drawClipPath(t)
                            },
                            isCacheDirty: function(t) {
                                if (this.callSuper("isCacheDirty", t)) return !0;
                                if (!this.statefullCache) return !1;
                                for (var e = 0, i = this._objects.length; e < i; e++)
                                    if (this._objects[e].isCacheDirty(!0)) {
                                        if (this._cacheCanvas) {
                                            var n = this.cacheWidth / this.zoomX,
                                                r = this.cacheHeight / this.zoomY;
                                            this._cacheContext.clearRect(-n / 2, -r / 2, n, r)
                                        }
                                        return !0
                                    }
                                return !1
                            },
                            _restoreObjectsState: function() {
                                return this._objects.forEach(this._restoreObjectState, this), this
                            },
                            realizeTransform: function(t) {
                                var i = t.calcTransformMatrix(),
                                    n = e.util.qrDecompose(i),
                                    r = new e.Point(n.translateX, n.translateY);
                                return t.flipX = !1, t.flipY = !1, t.set("scaleX", n.scaleX), t.set("scaleY", n.scaleY), t.skewX = n.skewX, t.skewY = n.skewY, t.angle = n.angle, t.setPositionByOrigin(r, "center", "center"), t
                            },
                            _restoreObjectState: function(t) {
                                return this.realizeTransform(t), t.setCoords(), delete t.group, this
                            },
                            destroy: function() {
                                return this._objects.forEach(function(t) {
                                    t.set("dirty", !0)
                                }), this._restoreObjectsState()
                            },
                            toActiveSelection: function() {
                                if (this.canvas) {
                                    var t = this._objects,
                                        i = this.canvas;
                                    this._objects = [];
                                    var n = this.toObject();
                                    delete n.objects;
                                    var r = new e.ActiveSelection([]);
                                    return r.set(n), r.type = "activeSelection", i.remove(this), t.forEach(function(t) {
                                        t.group = r, t.dirty = !0, i.add(t)
                                    }), r.canvas = i, r._objects = t, i._activeObject = r, r.setCoords(), r
                                }
                            },
                            ungroupOnCanvas: function() {
                                return this._restoreObjectsState()
                            },
                            setObjectsCoords: function() {
                                return this.forEachObject(function(t) {
                                    t.setCoords(!0, !0)
                                }), this
                            },
                            _calcBounds: function(t) {
                                for (var e, i, n, r = [], o = [], a = ["tr", "br", "bl", "tl"], s = 0, l = this._objects.length, c = a.length; s < l; ++s)
                                    for ((e = this._objects[s]).setCoords(!0), n = 0; n < c; n++) i = a[n], r.push(e.oCoords[i].x), o.push(e.oCoords[i].y);
                                this._getBounds(r, o, t)
                            },
                            _getBounds: function(t, r, o) {
                                var a = new e.Point(i(t), i(r)),
                                    s = new e.Point(n(t), n(r)),
                                    l = a.y || 0,
                                    c = a.x || 0,
                                    u = s.x - a.x || 0,
                                    h = s.y - a.y || 0;
                                this.width = u, this.height = h, o || this.setPositionByOrigin({
                                    x: c,
                                    y: l
                                }, "left", "top")
                            },
                            toSVG: function(t) {
                                for (var e = [], i = 0, n = this._objects.length; i < n; i++) e.push("\t", this._objects[i].toSVG(t));
                                return this._createBaseSVGMarkup(e, {
                                    reviver: t,
                                    noStyle: !0,
                                    withShadow: !0
                                })
                            },
                            toClipPathSVG: function(t) {
                                for (var e = [], i = 0, n = this._objects.length; i < n; i++) e.push("\t", this._objects[i].toClipPathSVG(t));
                                return this._createBaseClipPathSVGMarkup(e, {
                                    reviver: t
                                })
                            }
                        }), e.Group.fromObject = function(t, i) {
                            e.util.enlivenObjects(t.objects, function(n) {
                                e.util.enlivenObjects([t.clipPath], function(r) {
                                    var o = e.util.object.clone(t, !0);
                                    o.clipPath = r[0], delete o.objects, i && i(new e.Group(n, o, !0))
                                })
                            })
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {});
                        e.ActiveSelection || (e.ActiveSelection = e.util.createClass(e.Group, {
                            type: "activeSelection",
                            initialize: function(t, i) {
                                i = i || {}, this._objects = t || [];
                                for (var n = this._objects.length; n--;) this._objects[n].group = this;
                                i.originX && (this.originX = i.originX), i.originY && (this.originY = i.originY), this._calcBounds(), this._updateObjectsCoords(), e.Object.prototype.initialize.call(this, i), this.setCoords()
                            },
                            toGroup: function() {
                                var t = this._objects.concat();
                                this._objects = [];
                                var i = e.Object.prototype.toObject.call(this),
                                    n = new e.Group([]);
                                if (delete i.type, n.set(i), t.forEach(function(t) {
                                        t.canvas.remove(t), t.group = n
                                    }), n._objects = t, !this.canvas) return n;
                                var r = this.canvas;
                                return r.add(n), r._activeObject = n, n.setCoords(), n
                            },
                            onDeselect: function() {
                                return this.destroy(), !1
                            },
                            toString: function() {
                                return "#<fabric.ActiveSelection: (" + this.complexity() + ")>"
                            },
                            shouldCache: function() {
                                return !1
                            },
                            isOnACache: function() {
                                return !1
                            },
                            _renderControls: function(t, e, i) {
                                t.save(), t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, this.callSuper("_renderControls", t, e), void 0 === (i = i || {}).hasControls && (i.hasControls = !1), void 0 === i.hasRotatingPoint && (i.hasRotatingPoint = !1), i.forActiveSelection = !0;
                                for (var n = 0, r = this._objects.length; n < r; n++) this._objects[n]._renderControls(t, i);
                                t.restore()
                            }
                        }), e.ActiveSelection.fromObject = function(t, i) {
                            e.util.enlivenObjects(t.objects, function(n) {
                                delete t.objects, i && i(new e.ActiveSelection(n, t, !0))
                            })
                        })
                    }(e),
                    function(t) {
                        "use strict";
                        var e = n.util.object.extend;
                        t.fabric || (t.fabric = {}), t.fabric.Image ? n.warn("fabric.Image is already defined.") : (n.Image = n.util.createClass(n.Object, {
                            type: "image",
                            crossOrigin: "",
                            strokeWidth: 0,
                            srcFromAttribute: !1,
                            _lastScaleX: 1,
                            _lastScaleY: 1,
                            _filterScalingX: 1,
                            _filterScalingY: 1,
                            minimumScaleTrigger: .5,
                            stateProperties: n.Object.prototype.stateProperties.concat("cropX", "cropY"),
                            cacheKey: "",
                            cropX: 0,
                            cropY: 0,
                            initialize: function(t, e) {
                                e || (e = {}), this.filters = [], this.cacheKey = "texture" + n.Object.__uid++, this.callSuper("initialize", e), this._initElement(t, e)
                            },
                            getElement: function() {
                                return this._element || {}
                            },
                            setElement: function(t, e) {
                                return this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._element = t, this._originalElement = t, this._initConfig(e), 0 !== this.filters.length && this.applyFilters(), this.resizeFilter && this.applyResizeFilters(), this
                            },
                            removeTexture: function(t) {
                                var e = n.filterBackend;
                                e && e.evictCachesForKey && e.evictCachesForKey(t)
                            },
                            dispose: function() {
                                this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._cacheContext = void 0, ["_originalElement", "_element", "_filteredEl", "_cacheCanvas"].forEach(function(t) {
                                    n.util.cleanUpJsdomNode(this[t]), this[t] = void 0
                                }.bind(this))
                            },
                            setCrossOrigin: function(t) {
                                return this.crossOrigin = t, this._element.crossOrigin = t, this
                            },
                            getOriginalSize: function() {
                                var t = this.getElement();
                                return {
                                    width: t.naturalWidth || t.width,
                                    height: t.naturalHeight || t.height
                                }
                            },
                            _stroke: function(t) {
                                if (this.stroke && 0 !== this.strokeWidth) {
                                    var e = this.width / 2,
                                        i = this.height / 2;
                                    t.beginPath(), t.moveTo(-e, -i), t.lineTo(e, -i), t.lineTo(e, i), t.lineTo(-e, i), t.lineTo(-e, -i), t.closePath()
                                }
                            },
                            _renderDashedStroke: function(t) {
                                var e = -this.width / 2,
                                    i = -this.height / 2,
                                    r = this.width,
                                    o = this.height;
                                t.save(), this._setStrokeStyles(t, this), t.beginPath(), n.util.drawDashedLine(t, e, i, e + r, i, this.strokeDashArray), n.util.drawDashedLine(t, e + r, i, e + r, i + o, this.strokeDashArray), n.util.drawDashedLine(t, e + r, i + o, e, i + o, this.strokeDashArray), n.util.drawDashedLine(t, e, i + o, e, i, this.strokeDashArray), t.closePath(), t.restore()
                            },
                            toObject: function(t) {
                                var i = [];
                                this.filters.forEach(function(t) {
                                    t && i.push(t.toObject())
                                });
                                var n = e(this.callSuper("toObject", ["crossOrigin", "cropX", "cropY"].concat(t)), {
                                    src: this.getSrc(),
                                    filters: i
                                });
                                return this.resizeFilter && (n.resizeFilter = this.resizeFilter.toObject()), n
                            },
                            hasCrop: function() {
                                return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height
                            },
                            _toSVG: function() {
                                var t, e = [],
                                    i = [],
                                    r = -this.width / 2,
                                    o = -this.height / 2,
                                    a = "";
                                if (this.hasCrop()) {
                                    var s = n.Object.__uid++;
                                    e.push('<clipPath id="imageCrop_' + s + '">\n', '\t<rect x="' + r + '" y="' + o + '" width="' + this.width + '" height="' + this.height + '" />\n', "</clipPath>\n"), a = ' clip-path="url(#imageCrop_' + s + ')" '
                                }
                                if (i.push("\t<image ", "COMMON_PARTS", 'xlink:href="', this.getSvgSrc(!0), '" x="', r - this.cropX, '" y="', o - this.cropY, '" width="', this._element.width || this._element.naturalWidth, '" height="', this._element.height || this._element.height, '"', a, "></image>\n"), this.stroke || this.strokeDashArray) {
                                    var l = this.fill;
                                    this.fill = null, t = ["\t<rect ", 'x="', r, '" y="', o, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'], this.fill = l
                                }
                                return e = "fill" !== this.paintFirst ? e.concat(t, i) : e.concat(i, t)
                            },
                            getSrc: function(t) {
                                var e = t ? this._element : this._originalElement;
                                return e ? e.toDataURL ? e.toDataURL() : this.srcFromAttribute ? e.getAttribute("src") : e.src : this.src || ""
                            },
                            setSrc: function(t, e, i) {
                                return n.util.loadImage(t, function(t) {
                                    this.setElement(t, i), this._setWidthHeight(), e && e(this)
                                }, this, i && i.crossOrigin), this
                            },
                            toString: function() {
                                return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
                            },
                            applyResizeFilters: function() {
                                var t = this.resizeFilter,
                                    e = this.minimumScaleTrigger,
                                    i = this.getTotalObjectScaling(),
                                    r = i.scaleX,
                                    o = i.scaleY,
                                    a = this._filteredEl || this._originalElement;
                                if (this.group && this.set("dirty", !0), !t || r > e && o > e) return this._element = a, this._filterScalingX = 1, this._filterScalingY = 1, this._lastScaleX = r, void(this._lastScaleY = o);
                                n.filterBackend || (n.filterBackend = n.initFilterBackend());
                                var s = n.util.createCanvasElement(),
                                    l = this._filteredEl ? this.cacheKey + "_filtered" : this.cacheKey,
                                    c = a.width,
                                    u = a.height;
                                s.width = c, s.height = u, this._element = s, this._lastScaleX = t.scaleX = r, this._lastScaleY = t.scaleY = o, n.filterBackend.applyFilters([t], a, c, u, this._element, l), this._filterScalingX = s.width / this._originalElement.width, this._filterScalingY = s.height / this._originalElement.height
                            },
                            applyFilters: function(t) {
                                if (t = (t = t || this.filters || []).filter(function(t) {
                                        return t && !t.isNeutralState()
                                    }), this.set("dirty", !0), this.removeTexture(this.cacheKey + "_filtered"), 0 === t.length) return this._element = this._originalElement, this._filteredEl = null, this._filterScalingX = 1, this._filterScalingY = 1, this;
                                var e = this._originalElement,
                                    i = e.naturalWidth || e.width,
                                    r = e.naturalHeight || e.height;
                                if (this._element === this._originalElement) {
                                    var o = n.util.createCanvasElement();
                                    o.width = i, o.height = r, this._element = o, this._filteredEl = o
                                } else this._element = this._filteredEl, this._filteredEl.getContext("2d").clearRect(0, 0, i, r), this._lastScaleX = 1, this._lastScaleY = 1;
                                return n.filterBackend || (n.filterBackend = n.initFilterBackend()), n.filterBackend.applyFilters(t, this._originalElement, i, r, this._element, this.cacheKey), this._originalElement.width === this._element.width && this._originalElement.height === this._element.height || (this._filterScalingX = this._element.width / this._originalElement.width, this._filterScalingY = this._element.height / this._originalElement.height), this
                            },
                            _render: function(t) {
                                !0 !== this.isMoving && this.resizeFilter && this._needsResize() && this.applyResizeFilters(), this._stroke(t), this._renderPaintInOrder(t)
                            },
                            shouldCache: function() {
                                return this.ownCaching = this.objectCaching && this.needsItsOwnCache(), this.ownCaching
                            },
                            _renderFill: function(t) {
                                var e = this._element,
                                    i = this.width,
                                    n = this.height,
                                    r = Math.min(e.naturalWidth || e.width, i * this._filterScalingX),
                                    o = Math.min(e.naturalHeight || e.height, n * this._filterScalingY),
                                    a = -i / 2,
                                    s = -n / 2,
                                    l = Math.max(0, this.cropX * this._filterScalingX),
                                    c = Math.max(0, this.cropY * this._filterScalingY);
                                e && t.drawImage(e, l, c, r, o, a, s, i, n)
                            },
                            _needsResize: function() {
                                var t = this.getTotalObjectScaling();
                                return t.scaleX !== this._lastScaleX || t.scaleY !== this._lastScaleY
                            },
                            _resetWidthHeight: function() {
                                this.set(this.getOriginalSize())
                            },
                            _initElement: function(t, e) {
                                this.setElement(n.util.getById(t), e), n.util.addClass(this.getElement(), n.Image.CSS_CANVAS)
                            },
                            _initConfig: function(t) {
                                t || (t = {}), this.setOptions(t), this._setWidthHeight(t), this._element && this.crossOrigin && (this._element.crossOrigin = this.crossOrigin)
                            },
                            _initFilters: function(t, e) {
                                t && t.length ? n.util.enlivenObjects(t, function(t) {
                                    e && e(t)
                                }, "fabric.Image.filters") : e && e()
                            },
                            _setWidthHeight: function(t) {
                                t || (t = {});
                                var e = this.getElement();
                                this.width = t.width || e.naturalWidth || e.width || 0, this.height = t.height || e.naturalHeight || e.height || 0
                            },
                            parsePreserveAspectRatioAttribute: function() {
                                var t, e = n.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""),
                                    i = this._element.width,
                                    r = this._element.height,
                                    o = 1,
                                    a = 1,
                                    s = 0,
                                    l = 0,
                                    c = 0,
                                    u = 0,
                                    h = this.width,
                                    d = this.height,
                                    f = {
                                        width: h,
                                        height: d
                                    };
                                return !e || "none" === e.alignX && "none" === e.alignY ? (o = h / i, a = d / r) : ("meet" === e.meetOrSlice && (t = (h - i * (o = a = n.util.findScaleToFit(this._element, f))) / 2, "Min" === e.alignX && (s = -t), "Max" === e.alignX && (s = t), t = (d - r * a) / 2, "Min" === e.alignY && (l = -t), "Max" === e.alignY && (l = t)), "slice" === e.meetOrSlice && (t = i - h / (o = a = n.util.findScaleToCover(this._element, f)), "Mid" === e.alignX && (c = t / 2), "Max" === e.alignX && (c = t), t = r - d / a, "Mid" === e.alignY && (u = t / 2), "Max" === e.alignY && (u = t), i = h / o, r = d / a)), {
                                    width: i,
                                    height: r,
                                    scaleX: o,
                                    scaleY: a,
                                    offsetLeft: s,
                                    offsetTop: l,
                                    cropX: c,
                                    cropY: u
                                }
                            }
                        }), n.Image.CSS_CANVAS = "canvas-img", n.Image.prototype.getSvgSrc = n.Image.prototype.getSrc, n.Image.fromObject = function(t, e) {
                            var i = n.util.object.clone(t);
                            n.util.loadImage(i.src, function(t, r) {
                                r ? e && e(null, r) : n.Image.prototype._initFilters.call(i, i.filters, function(r) {
                                    i.filters = r || [], n.Image.prototype._initFilters.call(i, [i.resizeFilter], function(r) {
                                        i.resizeFilter = r[0], n.util.enlivenObjects([i.clipPath], function(r) {
                                            i.clipPath = r[0];
                                            var o = new n.Image(t, i);
                                            e(o)
                                        })
                                    })
                                })
                            }, null, i.crossOrigin)
                        }, n.Image.fromURL = function(t, e, i) {
                            n.util.loadImage(t, function(t) {
                                e && e(new n.Image(t, i))
                            }, null, i && i.crossOrigin)
                        }, n.Image.ATTRIBUTE_NAMES = n.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")), n.Image.fromElement = function(t, i, r) {
                            var o = n.parseAttributes(t, n.Image.ATTRIBUTE_NAMES);
                            n.Image.fromURL(o["xlink:href"], i, e(r ? n.util.object.clone(r) : {}, o))
                        })
                    }(e), n.util.object.extend(n.Object.prototype, {
                        _getAngleValueForStraighten: function() {
                            var t = this.angle % 360;
                            return t > 0 ? 90 * Math.round((t - 1) / 90) : 90 * Math.round(t / 90)
                        },
                        straighten: function() {
                            return this.rotate(this._getAngleValueForStraighten()), this
                        },
                        fxStraighten: function(t) {
                            var e = function() {},
                                i = (t = t || {}).onComplete || e,
                                r = t.onChange || e,
                                o = this;
                            return n.util.animate({
                                startValue: this.get("angle"),
                                endValue: this._getAngleValueForStraighten(),
                                duration: this.FX_DURATION,
                                onChange: function(t) {
                                    o.rotate(t), r()
                                },
                                onComplete: function() {
                                    o.setCoords(), i()
                                }
                            }), this
                        }
                    }), n.util.object.extend(n.StaticCanvas.prototype, {
                        straightenObject: function(t) {
                            return t.straighten(), this.requestRenderAll(), this
                        },
                        fxStraightenObject: function(t) {
                            return t.fxStraighten({
                                onChange: this.requestRenderAllBound
                            }), this
                        }
                    }),
                    function() {
                        "use strict";

                        function t(t, e) {
                            var i = "precision " + e + " float;\nvoid main(){}",
                                n = t.createShader(t.FRAGMENT_SHADER);
                            return t.shaderSource(n, i), t.compileShader(n), !!t.getShaderParameter(n, t.COMPILE_STATUS)
                        }

                        function e(t) {
                            t && t.tileSize && (this.tileSize = t.tileSize), this.setupGLContext(this.tileSize, this.tileSize), this.captureGPUInfo()
                        }
                        n.isWebglSupported = function(e) {
                            if (n.isLikelyNode) return !1;
                            e = e || n.WebglFilterBackend.prototype.tileSize;
                            var i = document.createElement("canvas"),
                                r = i.getContext("webgl") || i.getContext("experimental-webgl"),
                                o = !1;
                            if (r) {
                                n.maxTextureSize = r.getParameter(r.MAX_TEXTURE_SIZE), o = n.maxTextureSize >= e;
                                for (var a = ["highp", "mediump", "lowp"], s = 0; s < 3; s++)
                                    if (t(r, a[s])) {
                                        n.webGlPrecision = a[s];
                                        break
                                    }
                            }
                            return this.isSupported = o, o
                        }, n.WebglFilterBackend = e, e.prototype = {
                            tileSize: 2048,
                            resources: {},
                            setupGLContext: function(t, e) {
                                this.dispose(), this.createWebGLCanvas(t, e), this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), this.chooseFastestCopyGLTo2DMethod(t, e)
                            },
                            chooseFastestCopyGLTo2DMethod: function(t, e) {
                                var i, a = void 0 !== window.performance;
                                try {
                                    new ImageData(1, 1), i = !0
                                } catch (t) {
                                    i = !1
                                }
                                var s = "undefined" != typeof ArrayBuffer,
                                    l = "undefined" != typeof Uint8ClampedArray;
                                if (a && i && s && l) {
                                    var c, u, h = n.util.createCanvasElement(),
                                        d = new ArrayBuffer(t * e * 4),
                                        f = {
                                            imageBuffer: d,
                                            destinationWidth: t,
                                            destinationHeight: e,
                                            targetCanvas: h
                                        };
                                    h.width = t, h.height = e, c = window.performance.now(), r.call(f, this.gl, f), u = window.performance.now() - c, c = window.performance.now(), o.call(f, this.gl, f), u > window.performance.now() - c ? (this.imageBuffer = d, this.copyGLTo2D = o) : this.copyGLTo2D = r
                                }
                            },
                            createWebGLCanvas: function(t, e) {
                                var i = n.util.createCanvasElement();
                                i.width = t, i.height = e;
                                var r = {
                                        alpha: !0,
                                        premultipliedAlpha: !1,
                                        depth: !1,
                                        stencil: !1,
                                        antialias: !1
                                    },
                                    o = i.getContext("webgl", r);
                                o || (o = i.getContext("experimental-webgl", r)), o && (o.clearColor(0, 0, 0, 0), this.canvas = i, this.gl = o)
                            },
                            applyFilters: function(t, e, i, n, r, o) {
                                var a, s = this.gl;
                                o && (a = this.getCachedTexture(o, e));
                                var l = {
                                        originalWidth: e.width || e.originalWidth,
                                        originalHeight: e.height || e.originalHeight,
                                        sourceWidth: i,
                                        sourceHeight: n,
                                        destinationWidth: i,
                                        destinationHeight: n,
                                        context: s,
                                        sourceTexture: this.createTexture(s, i, n, !a && e),
                                        targetTexture: this.createTexture(s, i, n),
                                        originalTexture: a || this.createTexture(s, i, n, !a && e),
                                        passes: t.length,
                                        webgl: !0,
                                        aPosition: this.aPosition,
                                        programCache: this.programCache,
                                        pass: 0,
                                        filterBackend: this,
                                        targetCanvas: r
                                    },
                                    c = s.createFramebuffer();
                                return s.bindFramebuffer(s.FRAMEBUFFER, c), t.forEach(function(t) {
                                        t && t.applyTo(l)
                                    }),
                                    function(t) {
                                        var e = t.targetCanvas,
                                            i = e.width,
                                            n = e.height,
                                            r = t.destinationWidth,
                                            o = t.destinationHeight;
                                        i === r && n === o || (e.width = r, e.height = o)
                                    }(l), this.copyGLTo2D(s, l), s.bindTexture(s.TEXTURE_2D, null), s.deleteTexture(l.sourceTexture), s.deleteTexture(l.targetTexture), s.deleteFramebuffer(c), r.getContext("2d").setTransform(1, 0, 0, 1, 0, 0), l
                            },
                            dispose: function() {
                                this.canvas && (this.canvas = null, this.gl = null), this.clearWebGLCaches()
                            },
                            clearWebGLCaches: function() {
                                this.programCache = {}, this.textureCache = {}
                            },
                            createTexture: function(t, e, i, n) {
                                var r = t.createTexture();
                                return t.bindTexture(t.TEXTURE_2D, r), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), n ? t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, n) : t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, e, i, 0, t.RGBA, t.UNSIGNED_BYTE, null), r
                            },
                            getCachedTexture: function(t, e) {
                                if (this.textureCache[t]) return this.textureCache[t];
                                var i = this.createTexture(this.gl, e.width, e.height, e);
                                return this.textureCache[t] = i, i
                            },
                            evictCachesForKey: function(t) {
                                this.textureCache[t] && (this.gl.deleteTexture(this.textureCache[t]), delete this.textureCache[t])
                            },
                            copyGLTo2D: r,
                            captureGPUInfo: function() {
                                if (this.gpuInfo) return this.gpuInfo;
                                var t = this.gl,
                                    e = {
                                        renderer: "",
                                        vendor: ""
                                    };
                                if (!t) return e;
                                var i = t.getExtension("WEBGL_debug_renderer_info");
                                if (i) {
                                    var n = t.getParameter(i.UNMASKED_RENDERER_WEBGL),
                                        r = t.getParameter(i.UNMASKED_VENDOR_WEBGL);
                                    n && (e.renderer = n.toLowerCase()), r && (e.vendor = r.toLowerCase())
                                }
                                return this.gpuInfo = e, e
                            }
                        }
                    }(),
                    function() {
                        "use strict";
                        var t = function() {};

                        function e() {}
                        n.Canvas2dFilterBackend = e, e.prototype = {
                            evictCachesForKey: t,
                            dispose: t,
                            clearWebGLCaches: t,
                            resources: {},
                            applyFilters: function(t, e, i, n, r) {
                                var o = r.getContext("2d");
                                o.drawImage(e, 0, 0, i, n);
                                var a = {
                                    sourceWidth: i,
                                    sourceHeight: n,
                                    imageData: o.getImageData(0, 0, i, n),
                                    originalEl: e,
                                    originalImageData: o.getImageData(0, 0, i, n),
                                    canvasEl: r,
                                    ctx: o,
                                    filterBackend: this
                                };
                                return t.forEach(function(t) {
                                    t.applyTo(a)
                                }), a.imageData.width === i && a.imageData.height === n || (r.width = a.imageData.width, r.height = a.imageData.height), o.putImageData(a.imageData, 0, 0), a
                            }
                        }
                    }(), n.Image = n.Image || {}, n.Image.filters = n.Image.filters || {}, n.Image.filters.BaseFilter = n.util.createClass({
                        type: "BaseFilter",
                        vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
                        fragmentSource: "precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",
                        initialize: function(t) {
                            t && this.setOptions(t)
                        },
                        setOptions: function(t) {
                            for (var e in t) this[e] = t[e]
                        },
                        createProgram: function(t, e, i) {
                            e = e || this.fragmentSource, i = i || this.vertexSource, "highp" !== n.webGlPrecision && (e = e.replace(/precision highp float/g, "precision " + n.webGlPrecision + " float"));
                            var r = t.createShader(t.VERTEX_SHADER);
                            if (t.shaderSource(r, i), t.compileShader(r), !t.getShaderParameter(r, t.COMPILE_STATUS)) throw new Error("Vertex shader compile error for " + this.type + ": " + t.getShaderInfoLog(r));
                            var o = t.createShader(t.FRAGMENT_SHADER);
                            if (t.shaderSource(o, e), t.compileShader(o), !t.getShaderParameter(o, t.COMPILE_STATUS)) throw new Error("Fragment shader compile error for " + this.type + ": " + t.getShaderInfoLog(o));
                            var a = t.createProgram();
                            if (t.attachShader(a, r), t.attachShader(a, o), t.linkProgram(a), !t.getProgramParameter(a, t.LINK_STATUS)) throw new Error('Shader link error for "${this.type}" ' + t.getProgramInfoLog(a));
                            var s = this.getAttributeLocations(t, a),
                                l = this.getUniformLocations(t, a) || {};
                            return l.uStepW = t.getUniformLocation(a, "uStepW"), l.uStepH = t.getUniformLocation(a, "uStepH"), {
                                program: a,
                                attributeLocations: s,
                                uniformLocations: l
                            }
                        },
                        getAttributeLocations: function(t, e) {
                            return {
                                aPosition: t.getAttribLocation(e, "aPosition")
                            }
                        },
                        getUniformLocations: function() {
                            return {}
                        },
                        sendAttributeData: function(t, e, i) {
                            var n = e.aPosition,
                                r = t.createBuffer();
                            t.bindBuffer(t.ARRAY_BUFFER, r), t.enableVertexAttribArray(n), t.vertexAttribPointer(n, 2, t.FLOAT, !1, 0, 0), t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW)
                        },
                        _setupFrameBuffer: function(t) {
                            var e, i, n = t.context;
                            t.passes > 1 ? (e = t.destinationWidth, i = t.destinationHeight, t.sourceWidth === e && t.sourceHeight === i || (n.deleteTexture(t.targetTexture), t.targetTexture = t.filterBackend.createTexture(n, e, i)), n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, t.targetTexture, 0)) : (n.bindFramebuffer(n.FRAMEBUFFER, null), n.finish())
                        },
                        _swapTextures: function(t) {
                            t.passes--, t.pass++;
                            var e = t.targetTexture;
                            t.targetTexture = t.sourceTexture, t.sourceTexture = e
                        },
                        isNeutralState: function() {
                            var t = this.mainParameter,
                                e = n.Image.filters[this.type].prototype;
                            if (t) {
                                if (Array.isArray(e[t])) {
                                    for (var i = e[t].length; i--;)
                                        if (this[t][i] !== e[t][i]) return !1;
                                    return !0
                                }
                                return e[t] === this[t]
                            }
                            return !1
                        },
                        applyTo: function(t) {
                            t.webgl ? (this._setupFrameBuffer(t), this.applyToWebGL(t), this._swapTextures(t)) : this.applyTo2d(t)
                        },
                        retrieveShader: function(t) {
                            return t.programCache.hasOwnProperty(this.type) || (t.programCache[this.type] = this.createProgram(t.context)), t.programCache[this.type]
                        },
                        applyToWebGL: function(t) {
                            var e = t.context,
                                i = this.retrieveShader(t);
                            0 === t.pass && t.originalTexture ? e.bindTexture(e.TEXTURE_2D, t.originalTexture) : e.bindTexture(e.TEXTURE_2D, t.sourceTexture), e.useProgram(i.program), this.sendAttributeData(e, i.attributeLocations, t.aPosition), e.uniform1f(i.uniformLocations.uStepW, 1 / t.sourceWidth), e.uniform1f(i.uniformLocations.uStepH, 1 / t.sourceHeight), this.sendUniformData(e, i.uniformLocations), e.viewport(0, 0, t.destinationWidth, t.destinationHeight), e.drawArrays(e.TRIANGLE_STRIP, 0, 4)
                        },
                        bindAdditionalTexture: function(t, e, i) {
                            t.activeTexture(i), t.bindTexture(t.TEXTURE_2D, e), t.activeTexture(t.TEXTURE0)
                        },
                        unbindAdditionalTexture: function(t, e) {
                            t.activeTexture(e), t.bindTexture(t.TEXTURE_2D, null), t.activeTexture(t.TEXTURE0)
                        },
                        getMainParameter: function() {
                            return this[this.mainParameter]
                        },
                        setMainParameter: function(t) {
                            this[this.mainParameter] = t
                        },
                        sendUniformData: function() {},
                        createHelpLayer: function(t) {
                            if (!t.helpLayer) {
                                var e = document.createElement("canvas");
                                e.width = t.sourceWidth, e.height = t.sourceHeight, t.helpLayer = e
                            }
                        },
                        toObject: function() {
                            var t = {
                                    type: this.type
                                },
                                e = this.mainParameter;
                            return e && (t[e] = this[e]), t
                        },
                        toJSON: function() {
                            return this.toObject()
                        }
                    }), n.Image.filters.BaseFilter.fromObject = function(t, e) {
                        var i = new n.Image.filters[t.type](t);
                        return e && e(i), i
                    },
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.ColorMatrix = n(i.BaseFilter, {
                            type: "ColorMatrix",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",
                            matrix: [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
                            mainParameter: "matrix",
                            colorsOnly: !0,
                            initialize: function(t) {
                                this.callSuper("initialize", t), this.matrix = this.matrix.slice(0)
                            },
                            applyTo2d: function(t) {
                                var e, i, n, r, o, a = t.imageData.data,
                                    s = a.length,
                                    l = this.matrix,
                                    c = this.colorsOnly;
                                for (o = 0; o < s; o += 4) e = a[o], i = a[o + 1], n = a[o + 2], c ? (a[o] = e * l[0] + i * l[1] + n * l[2] + 255 * l[4], a[o + 1] = e * l[5] + i * l[6] + n * l[7] + 255 * l[9], a[o + 2] = e * l[10] + i * l[11] + n * l[12] + 255 * l[14]) : (r = a[o + 3], a[o] = e * l[0] + i * l[1] + n * l[2] + r * l[3] + 255 * l[4], a[o + 1] = e * l[5] + i * l[6] + n * l[7] + r * l[8] + 255 * l[9], a[o + 2] = e * l[10] + i * l[11] + n * l[12] + r * l[13] + 255 * l[14], a[o + 3] = e * l[15] + i * l[16] + n * l[17] + r * l[18] + 255 * l[19])
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uColorMatrix: t.getUniformLocation(e, "uColorMatrix"),
                                    uConstants: t.getUniformLocation(e, "uConstants")
                                }
                            },
                            sendUniformData: function(t, e) {
                                var i = this.matrix,
                                    n = [i[0], i[1], i[2], i[3], i[5], i[6], i[7], i[8], i[10], i[11], i[12], i[13], i[15], i[16], i[17], i[18]],
                                    r = [i[4], i[9], i[14], i[19]];
                                t.uniformMatrix4fv(e.uColorMatrix, !1, n), t.uniform4fv(e.uConstants, r)
                            }
                        }), e.Image.filters.ColorMatrix.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Brightness = n(i.BaseFilter, {
                            type: "Brightness",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",
                            brightness: 0,
                            mainParameter: "brightness",
                            applyTo2d: function(t) {
                                if (0 !== this.brightness) {
                                    var e, i = t.imageData.data,
                                        n = i.length,
                                        r = Math.round(255 * this.brightness);
                                    for (e = 0; e < n; e += 4) i[e] = i[e] + r, i[e + 1] = i[e + 1] + r, i[e + 2] = i[e + 2] + r
                                }
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uBrightness: t.getUniformLocation(e, "uBrightness")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1f(e.uBrightness, this.brightness)
                            }
                        }), e.Image.filters.Brightness.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.Image.filters,
                            r = e.util.createClass;
                        n.Convolute = r(n.BaseFilter, {
                            type: "Convolute",
                            opaque: !1,
                            matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],
                            fragmentSource: {
                                Convolute_3_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                Convolute_3_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                                Convolute_5_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                Convolute_5_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                                Convolute_7_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                Convolute_7_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                                Convolute_9_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                                Convolute_9_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"
                            },
                            retrieveShader: function(t) {
                                var e = Math.sqrt(this.matrix.length),
                                    i = this.type + "_" + e + "_" + (this.opaque ? 1 : 0),
                                    n = this.fragmentSource[i];
                                return t.programCache.hasOwnProperty(i) || (t.programCache[i] = this.createProgram(t.context, n)), t.programCache[i]
                            },
                            applyTo2d: function(t) {
                                var e, i, n, r, o, a, s, l, c, u, h, d, f, p = t.imageData,
                                    g = p.data,
                                    m = this.matrix,
                                    v = Math.round(Math.sqrt(m.length)),
                                    b = Math.floor(v / 2),
                                    y = p.width,
                                    _ = p.height,
                                    x = t.ctx.createImageData(y, _),
                                    w = x.data,
                                    C = this.opaque ? 1 : 0;
                                for (h = 0; h < _; h++)
                                    for (u = 0; u < y; u++) {
                                        for (o = 4 * (h * y + u), e = 0, i = 0, n = 0, r = 0, f = 0; f < v; f++)
                                            for (d = 0; d < v; d++) a = u + d - b, (s = h + f - b) < 0 || s > _ || a < 0 || a > y || (l = 4 * (s * y + a), c = m[f * v + d], e += g[l] * c, i += g[l + 1] * c, n += g[l + 2] * c, C || (r += g[l + 3] * c));
                                        w[o] = e, w[o + 1] = i, w[o + 2] = n, w[o + 3] = C ? g[o + 3] : r
                                    }
                                t.imageData = x
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uMatrix: t.getUniformLocation(e, "uMatrix"),
                                    uOpaque: t.getUniformLocation(e, "uOpaque"),
                                    uHalfSize: t.getUniformLocation(e, "uHalfSize"),
                                    uSize: t.getUniformLocation(e, "uSize")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1fv(e.uMatrix, this.matrix)
                            },
                            toObject: function() {
                                return i(this.callSuper("toObject"), {
                                    opaque: this.opaque,
                                    matrix: this.matrix
                                })
                            }
                        }), e.Image.filters.Convolute.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Grayscale = n(i.BaseFilter, {
                            type: "Grayscale",
                            fragmentSource: {
                                average: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",
                                lightness: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",
                                luminosity: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"
                            },
                            mode: "average",
                            mainParameter: "mode",
                            applyTo2d: function(t) {
                                var e, i, n = t.imageData.data,
                                    r = n.length,
                                    o = this.mode;
                                for (e = 0; e < r; e += 4) "average" === o ? i = (n[e] + n[e + 1] + n[e + 2]) / 3 : "lightness" === o ? i = (Math.min(n[e], n[e + 1], n[e + 2]) + Math.max(n[e], n[e + 1], n[e + 2])) / 2 : "luminosity" === o && (i = .21 * n[e] + .72 * n[e + 1] + .07 * n[e + 2]), n[e] = i, n[e + 1] = i, n[e + 2] = i
                            },
                            retrieveShader: function(t) {
                                var e = this.type + "_" + this.mode;
                                if (!t.programCache.hasOwnProperty(e)) {
                                    var i = this.fragmentSource[this.mode];
                                    t.programCache[e] = this.createProgram(t.context, i)
                                }
                                return t.programCache[e]
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uMode: t.getUniformLocation(e, "uMode")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1i(e.uMode, 1)
                            },
                            isNeutralState: function() {
                                return !1
                            }
                        }), e.Image.filters.Grayscale.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Invert = n(i.BaseFilter, {
                            type: "Invert",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",
                            invert: !0,
                            mainParameter: "invert",
                            applyTo2d: function(t) {
                                var e, i = t.imageData.data,
                                    n = i.length;
                                for (e = 0; e < n; e += 4) i[e] = 255 - i[e], i[e + 1] = 255 - i[e + 1], i[e + 2] = 255 - i[e + 2]
                            },
                            isNeutralState: function() {
                                return !this.invert
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uInvert: t.getUniformLocation(e, "uInvert")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1i(e.uInvert, this.invert)
                            }
                        }), e.Image.filters.Invert.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.Image.filters,
                            r = e.util.createClass;
                        n.Noise = r(n.BaseFilter, {
                            type: "Noise",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",
                            mainParameter: "noise",
                            noise: 0,
                            applyTo2d: function(t) {
                                if (0 !== this.noise) {
                                    var e, i, n = t.imageData.data,
                                        r = n.length,
                                        o = this.noise;
                                    for (e = 0, r = n.length; e < r; e += 4) i = (.5 - Math.random()) * o, n[e] += i, n[e + 1] += i, n[e + 2] += i
                                }
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uNoise: t.getUniformLocation(e, "uNoise"),
                                    uSeed: t.getUniformLocation(e, "uSeed")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1f(e.uNoise, this.noise / 255), t.uniform1f(e.uSeed, Math.random())
                            },
                            toObject: function() {
                                return i(this.callSuper("toObject"), {
                                    noise: this.noise
                                })
                            }
                        }), e.Image.filters.Noise.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Pixelate = n(i.BaseFilter, {
                            type: "Pixelate",
                            blocksize: 4,
                            mainParameter: "blocksize",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",
                            applyTo2d: function(t) {
                                var e, i, n, r, o, a, s, l, c, u, h, d = t.imageData,
                                    f = d.data,
                                    p = d.height,
                                    g = d.width;
                                for (i = 0; i < p; i += this.blocksize)
                                    for (n = 0; n < g; n += this.blocksize)
                                        for (r = f[e = 4 * i * g + 4 * n], o = f[e + 1], a = f[e + 2], s = f[e + 3], u = Math.min(i + this.blocksize, p), h = Math.min(n + this.blocksize, g), l = i; l < u; l++)
                                            for (c = n; c < h; c++) f[e = 4 * l * g + 4 * c] = r, f[e + 1] = o, f[e + 2] = a, f[e + 3] = s
                            },
                            isNeutralState: function() {
                                return 1 === this.blocksize
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uBlocksize: t.getUniformLocation(e, "uBlocksize"),
                                    uStepW: t.getUniformLocation(e, "uStepW"),
                                    uStepH: t.getUniformLocation(e, "uStepH")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1f(e.uBlocksize, this.blocksize)
                            }
                        }), e.Image.filters.Pixelate.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.extend,
                            n = e.Image.filters,
                            r = e.util.createClass;
                        n.RemoveColor = r(n.BaseFilter, {
                            type: "RemoveColor",
                            color: "#FFFFFF",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",
                            distance: .02,
                            useAlpha: !1,
                            applyTo2d: function(t) {
                                var i, n, r, o, a = t.imageData.data,
                                    s = 255 * this.distance,
                                    l = new e.Color(this.color).getSource(),
                                    c = [l[0] - s, l[1] - s, l[2] - s],
                                    u = [l[0] + s, l[1] + s, l[2] + s];
                                for (i = 0; i < a.length; i += 4) n = a[i], r = a[i + 1], o = a[i + 2], n > c[0] && r > c[1] && o > c[2] && n < u[0] && r < u[1] && o < u[2] && (a[i + 3] = 0)
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uLow: t.getUniformLocation(e, "uLow"),
                                    uHigh: t.getUniformLocation(e, "uHigh")
                                }
                            },
                            sendUniformData: function(t, i) {
                                var n = new e.Color(this.color).getSource(),
                                    r = parseFloat(this.distance),
                                    o = [0 + n[0] / 255 - r, 0 + n[1] / 255 - r, 0 + n[2] / 255 - r, 1],
                                    a = [n[0] / 255 + r, n[1] / 255 + r, n[2] / 255 + r, 1];
                                t.uniform4fv(i.uLow, o), t.uniform4fv(i.uHigh, a)
                            },
                            toObject: function() {
                                return i(this.callSuper("toObject"), {
                                    color: this.color,
                                    distance: this.distance
                                })
                            }
                        }), e.Image.filters.RemoveColor.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass,
                            r = {
                                Brownie: [.5997, .34553, -.27082, 0, .186, -.0377, .86095, .15059, 0, -.1449, .24113, -.07441, .44972, 0, -.02965, 0, 0, 0, 1, 0],
                                Vintage: [.62793, .32021, -.03965, 0, .03784, .02578, .64411, .03259, 0, .02926, .0466, -.08512, .52416, 0, .02023, 0, 0, 0, 1, 0],
                                Kodachrome: [1.12855, -.39673, -.03992, 0, .24991, -.16404, 1.08352, -.05498, 0, .09698, -.16786, -.56034, 1.60148, 0, .13972, 0, 0, 0, 1, 0],
                                Technicolor: [1.91252, -.85453, -.09155, 0, .04624, -.30878, 1.76589, -.10601, 0, -.27589, -.2311, -.75018, 1.84759, 0, .12137, 0, 0, 0, 1, 0],
                                Polaroid: [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0],
                                Sepia: [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534, .131, 0, 0, 0, 0, 0, 1, 0],
                                BlackWhite: [1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 0, 0, 0, 1, 0]
                            };
                        for (var o in r) i[o] = n(i.ColorMatrix, {
                            type: o,
                            matrix: r[o],
                            mainParameter: !1,
                            colorsOnly: !0
                        }), e.Image.filters[o].fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric,
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.BlendColor = n(i.BaseFilter, {
                            type: "BlendColor",
                            color: "#323232",
                            mode: "multiply",
                            alpha: 1,
                            fragmentSource: {
                                multiply: "gl_FragColor.rgb *= uColor.rgb;\n",
                                screen: "gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",
                                add: "gl_FragColor.rgb += uColor.rgb;\n",
                                diff: "gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",
                                subtract: "gl_FragColor.rgb -= uColor.rgb;\n",
                                lighten: "gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",
                                darken: "gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",
                                exclusion: "gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",
                                overlay: "if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",
                                tint: "gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"
                            },
                            buildSource: function(t) {
                                return "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n" + this.fragmentSource[t] + "}\n}"
                            },
                            retrieveShader: function(t) {
                                var e, i = this.type + "_" + this.mode;
                                return t.programCache.hasOwnProperty(i) || (e = this.buildSource(this.mode), t.programCache[i] = this.createProgram(t.context, e)), t.programCache[i]
                            },
                            applyTo2d: function(t) {
                                var i, n, r, o, a, s, l, c = t.imageData.data,
                                    u = c.length,
                                    h = 1 - this.alpha;
                                i = (l = new e.Color(this.color).getSource())[0] * this.alpha, n = l[1] * this.alpha, r = l[2] * this.alpha;
                                for (var d = 0; d < u; d += 4) switch (o = c[d], a = c[d + 1], s = c[d + 2], this.mode) {
                                    case "multiply":
                                        c[d] = o * i / 255, c[d + 1] = a * n / 255, c[d + 2] = s * r / 255;
                                        break;
                                    case "screen":
                                        c[d] = 255 - (255 - o) * (255 - i) / 255, c[d + 1] = 255 - (255 - a) * (255 - n) / 255, c[d + 2] = 255 - (255 - s) * (255 - r) / 255;
                                        break;
                                    case "add":
                                        c[d] = o + i, c[d + 1] = a + n, c[d + 2] = s + r;
                                        break;
                                    case "diff":
                                    case "difference":
                                        c[d] = Math.abs(o - i), c[d + 1] = Math.abs(a - n), c[d + 2] = Math.abs(s - r);
                                        break;
                                    case "subtract":
                                        c[d] = o - i, c[d + 1] = a - n, c[d + 2] = s - r;
                                        break;
                                    case "darken":
                                        c[d] = Math.min(o, i), c[d + 1] = Math.min(a, n), c[d + 2] = Math.min(s, r);
                                        break;
                                    case "lighten":
                                        c[d] = Math.max(o, i), c[d + 1] = Math.max(a, n), c[d + 2] = Math.max(s, r);
                                        break;
                                    case "overlay":
                                        c[d] = i < 128 ? 2 * o * i / 255 : 255 - 2 * (255 - o) * (255 - i) / 255, c[d + 1] = n < 128 ? 2 * a * n / 255 : 255 - 2 * (255 - a) * (255 - n) / 255, c[d + 2] = r < 128 ? 2 * s * r / 255 : 255 - 2 * (255 - s) * (255 - r) / 255;
                                        break;
                                    case "exclusion":
                                        c[d] = i + o - 2 * i * o / 255, c[d + 1] = n + a - 2 * n * a / 255, c[d + 2] = r + s - 2 * r * s / 255;
                                        break;
                                    case "tint":
                                        c[d] = i + o * h, c[d + 1] = n + a * h, c[d + 2] = r + s * h
                                }
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uColor: t.getUniformLocation(e, "uColor")
                                }
                            },
                            sendUniformData: function(t, i) {
                                var n = new e.Color(this.color).getSource();
                                n[0] = this.alpha * n[0] / 255, n[1] = this.alpha * n[1] / 255, n[2] = this.alpha * n[2] / 255, n[3] = this.alpha, t.uniform4fv(i.uColor, n)
                            },
                            toObject: function() {
                                return {
                                    type: this.type,
                                    color: this.color,
                                    mode: this.mode,
                                    alpha: this.alpha
                                }
                            }
                        }), e.Image.filters.BlendColor.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric,
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.BlendImage = n(i.BaseFilter, {
                            type: "BlendImage",
                            image: null,
                            mode: "multiply",
                            alpha: 1,
                            vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
                            fragmentSource: {
                                multiply: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",
                                mask: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"
                            },
                            retrieveShader: function(t) {
                                var e = this.type + "_" + this.mode,
                                    i = this.fragmentSource[this.mode];
                                return t.programCache.hasOwnProperty(e) || (t.programCache[e] = this.createProgram(t.context, i)), t.programCache[e]
                            },
                            applyToWebGL: function(t) {
                                var e = t.context,
                                    i = this.createTexture(t.filterBackend, this.image);
                                this.bindAdditionalTexture(e, i, e.TEXTURE1), this.callSuper("applyToWebGL", t), this.unbindAdditionalTexture(e, e.TEXTURE1)
                            },
                            createTexture: function(t, e) {
                                return t.getCachedTexture(e.cacheKey, e._element)
                            },
                            calculateMatrix: function() {
                                var t = this.image,
                                    e = t._element.width,
                                    i = t._element.height;
                                return [1 / t.scaleX, 0, 0, 0, 1 / t.scaleY, 0, -t.left / e, -t.top / i, 1]
                            },
                            applyTo2d: function(t) {
                                var i, n, r, o, a, s, l, c, u, h, d, f = t.imageData,
                                    p = t.filterBackend.resources,
                                    g = f.data,
                                    m = g.length,
                                    v = f.width,
                                    b = f.height,
                                    y = this.image;
                                p.blendImage || (p.blendImage = e.util.createCanvasElement()), h = (u = p.blendImage).getContext("2d"), u.width !== v || u.height !== b ? (u.width = v, u.height = b) : h.clearRect(0, 0, v, b), h.setTransform(y.scaleX, 0, 0, y.scaleY, y.left, y.top), h.drawImage(y._element, 0, 0, v, b), d = h.getImageData(0, 0, v, b).data;
                                for (var _ = 0; _ < m; _ += 4) switch (a = g[_], s = g[_ + 1], l = g[_ + 2], c = g[_ + 3], i = d[_], n = d[_ + 1], r = d[_ + 2], o = d[_ + 3], this.mode) {
                                    case "multiply":
                                        g[_] = a * i / 255, g[_ + 1] = s * n / 255, g[_ + 2] = l * r / 255, g[_ + 3] = c * o / 255;
                                        break;
                                    case "mask":
                                        g[_ + 3] = o
                                }
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uTransformMatrix: t.getUniformLocation(e, "uTransformMatrix"),
                                    uImage: t.getUniformLocation(e, "uImage")
                                }
                            },
                            sendUniformData: function(t, e) {
                                var i = this.calculateMatrix();
                                t.uniform1i(e.uImage, 1), t.uniformMatrix3fv(e.uTransformMatrix, !1, i)
                            },
                            toObject: function() {
                                return {
                                    type: this.type,
                                    image: this.image && this.image.toObject(),
                                    mode: this.mode,
                                    alpha: this.alpha
                                }
                            }
                        }), e.Image.filters.BlendImage.fromObject = function(t, i) {
                            e.Image.fromObject(t.image, function(n) {
                                var r = e.util.object.clone(t);
                                r.image = n, i(new e.Image.filters.BlendImage(r))
                            })
                        }
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = Math.pow,
                            n = Math.floor,
                            r = Math.sqrt,
                            o = Math.abs,
                            a = Math.round,
                            s = Math.sin,
                            l = Math.ceil,
                            c = e.Image.filters,
                            u = e.util.createClass;
                        c.Resize = u(c.BaseFilter, {
                            type: "Resize",
                            resizeType: "hermite",
                            scaleX: 1,
                            scaleY: 1,
                            lanczosLobes: 3,
                            getUniformLocations: function(t, e) {
                                return {
                                    uDelta: t.getUniformLocation(e, "uDelta"),
                                    uTaps: t.getUniformLocation(e, "uTaps")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform2fv(e.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]), t.uniform1fv(e.uTaps, this.taps)
                            },
                            retrieveShader: function(t) {
                                var e = this.getFilterWindow(),
                                    i = this.type + "_" + e;
                                if (!t.programCache.hasOwnProperty(i)) {
                                    var n = this.generateShader(e);
                                    t.programCache[i] = this.createProgram(t.context, n)
                                }
                                return t.programCache[i]
                            },
                            getFilterWindow: function() {
                                var t = this.tempScale;
                                return Math.ceil(this.lanczosLobes / t)
                            },
                            getTaps: function() {
                                for (var t = this.lanczosCreate(this.lanczosLobes), e = this.tempScale, i = this.getFilterWindow(), n = new Array(i), r = 1; r <= i; r++) n[r - 1] = t(r * e);
                                return n
                            },
                            generateShader: function(t) {
                                for (var e = new Array(t), i = this.fragmentSourceTOP, n = 1; n <= t; n++) e[n - 1] = n + ".0 * uDelta";
                                return i += "uniform float uTaps[" + t + "];\n", i += "void main() {\n", i += "  vec4 color = texture2D(uTexture, vTexCoord);\n", i += "  float sum = 1.0;\n", e.forEach(function(t, e) {
                                    i += "  color += texture2D(uTexture, vTexCoord + " + t + ") * uTaps[" + e + "];\n", i += "  color += texture2D(uTexture, vTexCoord - " + t + ") * uTaps[" + e + "];\n", i += "  sum += 2.0 * uTaps[" + e + "];\n"
                                }), i += "  gl_FragColor = color / sum;\n", i += "}"
                            },
                            fragmentSourceTOP: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",
                            applyTo: function(t) {
                                t.webgl ? (t.passes++, this.width = t.sourceWidth, this.horizontal = !0, this.dW = Math.round(this.width * this.scaleX), this.dH = t.sourceHeight, this.tempScale = this.dW / this.width, this.taps = this.getTaps(), t.destinationWidth = this.dW, this._setupFrameBuffer(t), this.applyToWebGL(t), this._swapTextures(t), t.sourceWidth = t.destinationWidth, this.height = t.sourceHeight, this.horizontal = !1, this.dH = Math.round(this.height * this.scaleY), this.tempScale = this.dH / this.height, this.taps = this.getTaps(), t.destinationHeight = this.dH, this._setupFrameBuffer(t), this.applyToWebGL(t), this._swapTextures(t), t.sourceHeight = t.destinationHeight) : this.applyTo2d(t)
                            },
                            isNeutralState: function() {
                                return 1 === this.scaleX && 1 === this.scaleY
                            },
                            lanczosCreate: function(t) {
                                return function(e) {
                                    if (e >= t || e <= -t) return 0;
                                    if (e < 1.1920929e-7 && e > -1.1920929e-7) return 1;
                                    var i = (e *= Math.PI) / t;
                                    return s(e) / e * s(i) / i
                                }
                            },
                            applyTo2d: function(t) {
                                var e = t.imageData,
                                    i = this.scaleX,
                                    n = this.scaleY;
                                this.rcpScaleX = 1 / i, this.rcpScaleY = 1 / n;
                                var r, o = e.width,
                                    s = e.height,
                                    l = a(o * i),
                                    c = a(s * n);
                                "sliceHack" === this.resizeType ? r = this.sliceByTwo(t, o, s, l, c) : "hermite" === this.resizeType ? r = this.hermiteFastResize(t, o, s, l, c) : "bilinear" === this.resizeType ? r = this.bilinearFiltering(t, o, s, l, c) : "lanczos" === this.resizeType && (r = this.lanczosResize(t, o, s, l, c)), t.imageData = r
                            },
                            sliceByTwo: function(t, i, r, o, a) {
                                var s, l, c = t.imageData,
                                    u = !1,
                                    h = !1,
                                    d = .5 * i,
                                    f = .5 * r,
                                    p = e.filterBackend.resources,
                                    g = 0,
                                    m = 0,
                                    v = i,
                                    b = 0;
                                for (p.sliceByTwo || (p.sliceByTwo = document.createElement("canvas")), ((s = p.sliceByTwo).width < 1.5 * i || s.height < r) && (s.width = 1.5 * i, s.height = r), (l = s.getContext("2d")).clearRect(0, 0, 1.5 * i, r), l.putImageData(c, 0, 0), o = n(o), a = n(a); !u || !h;) i = d, r = f, o < n(.5 * d) ? d = n(.5 * d) : (d = o, u = !0), a < n(.5 * f) ? f = n(.5 * f) : (f = a, h = !0), l.drawImage(s, g, m, i, r, v, b, d, f), g = v, m = b, b += f;
                                return l.getImageData(g, m, o, a)
                            },
                            lanczosResize: function(t, e, a, s, c) {
                                var u = t.imageData.data,
                                    h = t.ctx.createImageData(s, c),
                                    d = h.data,
                                    f = this.lanczosCreate(this.lanczosLobes),
                                    p = this.rcpScaleX,
                                    g = this.rcpScaleY,
                                    m = 2 / this.rcpScaleX,
                                    v = 2 / this.rcpScaleY,
                                    b = l(p * this.lanczosLobes / 2),
                                    y = l(g * this.lanczosLobes / 2),
                                    _ = {},
                                    x = {},
                                    w = {};
                                return function t(l) {
                                    var C, S, k, O, T, E, A, P, M, j, D;
                                    for (x.x = (l + .5) * p, w.x = n(x.x), C = 0; C < c; C++) {
                                        for (x.y = (C + .5) * g, w.y = n(x.y), T = 0, E = 0, A = 0, P = 0, M = 0, S = w.x - b; S <= w.x + b; S++)
                                            if (!(S < 0 || S >= e)) {
                                                j = n(1e3 * o(S - x.x)), _[j] || (_[j] = {});
                                                for (var I = w.y - y; I <= w.y + y; I++) I < 0 || I >= a || (D = n(1e3 * o(I - x.y)), _[j][D] || (_[j][D] = f(r(i(j * m, 2) + i(D * v, 2)) / 1e3)), (k = _[j][D]) > 0 && (T += k, E += k * u[O = 4 * (I * e + S)], A += k * u[O + 1], P += k * u[O + 2], M += k * u[O + 3]))
                                            }
                                        d[O = 4 * (C * s + l)] = E / T, d[O + 1] = A / T, d[O + 2] = P / T, d[O + 3] = M / T
                                    }
                                    return ++l < s ? t(l) : h
                                }(0)
                            },
                            bilinearFiltering: function(t, e, i, r, o) {
                                var a, s, l, c, u, h, d, f, p, g = 0,
                                    m = this.rcpScaleX,
                                    v = this.rcpScaleY,
                                    b = 4 * (e - 1),
                                    y = t.imageData.data,
                                    _ = t.ctx.createImageData(r, o),
                                    x = _.data;
                                for (l = 0; l < o; l++)
                                    for (c = 0; c < r; c++)
                                        for (u = m * c - (a = n(m * c)), h = v * l - (s = n(v * l)), p = 4 * (s * e + a), d = 0; d < 4; d++) f = y[p + d] * (1 - u) * (1 - h) + y[p + 4 + d] * u * (1 - h) + y[p + b + d] * h * (1 - u) + y[p + b + 4 + d] * u * h, x[g++] = f;
                                return _
                            },
                            hermiteFastResize: function(t, e, i, a, s) {
                                for (var c = this.rcpScaleX, u = this.rcpScaleY, h = l(c / 2), d = l(u / 2), f = t.imageData.data, p = t.ctx.createImageData(a, s), g = p.data, m = 0; m < s; m++)
                                    for (var v = 0; v < a; v++) {
                                        for (var b = 4 * (v + m * a), y = 0, _ = 0, x = 0, w = 0, C = 0, S = 0, k = 0, O = (m + .5) * u, T = n(m * u); T < (m + 1) * u; T++)
                                            for (var E = o(O - (T + .5)) / d, A = (v + .5) * c, P = E * E, M = n(v * c); M < (v + 1) * c; M++) {
                                                var j = o(A - (M + .5)) / h,
                                                    D = r(P + j * j);
                                                D > 1 && D < -1 || (y = 2 * D * D * D - 3 * D * D + 1) > 0 && (k += y * f[(j = 4 * (M + T * e)) + 3], x += y, f[j + 3] < 255 && (y = y * f[j + 3] / 250), w += y * f[j], C += y * f[j + 1], S += y * f[j + 2], _ += y)
                                            }
                                        g[b] = w / _, g[b + 1] = C / _, g[b + 2] = S / _, g[b + 3] = k / x
                                    }
                                return p
                            },
                            toObject: function() {
                                return {
                                    type: this.type,
                                    scaleX: this.scaleX,
                                    scaleY: this.scaleY,
                                    resizeType: this.resizeType,
                                    lanczosLobes: this.lanczosLobes
                                }
                            }
                        }), e.Image.filters.Resize.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Contrast = n(i.BaseFilter, {
                            type: "Contrast",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",
                            contrast: 0,
                            mainParameter: "contrast",
                            applyTo2d: function(t) {
                                if (0 !== this.contrast) {
                                    var e, i = t.imageData.data,
                                        n = i.length,
                                        r = Math.floor(255 * this.contrast),
                                        o = 259 * (r + 255) / (255 * (259 - r));
                                    for (e = 0; e < n; e += 4) i[e] = o * (i[e] - 128) + 128, i[e + 1] = o * (i[e + 1] - 128) + 128, i[e + 2] = o * (i[e + 2] - 128) + 128
                                }
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uContrast: t.getUniformLocation(e, "uContrast")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1f(e.uContrast, this.contrast)
                            }
                        }), e.Image.filters.Contrast.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Saturation = n(i.BaseFilter, {
                            type: "Saturation",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",
                            saturation: 0,
                            mainParameter: "saturation",
                            applyTo2d: function(t) {
                                if (0 !== this.saturation) {
                                    var e, i, n = t.imageData.data,
                                        r = n.length,
                                        o = -this.saturation;
                                    for (e = 0; e < r; e += 4) i = Math.max(n[e], n[e + 1], n[e + 2]), n[e] += i !== n[e] ? (i - n[e]) * o : 0, n[e + 1] += i !== n[e + 1] ? (i - n[e + 1]) * o : 0, n[e + 2] += i !== n[e + 2] ? (i - n[e + 2]) * o : 0
                                }
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uSaturation: t.getUniformLocation(e, "uSaturation")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform1f(e.uSaturation, -this.saturation)
                            }
                        }), e.Image.filters.Saturation.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Blur = n(i.BaseFilter, {
                            type: "Blur",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",
                            blur: 0,
                            mainParameter: "blur",
                            applyTo: function(t) {
                                t.webgl ? (this.aspectRatio = t.sourceWidth / t.sourceHeight, t.passes++, this._setupFrameBuffer(t), this.horizontal = !0, this.applyToWebGL(t), this._swapTextures(t), this._setupFrameBuffer(t), this.horizontal = !1, this.applyToWebGL(t), this._swapTextures(t)) : this.applyTo2d(t)
                            },
                            applyTo2d: function(t) {
                                t.imageData = this.simpleBlur(t)
                            },
                            simpleBlur: function(t) {
                                var i, n, r = t.filterBackend.resources,
                                    o = t.imageData.width,
                                    a = t.imageData.height;
                                r.blurLayer1 || (r.blurLayer1 = e.util.createCanvasElement(), r.blurLayer2 = e.util.createCanvasElement()), i = r.blurLayer1, n = r.blurLayer2, i.width === o && i.height === a || (n.width = i.width = o, n.height = i.height = a);
                                var s, l, c, u, h = i.getContext("2d"),
                                    d = n.getContext("2d"),
                                    f = .06 * this.blur * .5;
                                for (h.putImageData(t.imageData, 0, 0), d.clearRect(0, 0, o, a), u = -15; u <= 15; u++) s = (Math.random() - .5) / 4, c = f * (l = u / 15) * o + s, d.globalAlpha = 1 - Math.abs(l), d.drawImage(i, c, s), h.drawImage(n, 0, 0), d.globalAlpha = 1, d.clearRect(0, 0, n.width, n.height);
                                for (u = -15; u <= 15; u++) s = (Math.random() - .5) / 4, c = f * (l = u / 15) * a + s, d.globalAlpha = 1 - Math.abs(l), d.drawImage(i, s, c), h.drawImage(n, 0, 0), d.globalAlpha = 1, d.clearRect(0, 0, n.width, n.height);
                                t.ctx.drawImage(i, 0, 0);
                                var p = t.ctx.getImageData(0, 0, i.width, i.height);
                                return h.globalAlpha = 1, h.clearRect(0, 0, i.width, i.height), p
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    delta: t.getUniformLocation(e, "uDelta")
                                }
                            },
                            sendUniformData: function(t, e) {
                                var i = this.chooseRightDelta();
                                t.uniform2fv(e.delta, i)
                            },
                            chooseRightDelta: function() {
                                var t, e = 1,
                                    i = [0, 0];
                                return this.horizontal ? this.aspectRatio > 1 && (e = 1 / this.aspectRatio) : this.aspectRatio < 1 && (e = this.aspectRatio), t = e * this.blur * .12, this.horizontal ? i[0] = t : i[1] = t, i
                            }
                        }), i.Blur.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Gamma = n(i.BaseFilter, {
                            type: "Gamma",
                            fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",
                            gamma: [1, 1, 1],
                            mainParameter: "gamma",
                            initialize: function(t) {
                                this.gamma = [1, 1, 1], i.BaseFilter.prototype.initialize.call(this, t)
                            },
                            applyTo2d: function(t) {
                                var e, i = t.imageData.data,
                                    n = this.gamma,
                                    r = i.length,
                                    o = 1 / n[0],
                                    a = 1 / n[1],
                                    s = 1 / n[2];
                                for (this.rVals || (this.rVals = new Uint8Array(256), this.gVals = new Uint8Array(256), this.bVals = new Uint8Array(256)), e = 0, r = 256; e < r; e++) this.rVals[e] = 255 * Math.pow(e / 255, o), this.gVals[e] = 255 * Math.pow(e / 255, a), this.bVals[e] = 255 * Math.pow(e / 255, s);
                                for (e = 0, r = i.length; e < r; e += 4) i[e] = this.rVals[i[e]], i[e + 1] = this.gVals[i[e + 1]], i[e + 2] = this.bVals[i[e + 2]]
                            },
                            getUniformLocations: function(t, e) {
                                return {
                                    uGamma: t.getUniformLocation(e, "uGamma")
                                }
                            },
                            sendUniformData: function(t, e) {
                                t.uniform3fv(e.uGamma, this.gamma)
                            }
                        }), e.Image.filters.Gamma.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.Composed = n(i.BaseFilter, {
                            type: "Composed",
                            subFilters: [],
                            initialize: function(t) {
                                this.callSuper("initialize", t), this.subFilters = this.subFilters.slice(0)
                            },
                            applyTo: function(t) {
                                t.passes += this.subFilters.length - 1, this.subFilters.forEach(function(e) {
                                    e.applyTo(t)
                                })
                            },
                            toObject: function() {
                                return e.util.object.extend(this.callSuper("toObject"), {
                                    subFilters: this.subFilters.map(function(t) {
                                        return t.toObject()
                                    })
                                })
                            },
                            isNeutralState: function() {
                                return !this.subFilters.some(function(t) {
                                    return !t.isNeutralState()
                                })
                            }
                        }), e.Image.filters.Composed.fromObject = function(t, i) {
                            var n = (t.subFilters || []).map(function(t) {
                                    return new e.Image.filters[t.type](t)
                                }),
                                r = new e.Image.filters.Composed({
                                    subFilters: n
                                });
                            return i && i(r), r
                        }
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.Image.filters,
                            n = e.util.createClass;
                        i.HueRotation = n(i.ColorMatrix, {
                            type: "HueRotation",
                            rotation: 0,
                            mainParameter: "rotation",
                            calculateMatrix: function() {
                                var t = this.rotation * Math.PI,
                                    i = e.util.cos(t),
                                    n = e.util.sin(t),
                                    r = Math.sqrt(1 / 3) * n,
                                    o = 1 - i;
                                this.matrix = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], this.matrix[0] = i + o / 3, this.matrix[1] = 1 / 3 * o - r, this.matrix[2] = 1 / 3 * o + r, this.matrix[5] = 1 / 3 * o + r, this.matrix[6] = i + 1 / 3 * o, this.matrix[7] = 1 / 3 * o - r, this.matrix[10] = 1 / 3 * o - r, this.matrix[11] = 1 / 3 * o + r, this.matrix[12] = i + 1 / 3 * o
                            },
                            isNeutralState: function(t) {
                                return this.calculateMatrix(), i.BaseFilter.prototype.isNeutralState.call(this, t)
                            },
                            applyTo: function(t) {
                                this.calculateMatrix(), i.BaseFilter.prototype.applyTo.call(this, t)
                            }
                        }), e.Image.filters.HueRotation.fromObject = e.Image.filters.BaseFilter.fromObject
                    }(e),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {}),
                            i = e.util.object.clone;
                        e.Text ? e.warn("fabric.Text is already defined") : (e.Text = e.util.createClass(e.Object, {
                            _dimensionAffectingProps: ["fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "text", "charSpacing", "textAlign", "styles"],
                            _reNewline: /\r?\n/,
                            _reSpacesAndTabs: /[ \t\r]/g,
                            _reSpaceAndTab: /[ \t\r]/,
                            _reWords: /\S+/g,
                            type: "text",
                            fontSize: 40,
                            fontWeight: "normal",
                            fontFamily: "Times New Roman",
                            underline: !1,
                            overline: !1,
                            linethrough: !1,
                            textAlign: "left",
                            fontStyle: "normal",
                            lineHeight: 1.16,
                            superscript: {
                                size: .6,
                                baseline: -.35
                            },
                            subscript: {
                                size: .6,
                                baseline: .11
                            },
                            textBackgroundColor: "",
                            stateProperties: e.Object.prototype.stateProperties.concat("fontFamily", "fontWeight", "fontSize", "text", "underline", "overline", "linethrough", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "charSpacing", "styles"),
                            cacheProperties: e.Object.prototype.cacheProperties.concat("fontFamily", "fontWeight", "fontSize", "text", "underline", "overline", "linethrough", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "charSpacing", "styles"),
                            stroke: null,
                            shadow: null,
                            _fontSizeFraction: .222,
                            offsets: {
                                underline: .1,
                                linethrough: -.315,
                                overline: -.88
                            },
                            _fontSizeMult: 1.13,
                            charSpacing: 0,
                            styles: null,
                            _measuringContext: null,
                            deltaY: 0,
                            _styleProperties: ["stroke", "strokeWidth", "fill", "fontFamily", "fontSize", "fontWeight", "fontStyle", "underline", "overline", "linethrough", "deltaY", "textBackgroundColor"],
                            __charBounds: [],
                            CACHE_FONT_SIZE: 400,
                            MIN_TEXT_WIDTH: 2,
                            initialize: function(t, e) {
                                this.styles = e && e.styles || {}, this.text = t, this.__skipDimension = !0, this.callSuper("initialize", e), this.__skipDimension = !1, this.initDimensions(), this.setCoords(), this.setupState({
                                    propertySet: "_dimensionAffectingProps"
                                })
                            },
                            getMeasuringContext: function() {
                                return e._measuringContext || (e._measuringContext = this.canvas && this.canvas.contextCache || e.util.createCanvasElement().getContext("2d")), e._measuringContext
                            },
                            _splitText: function() {
                                var t = this._splitTextIntoLines(this.text);
                                return this.textLines = t.lines, this._textLines = t.graphemeLines, this._unwrappedTextLines = t._unwrappedLines, this._text = t.graphemeText, t
                            },
                            initDimensions: function() {
                                this.__skipDimension || (this._splitText(), this._clearCache(), this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH, -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({
                                    propertySet: "_dimensionAffectingProps"
                                }))
                            },
                            enlargeSpaces: function() {
                                for (var t, e, i, n, r, o, a, s = 0, l = this._textLines.length; s < l; s++)
                                    if (("justify" === this.textAlign || s !== l - 1 && !this.isEndOfWrapping(s)) && (n = 0, r = this._textLines[s], (e = this.getLineWidth(s)) < this.width && (a = this.textLines[s].match(this._reSpacesAndTabs)))) {
                                        i = a.length, t = (this.width - e) / i;
                                        for (var c = 0, u = r.length; c <= u; c++) o = this.__charBounds[s][c], this._reSpaceAndTab.test(r[c]) ? (o.width += t, o.kernedWidth += t, o.left += n, n += t) : o.left += n
                                    }
                            },
                            isEndOfWrapping: function(t) {
                                return t === this._textLines.length - 1
                            },
                            toString: function() {
                                return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
                            },
                            _getCacheCanvasDimensions: function() {
                                var t = this.callSuper("_getCacheCanvasDimensions"),
                                    e = this.fontSize;
                                return t.width += e * t.zoomX, t.height += e * t.zoomY, t
                            },
                            _render: function(t) {
                                this._setTextStyles(t), this._renderTextLinesBackground(t), this._renderTextDecoration(t, "underline"), this._renderText(t), this._renderTextDecoration(t, "overline"), this._renderTextDecoration(t, "linethrough")
                            },
                            _renderText: function(t) {
                                "stroke" === this.paintFirst ? (this._renderTextStroke(t), this._renderTextFill(t)) : (this._renderTextFill(t), this._renderTextStroke(t))
                            },
                            _setTextStyles: function(t, e, i) {
                                t.textBaseline = "alphabetic", t.font = this._getFontDeclaration(e, i)
                            },
                            calcTextWidth: function() {
                                for (var t = this.getLineWidth(0), e = 1, i = this._textLines.length; e < i; e++) {
                                    var n = this.getLineWidth(e);
                                    n > t && (t = n)
                                }
                                return t
                            },
                            _renderTextLine: function(t, e, i, n, r, o) {
                                this._renderChars(t, e, i, n, r, o)
                            },
                            _renderTextLinesBackground: function(t) {
                                if (this.textBackgroundColor || this.styleHas("textBackgroundColor")) {
                                    for (var e, i, n, r, o, a, s = 0, l = t.fillStyle, c = this._getLeftOffset(), u = this._getTopOffset(), h = 0, d = 0, f = 0, p = this._textLines.length; f < p; f++)
                                        if (e = this.getHeightOfLine(f), this.textBackgroundColor || this.styleHas("textBackgroundColor", f)) {
                                            n = this._textLines[f], i = this._getLineLeftOffset(f), d = 0, h = 0, r = this.getValueOfPropertyAt(f, 0, "textBackgroundColor");
                                            for (var g = 0, m = n.length; g < m; g++) o = this.__charBounds[f][g], (a = this.getValueOfPropertyAt(f, g, "textBackgroundColor")) !== r ? (t.fillStyle = r, r && t.fillRect(c + i + h, u + s, d, e / this.lineHeight), h = o.left, d = o.width, r = a) : d += o.kernedWidth;
                                            a && (t.fillStyle = a, t.fillRect(c + i + h, u + s, d, e / this.lineHeight)), s += e
                                        } else s += e;
                                    t.fillStyle = l, this._removeShadow(t)
                                }
                            },
                            getFontCache: function(t) {
                                var i = t.fontFamily.toLowerCase();
                                e.charWidthsCache[i] || (e.charWidthsCache[i] = {});
                                var n = e.charWidthsCache[i],
                                    r = t.fontStyle.toLowerCase() + "_" + (t.fontWeight + "").toLowerCase();
                                return n[r] || (n[r] = {}), n[r]
                            },
                            _applyCharStyles: function(t, e, i, n, r) {
                                this._setFillStyles(e, r), this._setStrokeStyles(e, r), e.font = this._getFontDeclaration(r)
                            },
                            _measureChar: function(t, e, i, n) {
                                var r, o, a, s, l = this.getFontCache(e),
                                    c = i + t,
                                    u = this._getFontDeclaration(e) === this._getFontDeclaration(n),
                                    h = e.fontSize / this.CACHE_FONT_SIZE;
                                if (i && void 0 !== l[i] && (a = l[i]), void 0 !== l[t] && (s = r = l[t]), u && void 0 !== l[c] && (s = (o = l[c]) - a), void 0 === r || void 0 === a || void 0 === o) {
                                    var d = this.getMeasuringContext();
                                    this._setTextStyles(d, e, !0)
                                }
                                return void 0 === r && (s = r = d.measureText(t).width, l[t] = r), void 0 === a && u && i && (a = d.measureText(i).width, l[i] = a), u && void 0 === o && (o = d.measureText(c).width, l[c] = o, s = o - a), {
                                    width: r * h,
                                    kernedWidth: s * h
                                }
                            },
                            getHeightOfChar: function(t, e) {
                                return this.getValueOfPropertyAt(t, e, "fontSize")
                            },
                            measureLine: function(t) {
                                var e = this._measureLine(t);
                                return 0 !== this.charSpacing && (e.width -= this._getWidthOfCharSpacing()), e.width < 0 && (e.width = 0), e
                            },
                            _measureLine: function(t) {
                                var e, i, n, r, o = 0,
                                    a = this._textLines[t],
                                    s = new Array(a.length);
                                for (this.__charBounds[t] = s, e = 0; e < a.length; e++) i = a[e], r = this._getGraphemeBox(i, t, e, n), s[e] = r, o += r.kernedWidth, n = i;
                                return s[e] = {
                                    left: r ? r.left + r.width : 0,
                                    width: 0,
                                    kernedWidth: 0,
                                    height: this.fontSize
                                }, {
                                    width: o,
                                    numOfSpaces: 0
                                }
                            },
                            _getGraphemeBox: function(t, e, i, n, r) {
                                var o, a = this.getCompleteStyleDeclaration(e, i),
                                    s = n ? this.getCompleteStyleDeclaration(e, i - 1) : {},
                                    l = this._measureChar(t, a, n, s),
                                    c = l.kernedWidth,
                                    u = l.width;
                                0 !== this.charSpacing && (u += o = this._getWidthOfCharSpacing(), c += o);
                                var h = {
                                    width: u,
                                    left: 0,
                                    height: a.fontSize,
                                    kernedWidth: c,
                                    deltaY: a.deltaY
                                };
                                if (i > 0 && !r) {
                                    var d = this.__charBounds[e][i - 1];
                                    h.left = d.left + d.width + l.kernedWidth - l.width
                                }
                                return h
                            },
                            getHeightOfLine: function(t) {
                                if (this.__lineHeights[t]) return this.__lineHeights[t];
                                for (var e = this._textLines[t], i = this.getHeightOfChar(t, 0), n = 1, r = e.length; n < r; n++) i = Math.max(this.getHeightOfChar(t, n), i);
                                return this.__lineHeights[t] = i * this.lineHeight * this._fontSizeMult
                            },
                            calcTextHeight: function() {
                                for (var t, e = 0, i = 0, n = this._textLines.length; i < n; i++) t = this.getHeightOfLine(i), e += i === n - 1 ? t / this.lineHeight : t;
                                return e
                            },
                            _getLeftOffset: function() {
                                return -this.width / 2
                            },
                            _getTopOffset: function() {
                                return -this.height / 2
                            },
                            _renderTextCommon: function(t, e) {
                                t.save();
                                for (var i = 0, n = this._getLeftOffset(), r = this._getTopOffset(), o = this._applyPatternGradientTransform(t, "fillText" === e ? this.fill : this.stroke), a = 0, s = this._textLines.length; a < s; a++) {
                                    var l = this.getHeightOfLine(a),
                                        c = l / this.lineHeight,
                                        u = this._getLineLeftOffset(a);
                                    this._renderTextLine(e, t, this._textLines[a], n + u - o.offsetX, r + i + c - o.offsetY, a), i += l
                                }
                                t.restore()
                            },
                            _renderTextFill: function(t) {
                                (this.fill || this.styleHas("fill")) && this._renderTextCommon(t, "fillText")
                            },
                            _renderTextStroke: function(t) {
                                (this.stroke && 0 !== this.strokeWidth || !this.isEmptyStyles()) && (this.shadow && !this.shadow.affectStroke && this._removeShadow(t), t.save(), this._setLineDash(t, this.strokeDashArray), t.beginPath(), this._renderTextCommon(t, "strokeText"), t.closePath(), t.restore())
                            },
                            _renderChars: function(t, e, i, n, r, o) {
                                var a, s, l, c, u = this.getHeightOfLine(o),
                                    h = -1 !== this.textAlign.indexOf("justify"),
                                    d = "",
                                    f = 0,
                                    p = !h && 0 === this.charSpacing && this.isEmptyStyles(o);
                                if (e.save(), r -= u * this._fontSizeFraction / this.lineHeight, p) return this._renderChar(t, e, o, 0, this.textLines[o], n, r, u), void e.restore();
                                for (var g = 0, m = i.length - 1; g <= m; g++) c = g === m || this.charSpacing, d += i[g], l = this.__charBounds[o][g], 0 === f ? (n += l.kernedWidth - l.width, f += l.width) : f += l.kernedWidth, h && !c && this._reSpaceAndTab.test(i[g]) && (c = !0), c || (a = a || this.getCompleteStyleDeclaration(o, g), s = this.getCompleteStyleDeclaration(o, g + 1), c = this._hasStyleChanged(a, s)), c && (this._renderChar(t, e, o, g, d, n, r, u), d = "", a = s, n += f, f = 0);
                                e.restore()
                            },
                            _renderChar: function(t, e, i, n, r, o, a) {
                                var s = this._getStyleDeclaration(i, n),
                                    l = this.getCompleteStyleDeclaration(i, n),
                                    c = "fillText" === t && l.fill,
                                    u = "strokeText" === t && l.stroke && l.strokeWidth;
                                (u || c) && (s && e.save(), this._applyCharStyles(t, e, i, n, l), s && s.textBackgroundColor && this._removeShadow(e), s && s.deltaY && (a += s.deltaY), c && e.fillText(r, o, a), u && e.strokeText(r, o, a), s && e.restore())
                            },
                            setSuperscript: function(t, e) {
                                return this._setScript(t, e, this.superscript)
                            },
                            setSubscript: function(t, e) {
                                return this._setScript(t, e, this.subscript)
                            },
                            _setScript: function(t, e, i) {
                                var n = this.get2DCursorLocation(t, !0),
                                    r = this.getValueOfPropertyAt(n.lineIndex, n.charIndex, "fontSize"),
                                    o = this.getValueOfPropertyAt(n.lineIndex, n.charIndex, "deltaY"),
                                    a = {
                                        fontSize: r * i.size,
                                        deltaY: o + r * i.baseline
                                    };
                                return this.setSelectionStyles(a, t, e), this
                            },
                            _hasStyleChanged: function(t, e) {
                                return t.fill !== e.fill || t.stroke !== e.stroke || t.strokeWidth !== e.strokeWidth || t.fontSize !== e.fontSize || t.fontFamily !== e.fontFamily || t.fontWeight !== e.fontWeight || t.fontStyle !== e.fontStyle || t.deltaY !== e.deltaY
                            },
                            _hasStyleChangedForSvg: function(t, e) {
                                return this._hasStyleChanged(t, e) || t.overline !== e.overline || t.underline !== e.underline || t.linethrough !== e.linethrough
                            },
                            _getLineLeftOffset: function(t) {
                                var e = this.getLineWidth(t);
                                return "center" === this.textAlign ? (this.width - e) / 2 : "right" === this.textAlign ? this.width - e : "justify-center" === this.textAlign && this.isEndOfWrapping(t) ? (this.width - e) / 2 : "justify-right" === this.textAlign && this.isEndOfWrapping(t) ? this.width - e : 0
                            },
                            _clearCache: function() {
                                this.__lineWidths = [], this.__lineHeights = [], this.__charBounds = []
                            },
                            _shouldClearDimensionCache: function() {
                                var t = this._forceClearCache;
                                return t || (t = this.hasStateChanged("_dimensionAffectingProps")), t && (this.dirty = !0, this._forceClearCache = !1), t
                            },
                            getLineWidth: function(t) {
                                return this.__lineWidths[t] ? this.__lineWidths[t] : (e = "" === this._textLines[t] ? 0 : this.measureLine(t).width, this.__lineWidths[t] = e, e);
                                var e
                            },
                            _getWidthOfCharSpacing: function() {
                                return 0 !== this.charSpacing ? this.fontSize * this.charSpacing / 1e3 : 0
                            },
                            getValueOfPropertyAt: function(t, e, i) {
                                var n = this._getStyleDeclaration(t, e);
                                return n && void 0 !== n[i] ? n[i] : this[i]
                            },
                            _renderTextDecoration: function(t, e) {
                                if (this[e] || this.styleHas(e)) {
                                    for (var i, n, r, o, a, s, l, c, u, h, d, f, p, g, m, v, b = this._getLeftOffset(), y = this._getTopOffset(), _ = this._getWidthOfCharSpacing(), x = 0, w = this._textLines.length; x < w; x++)
                                        if (i = this.getHeightOfLine(x), this[e] || this.styleHas(e, x)) {
                                            l = this._textLines[x], g = i / this.lineHeight, o = this._getLineLeftOffset(x), h = 0, d = 0, c = this.getValueOfPropertyAt(x, 0, e), v = this.getValueOfPropertyAt(x, 0, "fill"), u = y + g * (1 - this._fontSizeFraction), n = this.getHeightOfChar(x, 0), a = this.getValueOfPropertyAt(x, 0, "deltaY");
                                            for (var C = 0, S = l.length; C < S; C++) f = this.__charBounds[x][C], p = this.getValueOfPropertyAt(x, C, e), m = this.getValueOfPropertyAt(x, C, "fill"), r = this.getHeightOfChar(x, C), s = this.getValueOfPropertyAt(x, C, "deltaY"), (p !== c || m !== v || r !== n || s !== a) && d > 0 ? (t.fillStyle = v, c && v && t.fillRect(b + o + h, u + this.offsets[e] * n + a, d, this.fontSize / 15), h = f.left, d = f.width, c = p, v = m, n = r, a = s) : d += f.kernedWidth;
                                            t.fillStyle = m, p && m && t.fillRect(b + o + h, u + this.offsets[e] * n + a, d - _, this.fontSize / 15), y += i
                                        } else y += i;
                                    this._removeShadow(t)
                                }
                            },
                            _getFontDeclaration: function(t, i) {
                                var n = t || this,
                                    r = this.fontFamily,
                                    o = e.Text.genericFonts.indexOf(r.toLowerCase()) > -1,
                                    a = void 0 === r || r.indexOf("'") > -1 || r.indexOf('"') > -1 || o ? n.fontFamily : '"' + n.fontFamily + '"';
                                return [e.isLikelyNode ? n.fontWeight : n.fontStyle, e.isLikelyNode ? n.fontStyle : n.fontWeight, i ? this.CACHE_FONT_SIZE + "px" : n.fontSize + "px", a].join(" ")
                            },
                            render: function(t) {
                                this.visible && (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (this._shouldClearDimensionCache() && this.initDimensions(), this.callSuper("render", t)))
                            },
                            _splitTextIntoLines: function(t) {
                                for (var i = t.split(this._reNewline), n = new Array(i.length), r = ["\n"], o = [], a = 0; a < i.length; a++) n[a] = e.util.string.graphemeSplit(i[a]), o = o.concat(n[a], r);
                                return o.pop(), {
                                    _unwrappedLines: n,
                                    lines: i,
                                    graphemeText: o,
                                    graphemeLines: n
                                }
                            },
                            toObject: function(t) {
                                var e = ["text", "fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "underline", "overline", "linethrough", "textAlign", "textBackgroundColor", "charSpacing"].concat(t),
                                    n = this.callSuper("toObject", e);
                                return n.styles = i(this.styles, !0), n
                            },
                            set: function(t, e) {
                                this.callSuper("set", t, e);
                                var i = !1;
                                if ("object" == typeof t)
                                    for (var n in t) i = i || -1 !== this._dimensionAffectingProps.indexOf(n);
                                else i = -1 !== this._dimensionAffectingProps.indexOf(t);
                                return i && (this.initDimensions(), this.setCoords()), this
                            },
                            complexity: function() {
                                return 1
                            }
                        }), e.Text.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")), e.Text.DEFAULT_SVG_FONT_SIZE = 16, e.Text.fromElement = function(t, n, r) {
                            if (!t) return n(null);
                            var o = e.parseAttributes(t, e.Text.ATTRIBUTE_NAMES),
                                a = o.textAnchor || "left";
                            if ((r = e.util.object.extend(r ? i(r) : {}, o)).top = r.top || 0, r.left = r.left || 0, o.textDecoration) {
                                var s = o.textDecoration; - 1 !== s.indexOf("underline") && (r.underline = !0), -1 !== s.indexOf("overline") && (r.overline = !0), -1 !== s.indexOf("line-through") && (r.linethrough = !0), delete r.textDecoration
                            }
                            "dx" in o && (r.left += o.dx), "dy" in o && (r.top += o.dy), "fontSize" in r || (r.fontSize = e.Text.DEFAULT_SVG_FONT_SIZE);
                            var l = "";
                            "textContent" in t ? l = t.textContent : "firstChild" in t && null !== t.firstChild && "data" in t.firstChild && null !== t.firstChild.data && (l = t.firstChild.data), l = l.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " ");
                            var c = r.strokeWidth;
                            r.strokeWidth = 0;
                            var u = new e.Text(l, r),
                                h = u.getScaledHeight() / u.height,
                                d = ((u.height + u.strokeWidth) * u.lineHeight - u.height) * h,
                                f = u.getScaledHeight() + d,
                                p = 0;
                            "center" === a && (p = u.getScaledWidth() / 2), "right" === a && (p = u.getScaledWidth()), u.set({
                                left: u.left - p,
                                top: u.top - (f - u.fontSize * (.07 + u._fontSizeFraction)) / u.lineHeight,
                                strokeWidth: void 0 !== c ? c : 1
                            }), n(u)
                        }, e.Text.fromObject = function(t, i) {
                            return e.Object._fromObject("Text", t, i, "text")
                        }, e.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"], e.util.createAccessors && e.util.createAccessors(e.Text))
                    }(e), n.util.object.extend(n.Text.prototype, {
                        isEmptyStyles: function(t) {
                            if (!this.styles) return !0;
                            if (void 0 !== t && !this.styles[t]) return !0;
                            var e = void 0 === t ? this.styles : {
                                line: this.styles[t]
                            };
                            for (var i in e)
                                for (var n in e[i])
                                    for (var r in e[i][n]) return !1;
                            return !0
                        },
                        styleHas: function(t, e) {
                            if (!this.styles || !t || "" === t) return !1;
                            if (void 0 !== e && !this.styles[e]) return !1;
                            var i = void 0 === e ? this.styles : {
                                line: this.styles[e]
                            };
                            for (var n in i)
                                for (var r in i[n])
                                    if (void 0 !== i[n][r][t]) return !0;
                            return !1
                        },
                        cleanStyle: function(t) {
                            if (!this.styles || !t || "" === t) return !1;
                            var e, i, n = this.styles,
                                r = 0,
                                o = !0,
                                a = 0;
                            for (var s in n) {
                                for (var l in e = 0, n[s]) {
                                    var c;
                                    r++, (c = n[s][l]).hasOwnProperty(t) ? (i ? c[t] !== i && (o = !1) : i = c[t], c[t] === this[t] && delete c[t]) : o = !1, 0 !== Object.keys(c).length ? e++ : delete n[s][l]
                                }
                                0 === e && delete n[s]
                            }
                            for (var u = 0; u < this._textLines.length; u++) a += this._textLines[u].length;
                            o && r === a && (this[t] = i, this.removeStyle(t))
                        },
                        removeStyle: function(t) {
                            if (this.styles && t && "" !== t) {
                                var e, i, n, r = this.styles;
                                for (i in r) {
                                    for (n in e = r[i]) delete e[n][t], 0 === Object.keys(e[n]).length && delete e[n];
                                    0 === Object.keys(e).length && delete r[i]
                                }
                            }
                        },
                        _extendStyles: function(t, e) {
                            var i = this.get2DCursorLocation(t);
                            this._getLineStyle(i.lineIndex) || this._setLineStyle(i.lineIndex, {}), this._getStyleDeclaration(i.lineIndex, i.charIndex) || this._setStyleDeclaration(i.lineIndex, i.charIndex, {}), n.util.object.extend(this._getStyleDeclaration(i.lineIndex, i.charIndex), e)
                        },
                        get2DCursorLocation: function(t, e) {
                            void 0 === t && (t = this.selectionStart);
                            for (var i = e ? this._unwrappedTextLines : this._textLines, n = i.length, r = 0; r < n; r++) {
                                if (t <= i[r].length) return {
                                    lineIndex: r,
                                    charIndex: t
                                };
                                t -= i[r].length + 1
                            }
                            return {
                                lineIndex: r - 1,
                                charIndex: i[r - 1].length < t ? i[r - 1].length : t
                            }
                        },
                        getSelectionStyles: function(t, e, i) {
                            void 0 === t && (t = this.selectionStart || 0), void 0 === e && (e = this.selectionEnd || t);
                            for (var n = [], r = t; r < e; r++) n.push(this.getStyleAtPosition(r, i));
                            return n
                        },
                        getStyleAtPosition: function(t, e) {
                            var i = this.get2DCursorLocation(t);
                            return (e ? this.getCompleteStyleDeclaration(i.lineIndex, i.charIndex) : this._getStyleDeclaration(i.lineIndex, i.charIndex)) || {}
                        },
                        setSelectionStyles: function(t, e, i) {
                            void 0 === e && (e = this.selectionStart || 0), void 0 === i && (i = this.selectionEnd || e);
                            for (var n = e; n < i; n++) this._extendStyles(n, t);
                            return this._forceClearCache = !0, this
                        },
                        _getStyleDeclaration: function(t, e) {
                            var i = this.styles && this.styles[t];
                            return i ? i[e] : null
                        },
                        getCompleteStyleDeclaration: function(t, e) {
                            for (var i, n = this._getStyleDeclaration(t, e) || {}, r = {}, o = 0; o < this._styleProperties.length; o++) r[i = this._styleProperties[o]] = void 0 === n[i] ? this[i] : n[i];
                            return r
                        },
                        _setStyleDeclaration: function(t, e, i) {
                            this.styles[t][e] = i
                        },
                        _deleteStyleDeclaration: function(t, e) {
                            delete this.styles[t][e]
                        },
                        _getLineStyle: function(t) {
                            return this.styles[t]
                        },
                        _setLineStyle: function(t, e) {
                            this.styles[t] = e
                        },
                        _deleteLineStyle: function(t) {
                            delete this.styles[t]
                        }
                    }),
                    function() {
                        function t(t) {
                            t.textDecoration && (t.textDecoration.indexOf("underline") > -1 && (t.underline = !0), t.textDecoration.indexOf("line-through") > -1 && (t.linethrough = !0), t.textDecoration.indexOf("overline") > -1 && (t.overline = !0), delete t.textDecoration)
                        }
                        n.IText = n.util.createClass(n.Text, n.Observable, {
                            type: "i-text",
                            selectionStart: 0,
                            selectionEnd: 0,
                            selectionColor: "rgba(17,119,255,0.3)",
                            isEditing: !1,
                            editable: !0,
                            editingBorderColor: "rgba(102,153,255,0.25)",
                            cursorWidth: 2,
                            cursorColor: "#333",
                            cursorDelay: 1e3,
                            cursorDuration: 600,
                            caching: !0,
                            _reSpace: /\s|\n/,
                            _currentCursorOpacity: 0,
                            _selectionDirection: null,
                            _abortCursorAnimation: !1,
                            __widthOfSpace: [],
                            inCompositionMode: !1,
                            initialize: function(t, e) {
                                this.callSuper("initialize", t, e), this.initBehavior()
                            },
                            setSelectionStart: function(t) {
                                t = Math.max(t, 0), this._updateAndFire("selectionStart", t)
                            },
                            setSelectionEnd: function(t) {
                                t = Math.min(t, this.text.length), this._updateAndFire("selectionEnd", t)
                            },
                            _updateAndFire: function(t, e) {
                                this[t] !== e && (this._fireSelectionChanged(), this[t] = e), this._updateTextarea()
                            },
                            _fireSelectionChanged: function() {
                                this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", {
                                    target: this
                                })
                            },
                            initDimensions: function() {
                                this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this.callSuper("initDimensions")
                            },
                            render: function(t) {
                                this.clearContextTop(), this.callSuper("render", t), this.cursorOffsetCache = {}, this.renderCursorOrSelection()
                            },
                            _render: function(t) {
                                this.callSuper("_render", t)
                            },
                            clearContextTop: function(t) {
                                if (this.isEditing && this.canvas && this.canvas.contextTop) {
                                    var e = this.canvas.contextTop,
                                        i = this.canvas.viewportTransform;
                                    e.save(), e.transform(i[0], i[1], i[2], i[3], i[4], i[5]), this.transform(e), this.transformMatrix && e.transform.apply(e, this.transformMatrix), this._clearTextArea(e), t || e.restore()
                                }
                            },
                            renderCursorOrSelection: function() {
                                if (this.isEditing && this.canvas) {
                                    var t, e = this._getCursorBoundaries();
                                    this.canvas && this.canvas.contextTop ? (t = this.canvas.contextTop, this.clearContextTop(!0)) : (t = this.canvas.contextContainer).save(), this.selectionStart === this.selectionEnd ? this.renderCursor(e, t) : this.renderSelection(e, t), t.restore()
                                }
                            },
                            _clearTextArea: function(t) {
                                var e = this.width + 4,
                                    i = this.height + 4;
                                t.clearRect(-e / 2, -i / 2, e, i)
                            },
                            _getCursorBoundaries: function(t) {
                                void 0 === t && (t = this.selectionStart);
                                var e = this._getLeftOffset(),
                                    i = this._getTopOffset(),
                                    n = this._getCursorBoundariesOffsets(t);
                                return {
                                    left: e,
                                    top: i,
                                    leftOffset: n.left,
                                    topOffset: n.top
                                }
                            },
                            _getCursorBoundariesOffsets: function(t) {
                                if (this.cursorOffsetCache && "top" in this.cursorOffsetCache) return this.cursorOffsetCache;
                                var e, i, n, r, o = 0,
                                    a = 0,
                                    s = this.get2DCursorLocation(t);
                                n = s.charIndex, i = s.lineIndex;
                                for (var l = 0; l < i; l++) o += this.getHeightOfLine(l);
                                e = this._getLineLeftOffset(i);
                                var c = this.__charBounds[i][n];
                                return c && (a = c.left), 0 !== this.charSpacing && n === this._textLines[i].length && (a -= this._getWidthOfCharSpacing()), r = {
                                    top: o,
                                    left: e + (a > 0 ? a : 0)
                                }, this.cursorOffsetCache = r, this.cursorOffsetCache
                            },
                            renderCursor: function(t, e) {
                                var i = this.get2DCursorLocation(),
                                    n = i.lineIndex,
                                    r = i.charIndex > 0 ? i.charIndex - 1 : 0,
                                    o = this.getValueOfPropertyAt(n, r, "fontSize"),
                                    a = this.scaleX * this.canvas.getZoom(),
                                    s = this.cursorWidth / a,
                                    l = t.topOffset,
                                    c = this.getValueOfPropertyAt(n, r, "deltaY");
                                l += (1 - this._fontSizeFraction) * this.getHeightOfLine(n) / this.lineHeight - o * (1 - this._fontSizeFraction), this.inCompositionMode && this.renderSelection(t, e), e.fillStyle = this.getValueOfPropertyAt(n, r, "fill"), e.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity, e.fillRect(t.left + t.leftOffset - s / 2, l + t.top + c, s, o)
                            },
                            renderSelection: function(t, e) {
                                for (var i = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, n = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, r = -1 !== this.textAlign.indexOf("justify"), o = this.get2DCursorLocation(i), a = this.get2DCursorLocation(n), s = o.lineIndex, l = a.lineIndex, c = o.charIndex < 0 ? 0 : o.charIndex, u = a.charIndex < 0 ? 0 : a.charIndex, h = s; h <= l; h++) {
                                    var d, f = this._getLineLeftOffset(h) || 0,
                                        p = this.getHeightOfLine(h),
                                        g = 0,
                                        m = 0;
                                    if (h === s && (g = this.__charBounds[s][c].left), h >= s && h < l) m = r && !this.isEndOfWrapping(h) ? this.width : this.getLineWidth(h) || 5;
                                    else if (h === l)
                                        if (0 === u) m = this.__charBounds[l][u].left;
                                        else {
                                            var v = this._getWidthOfCharSpacing();
                                            m = this.__charBounds[l][u - 1].left + this.__charBounds[l][u - 1].width - v
                                        }
                                    d = p, (this.lineHeight < 1 || h === l && this.lineHeight > 1) && (p /= this.lineHeight), this.inCompositionMode ? (e.fillStyle = this.compositionColor || "black", e.fillRect(t.left + f + g, t.top + t.topOffset + p, m - g, 1)) : (e.fillStyle = this.selectionColor, e.fillRect(t.left + f + g, t.top + t.topOffset, m - g, p)), t.topOffset += d
                                }
                            },
                            getCurrentCharFontSize: function() {
                                var t = this._getCurrentCharIndex();
                                return this.getValueOfPropertyAt(t.l, t.c, "fontSize")
                            },
                            getCurrentCharColor: function() {
                                var t = this._getCurrentCharIndex();
                                return this.getValueOfPropertyAt(t.l, t.c, "fill")
                            },
                            _getCurrentCharIndex: function() {
                                var t = this.get2DCursorLocation(this.selectionStart, !0),
                                    e = t.charIndex > 0 ? t.charIndex - 1 : 0;
                                return {
                                    l: t.lineIndex,
                                    c: e
                                }
                            }
                        }), n.IText.fromObject = function(e, i) {
                            if (t(e), e.styles)
                                for (var r in e.styles)
                                    for (var o in e.styles[r]) t(e.styles[r][o]);
                            n.Object._fromObject("IText", e, i, "text")
                        }
                    }(),
                    function() {
                        var t = n.util.object.clone;
                        n.util.object.extend(n.IText.prototype, {
                            initBehavior: function() {
                                this.initAddedHandler(), this.initRemovedHandler(), this.initCursorSelectionHandlers(), this.initDoubleClickSimulation(), this.mouseMoveHandler = this.mouseMoveHandler.bind(this)
                            },
                            onDeselect: function() {
                                this.isEditing && this.exitEditing(), this.selected = !1
                            },
                            initAddedHandler: function() {
                                var t = this;
                                this.on("added", function() {
                                    var e = t.canvas;
                                    e && (e._hasITextHandlers || (e._hasITextHandlers = !0, t._initCanvasHandlers(e)), e._iTextInstances = e._iTextInstances || [], e._iTextInstances.push(t))
                                })
                            },
                            initRemovedHandler: function() {
                                var t = this;
                                this.on("removed", function() {
                                    var e = t.canvas;
                                    e && (e._iTextInstances = e._iTextInstances || [], n.util.removeFromArray(e._iTextInstances, t), 0 === e._iTextInstances.length && (e._hasITextHandlers = !1, t._removeCanvasHandlers(e)))
                                })
                            },
                            _initCanvasHandlers: function(t) {
                                t._mouseUpITextHandler = function() {
                                    t._iTextInstances && t._iTextInstances.forEach(function(t) {
                                        t.__isMousedown = !1
                                    })
                                }, t.on("mouse:up", t._mouseUpITextHandler)
                            },
                            _removeCanvasHandlers: function(t) {
                                t.off("mouse:up", t._mouseUpITextHandler)
                            },
                            _tick: function() {
                                this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete")
                            },
                            _animateCursor: function(t, e, i, n) {
                                var r;
                                return r = {
                                    isAborted: !1,
                                    abort: function() {
                                        this.isAborted = !0
                                    }
                                }, t.animate("_currentCursorOpacity", e, {
                                    duration: i,
                                    onComplete: function() {
                                        r.isAborted || t[n]()
                                    },
                                    onChange: function() {
                                        t.canvas && t.selectionStart === t.selectionEnd && t.renderCursorOrSelection()
                                    },
                                    abort: function() {
                                        return r.isAborted
                                    }
                                }), r
                            },
                            _onTickComplete: function() {
                                var t = this;
                                this._cursorTimeout1 && clearTimeout(this._cursorTimeout1), this._cursorTimeout1 = setTimeout(function() {
                                    t._currentTickCompleteState = t._animateCursor(t, 0, this.cursorDuration / 2, "_tick")
                                }, 100)
                            },
                            initDelayedCursor: function(t) {
                                var e = this,
                                    i = t ? 0 : this.cursorDelay;
                                this.abortCursorAnimation(), this._currentCursorOpacity = 1, this._cursorTimeout2 = setTimeout(function() {
                                    e._tick()
                                }, i)
                            },
                            abortCursorAnimation: function() {
                                var t = this._currentTickState || this._currentTickCompleteState,
                                    e = this.canvas;
                                this._currentTickState && this._currentTickState.abort(), this._currentTickCompleteState && this._currentTickCompleteState.abort(), clearTimeout(this._cursorTimeout1), clearTimeout(this._cursorTimeout2), this._currentCursorOpacity = 0, t && e && e.clearContext(e.contextTop || e.contextContainer)
                            },
                            selectAll: function() {
                                return this.selectionStart = 0, this.selectionEnd = this._text.length, this._fireSelectionChanged(), this._updateTextarea(), this
                            },
                            getSelectedText: function() {
                                return this._text.slice(this.selectionStart, this.selectionEnd).join("")
                            },
                            findWordBoundaryLeft: function(t) {
                                var e = 0,
                                    i = t - 1;
                                if (this._reSpace.test(this._text[i]))
                                    for (; this._reSpace.test(this._text[i]);) e++, i--;
                                for (;
                                    /\S/.test(this._text[i]) && i > -1;) e++, i--;
                                return t - e
                            },
                            findWordBoundaryRight: function(t) {
                                var e = 0,
                                    i = t;
                                if (this._reSpace.test(this._text[i]))
                                    for (; this._reSpace.test(this._text[i]);) e++, i++;
                                for (;
                                    /\S/.test(this._text[i]) && i < this.text.length;) e++, i++;
                                return t + e
                            },
                            findLineBoundaryLeft: function(t) {
                                for (var e = 0, i = t - 1; !/\n/.test(this._text[i]) && i > -1;) e++, i--;
                                return t - e
                            },
                            findLineBoundaryRight: function(t) {
                                for (var e = 0, i = t; !/\n/.test(this._text[i]) && i < this.text.length;) e++, i++;
                                return t + e
                            },
                            searchWordBoundary: function(t, e) {
                                for (var i = this._reSpace.test(this.text.charAt(t)) ? t - 1 : t, n = this.text.charAt(i), r = /[ \n\.,;!\?\-]/; !r.test(n) && i > 0 && i < this.text.length;) i += e, n = this.text.charAt(i);
                                return r.test(n) && "\n" !== n && (i += 1 === e ? 0 : 1), i
                            },
                            selectWord: function(t) {
                                t = t || this.selectionStart;
                                var e = this.searchWordBoundary(t, -1),
                                    i = this.searchWordBoundary(t, 1);
                                this.selectionStart = e, this.selectionEnd = i, this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()
                            },
                            selectLine: function(t) {
                                t = t || this.selectionStart;
                                var e = this.findLineBoundaryLeft(t),
                                    i = this.findLineBoundaryRight(t);
                                return this.selectionStart = e, this.selectionEnd = i, this._fireSelectionChanged(), this._updateTextarea(), this
                            },
                            enterEditing: function(t) {
                                if (!this.isEditing && this.editable) return this.canvas && (this.canvas.calcOffset(), this.exitEditingOnOthers(this.canvas)), this.isEditing = !0, this.initHiddenTextarea(t), this.hiddenTextarea.focus(), this.hiddenTextarea.value = this.text, this._updateTextarea(), this._saveEditingProps(), this._setEditingProps(), this._textBeforeEdit = this.text, this._tick(), this.fire("editing:entered"), this._fireSelectionChanged(), this.canvas ? (this.canvas.fire("text:editing:entered", {
                                    target: this
                                }), this.initMouseMoveHandler(), this.canvas.requestRenderAll(), this) : this
                            },
                            exitEditingOnOthers: function(t) {
                                t._iTextInstances && t._iTextInstances.forEach(function(t) {
                                    t.selected = !1, t.isEditing && t.exitEditing()
                                })
                            },
                            initMouseMoveHandler: function() {
                                this.canvas.on("mouse:move", this.mouseMoveHandler)
                            },
                            mouseMoveHandler: function(t) {
                                if (this.__isMousedown && this.isEditing) {
                                    var e = this.getSelectionStartFromPointer(t.e),
                                        i = this.selectionStart,
                                        n = this.selectionEnd;
                                    (e === this.__selectionStartOnMouseDown && i !== n || i !== e && n !== e) && (e > this.__selectionStartOnMouseDown ? (this.selectionStart = this.__selectionStartOnMouseDown, this.selectionEnd = e) : (this.selectionStart = e, this.selectionEnd = this.__selectionStartOnMouseDown), this.selectionStart === i && this.selectionEnd === n || (this.restartCursorIfNeeded(), this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection()))
                                }
                            },
                            _setEditingProps: function() {
                                this.hoverCursor = "text", this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"), this.borderColor = this.editingBorderColor, this.hasControls = this.selectable = !1, this.lockMovementX = this.lockMovementY = !0
                            },
                            fromStringToGraphemeSelection: function(t, e, i) {
                                var r = i.slice(0, t),
                                    o = n.util.string.graphemeSplit(r).length;
                                if (t === e) return {
                                    selectionStart: o,
                                    selectionEnd: o
                                };
                                var a = i.slice(t, e);
                                return {
                                    selectionStart: o,
                                    selectionEnd: o + n.util.string.graphemeSplit(a).length
                                }
                            },
                            fromGraphemeToStringSelection: function(t, e, i) {
                                var n = i.slice(0, t).join("").length;
                                return t === e ? {
                                    selectionStart: n,
                                    selectionEnd: n
                                } : {
                                    selectionStart: n,
                                    selectionEnd: n + i.slice(t, e).join("").length
                                }
                            },
                            _updateTextarea: function() {
                                if (this.cursorOffsetCache = {}, this.hiddenTextarea) {
                                    if (!this.inCompositionMode) {
                                        var t = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);
                                        this.hiddenTextarea.selectionStart = t.selectionStart, this.hiddenTextarea.selectionEnd = t.selectionEnd
                                    }
                                    this.updateTextareaPosition()
                                }
                            },
                            updateFromTextArea: function() {
                                if (this.hiddenTextarea) {
                                    this.cursorOffsetCache = {}, this.text = this.hiddenTextarea.value, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords());
                                    var t = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);
                                    this.selectionEnd = this.selectionStart = t.selectionEnd, this.inCompositionMode || (this.selectionStart = t.selectionStart), this.updateTextareaPosition()
                                }
                            },
                            updateTextareaPosition: function() {
                                if (this.selectionStart === this.selectionEnd) {
                                    var t = this._calcTextareaPosition();
                                    this.hiddenTextarea.style.left = t.left, this.hiddenTextarea.style.top = t.top
                                }
                            },
                            _calcTextareaPosition: function() {
                                if (!this.canvas) return {
                                    x: 1,
                                    y: 1
                                };
                                var t = this.inCompositionMode ? this.compositionStart : this.selectionStart,
                                    e = this._getCursorBoundaries(t),
                                    i = this.get2DCursorLocation(t),
                                    r = i.lineIndex,
                                    o = i.charIndex,
                                    a = this.getValueOfPropertyAt(r, o, "fontSize") * this.lineHeight,
                                    s = e.leftOffset,
                                    l = this.calcTransformMatrix(),
                                    c = {
                                        x: e.left + s,
                                        y: e.top + e.topOffset + a
                                    },
                                    u = this.canvas.upperCanvasEl,
                                    h = u.width,
                                    d = u.height,
                                    f = h - a,
                                    p = d - a,
                                    g = u.clientWidth / h,
                                    m = u.clientHeight / d;
                                return c = n.util.transformPoint(c, l), (c = n.util.transformPoint(c, this.canvas.viewportTransform)).x *= g, c.y *= m, c.x < 0 && (c.x = 0), c.x > f && (c.x = f), c.y < 0 && (c.y = 0), c.y > p && (c.y = p), c.x += this.canvas._offset.left, c.y += this.canvas._offset.top, {
                                    left: c.x + "px",
                                    top: c.y + "px",
                                    fontSize: a + "px",
                                    charHeight: a
                                }
                            },
                            _saveEditingProps: function() {
                                this._savedProps = {
                                    hasControls: this.hasControls,
                                    borderColor: this.borderColor,
                                    lockMovementX: this.lockMovementX,
                                    lockMovementY: this.lockMovementY,
                                    hoverCursor: this.hoverCursor,
                                    defaultCursor: this.canvas && this.canvas.defaultCursor,
                                    moveCursor: this.canvas && this.canvas.moveCursor
                                }
                            },
                            _restoreEditingProps: function() {
                                this._savedProps && (this.hoverCursor = this._savedProps.hoverCursor, this.hasControls = this._savedProps.hasControls, this.borderColor = this._savedProps.borderColor, this.lockMovementX = this._savedProps.lockMovementX, this.lockMovementY = this._savedProps.lockMovementY, this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor, this.canvas.moveCursor = this._savedProps.moveCursor))
                            },
                            exitEditing: function() {
                                var t = this._textBeforeEdit !== this.text;
                                return this.selected = !1, this.isEditing = !1, this.selectable = !0, this.selectionEnd = this.selectionStart, this.hiddenTextarea && (this.hiddenTextarea.blur && this.hiddenTextarea.blur(), this.canvas && this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea), this.hiddenTextarea = null), this.abortCursorAnimation(), this._restoreEditingProps(), this._currentCursorOpacity = 0, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this.fire("editing:exited"), t && this.fire("modified"), this.canvas && (this.canvas.off("mouse:move", this.mouseMoveHandler), this.canvas.fire("text:editing:exited", {
                                    target: this
                                }), t && this.canvas.fire("object:modified", {
                                    target: this
                                })), this
                            },
                            _removeExtraneousStyles: function() {
                                for (var t in this.styles) this._textLines[t] || delete this.styles[t]
                            },
                            removeStyleFromTo: function(t, e) {
                                var i, n, r = this.get2DCursorLocation(t, !0),
                                    o = this.get2DCursorLocation(e, !0),
                                    a = r.lineIndex,
                                    s = r.charIndex,
                                    l = o.lineIndex,
                                    c = o.charIndex;
                                if (a !== l) {
                                    if (this.styles[a])
                                        for (i = s; i < this._unwrappedTextLines[a].length; i++) delete this.styles[a][i];
                                    if (this.styles[l])
                                        for (i = c; i < this._unwrappedTextLines[l].length; i++)(n = this.styles[l][i]) && (this.styles[a] || (this.styles[a] = {}), this.styles[a][s + i - c] = n);
                                    for (i = a + 1; i <= l; i++) delete this.styles[i];
                                    this.shiftLineStyles(l, a - l)
                                } else if (this.styles[a]) {
                                    n = this.styles[a];
                                    var u, h, d = c - s;
                                    for (i = s; i < c; i++) delete n[i];
                                    for (h in this.styles[a])(u = parseInt(h, 10)) >= c && (n[u - d] = n[h], delete n[h])
                                }
                            },
                            shiftLineStyles: function(e, i) {
                                var n = t(this.styles);
                                for (var r in this.styles) {
                                    var o = parseInt(r, 10);
                                    o > e && (this.styles[o + i] = n[o], n[o - i] || delete this.styles[o])
                                }
                            },
                            restartCursorIfNeeded: function() {
                                this._currentTickState && !this._currentTickState.isAborted && this._currentTickCompleteState && !this._currentTickCompleteState.isAborted || this.initDelayedCursor()
                            },
                            insertNewlineStyleObject: function(e, i, n, r) {
                                var o, a = {},
                                    s = !1;
                                for (var l in n || (n = 1), this.shiftLineStyles(e, n), this.styles[e] && (o = this.styles[e][0 === i ? i : i - 1]), this.styles[e]) {
                                    var c = parseInt(l, 10);
                                    c >= i && (s = !0, a[c - i] = this.styles[e][l], delete this.styles[e][l])
                                }
                                for (s ? this.styles[e + n] = a : delete this.styles[e + n]; n > 1;) n--, r && r[n] ? this.styles[e + n] = {
                                    0: t(r[n])
                                } : o ? this.styles[e + n] = {
                                    0: t(o)
                                } : delete this.styles[e + n];
                                this._forceClearCache = !0
                            },
                            insertCharStyleObject: function(e, i, n, r) {
                                this.styles || (this.styles = {});
                                var o = this.styles[e],
                                    a = o ? t(o) : {};
                                for (var s in n || (n = 1), a) {
                                    var l = parseInt(s, 10);
                                    l >= i && (o[l + n] = a[l], a[l - n] || delete o[l])
                                }
                                if (this._forceClearCache = !0, r)
                                    for (; n--;) Object.keys(r[n]).length && (this.styles[e] || (this.styles[e] = {}), this.styles[e][i + n] = t(r[n]));
                                else if (o)
                                    for (var c = o[i ? i - 1 : 1]; c && n--;) this.styles[e][i + n] = t(c)
                            },
                            insertNewStyleBlock: function(t, e, i) {
                                for (var n = this.get2DCursorLocation(e, !0), r = [0], o = 0, a = 0; a < t.length; a++) "\n" === t[a] ? r[++o] = 0 : r[o]++;
                                r[0] > 0 && (this.insertCharStyleObject(n.lineIndex, n.charIndex, r[0], i), i = i && i.slice(r[0] + 1)), o && this.insertNewlineStyleObject(n.lineIndex, n.charIndex + r[0], o);
                                for (a = 1; a < o; a++) r[a] > 0 ? this.insertCharStyleObject(n.lineIndex + a, 0, r[a], i) : i && (this.styles[n.lineIndex + a][0] = i[0]), i = i && i.slice(r[a] + 1);
                                r[a] > 0 && this.insertCharStyleObject(n.lineIndex + a, 0, r[a], i)
                            },
                            setSelectionStartEndWithShift: function(t, e, i) {
                                i <= t ? (e === t ? this._selectionDirection = "left" : "right" === this._selectionDirection && (this._selectionDirection = "left", this.selectionEnd = t), this.selectionStart = i) : i > t && i < e ? "right" === this._selectionDirection ? this.selectionEnd = i : this.selectionStart = i : (e === t ? this._selectionDirection = "right" : "left" === this._selectionDirection && (this._selectionDirection = "right", this.selectionStart = e), this.selectionEnd = i)
                            },
                            setSelectionInBoundaries: function() {
                                var t = this.text.length;
                                this.selectionStart > t ? this.selectionStart = t : this.selectionStart < 0 && (this.selectionStart = 0), this.selectionEnd > t ? this.selectionEnd = t : this.selectionEnd < 0 && (this.selectionEnd = 0)
                            }
                        })
                    }(), n.util.object.extend(n.IText.prototype, {
                        initDoubleClickSimulation: function() {
                            this.__lastClickTime = +new Date, this.__lastLastClickTime = +new Date, this.__lastPointer = {}, this.on("mousedown", this.onMouseDown)
                        },
                        onMouseDown: function(t) {
                            if (this.canvas) {
                                this.__newClickTime = +new Date;
                                var e = t.pointer;
                                this.isTripleClick(e) && (this.fire("tripleclick", t), this._stopEvent(t.e)), this.__lastLastClickTime = this.__lastClickTime, this.__lastClickTime = this.__newClickTime, this.__lastPointer = e, this.__lastIsEditing = this.isEditing, this.__lastSelected = this.selected
                            }
                        },
                        isTripleClick: function(t) {
                            return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === t.x && this.__lastPointer.y === t.y
                        },
                        _stopEvent: function(t) {
                            t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation()
                        },
                        initCursorSelectionHandlers: function() {
                            this.initMousedownHandler(), this.initMouseupHandler(), this.initClicks()
                        },
                        initClicks: function() {
                            this.on("mousedblclick", function(t) {
                                this.selectWord(this.getSelectionStartFromPointer(t.e))
                            }), this.on("tripleclick", function(t) {
                                this.selectLine(this.getSelectionStartFromPointer(t.e))
                            })
                        },
                        _mouseDownHandler: function(t) {
                            !this.canvas || !this.editable || t.e.button && 1 !== t.e.button || (this.__isMousedown = !0, this.selected && this.setCursorByClick(t.e), this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart, this.selectionStart === this.selectionEnd && this.abortCursorAnimation(), this.renderCursorOrSelection()))
                        },
                        _mouseDownHandlerBefore: function(t) {
                            !this.canvas || !this.editable || t.e.button && 1 !== t.e.button || this === this.canvas._activeObject && (this.selected = !0)
                        },
                        initMousedownHandler: function() {
                            this.on("mousedown", this._mouseDownHandler), this.on("mousedown:before", this._mouseDownHandlerBefore)
                        },
                        initMouseupHandler: function() {
                            this.on("mouseup", this.mouseUpHandler)
                        },
                        mouseUpHandler: function(t) {
                            if (this.__isMousedown = !1, !(!this.editable || this.group || t.transform && t.transform.actionPerformed || t.e.button && 1 !== t.e.button)) {
                                if (this.canvas) {
                                    var e = this.canvas._activeObject;
                                    if (e && e !== this) return
                                }
                                this.__lastSelected && !this.__corner ? (this.selected = !1, this.__lastSelected = !1, this.enterEditing(t.e), this.selectionStart === this.selectionEnd ? this.initDelayedCursor(!0) : this.renderCursorOrSelection()) : this.selected = !0
                            }
                        },
                        setCursorByClick: function(t) {
                            var e = this.getSelectionStartFromPointer(t),
                                i = this.selectionStart,
                                n = this.selectionEnd;
                            t.shiftKey ? this.setSelectionStartEndWithShift(i, n, e) : (this.selectionStart = e, this.selectionEnd = e), this.isEditing && (this._fireSelectionChanged(), this._updateTextarea())
                        },
                        getSelectionStartFromPointer: function(t) {
                            for (var e = this.getLocalPointer(t), i = 0, n = 0, r = 0, o = 0, a = 0, s = 0, l = this._textLines.length; s < l && r <= e.y; s++) r += this.getHeightOfLine(s) * this.scaleY, a = s, s > 0 && (o += this._textLines[s - 1].length + 1);
                            n = this._getLineLeftOffset(a) * this.scaleX;
                            for (var c = 0, u = this._textLines[a].length; c < u && (i = n, (n += this.__charBounds[a][c].kernedWidth * this.scaleX) <= e.x); c++) o++;
                            return this._getNewSelectionStartFromOffset(e, i, n, o, u)
                        },
                        _getNewSelectionStartFromOffset: function(t, e, i, n, r) {
                            var o = t.x - e,
                                a = i - t.x,
                                s = n + (a > o || a < 0 ? 0 : 1);
                            return this.flipX && (s = r - s), s > this._text.length && (s = this._text.length), s
                        }
                    }), n.util.object.extend(n.IText.prototype, {
                        initHiddenTextarea: function() {
                            this.hiddenTextarea = n.document.createElement("textarea"), this.hiddenTextarea.setAttribute("autocapitalize", "off"), this.hiddenTextarea.setAttribute("autocorrect", "off"), this.hiddenTextarea.setAttribute("autocomplete", "off"), this.hiddenTextarea.setAttribute("spellcheck", "false"), this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", ""), this.hiddenTextarea.setAttribute("wrap", "off");
                            var t = this._calcTextareaPosition();
                            this.hiddenTextarea.style.cssText = "position: absolute; top: " + t.top + "; left: " + t.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: " + t.fontSize + ";", n.document.body.appendChild(this.hiddenTextarea), n.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)), n.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this)), n.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this)), n.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)), n.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this)), n.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this)), n.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this)), n.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this)), n.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this)), !this._clickHandlerInitialized && this.canvas && (n.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this)), this._clickHandlerInitialized = !0)
                        },
                        keysMap: {
                            9: "exitEditing",
                            27: "exitEditing",
                            33: "moveCursorUp",
                            34: "moveCursorDown",
                            35: "moveCursorRight",
                            36: "moveCursorLeft",
                            37: "moveCursorLeft",
                            38: "moveCursorUp",
                            39: "moveCursorRight",
                            40: "moveCursorDown"
                        },
                        ctrlKeysMapUp: {
                            67: "copy",
                            88: "cut"
                        },
                        ctrlKeysMapDown: {
                            65: "selectAll"
                        },
                        onClick: function() {
                            this.hiddenTextarea && this.hiddenTextarea.focus()
                        },
                        onKeyDown: function(t) {
                            if (this.isEditing && !this.inCompositionMode) {
                                if (t.keyCode in this.keysMap) this[this.keysMap[t.keyCode]](t);
                                else {
                                    if (!(t.keyCode in this.ctrlKeysMapDown && (t.ctrlKey || t.metaKey))) return;
                                    this[this.ctrlKeysMapDown[t.keyCode]](t)
                                }
                                t.stopImmediatePropagation(), t.preventDefault(), t.keyCode >= 33 && t.keyCode <= 40 ? (this.clearContextTop(), this.renderCursorOrSelection()) : this.canvas && this.canvas.requestRenderAll()
                            }
                        },
                        onKeyUp: function(t) {
                            !this.isEditing || this._copyDone || this.inCompositionMode ? this._copyDone = !1 : t.keyCode in this.ctrlKeysMapUp && (t.ctrlKey || t.metaKey) && (this[this.ctrlKeysMapUp[t.keyCode]](t), t.stopImmediatePropagation(), t.preventDefault(), this.canvas && this.canvas.requestRenderAll())
                        },
                        onInput: function(t) {
                            var e = this.fromPaste;
                            if (this.fromPaste = !1, t && t.stopPropagation(), this.isEditing) {
                                var i, r, o = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,
                                    a = this._text.length,
                                    s = o.length,
                                    l = s - a;
                                if ("" === this.hiddenTextarea.value) return this.styles = {}, this.updateFromTextArea(), this.fire("changed"), void(this.canvas && (this.canvas.fire("text:changed", {
                                    target: this
                                }), this.canvas.requestRenderAll()));
                                var c = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value),
                                    u = this.selectionStart > c.selectionStart;
                                this.selectionStart !== this.selectionEnd ? (i = this._text.slice(this.selectionStart, this.selectionEnd), l += this.selectionEnd - this.selectionStart) : s < a && (i = u ? this._text.slice(this.selectionEnd + l, this.selectionEnd) : this._text.slice(this.selectionStart, this.selectionStart - l)), r = o.slice(c.selectionEnd - l, c.selectionEnd), i && i.length && (this.selectionStart !== this.selectionEnd ? this.removeStyleFromTo(this.selectionStart, this.selectionEnd) : u ? this.removeStyleFromTo(this.selectionEnd - i.length, this.selectionEnd) : this.removeStyleFromTo(this.selectionEnd, this.selectionEnd + i.length)), r.length && (e && r.join("") === n.copiedText ? this.insertNewStyleBlock(r, this.selectionStart, n.copiedTextStyle) : this.insertNewStyleBlock(r, this.selectionStart)), this.updateFromTextArea(), this.fire("changed"), this.canvas && (this.canvas.fire("text:changed", {
                                    target: this
                                }), this.canvas.requestRenderAll())
                            }
                        },
                        onCompositionStart: function() {
                            this.inCompositionMode = !0
                        },
                        onCompositionEnd: function() {
                            this.inCompositionMode = !1
                        },
                        onCompositionUpdate: function(t) {
                            this.compositionStart = t.target.selectionStart, this.compositionEnd = t.target.selectionEnd, this.updateTextareaPosition()
                        },
                        copy: function() {
                            this.selectionStart !== this.selectionEnd && (n.copiedText = this.getSelectedText(), n.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, !0), this._copyDone = !0)
                        },
                        paste: function() {
                            this.fromPaste = !0
                        },
                        _getClipboardData: function(t) {
                            return t && t.clipboardData || n.window.clipboardData
                        },
                        _getWidthBeforeCursor: function(t, e) {
                            var i, n = this._getLineLeftOffset(t);
                            return e > 0 && (n += (i = this.__charBounds[t][e - 1]).left + i.width), n
                        },
                        getDownCursorOffset: function(t, e) {
                            var i = this._getSelectionForOffset(t, e),
                                n = this.get2DCursorLocation(i),
                                r = n.lineIndex;
                            if (r === this._textLines.length - 1 || t.metaKey || 34 === t.keyCode) return this._text.length - i;
                            var o = n.charIndex,
                                a = this._getWidthBeforeCursor(r, o),
                                s = this._getIndexOnLine(r + 1, a);
                            return this._textLines[r].slice(o).length + s + 2
                        },
                        _getSelectionForOffset: function(t, e) {
                            return t.shiftKey && this.selectionStart !== this.selectionEnd && e ? this.selectionEnd : this.selectionStart
                        },
                        getUpCursorOffset: function(t, e) {
                            var i = this._getSelectionForOffset(t, e),
                                n = this.get2DCursorLocation(i),
                                r = n.lineIndex;
                            if (0 === r || t.metaKey || 33 === t.keyCode) return -i;
                            var o = n.charIndex,
                                a = this._getWidthBeforeCursor(r, o),
                                s = this._getIndexOnLine(r - 1, a),
                                l = this._textLines[r].slice(0, o);
                            return -this._textLines[r - 1].length + s - l.length
                        },
                        _getIndexOnLine: function(t, e) {
                            for (var i, n, r = this._textLines[t], o = this._getLineLeftOffset(t), a = 0, s = 0, l = r.length; s < l; s++)
                                if ((o += i = this.__charBounds[t][s].width) > e) {
                                    n = !0;
                                    var c = o - i,
                                        u = o,
                                        h = Math.abs(c - e);
                                    a = Math.abs(u - e) < h ? s : s - 1;
                                    break
                                }
                            return n || (a = r.length - 1), a
                        },
                        moveCursorDown: function(t) {
                            this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorUpOrDown("Down", t)
                        },
                        moveCursorUp: function(t) {
                            0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorUpOrDown("Up", t)
                        },
                        _moveCursorUpOrDown: function(t, e) {
                            var i = this["get" + t + "CursorOffset"](e, "right" === this._selectionDirection);
                            e.shiftKey ? this.moveCursorWithShift(i) : this.moveCursorWithoutShift(i), 0 !== i && (this.setSelectionInBoundaries(), this.abortCursorAnimation(), this._currentCursorOpacity = 1, this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea())
                        },
                        moveCursorWithShift: function(t) {
                            var e = "left" === this._selectionDirection ? this.selectionStart + t : this.selectionEnd + t;
                            return this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, e), 0 !== t
                        },
                        moveCursorWithoutShift: function(t) {
                            return t < 0 ? (this.selectionStart += t, this.selectionEnd = this.selectionStart) : (this.selectionEnd += t, this.selectionStart = this.selectionEnd), 0 !== t
                        },
                        moveCursorLeft: function(t) {
                            0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorLeftOrRight("Left", t)
                        },
                        _move: function(t, e, i) {
                            var n;
                            if (t.altKey) n = this["findWordBoundary" + i](this[e]);
                            else {
                                if (!t.metaKey && 35 !== t.keyCode && 36 !== t.keyCode) return this[e] += "Left" === i ? -1 : 1, !0;
                                n = this["findLineBoundary" + i](this[e])
                            }
                            if (void 0 !== typeof n && this[e] !== n) return this[e] = n, !0
                        },
                        _moveLeft: function(t, e) {
                            return this._move(t, e, "Left")
                        },
                        _moveRight: function(t, e) {
                            return this._move(t, e, "Right")
                        },
                        moveCursorLeftWithoutShift: function(t) {
                            var e = !0;
                            return this._selectionDirection = "left", this.selectionEnd === this.selectionStart && 0 !== this.selectionStart && (e = this._moveLeft(t, "selectionStart")), this.selectionEnd = this.selectionStart, e
                        },
                        moveCursorLeftWithShift: function(t) {
                            return "right" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveLeft(t, "selectionEnd") : 0 !== this.selectionStart ? (this._selectionDirection = "left", this._moveLeft(t, "selectionStart")) : void 0
                        },
                        moveCursorRight: function(t) {
                            this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorLeftOrRight("Right", t)
                        },
                        _moveCursorLeftOrRight: function(t, e) {
                            var i = "moveCursor" + t + "With";
                            this._currentCursorOpacity = 1, e.shiftKey ? i += "Shift" : i += "outShift", this[i](e) && (this.abortCursorAnimation(), this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea())
                        },
                        moveCursorRightWithShift: function(t) {
                            return "left" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveRight(t, "selectionStart") : this.selectionEnd !== this._text.length ? (this._selectionDirection = "right", this._moveRight(t, "selectionEnd")) : void 0
                        },
                        moveCursorRightWithoutShift: function(t) {
                            var e = !0;
                            return this._selectionDirection = "right", this.selectionStart === this.selectionEnd ? (e = this._moveRight(t, "selectionStart"), this.selectionEnd = this.selectionStart) : this.selectionStart = this.selectionEnd, e
                        },
                        removeChars: function(t, e) {
                            void 0 === e && (e = t + 1), this.removeStyleFromTo(t, e), this._text.splice(t, e - t), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles()
                        },
                        insertChars: function(t, e, i, r) {
                            void 0 === r && (r = i), r > i && this.removeStyleFromTo(i, r);
                            var o = n.util.string.graphemeSplit(t);
                            this.insertNewStyleBlock(o, i, e), this._text = [].concat(this._text.slice(0, i), o, this._text.slice(r)), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles()
                        }
                    }),
                    function() {
                        var t = n.util.toFixed,
                            e = /  +/g;
                        n.util.object.extend(n.Text.prototype, {
                            toSVG: function(t) {
                                var e = this._getSVGLeftTopOffsets(),
                                    i = this._getSVGTextAndBg(e.textTop, e.textLeft),
                                    n = this._wrapSVGTextAndBg(i);
                                return this._createBaseSVGMarkup(n, {
                                    reviver: t,
                                    noStyle: !0,
                                    withShadow: !0
                                })
                            },
                            _getSVGLeftTopOffsets: function() {
                                return {
                                    textLeft: -this.width / 2,
                                    textTop: -this.height / 2,
                                    lineTop: this.getHeightOfLine(0)
                                }
                            },
                            _wrapSVGTextAndBg: function(t) {
                                var e = this.getSvgTextDecoration(this);
                                return [t.textBgRects.join(""), '\t\t<text xml:space="preserve" ', this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", e ? 'text-decoration="' + e + '" ' : "", 'style="', this.getSvgStyles(!0), '"', this.addPaintOrder(), " >", t.textSpans.join(""), "</text>\n"]
                            },
                            _getSVGTextAndBg: function(t, e) {
                                var i, n = [],
                                    r = [],
                                    o = t;
                                this._setSVGBg(r);
                                for (var a = 0, s = this._textLines.length; a < s; a++) i = this._getLineLeftOffset(a), (this.textBackgroundColor || this.styleHas("textBackgroundColor", a)) && this._setSVGTextLineBg(r, a, e + i, o), this._setSVGTextLineText(n, a, e + i, o), o += this.getHeightOfLine(a);
                                return {
                                    textSpans: n,
                                    textBgRects: r
                                }
                            },
                            _createTextCharSpan: function(i, r, o, a) {
                                var s = i !== i.trim() || i.match(e),
                                    l = this.getSvgSpanStyles(r, s),
                                    c = l ? 'style="' + l + '"' : "",
                                    u = r.deltaY,
                                    h = "",
                                    d = n.Object.NUM_FRACTION_DIGITS;
                                return u && (h = ' dy="' + t(u, d) + '" '), ['<tspan x="', t(o, d), '" y="', t(a, d), '" ', h, c, ">", n.util.string.escapeXml(i), "</tspan>"].join("")
                            },
                            _setSVGTextLineText: function(t, e, i, n) {
                                var r, o, a, s, l, c = this.getHeightOfLine(e),
                                    u = -1 !== this.textAlign.indexOf("justify"),
                                    h = "",
                                    d = 0,
                                    f = this._textLines[e];
                                n += c * (1 - this._fontSizeFraction) / this.lineHeight;
                                for (var p = 0, g = f.length - 1; p <= g; p++) l = p === g || this.charSpacing, h += f[p], a = this.__charBounds[e][p], 0 === d ? (i += a.kernedWidth - a.width, d += a.width) : d += a.kernedWidth, u && !l && this._reSpaceAndTab.test(f[p]) && (l = !0), l || (r = r || this.getCompleteStyleDeclaration(e, p), o = this.getCompleteStyleDeclaration(e, p + 1), l = this._hasStyleChangedForSvg(r, o)), l && (s = this._getStyleDeclaration(e, p) || {}, t.push(this._createTextCharSpan(h, s, i, n)), h = "", r = o, i += d, d = 0)
                            },
                            _pushTextBgRect: function(e, i, r, o, a, s) {
                                var l = n.Object.NUM_FRACTION_DIGITS;
                                e.push("\t\t<rect ", this._getFillAttributes(i), ' x="', t(r, l), '" y="', t(o, l), '" width="', t(a, l), '" height="', t(s, l), '"></rect>\n')
                            },
                            _setSVGTextLineBg: function(t, e, i, n) {
                                for (var r, o, a = this._textLines[e], s = this.getHeightOfLine(e) / this.lineHeight, l = 0, c = 0, u = this.getValueOfPropertyAt(e, 0, "textBackgroundColor"), h = 0, d = a.length; h < d; h++) r = this.__charBounds[e][h], (o = this.getValueOfPropertyAt(e, h, "textBackgroundColor")) !== u ? (u && this._pushTextBgRect(t, u, i + c, n, l, s), c = r.left, l = r.width, u = o) : l += r.kernedWidth;
                                o && this._pushTextBgRect(t, o, i + c, n, l, s)
                            },
                            _getFillAttributes: function(t) {
                                var e = t && "string" == typeof t ? new n.Color(t) : "";
                                return e && e.getSource() && 1 !== e.getAlpha() ? 'opacity="' + e.getAlpha() + '" fill="' + e.setAlpha(1).toRgb() + '"' : 'fill="' + t + '"'
                            },
                            _getSVGLineTopOffset: function(t) {
                                for (var e, i = 0, n = 0; n < t; n++) i += this.getHeightOfLine(n);
                                return e = this.getHeightOfLine(n), {
                                    lineTop: i,
                                    offset: (this._fontSizeMult - this._fontSizeFraction) * e / (this.lineHeight * this._fontSizeMult)
                                }
                            },
                            getSvgStyles: function(t) {
                                return n.Object.prototype.getSvgStyles.call(this, t) + " white-space: pre;"
                            }
                        })
                    }(),
                    function(t) {
                        "use strict";
                        var e = t.fabric || (t.fabric = {});
                        e.Textbox = e.util.createClass(e.IText, e.Observable, {
                            type: "textbox",
                            minWidth: 20,
                            dynamicMinWidth: 2,
                            __cachedLines: null,
                            lockScalingFlip: !0,
                            noScaleCache: !1,
                            _dimensionAffectingProps: e.Text.prototype._dimensionAffectingProps.concat("width"),
                            _wordJoiners: /[ \t\r]/,
                            splitByGrapheme: !1,
                            initDimensions: function() {
                                this.__skipDimension || (this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this._clearCache(), this.dynamicMinWidth = 0, this._styleMap = this._generateStyleMap(this._splitText()), this.dynamicMinWidth > this.width && this._set("width", this.dynamicMinWidth), -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({
                                    propertySet: "_dimensionAffectingProps"
                                }))
                            },
                            _generateStyleMap: function(t) {
                                for (var e = 0, i = 0, n = 0, r = {}, o = 0; o < t.graphemeLines.length; o++) "\n" === t.graphemeText[n] && o > 0 ? (i = 0, n++, e++) : !this.graphemeSplit && this._reSpaceAndTab.test(t.graphemeText[n]) && o > 0 && (i++, n++), r[o] = {
                                    line: e,
                                    offset: i
                                }, n += t.graphemeLines[o].length, i += t.graphemeLines[o].length;
                                return r
                            },
                            styleHas: function(t, i) {
                                if (this._styleMap && !this.isWrapping) {
                                    var n = this._styleMap[i];
                                    n && (i = n.line)
                                }
                                return e.Text.prototype.styleHas.call(this, t, i)
                            },
                            isEmptyStyles: function(t) {
                                var e, i, n = 0,
                                    r = !1,
                                    o = this._styleMap[t],
                                    a = this._styleMap[t + 1];
                                for (var s in o && (t = o.line, n = o.offset), a && (r = a.line === t, e = a.offset), i = void 0 === t ? this.styles : {
                                        line: this.styles[t]
                                    })
                                    for (var l in i[s])
                                        if (l >= n && (!r || l < e))
                                            for (var c in i[s][l]) return !1;
                                return !0
                            },
                            _getStyleDeclaration: function(t, e) {
                                if (this._styleMap && !this.isWrapping) {
                                    var i = this._styleMap[t];
                                    if (!i) return null;
                                    t = i.line, e = i.offset + e
                                }
                                return this.callSuper("_getStyleDeclaration", t, e)
                            },
                            _setStyleDeclaration: function(t, e, i) {
                                var n = this._styleMap[t];
                                t = n.line, e = n.offset + e, this.styles[t][e] = i
                            },
                            _deleteStyleDeclaration: function(t, e) {
                                var i = this._styleMap[t];
                                t = i.line, e = i.offset + e, delete this.styles[t][e]
                            },
                            _getLineStyle: function(t) {
                                var e = this._styleMap[t];
                                return this.styles[e.line]
                            },
                            _setLineStyle: function(t, e) {
                                var i = this._styleMap[t];
                                this.styles[i.line] = e
                            },
                            _deleteLineStyle: function(t) {
                                var e = this._styleMap[t];
                                delete this.styles[e.line]
                            },
                            _wrapText: function(t, e) {
                                var i, n = [];
                                for (this.isWrapping = !0, i = 0; i < t.length; i++) n = n.concat(this._wrapLine(t[i], i, e));
                                return this.isWrapping = !1, n
                            },
                            _measureWord: function(t, e, i) {
                                var n, r = 0;
                                i = i || 0;
                                for (var o = 0, a = t.length; o < a; o++) {
                                    r += this._getGraphemeBox(t[o], e, o + i, n, !0).kernedWidth, n = t[o]
                                }
                                return r
                            },
                            _wrapLine: function(t, i, n, r) {
                                var o = 0,
                                    a = this.splitByGrapheme,
                                    s = [],
                                    l = [],
                                    c = a ? e.util.string.graphemeSplit(t) : t.split(this._wordJoiners),
                                    u = "",
                                    h = 0,
                                    d = a ? "" : " ",
                                    f = 0,
                                    p = 0,
                                    g = 0,
                                    m = !0,
                                    v = a ? 0 : this._getWidthOfCharSpacing();
                                n -= r = r || 0;
                                for (var b = 0; b < c.length; b++) u = e.util.string.graphemeSplit(c[b]), f = this._measureWord(u, i, h), h += u.length, (o += p + f - v) >= n && !m ? (s.push(l), l = [], o = f, m = !0) : o += v, m || a || l.push(d), l = l.concat(u), p = this._measureWord([d], i, h), h++, m = !1, f > g && (g = f);
                                return b && s.push(l), g + r > this.dynamicMinWidth && (this.dynamicMinWidth = g - v + r), s
                            },
                            isEndOfWrapping: function(t) {
                                return !this._styleMap[t + 1] || this._styleMap[t + 1].line !== this._styleMap[t].line
                            },
                            _splitTextIntoLines: function(t) {
                                for (var i = e.Text.prototype._splitTextIntoLines.call(this, t), n = this._wrapText(i.lines, this.width), r = new Array(n.length), o = 0; o < n.length; o++) r[o] = n[o].join("");
                                return i.lines = r, i.graphemeLines = n, i
                            },
                            getMinWidth: function() {
                                return Math.max(this.minWidth, this.dynamicMinWidth)
                            },
                            toObject: function(t) {
                                return this.callSuper("toObject", ["minWidth", "splitByGrapheme"].concat(t))
                            }
                        }), e.Textbox.fromObject = function(t, i) {
                            return e.Object._fromObject("Textbox", t, i, "text")
                        }
                    }(e),
                    function() {
                        var t = n.Canvas.prototype._setObjectScale;
                        n.Canvas.prototype._setObjectScale = function(e, i, r, o, a, s, l) {
                            var c, u = i.target,
                                h = e.x * u.scaleX / l.x,
                                d = e.y * u.scaleY / l.y;
                            if (!("x" === a && u instanceof n.Textbox)) return t.call(n.Canvas.prototype, e, i, r, o, a, s, l);
                            var f = u._getTransformedDimensions().x,
                                p = u.width * (e.x / f);
                            return i.newScaleX = h, i.newScaleY = d, p >= u.getMinWidth() ? (c = p !== u.width, u.set("width", p), c) : void 0
                        }, n.util.object.extend(n.Textbox.prototype, {
                            _removeExtraneousStyles: function() {
                                for (var t in this._styleMap) this._textLines[t] || delete this.styles[this._styleMap[t].line]
                            }
                        })
                    }()
            }).call(e, i(107).Buffer)
        }, function(t, e, i) {
            (function(t) {
                "use strict";
                var n = i(108),
                    r = i(109),
                    o = i(110);

                function a() {
                    return l.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
                }

                function s(t, e) {
                    if (a() < e) throw new RangeError("Invalid typed array length");
                    return l.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(e)).__proto__ = l.prototype : (null === t && (t = new l(e)), t.length = e), t
                }

                function l(t, e, i) {
                    if (!(l.TYPED_ARRAY_SUPPORT || this instanceof l)) return new l(t, e, i);
                    if ("number" == typeof t) {
                        if ("string" == typeof e) throw new Error("If encoding is specified then the first argument must be a string");
                        return h(this, t)
                    }
                    return c(this, t, e, i)
                }

                function c(t, e, i, n) {
                    if ("number" == typeof e) throw new TypeError('"value" argument must not be a number');
                    return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer ? function(t, e, i, n) {
                        if (e.byteLength, i < 0 || e.byteLength < i) throw new RangeError("'offset' is out of bounds");
                        if (e.byteLength < i + (n || 0)) throw new RangeError("'length' is out of bounds");
                        e = void 0 === i && void 0 === n ? new Uint8Array(e) : void 0 === n ? new Uint8Array(e, i) : new Uint8Array(e, i, n);
                        l.TYPED_ARRAY_SUPPORT ? (t = e).__proto__ = l.prototype : t = d(t, e);
                        return t
                    }(t, e, i, n) : "string" == typeof e ? function(t, e, i) {
                        "string" == typeof i && "" !== i || (i = "utf8");
                        if (!l.isEncoding(i)) throw new TypeError('"encoding" must be a valid string encoding');
                        var n = 0 | p(e, i),
                            r = (t = s(t, n)).write(e, i);
                        r !== n && (t = t.slice(0, r));
                        return t
                    }(t, e, i) : function(t, e) {
                        if (l.isBuffer(e)) {
                            var i = 0 | f(e.length);
                            return 0 === (t = s(t, i)).length ? t : (e.copy(t, 0, 0, i), t)
                        }
                        if (e) {
                            if ("undefined" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer || "length" in e) return "number" != typeof e.length || function(t) {
                                return t != t
                            }(e.length) ? s(t, 0) : d(t, e);
                            if ("Buffer" === e.type && o(e.data)) return d(t, e.data)
                        }
                        throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
                    }(t, e)
                }

                function u(t) {
                    if ("number" != typeof t) throw new TypeError('"size" argument must be a number');
                    if (t < 0) throw new RangeError('"size" argument must not be negative')
                }

                function h(t, e) {
                    if (u(e), t = s(t, e < 0 ? 0 : 0 | f(e)), !l.TYPED_ARRAY_SUPPORT)
                        for (var i = 0; i < e; ++i) t[i] = 0;
                    return t
                }

                function d(t, e) {
                    var i = e.length < 0 ? 0 : 0 | f(e.length);
                    t = s(t, i);
                    for (var n = 0; n < i; n += 1) t[n] = 255 & e[n];
                    return t
                }

                function f(t) {
                    if (t >= a()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + a().toString(16) + " bytes");
                    return 0 | t
                }

                function p(t, e) {
                    if (l.isBuffer(t)) return t.length;
                    if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;
                    "string" != typeof t && (t = "" + t);
                    var i = t.length;
                    if (0 === i) return 0;
                    for (var n = !1;;) switch (e) {
                        case "ascii":
                        case "latin1":
                        case "binary":
                            return i;
                        case "utf8":
                        case "utf-8":
                        case void 0:
                            return N(t).length;
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return 2 * i;
                        case "hex":
                            return i >>> 1;
                        case "base64":
                            return U(t).length;
                        default:
                            if (n) return N(t).length;
                            e = ("" + e).toLowerCase(), n = !0
                    }
                }

                function g(t, e, i) {
                    var n = t[e];
                    t[e] = t[i], t[i] = n
                }

                function m(t, e, i, n, r) {
                    if (0 === t.length) return -1;
                    if ("string" == typeof i ? (n = i, i = 0) : i > 2147483647 ? i = 2147483647 : i < -2147483648 && (i = -2147483648), i = +i, isNaN(i) && (i = r ? 0 : t.length - 1), i < 0 && (i = t.length + i), i >= t.length) {
                        if (r) return -1;
                        i = t.length - 1
                    } else if (i < 0) {
                        if (!r) return -1;
                        i = 0
                    }
                    if ("string" == typeof e && (e = l.from(e, n)), l.isBuffer(e)) return 0 === e.length ? -1 : v(t, e, i, n, r);
                    if ("number" == typeof e) return e &= 255, l.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? r ? Uint8Array.prototype.indexOf.call(t, e, i) : Uint8Array.prototype.lastIndexOf.call(t, e, i) : v(t, [e], i, n, r);
                    throw new TypeError("val must be string, number or Buffer")
                }

                function v(t, e, i, n, r) {
                    var o, a = 1,
                        s = t.length,
                        l = e.length;
                    if (void 0 !== n && ("ucs2" === (n = String(n).toLowerCase()) || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {
                        if (t.length < 2 || e.length < 2) return -1;
                        a = 2, s /= 2, l /= 2, i /= 2
                    }

                    function c(t, e) {
                        return 1 === a ? t[e] : t.readUInt16BE(e * a)
                    }
                    if (r) {
                        var u = -1;
                        for (o = i; o < s; o++)
                            if (c(t, o) === c(e, -1 === u ? 0 : o - u)) {
                                if (-1 === u && (u = o), o - u + 1 === l) return u * a
                            } else -1 !== u && (o -= o - u), u = -1
                    } else
                        for (i + l > s && (i = s - l), o = i; o >= 0; o--) {
                            for (var h = !0, d = 0; d < l; d++)
                                if (c(t, o + d) !== c(e, d)) {
                                    h = !1;
                                    break
                                }
                            if (h) return o
                        }
                    return -1
                }

                function b(t, e, i, n) {
                    i = Number(i) || 0;
                    var r = t.length - i;
                    n ? (n = Number(n)) > r && (n = r) : n = r;
                    var o = e.length;
                    if (o % 2 != 0) throw new TypeError("Invalid hex string");
                    n > o / 2 && (n = o / 2);
                    for (var a = 0; a < n; ++a) {
                        var s = parseInt(e.substr(2 * a, 2), 16);
                        if (isNaN(s)) return a;
                        t[i + a] = s
                    }
                    return a
                }

                function y(t, e, i, n) {
                    return Y(N(e, t.length - i), t, i, n)
                }

                function _(t, e, i, n) {
                    return Y(function(t) {
                        for (var e = [], i = 0; i < t.length; ++i) e.push(255 & t.charCodeAt(i));
                        return e
                    }(e), t, i, n)
                }

                function x(t, e, i, n) {
                    return _(t, e, i, n)
                }

                function w(t, e, i, n) {
                    return Y(U(e), t, i, n)
                }

                function C(t, e, i, n) {
                    return Y(function(t, e) {
                        for (var i, n, r, o = [], a = 0; a < t.length && !((e -= 2) < 0); ++a) i = t.charCodeAt(a), n = i >> 8, r = i % 256, o.push(r), o.push(n);
                        return o
                    }(e, t.length - i), t, i, n)
                }

                function S(t, e, i) {
                    return 0 === e && i === t.length ? n.fromByteArray(t) : n.fromByteArray(t.slice(e, i))
                }

                function k(t, e, i) {
                    i = Math.min(t.length, i);
                    for (var n = [], r = e; r < i;) {
                        var o, a, s, l, c = t[r],
                            u = null,
                            h = c > 239 ? 4 : c > 223 ? 3 : c > 191 ? 2 : 1;
                        if (r + h <= i) switch (h) {
                            case 1:
                                c < 128 && (u = c);
                                break;
                            case 2:
                                128 == (192 & (o = t[r + 1])) && (l = (31 & c) << 6 | 63 & o) > 127 && (u = l);
                                break;
                            case 3:
                                o = t[r + 1], a = t[r + 2], 128 == (192 & o) && 128 == (192 & a) && (l = (15 & c) << 12 | (63 & o) << 6 | 63 & a) > 2047 && (l < 55296 || l > 57343) && (u = l);
                                break;
                            case 4:
                                o = t[r + 1], a = t[r + 2], s = t[r + 3], 128 == (192 & o) && 128 == (192 & a) && 128 == (192 & s) && (l = (15 & c) << 18 | (63 & o) << 12 | (63 & a) << 6 | 63 & s) > 65535 && l < 1114112 && (u = l)
                        }
                        null === u ? (u = 65533, h = 1) : u > 65535 && (u -= 65536, n.push(u >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), n.push(u), r += h
                    }
                    return function(t) {
                        var e = t.length;
                        if (e <= O) return String.fromCharCode.apply(String, t);
                        var i = "",
                            n = 0;
                        for (; n < e;) i += String.fromCharCode.apply(String, t.slice(n, n += O));
                        return i
                    }(n)
                }
                e.Buffer = l, e.SlowBuffer = function(t) {
                    +t != t && (t = 0);
                    return l.alloc(+t)
                }, e.INSPECT_MAX_BYTES = 50, l.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : function() {
                    try {
                        var t = new Uint8Array(1);
                        return t.__proto__ = {
                            __proto__: Uint8Array.prototype,
                            foo: function() {
                                return 42
                            }
                        }, 42 === t.foo() && "function" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength
                    } catch (t) {
                        return !1
                    }
                }(), e.kMaxLength = a(), l.poolSize = 8192, l._augment = function(t) {
                    return t.__proto__ = l.prototype, t
                }, l.from = function(t, e, i) {
                    return c(null, t, e, i)
                }, l.TYPED_ARRAY_SUPPORT && (l.prototype.__proto__ = Uint8Array.prototype, l.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && l[Symbol.species] === l && Object.defineProperty(l, Symbol.species, {
                    value: null,
                    configurable: !0
                })), l.alloc = function(t, e, i) {
                    return function(t, e, i, n) {
                        return u(e), e <= 0 ? s(t, e) : void 0 !== i ? "string" == typeof n ? s(t, e).fill(i, n) : s(t, e).fill(i) : s(t, e)
                    }(null, t, e, i)
                }, l.allocUnsafe = function(t) {
                    return h(null, t)
                }, l.allocUnsafeSlow = function(t) {
                    return h(null, t)
                }, l.isBuffer = function(t) {
                    return !(null == t || !t._isBuffer)
                }, l.compare = function(t, e) {
                    if (!l.isBuffer(t) || !l.isBuffer(e)) throw new TypeError("Arguments must be Buffers");
                    if (t === e) return 0;
                    for (var i = t.length, n = e.length, r = 0, o = Math.min(i, n); r < o; ++r)
                        if (t[r] !== e[r]) {
                            i = t[r], n = e[r];
                            break
                        }
                    return i < n ? -1 : n < i ? 1 : 0
                }, l.isEncoding = function(t) {
                    switch (String(t).toLowerCase()) {
                        case "hex":
                        case "utf8":
                        case "utf-8":
                        case "ascii":
                        case "latin1":
                        case "binary":
                        case "base64":
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return !0;
                        default:
                            return !1
                    }
                }, l.concat = function(t, e) {
                    if (!o(t)) throw new TypeError('"list" argument must be an Array of Buffers');
                    if (0 === t.length) return l.alloc(0);
                    var i;
                    if (void 0 === e)
                        for (e = 0, i = 0; i < t.length; ++i) e += t[i].length;
                    var n = l.allocUnsafe(e),
                        r = 0;
                    for (i = 0; i < t.length; ++i) {
                        var a = t[i];
                        if (!l.isBuffer(a)) throw new TypeError('"list" argument must be an Array of Buffers');
                        a.copy(n, r), r += a.length
                    }
                    return n
                }, l.byteLength = p, l.prototype._isBuffer = !0, l.prototype.swap16 = function() {
                    var t = this.length;
                    if (t % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                    for (var e = 0; e < t; e += 2) g(this, e, e + 1);
                    return this
                }, l.prototype.swap32 = function() {
                    var t = this.length;
                    if (t % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                    for (var e = 0; e < t; e += 4) g(this, e, e + 3), g(this, e + 1, e + 2);
                    return this
                }, l.prototype.swap64 = function() {
                    var t = this.length;
                    if (t % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                    for (var e = 0; e < t; e += 8) g(this, e, e + 7), g(this, e + 1, e + 6), g(this, e + 2, e + 5), g(this, e + 3, e + 4);
                    return this
                }, l.prototype.toString = function() {
                    var t = 0 | this.length;
                    return 0 === t ? "" : 0 === arguments.length ? k(this, 0, t) : function(t, e, i) {
                        var n = !1;
                        if ((void 0 === e || e < 0) && (e = 0), e > this.length) return "";
                        if ((void 0 === i || i > this.length) && (i = this.length), i <= 0) return "";
                        if ((i >>>= 0) <= (e >>>= 0)) return "";
                        for (t || (t = "utf8");;) switch (t) {
                            case "hex":
                                return A(this, e, i);
                            case "utf8":
                            case "utf-8":
                                return k(this, e, i);
                            case "ascii":
                                return T(this, e, i);
                            case "latin1":
                            case "binary":
                                return E(this, e, i);
                            case "base64":
                                return S(this, e, i);
                            case "ucs2":
                            case "ucs-2":
                            case "utf16le":
                            case "utf-16le":
                                return P(this, e, i);
                            default:
                                if (n) throw new TypeError("Unknown encoding: " + t);
                                t = (t + "").toLowerCase(), n = !0
                        }
                    }.apply(this, arguments)
                }, l.prototype.equals = function(t) {
                    if (!l.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                    return this === t || 0 === l.compare(this, t)
                }, l.prototype.inspect = function() {
                    var t = "",
                        i = e.INSPECT_MAX_BYTES;
                    return this.length > 0 && (t = this.toString("hex", 0, i).match(/.{2}/g).join(" "), this.length > i && (t += " ... ")), "<Buffer " + t + ">"
                }, l.prototype.compare = function(t, e, i, n, r) {
                    if (!l.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                    if (void 0 === e && (e = 0), void 0 === i && (i = t ? t.length : 0), void 0 === n && (n = 0), void 0 === r && (r = this.length), e < 0 || i > t.length || n < 0 || r > this.length) throw new RangeError("out of range index");
                    if (n >= r && e >= i) return 0;
                    if (n >= r) return -1;
                    if (e >= i) return 1;
                    if (e >>>= 0, i >>>= 0, n >>>= 0, r >>>= 0, this === t) return 0;
                    for (var o = r - n, a = i - e, s = Math.min(o, a), c = this.slice(n, r), u = t.slice(e, i), h = 0; h < s; ++h)
                        if (c[h] !== u[h]) {
                            o = c[h], a = u[h];
                            break
                        }
                    return o < a ? -1 : a < o ? 1 : 0
                }, l.prototype.includes = function(t, e, i) {
                    return -1 !== this.indexOf(t, e, i)
                }, l.prototype.indexOf = function(t, e, i) {
                    return m(this, t, e, i, !0)
                }, l.prototype.lastIndexOf = function(t, e, i) {
                    return m(this, t, e, i, !1)
                }, l.prototype.write = function(t, e, i, n) {
                    if (void 0 === e) n = "utf8", i = this.length, e = 0;
                    else if (void 0 === i && "string" == typeof e) n = e, i = this.length, e = 0;
                    else {
                        if (!isFinite(e)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                        e |= 0, isFinite(i) ? (i |= 0, void 0 === n && (n = "utf8")) : (n = i, i = void 0)
                    }
                    var r = this.length - e;
                    if ((void 0 === i || i > r) && (i = r), t.length > 0 && (i < 0 || e < 0) || e > this.length) throw new RangeError("Attempt to write outside buffer bounds");
                    n || (n = "utf8");
                    for (var o = !1;;) switch (n) {
                        case "hex":
                            return b(this, t, e, i);
                        case "utf8":
                        case "utf-8":
                            return y(this, t, e, i);
                        case "ascii":
                            return _(this, t, e, i);
                        case "latin1":
                        case "binary":
                            return x(this, t, e, i);
                        case "base64":
                            return w(this, t, e, i);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return C(this, t, e, i);
                        default:
                            if (o) throw new TypeError("Unknown encoding: " + n);
                            n = ("" + n).toLowerCase(), o = !0
                    }
                }, l.prototype.toJSON = function() {
                    return {
                        type: "Buffer",
                        data: Array.prototype.slice.call(this._arr || this, 0)
                    }
                };
                var O = 4096;

                function T(t, e, i) {
                    var n = "";
                    i = Math.min(t.length, i);
                    for (var r = e; r < i; ++r) n += String.fromCharCode(127 & t[r]);
                    return n
                }

                function E(t, e, i) {
                    var n = "";
                    i = Math.min(t.length, i);
                    for (var r = e; r < i; ++r) n += String.fromCharCode(t[r]);
                    return n
                }

                function A(t, e, i) {
                    var n = t.length;
                    (!e || e < 0) && (e = 0), (!i || i < 0 || i > n) && (i = n);
                    for (var r = "", o = e; o < i; ++o) r += z(t[o]);
                    return r
                }

                function P(t, e, i) {
                    for (var n = t.slice(e, i), r = "", o = 0; o < n.length; o += 2) r += String.fromCharCode(n[o] + 256 * n[o + 1]);
                    return r
                }

                function M(t, e, i) {
                    if (t % 1 != 0 || t < 0) throw new RangeError("offset is not uint");
                    if (t + e > i) throw new RangeError("Trying to access beyond buffer length")
                }

                function j(t, e, i, n, r, o) {
                    if (!l.isBuffer(t)) throw new TypeError('"buffer" argument must be a Buffer instance');
                    if (e > r || e < o) throw new RangeError('"value" argument is out of bounds');
                    if (i + n > t.length) throw new RangeError("Index out of range")
                }

                function D(t, e, i, n) {
                    e < 0 && (e = 65535 + e + 1);
                    for (var r = 0, o = Math.min(t.length - i, 2); r < o; ++r) t[i + r] = (e & 255 << 8 * (n ? r : 1 - r)) >>> 8 * (n ? r : 1 - r)
                }

                function I(t, e, i, n) {
                    e < 0 && (e = 4294967295 + e + 1);
                    for (var r = 0, o = Math.min(t.length - i, 4); r < o; ++r) t[i + r] = e >>> 8 * (n ? r : 3 - r) & 255
                }

                function R(t, e, i, n, r, o) {
                    if (i + n > t.length) throw new RangeError("Index out of range");
                    if (i < 0) throw new RangeError("Index out of range")
                }

                function L(t, e, i, n, o) {
                    return o || R(t, 0, i, 4), r.write(t, e, i, n, 23, 4), i + 4
                }

                function F(t, e, i, n, o) {
                    return o || R(t, 0, i, 8), r.write(t, e, i, n, 52, 8), i + 8
                }
                l.prototype.slice = function(t, e) {
                    var i, n = this.length;
                    if (t = ~~t, e = void 0 === e ? n : ~~e, t < 0 ? (t += n) < 0 && (t = 0) : t > n && (t = n), e < 0 ? (e += n) < 0 && (e = 0) : e > n && (e = n), e < t && (e = t), l.TYPED_ARRAY_SUPPORT)(i = this.subarray(t, e)).__proto__ = l.prototype;
                    else {
                        var r = e - t;
                        i = new l(r, void 0);
                        for (var o = 0; o < r; ++o) i[o] = this[o + t]
                    }
                    return i
                }, l.prototype.readUIntLE = function(t, e, i) {
                    t |= 0, e |= 0, i || M(t, e, this.length);
                    for (var n = this[t], r = 1, o = 0; ++o < e && (r *= 256);) n += this[t + o] * r;
                    return n
                }, l.prototype.readUIntBE = function(t, e, i) {
                    t |= 0, e |= 0, i || M(t, e, this.length);
                    for (var n = this[t + --e], r = 1; e > 0 && (r *= 256);) n += this[t + --e] * r;
                    return n
                }, l.prototype.readUInt8 = function(t, e) {
                    return e || M(t, 1, this.length), this[t]
                }, l.prototype.readUInt16LE = function(t, e) {
                    return e || M(t, 2, this.length), this[t] | this[t + 1] << 8
                }, l.prototype.readUInt16BE = function(t, e) {
                    return e || M(t, 2, this.length), this[t] << 8 | this[t + 1]
                }, l.prototype.readUInt32LE = function(t, e) {
                    return e || M(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3]
                }, l.prototype.readUInt32BE = function(t, e) {
                    return e || M(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3])
                }, l.prototype.readIntLE = function(t, e, i) {
                    t |= 0, e |= 0, i || M(t, e, this.length);
                    for (var n = this[t], r = 1, o = 0; ++o < e && (r *= 256);) n += this[t + o] * r;
                    return n >= (r *= 128) && (n -= Math.pow(2, 8 * e)), n
                }, l.prototype.readIntBE = function(t, e, i) {
                    t |= 0, e |= 0, i || M(t, e, this.length);
                    for (var n = e, r = 1, o = this[t + --n]; n > 0 && (r *= 256);) o += this[t + --n] * r;
                    return o >= (r *= 128) && (o -= Math.pow(2, 8 * e)), o
                }, l.prototype.readInt8 = function(t, e) {
                    return e || M(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t]
                }, l.prototype.readInt16LE = function(t, e) {
                    e || M(t, 2, this.length);
                    var i = this[t] | this[t + 1] << 8;
                    return 32768 & i ? 4294901760 | i : i
                }, l.prototype.readInt16BE = function(t, e) {
                    e || M(t, 2, this.length);
                    var i = this[t + 1] | this[t] << 8;
                    return 32768 & i ? 4294901760 | i : i
                }, l.prototype.readInt32LE = function(t, e) {
                    return e || M(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24
                }, l.prototype.readInt32BE = function(t, e) {
                    return e || M(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]
                }, l.prototype.readFloatLE = function(t, e) {
                    return e || M(t, 4, this.length), r.read(this, t, !0, 23, 4)
                }, l.prototype.readFloatBE = function(t, e) {
                    return e || M(t, 4, this.length), r.read(this, t, !1, 23, 4)
                }, l.prototype.readDoubleLE = function(t, e) {
                    return e || M(t, 8, this.length), r.read(this, t, !0, 52, 8)
                }, l.prototype.readDoubleBE = function(t, e) {
                    return e || M(t, 8, this.length), r.read(this, t, !1, 52, 8)
                }, l.prototype.writeUIntLE = function(t, e, i, n) {
                    (t = +t, e |= 0, i |= 0, n) || j(this, t, e, i, Math.pow(2, 8 * i) - 1, 0);
                    var r = 1,
                        o = 0;
                    for (this[e] = 255 & t; ++o < i && (r *= 256);) this[e + o] = t / r & 255;
                    return e + i
                }, l.prototype.writeUIntBE = function(t, e, i, n) {
                    (t = +t, e |= 0, i |= 0, n) || j(this, t, e, i, Math.pow(2, 8 * i) - 1, 0);
                    var r = i - 1,
                        o = 1;
                    for (this[e + r] = 255 & t; --r >= 0 && (o *= 256);) this[e + r] = t / o & 255;
                    return e + i
                }, l.prototype.writeUInt8 = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 1, 255, 0), l.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), this[e] = 255 & t, e + 1
                }, l.prototype.writeUInt16LE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 2, 65535, 0), l.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : D(this, t, e, !0), e + 2
                }, l.prototype.writeUInt16BE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 2, 65535, 0), l.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : D(this, t, e, !1), e + 2
                }, l.prototype.writeUInt32LE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 4, 4294967295, 0), l.TYPED_ARRAY_SUPPORT ? (this[e + 3] = t >>> 24, this[e + 2] = t >>> 16, this[e + 1] = t >>> 8, this[e] = 255 & t) : I(this, t, e, !0), e + 4
                }, l.prototype.writeUInt32BE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 4, 4294967295, 0), l.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : I(this, t, e, !1), e + 4
                }, l.prototype.writeIntLE = function(t, e, i, n) {
                    if (t = +t, e |= 0, !n) {
                        var r = Math.pow(2, 8 * i - 1);
                        j(this, t, e, i, r - 1, -r)
                    }
                    var o = 0,
                        a = 1,
                        s = 0;
                    for (this[e] = 255 & t; ++o < i && (a *= 256);) t < 0 && 0 === s && 0 !== this[e + o - 1] && (s = 1), this[e + o] = (t / a >> 0) - s & 255;
                    return e + i
                }, l.prototype.writeIntBE = function(t, e, i, n) {
                    if (t = +t, e |= 0, !n) {
                        var r = Math.pow(2, 8 * i - 1);
                        j(this, t, e, i, r - 1, -r)
                    }
                    var o = i - 1,
                        a = 1,
                        s = 0;
                    for (this[e + o] = 255 & t; --o >= 0 && (a *= 256);) t < 0 && 0 === s && 0 !== this[e + o + 1] && (s = 1), this[e + o] = (t / a >> 0) - s & 255;
                    return e + i
                }, l.prototype.writeInt8 = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 1, 127, -128), l.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), t < 0 && (t = 255 + t + 1), this[e] = 255 & t, e + 1
                }, l.prototype.writeInt16LE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 2, 32767, -32768), l.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : D(this, t, e, !0), e + 2
                }, l.prototype.writeInt16BE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 2, 32767, -32768), l.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : D(this, t, e, !1), e + 2
                }, l.prototype.writeInt32LE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 4, 2147483647, -2147483648), l.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24) : I(this, t, e, !0), e + 4
                }, l.prototype.writeInt32BE = function(t, e, i) {
                    return t = +t, e |= 0, i || j(this, t, e, 4, 2147483647, -2147483648), t < 0 && (t = 4294967295 + t + 1), l.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : I(this, t, e, !1), e + 4
                }, l.prototype.writeFloatLE = function(t, e, i) {
                    return L(this, t, e, !0, i)
                }, l.prototype.writeFloatBE = function(t, e, i) {
                    return L(this, t, e, !1, i)
                }, l.prototype.writeDoubleLE = function(t, e, i) {
                    return F(this, t, e, !0, i)
                }, l.prototype.writeDoubleBE = function(t, e, i) {
                    return F(this, t, e, !1, i)
                }, l.prototype.copy = function(t, e, i, n) {
                    if (i || (i = 0), n || 0 === n || (n = this.length), e >= t.length && (e = t.length), e || (e = 0), n > 0 && n < i && (n = i), n === i) return 0;
                    if (0 === t.length || 0 === this.length) return 0;
                    if (e < 0) throw new RangeError("targetStart out of bounds");
                    if (i < 0 || i >= this.length) throw new RangeError("sourceStart out of bounds");
                    if (n < 0) throw new RangeError("sourceEnd out of bounds");
                    n > this.length && (n = this.length), t.length - e < n - i && (n = t.length - e + i);
                    var r, o = n - i;
                    if (this === t && i < e && e < n)
                        for (r = o - 1; r >= 0; --r) t[r + e] = this[r + i];
                    else if (o < 1e3 || !l.TYPED_ARRAY_SUPPORT)
                        for (r = 0; r < o; ++r) t[r + e] = this[r + i];
                    else Uint8Array.prototype.set.call(t, this.subarray(i, i + o), e);
                    return o
                }, l.prototype.fill = function(t, e, i, n) {
                    if ("string" == typeof t) {
                        if ("string" == typeof e ? (n = e, e = 0, i = this.length) : "string" == typeof i && (n = i, i = this.length), 1 === t.length) {
                            var r = t.charCodeAt(0);
                            r < 256 && (t = r)
                        }
                        if (void 0 !== n && "string" != typeof n) throw new TypeError("encoding must be a string");
                        if ("string" == typeof n && !l.isEncoding(n)) throw new TypeError("Unknown encoding: " + n)
                    } else "number" == typeof t && (t &= 255);
                    if (e < 0 || this.length < e || this.length < i) throw new RangeError("Out of range index");
                    if (i <= e) return this;
                    var o;
                    if (e >>>= 0, i = void 0 === i ? this.length : i >>> 0, t || (t = 0), "number" == typeof t)
                        for (o = e; o < i; ++o) this[o] = t;
                    else {
                        var a = l.isBuffer(t) ? t : N(new l(t, n).toString()),
                            s = a.length;
                        for (o = 0; o < i - e; ++o) this[o + e] = a[o % s]
                    }
                    return this
                };
                var B = /[^+\/0-9A-Za-z-_]/g;

                function z(t) {
                    return t < 16 ? "0" + t.toString(16) : t.toString(16)
                }

                function N(t, e) {
                    var i;
                    e = e || 1 / 0;
                    for (var n = t.length, r = null, o = [], a = 0; a < n; ++a) {
                        if ((i = t.charCodeAt(a)) > 55295 && i < 57344) {
                            if (!r) {
                                if (i > 56319) {
                                    (e -= 3) > -1 && o.push(239, 191, 189);
                                    continue
                                }
                                if (a + 1 === n) {
                                    (e -= 3) > -1 && o.push(239, 191, 189);
                                    continue
                                }
                                r = i;
                                continue
                            }
                            if (i < 56320) {
                                (e -= 3) > -1 && o.push(239, 191, 189), r = i;
                                continue
                            }
                            i = 65536 + (r - 55296 << 10 | i - 56320)
                        } else r && (e -= 3) > -1 && o.push(239, 191, 189);
                        if (r = null, i < 128) {
                            if ((e -= 1) < 0) break;
                            o.push(i)
                        } else if (i < 2048) {
                            if ((e -= 2) < 0) break;
                            o.push(i >> 6 | 192, 63 & i | 128)
                        } else if (i < 65536) {
                            if ((e -= 3) < 0) break;
                            o.push(i >> 12 | 224, i >> 6 & 63 | 128, 63 & i | 128)
                        } else {
                            if (!(i < 1114112)) throw new Error("Invalid code point");
                            if ((e -= 4) < 0) break;
                            o.push(i >> 18 | 240, i >> 12 & 63 | 128, i >> 6 & 63 | 128, 63 & i | 128)
                        }
                    }
                    return o
                }

                function U(t) {
                    return n.toByteArray(function(t) {
                        if ((t = function(t) {
                                return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
                            }(t).replace(B, "")).length < 2) return "";
                        for (; t.length % 4 != 0;) t += "=";
                        return t
                    }(t))
                }

                function Y(t, e, i, n) {
                    for (var r = 0; r < n && !(r + i >= e.length || r >= t.length); ++r) e[r + i] = t[r];
                    return r
                }
            }).call(e, function() {
                return this
            }())
        }, function(t, e) {
            "use strict";
            e.byteLength = function(t) {
                var e = l(t),
                    i = e[0],
                    n = e[1];
                return 3 * (i + n) / 4 - n
            }, e.toByteArray = function(t) {
                for (var e, i = l(t), o = i[0], a = i[1], s = new r(function(t, e, i) {
                        return 3 * (e + i) / 4 - i
                    }(0, o, a)), c = 0, u = a > 0 ? o - 4 : o, h = 0; h < u; h += 4) e = n[t.charCodeAt(h)] << 18 | n[t.charCodeAt(h + 1)] << 12 | n[t.charCodeAt(h + 2)] << 6 | n[t.charCodeAt(h + 3)], s[c++] = e >> 16 & 255, s[c++] = e >> 8 & 255, s[c++] = 255 & e;
                2 === a && (e = n[t.charCodeAt(h)] << 2 | n[t.charCodeAt(h + 1)] >> 4, s[c++] = 255 & e);
                1 === a && (e = n[t.charCodeAt(h)] << 10 | n[t.charCodeAt(h + 1)] << 4 | n[t.charCodeAt(h + 2)] >> 2, s[c++] = e >> 8 & 255, s[c++] = 255 & e);
                return s
            }, e.fromByteArray = function(t) {
                for (var e, n = t.length, r = n % 3, o = [], a = 0, s = n - r; a < s; a += 16383) o.push(u(t, a, a + 16383 > s ? s : a + 16383));
                1 === r ? (e = t[n - 1], o.push(i[e >> 2] + i[e << 4 & 63] + "==")) : 2 === r && (e = (t[n - 2] << 8) + t[n - 1], o.push(i[e >> 10] + i[e >> 4 & 63] + i[e << 2 & 63] + "="));
                return o.join("")
            };
            for (var i = [], n = [], r = "undefined" != typeof Uint8Array ? Uint8Array : Array, o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = 0, s = o.length; a < s; ++a) i[a] = o[a], n[o.charCodeAt(a)] = a;

            function l(t) {
                var e = t.length;
                if (e % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
                var i = t.indexOf("=");
                return -1 === i && (i = e), [i, i === e ? 0 : 4 - i % 4]
            }

            function c(t) {
                return i[t >> 18 & 63] + i[t >> 12 & 63] + i[t >> 6 & 63] + i[63 & t]
            }

            function u(t, e, i) {
                for (var n, r = [], o = e; o < i; o += 3) n = (t[o] << 16 & 16711680) + (t[o + 1] << 8 & 65280) + (255 & t[o + 2]), r.push(c(n));
                return r.join("")
            }
            n["-".charCodeAt(0)] = 62, n["_".charCodeAt(0)] = 63
        }, function(t, e) {
            e.read = function(t, e, i, n, r) {
                var o, a, s = 8 * r - n - 1,
                    l = (1 << s) - 1,
                    c = l >> 1,
                    u = -7,
                    h = i ? r - 1 : 0,
                    d = i ? -1 : 1,
                    f = t[e + h];
                for (h += d, o = f & (1 << -u) - 1, f >>= -u, u += s; u > 0; o = 256 * o + t[e + h], h += d, u -= 8);
                for (a = o & (1 << -u) - 1, o >>= -u, u += n; u > 0; a = 256 * a + t[e + h], h += d, u -= 8);
                if (0 === o) o = 1 - c;
                else {
                    if (o === l) return a ? NaN : 1 / 0 * (f ? -1 : 1);
                    a += Math.pow(2, n), o -= c
                }
                return (f ? -1 : 1) * a * Math.pow(2, o - n)
            }, e.write = function(t, e, i, n, r, o) {
                var a, s, l, c = 8 * o - r - 1,
                    u = (1 << c) - 1,
                    h = u >> 1,
                    d = 23 === r ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                    f = n ? 0 : o - 1,
                    p = n ? 1 : -1,
                    g = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
                for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (s = isNaN(e) ? 1 : 0, a = u) : (a = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), (e += a + h >= 1 ? d / l : d * Math.pow(2, 1 - h)) * l >= 2 && (a++, l /= 2), a + h >= u ? (s = 0, a = u) : a + h >= 1 ? (s = (e * l - 1) * Math.pow(2, r), a += h) : (s = e * Math.pow(2, h - 1) * Math.pow(2, r), a = 0)); r >= 8; t[i + f] = 255 & s, f += p, s /= 256, r -= 8);
                for (a = a << r | s, c += r; c > 0; t[i + f] = 255 & a, f += p, a /= 256, c -= 8);
                t[i + f - p] |= 128 * g
            }
        }, function(t, e) {
            var i = {}.toString;
            t.exports = Array.isArray || function(t) {
                return "[object Array]" == i.call(t)
            }
        }, function(t, e) {}, function(t, e) {}, function(t, e) {}, function(t, e) {}, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = s(i(4)),
                o = s(i(116)),
                a = s(i(73));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = a.default.componentNames,
                c = a.default.rejectMessages,
                u = {
                    padding: 0,
                    crossOrigin: "Anonymous"
                },
                h = function(t) {
                    function e(t) {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, l.IMAGE_LOADER, t))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, o.default), n(e, [{
                        key: "load",
                        value: function(t, e) {
                            var i = this,
                                n = void 0;
                            if (t || e) n = this._setBackgroundImage(e).then(function(e) {
                                return i.setCanvasImage(t, e), i.adjustCanvasDimension(), e
                            });
                            else {
                                var o = this.getCanvas();
                                o.backgroundImage = null, o.renderAll(), n = new r.default(function(t) {
                                    i.setCanvasImage("", null), t()
                                })
                            }
                            return n
                        }
                    }, {
                        key: "_setBackgroundImage",
                        value: function(t) {
                            var e = this;
                            return t ? new r.default(function(i, n) {
                                var r = e.getCanvas();
                                r.setBackgroundImage(t, function() {
                                    var t = r.backgroundImage;
                                    t && t.getElement() ? i(t) : n(c.loadingImageFailed)
                                }, u)
                            }) : r.default.reject(c.loadImage)
                        }
                    }]), e
                }();
            t.exports = h
        }, function(t, e) {
            "use strict";
            var i = function() {
                function t(t, e) {
                    for (var i = 0; i < e.length; i++) {
                        var n = e[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                    }
                }
                return function(e, i, n) {
                    return i && t(e.prototype, i), n && t(e, n), e
                }
            }();
            var n = function() {
                function t(e, i) {
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this.name = e, this.graphics = i
                }
                return i(t, [{
                    key: "fire",
                    value: function() {
                        for (var t = this.graphics, e = arguments.length, i = Array(e), n = 0; n < e; n++) i[n] = arguments[n];
                        return this.graphics.fire.apply(t, i)
                    }
                }, {
                    key: "setCanvasImage",
                    value: function(t, e) {
                        this.graphics.setCanvasImage(t, e)
                    }
                }, {
                    key: "getCanvasElement",
                    value: function() {
                        return this.graphics.getCanvasElement()
                    }
                }, {
                    key: "getCanvas",
                    value: function() {
                        return this.graphics.getCanvas()
                    }
                }, {
                    key: "getCanvasImage",
                    value: function() {
                        return this.graphics.getCanvasImage()
                    }
                }, {
                    key: "getImageName",
                    value: function() {
                        return this.graphics.getImageName()
                    }
                }, {
                    key: "getEditor",
                    value: function() {
                        return this.graphics.getEditor()
                    }
                }, {
                    key: "getName",
                    value: function() {
                        return this.name
                    }
                }, {
                    key: "setImageProperties",
                    value: function(t, e) {
                        this.graphics.setImageProperties(t, e)
                    }
                }, {
                    key: "setCanvasCssDimension",
                    value: function(t) {
                        this.graphics.setCanvasCssDimension(t)
                    }
                }, {
                    key: "setCanvasBackstoreDimension",
                    value: function(t) {
                        this.graphics.setCanvasBackstoreDimension(t)
                    }
                }, {
                    key: "adjustCanvasDimension",
                    value: function() {
                        this.graphics.adjustCanvasDimension()
                    }
                }]), t
            }();
            t.exports = n
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = u(i(3)),
                o = i(106),
                a = u(i(116)),
                s = u(i(118)),
                l = i(73),
                c = i(72);

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = {
                    top: -10,
                    left: -10,
                    height: 1,
                    width: 1
                },
                d = function(t) {
                    function e(t) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var i = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, l.componentNames.CROPPER, t));
                        return i._cropzone = null, i._startX = null, i._startY = null, i._withShiftKey = !1, i._listeners = {
                            keydown: i._onKeyDown.bind(i),
                            keyup: i._onKeyUp.bind(i),
                            mousedown: i._onFabricMouseDown.bind(i),
                            mousemove: i._onFabricMouseMove.bind(i),
                            mouseup: i._onFabricMouseUp.bind(i)
                        }, i
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, a.default), n(e, [{
                        key: "start",
                        value: function() {
                            if (!this._cropzone) {
                                var t = this.getCanvas();
                                t.forEachObject(function(t) {
                                    t.evented = !1
                                }), this._cropzone = new s.default(t, {
                                    left: 0,
                                    top: 0,
                                    width: .5,
                                    height: .5,
                                    strokeWidth: 0,
                                    cornerSize: 10,
                                    cornerColor: "black",
                                    fill: "transparent",
                                    hasRotatingPoint: !1,
                                    hasBorders: !1,
                                    lockScalingFlip: !0,
                                    lockRotation: !0
                                }, this.graphics.cropSelectionStyle), t.discardActiveObject(), t.add(this._cropzone), t.on("mouse:down", this._listeners.mousedown), t.selection = !1, t.defaultCursor = "crosshair", o.fabric.util.addListener(document, "keydown", this._listeners.keydown), o.fabric.util.addListener(document, "keyup", this._listeners.keyup)
                            }
                        }
                    }, {
                        key: "end",
                        value: function() {
                            var t = this.getCanvas(),
                                e = this._cropzone;
                            e && (t.remove(e), t.selection = !0, t.defaultCursor = "default", t.off("mouse:down", this._listeners.mousedown), t.forEachObject(function(t) {
                                t.evented = !0
                            }), this._cropzone = null, o.fabric.util.removeListener(document, "keydown", this._listeners.keydown), o.fabric.util.removeListener(document, "keyup", this._listeners.keyup))
                        }
                    }, {
                        key: "_onFabricMouseDown",
                        value: function(t) {
                            var e = this.getCanvas();
                            if (!t.target) {
                                e.selection = !1;
                                var i = e.getPointer(t.e);
                                this._startX = i.x, this._startY = i.y, e.on({
                                    "mouse:move": this._listeners.mousemove,
                                    "mouse:up": this._listeners.mouseup
                                })
                            }
                        }
                    }, {
                        key: "_onFabricMouseMove",
                        value: function(t) {
                            var e = this.getCanvas(),
                                i = e.getPointer(t.e),
                                n = i.x,
                                r = i.y,
                                o = this._cropzone;
                            Math.abs(n - this._startX) + Math.abs(r - this._startY) > 10 && (e.remove(o), o.set(this._calcRectDimensionFromPoint(n, r)), e.add(o), e.setActiveObject(o))
                        }
                    }, {
                        key: "_calcRectDimensionFromPoint",
                        value: function(t, e) {
                            var i = this.getCanvas(),
                                n = i.getWidth(),
                                r = i.getHeight(),
                                o = this._startX,
                                a = this._startY,
                                s = (0, c.clamp)(t, 0, o),
                                l = (0, c.clamp)(e, 0, a),
                                u = (0, c.clamp)(t, o, n) - s,
                                h = (0, c.clamp)(e, a, r) - l;
                            return this._withShiftKey && (u > h ? h = u : h > u && (u = h), o >= t && (s = o - u), a >= e && (l = a - h)), {
                                left: s,
                                top: l,
                                width: u,
                                height: h
                            }
                        }
                    }, {
                        key: "_onFabricMouseUp",
                        value: function() {
                            var t = this._cropzone,
                                e = this._listeners,
                                i = this.getCanvas();
                            i.setActiveObject(t), i.off({
                                "mouse:move": e.mousemove,
                                "mouse:up": e.mouseup
                            })
                        }
                    }, {
                        key: "getCroppedImageData",
                        value: function(t) {
                            var e = this.getCanvas(),
                                i = e.contains(this._cropzone);
                            if (!t) return null;
                            i && e.remove(this._cropzone);
                            var n = {
                                imageName: this.getImageName(),
                                url: e.toDataURL(t)
                            };
                            return i && e.add(this._cropzone), n
                        }
                    }, {
                        key: "getCropzoneRect",
                        value: function() {
                            var t = this._cropzone;
                            return t.isValid() ? {
                                left: t.left,
                                top: t.top,
                                width: t.width,
                                height: t.height
                            } : null
                        }
                    }, {
                        key: "setCropzoneRect",
                        value: function(t) {
                            var e = this.getCanvas(),
                                i = this._cropzone;
                            e.discardActiveObject(), e.selection = !1, e.remove(i), i.set(t ? this._getPresetCropSizePosition(t) : h), e.add(i), e.selection = !0, t && e.setActiveObject(i)
                        }
                    }, {
                        key: "_getPresetCropSizePosition",
                        value: function(t) {
                            var e = this.getCanvas(),
                                i = e.getWidth(),
                                n = e.getHeight(),
                                o = i >= n ? i : n,
                                a = function(t, e) {
                                    return t > e ? e / t : 1
                                },
                                s = o * t,
                                l = o,
                                c = a(s, i),
                                u = r.default.map([s, l], function(t) {
                                    return t * c
                                });
                            s = u[0];
                            var h = a(l = u[1], n),
                                d = r.default.map([s, l], function(t) {
                                    return t * h
                                });
                            return s = d[0], {
                                top: (n - (l = d[1])) / 2,
                                left: (i - s) / 2,
                                width: s,
                                height: l
                            }
                        }
                    }, {
                        key: "_onKeyDown",
                        value: function(t) {
                            t.keyCode === l.keyCodes.SHIFT && (this._withShiftKey = !0)
                        }
                    }, {
                        key: "_onKeyUp",
                        value: function(t) {
                            t.keyCode === l.keyCodes.SHIFT && (this._withShiftKey = !1)
                        }
                    }]), e
                }();
            t.exports = d
        }, function(t, e, i) {
            "use strict";
            var n = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i(3)),
                r = i(106),
                o = i(72);
            var a = r.fabric.util.createClass(r.fabric.Rect, {
                initialize: function(t, e, i) {
                    (e = n.default.extend(e, i)).type = "cropzone", this.callSuper("initialize", e), this.canvas = t, this.options = e, this.on({
                        moving: this._onMoving.bind(this),
                        scaling: this._onScaling.bind(this)
                    })
                },
                _renderCropzone: function() {
                    var t = this.flipX ? -1 : 1,
                        e = this.flipY ? -1 : 1,
                        i = t / this.scaleX,
                        n = e / this.scaleY,
                        r = this.canvas.getContext();
                    r.scale(i, n), this._fillOuterRect(r, "rgba(0, 0, 0, 0.5)"), this.options.lineWidth ? (this._fillInnerRect(r), this._strokeBorder(r, "rgb(255, 255, 255)", {
                        lineWidth: this.options.lineWidth
                    })) : (this._strokeBorder(r, "rgb(0, 0, 0)", {
                        lineDashWidth: 7
                    }), this._strokeBorder(r, "rgb(255, 255, 255)", {
                        lineDashWidth: 7,
                        lineDashOffset: 7
                    })), r.scale(1 / i, 1 / n)
                },
                _render: function() {
                    var t = this.canvas.getContext();
                    this.callSuper("_render", t), this._renderCropzone()
                },
                _fillOuterRect: function(t, e) {
                    var i = this._getCoordinates(),
                        n = i.x,
                        r = i.y;
                    t.save(), t.fillStyle = e, t.beginPath(), t.moveTo(n[0] - 1, r[0] - 1), t.lineTo(n[3] + 1, r[0] - 1), t.lineTo(n[3] + 1, r[3] + 1), t.lineTo(n[0] - 1, r[3] + 1), t.lineTo(n[0] - 1, r[0] - 1), t.closePath(), t.moveTo(n[1], r[1]), t.lineTo(n[1], r[2]), t.lineTo(n[2], r[2]), t.lineTo(n[2], r[1]), t.lineTo(n[1], r[1]), t.closePath(), t.fill(), t.restore()
                },
                _fillInnerRect: function(t) {
                    var e = this._getCoordinates(),
                        i = e.x,
                        n = e.y,
                        r = this._caculateInnerPosition(i, (i[2] - i[1]) / 3),
                        o = this._caculateInnerPosition(n, (n[2] - n[1]) / 3);
                    t.save(), t.strokeStyle = "rgba(255, 255, 255, 0.7)", t.lineWidth = this.options.lineWidth, t.beginPath(), t.moveTo(r[0], o[1]), t.lineTo(r[3], o[1]), t.moveTo(r[0], o[2]), t.lineTo(r[3], o[2]), t.moveTo(r[1], o[0]), t.lineTo(r[1], o[3]), t.moveTo(r[2], o[0]), t.lineTo(r[2], o[3]), t.stroke(), t.closePath(), t.restore()
                },
                _caculateInnerPosition: function(t, e) {
                    var i = [];
                    return i[0] = t[1], i[1] = t[1] + e, i[2] = t[1] + 2 * e, i[3] = t[2], i
                },
                _getCoordinates: function() {
                    var t = this.canvas,
                        e = this.width,
                        i = this.height,
                        r = this.left,
                        o = this.top,
                        a = e / 2,
                        s = i / 2,
                        l = t.getHeight(),
                        c = t.getWidth();
                    return {
                        x: n.default.map([-(a + r), -a, a, a + (c - r - e)], Math.ceil),
                        y: n.default.map([-(s + o), -s, s, s + (l - o - i)], Math.ceil)
                    }
                },
                _strokeBorder: function(t, e, i) {
                    var n = i.lineDashWidth,
                        r = i.lineDashOffset,
                        o = i.lineWidth,
                        a = this.width / 2,
                        s = this.height / 2;
                    t.save(), t.strokeStyle = e, t.setLineDash && t.setLineDash([n, n]), r && (t.lineDashOffset = r), o && (t.lineWidth = o), t.beginPath(), t.moveTo(-a, -s), t.lineTo(a, -s), t.lineTo(a, s), t.lineTo(-a, s), t.lineTo(-a, -s), t.stroke(), t.restore()
                },
                _onMoving: function() {
                    var t = this.height,
                        e = this.width,
                        i = this.left,
                        n = this.top,
                        r = this.canvas.getWidth() - e,
                        a = this.canvas.getHeight() - t;
                    this.left = (0, o.clamp)(i, 0, r), this.top = (0, o.clamp)(n, 0, a)
                },
                _onScaling: function(t) {
                    var e = this.canvas.getPointer(t.e),
                        i = this._calcScalingSizeFromPointer(e);
                    this.scale(1).set(i)
                },
                _calcScalingSizeFromPointer: function(t) {
                    var e = t.x,
                        i = t.y,
                        n = this._calcTopLeftScalingSizeFromPointer(e, i),
                        r = this._calcBottomRightScalingSizeFromPointer(e, i);
                    return this._makeScalingSettings(n, r)
                },
                _calcTopLeftScalingSizeFromPointer: function(t, e) {
                    var i = this.getBoundingRect(!1, !0),
                        n = i.height + this.top,
                        r = i.width + this.left,
                        a = (0, o.clamp)(e, 0, n - 1),
                        s = (0, o.clamp)(t, 0, r - 1);
                    return {
                        top: a,
                        left: s,
                        width: r - s,
                        height: n - a
                    }
                },
                _calcBottomRightScalingSizeFromPointer: function(t, e) {
                    var i = this.canvas,
                        n = i.width,
                        r = i.height,
                        a = this.left,
                        s = this.top;
                    return {
                        width: (0, o.clamp)(t, a + 1, n) - a,
                        height: (0, o.clamp)(e, s + 1, r) - s
                    }
                },
                _makeScalingSettings: function(t, e) {
                    var i = t.width,
                        n = t.height,
                        r = e.height,
                        o = e.width,
                        a = t.left,
                        s = t.top,
                        l = void 0;
                    switch (this.__corner) {
                        case "tl":
                            l = t;
                            break;
                        case "tr":
                            l = {
                                width: o,
                                height: n,
                                top: s
                            };
                            break;
                        case "bl":
                            l = {
                                width: i,
                                height: r,
                                left: a
                            };
                            break;
                        case "br":
                            l = e;
                            break;
                        case "ml":
                            l = {
                                width: i,
                                left: a
                            };
                            break;
                        case "mt":
                            l = {
                                height: n,
                                top: s
                            };
                            break;
                        case "mr":
                            l = {
                                width: o
                            };
                            break;
                        case "mb":
                            l = {
                                height: r
                            }
                    }
                    return l
                },
                isValid: function() {
                    return this.left >= 0 && this.top >= 0 && this.width > 0 && this.height > 0
                }
            });
            t.exports = a
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = l(i(3)),
                o = l(i(4)),
                a = l(i(116)),
                s = l(i(73));

            function l(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var c = s.default.componentNames,
                u = s.default.rejectMessages,
                h = function(t) {
                    function e(t) {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, c.FLIP, t))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, a.default), n(e, [{
                        key: "getCurrentSetting",
                        value: function() {
                            var t = this.getCanvasImage();
                            return {
                                flipX: t.flipX,
                                flipY: t.flipY
                            }
                        }
                    }, {
                        key: "set",
                        value: function(t) {
                            var e = this.getCurrentSetting(),
                                i = e.flipX !== t.flipX,
                                n = e.flipY !== t.flipY;
                            return i || n ? (r.default.extend(e, t), this.setImageProperties(e, !0), this._invertAngle(i, n), this._flipObjects(i, n), o.default.resolve({
                                flipX: e.flipX,
                                flipY: e.flipY,
                                angle: this.getCanvasImage().angle
                            })) : o.default.reject(u.flip)
                        }
                    }, {
                        key: "_invertAngle",
                        value: function(t, e) {
                            var i = this.getCanvasImage(),
                                n = i.angle;
                            t && (n *= -1), e && (n *= -1), i.rotate(parseFloat(n)).setCoords()
                        }
                    }, {
                        key: "_flipObjects",
                        value: function(t, e) {
                            var i = this.getCanvas();
                            t && i.forEachObject(function(t) {
                                t.set({
                                    angle: parseFloat(-1 * t.angle),
                                    flipX: !t.flipX,
                                    left: i.width - t.left
                                }).setCoords()
                            }), e && i.forEachObject(function(t) {
                                t.set({
                                    angle: parseFloat(-1 * t.angle),
                                    flipY: !t.flipY,
                                    top: i.height - t.top
                                }).setCoords()
                            }), i.renderAll()
                        }
                    }, {
                        key: "reset",
                        value: function() {
                            return this.set({
                                flipX: !1,
                                flipY: !1
                            })
                        }
                    }, {
                        key: "flipX",
                        value: function() {
                            var t = this.getCurrentSetting();
                            return this.set({
                                flipX: !t.flipX,
                                flipY: t.flipY
                            })
                        }
                    }, {
                        key: "flipY",
                        value: function() {
                            var t = this.getCurrentSetting();
                            return this.set({
                                flipX: t.flipX,
                                flipY: !t.flipY
                            })
                        }
                    }]), e
                }();
            t.exports = h
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(106),
                o = s(i(4)),
                a = s(i(116));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = s(i(73)).default.componentNames,
                c = function(t) {
                    function e(t) {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, l.ROTATION, t))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, a.default), n(e, [{
                        key: "getCurrentAngle",
                        value: function() {
                            return this.getCanvasImage().angle
                        }
                    }, {
                        key: "setAngle",
                        value: function(t) {
                            var e = this.getCurrentAngle() % 360;
                            t %= 360;
                            var i = this.getCanvasImage(),
                                n = i.getCenterPoint();
                            i.set({
                                angle: t
                            }).setCoords(), this.adjustCanvasDimension();
                            var r = i.getCenterPoint();
                            return this._rotateForEachObject(n, r, t - e), o.default.resolve(t)
                        }
                    }, {
                        key: "_rotateForEachObject",
                        value: function(t, e, i) {
                            var n = this.getCanvas(),
                                o = t.x - e.x,
                                a = t.y - e.y;
                            n.forEachObject(function(e) {
                                var n = e.getCenterPoint(),
                                    s = r.fabric.util.degreesToRadians(i),
                                    l = r.fabric.util.rotatePoint(n, t, s);
                                e.set({
                                    left: l.x - o,
                                    top: l.y - a,
                                    angle: (e.angle + i) % 360
                                }), e.setCoords()
                            }), n.renderAll()
                        }
                    }, {
                        key: "rotate",
                        value: function(t) {
                            var e = this.getCurrentAngle();
                            return this.setAngle(e + t)
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(106),
                o = s(i(116)),
                a = s(i(73));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = function(t) {
                function e(t) {
                    ! function(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                    }(this, e);
                    var i = function(t, e) {
                        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !e || "object" != typeof e && "function" != typeof e ? t : e
                    }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, a.default.componentNames.FREE_DRAWING, t));
                    return i.width = 12, i.oColor = new r.fabric.Color("rgba(0, 0, 0, 0.5)"), i
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, o.default), n(e, [{
                    key: "start",
                    value: function(t) {
                        this.getCanvas().isDrawingMode = !0, this.setBrush(t)
                    }
                }, {
                    key: "setBrush",
                    value: function(t) {
                        var e = this.getCanvas().freeDrawingBrush;
                        t = t || {}, this.width = t.width || this.width, t.color && (this.oColor = new r.fabric.Color(t.color)), e.width = this.width, e.color = this.oColor.toRgba()
                    }
                }, {
                    key: "end",
                    value: function() {
                        this.getCanvas().isDrawingMode = !1
                    }
                }]), e
            }();
            t.exports = l
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(106),
                o = s(i(116)),
                a = s(i(73));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = a.default.eventNames,
                c = function(t) {
                    function e(t) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var i = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, a.default.componentNames.LINE, t));
                        return i._width = 12, i._oColor = new r.fabric.Color("rgba(0, 0, 0, 0.5)"), i._listeners = {
                            mousedown: i._onFabricMouseDown.bind(i),
                            mousemove: i._onFabricMouseMove.bind(i),
                            mouseup: i._onFabricMouseUp.bind(i)
                        }, i
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, o.default), n(e, [{
                        key: "start",
                        value: function(t) {
                            var e = this.getCanvas();
                            e.defaultCursor = "crosshair", e.selection = !1, this.setBrush(t), e.forEachObject(function(t) {
                                t.set({
                                    evented: !1
                                })
                            }), e.on({
                                "mouse:down": this._listeners.mousedown
                            })
                        }
                    }, {
                        key: "setBrush",
                        value: function(t) {
                            var e = this.getCanvas().freeDrawingBrush;
                            t = t || {}, this._width = t.width || this._width, t.color && (this._oColor = new r.fabric.Color(t.color)), e.width = this._width, e.color = this._oColor.toRgba()
                        }
                    }, {
                        key: "end",
                        value: function() {
                            var t = this.getCanvas();
                            t.defaultCursor = "default", t.selection = !0, t.forEachObject(function(t) {
                                t.set({
                                    evented: !0
                                })
                            }), t.off("mouse:down", this._listeners.mousedown)
                        }
                    }, {
                        key: "_onFabricMouseDown",
                        value: function(t) {
                            var e = this.getCanvas(),
                                i = e.getPointer(t.e),
                                n = [i.x, i.y, i.x, i.y];
                            this._line = new r.fabric.Line(n, {
                                stroke: this._oColor.toRgba(),
                                strokeWidth: this._width,
                                evented: !1
                            }), this._line.set(a.default.fObjectOptions.SELECTION_STYLE), e.add(this._line), e.on({
                                "mouse:move": this._listeners.mousemove,
                                "mouse:up": this._listeners.mouseup
                            })
                        }
                    }, {
                        key: "_onFabricMouseMove",
                        value: function(t) {
                            var e = this.getCanvas(),
                                i = e.getPointer(t.e);
                            this._line.set({
                                x2: i.x,
                                y2: i.y
                            }), this._line.setCoords(), e.renderAll()
                        }
                    }, {
                        key: "_onFabricMouseUp",
                        value: function() {
                            var t = this.getCanvas(),
                                e = this.graphics.createObjectProperties(this._line);
                            this.fire(l.ADD_OBJECT, e), this._line = null, t.off({
                                "mouse:move": this._listeners.mousemove,
                                "mouse:up": this._listeners.mouseup
                            })
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(106),
                o = u(i(3)),
                a = u(i(4)),
                s = u(i(116)),
                l = u(i(73)),
                c = u(i(72));

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = l.default.eventNames,
                d = {
                    fill: "#000000",
                    left: 0,
                    top: 0
                },
                f = {
                    fill: "#000000",
                    fontStyle: "normal",
                    fontWeight: "normal",
                    textAlign: "left",
                    textDecoraiton: ""
                },
                p = o.default.browser,
                g = c.default.makeStyleText({
                    position: "absolute",
                    padding: 0,
                    display: "none",
                    border: "1px dotted red",
                    overflow: "hidden",
                    resize: "none",
                    outline: "none",
                    "border-radius": 0,
                    "background-color": "transparent",
                    "-webkit-appearance": "none",
                    "z-index": 9999,
                    "white-space": "pre"
                }),
                m = function(t) {
                    function e(t) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var i = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, l.default.componentNames.TEXT, t));
                        return i._defaultStyles = d, i._isSelected = !1, i._selectedObj = {}, i._editingObj = {}, i._listeners = {
                            mousedown: i._onFabricMouseDown.bind(i),
                            select: i._onFabricSelect.bind(i),
                            selectClear: i._onFabricSelectClear.bind(i),
                            scaling: i._onFabricScaling.bind(i)
                        }, i._textarea = null, i._ratio = 1, i._lastClickTime = (new Date).getTime(), i._editingObjInfos = {}, i.isPrevEditing = !1, i.useItext = t.useItext, i
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, s.default), n(e, [{
                        key: "start",
                        value: function() {
                            var t = this.getCanvas();
                            t.selection = !1, t.defaultCursor = "text", t.on({
                                "mouse:down": this._listeners.mousedown,
                                "object:selected": this._listeners.select,
                                "before:selection:cleared": this._listeners.selectClear,
                                "object:scaling": this._listeners.scaling,
                                "text:editing": this._listeners.modify
                            }), this.useItext ? t.forEachObject(function(t) {
                                "i-text" === t.type && t.set({
                                    left: t.left - t.width / 2,
                                    top: t.top - t.height / 2,
                                    originX: "left",
                                    originY: "top"
                                })
                            }) : this._createTextarea(), this.setCanvasRatio()
                        }
                    }, {
                        key: "end",
                        value: function() {
                            var t = this.getCanvas();
                            t.selection = !0, t.defaultCursor = "default", this.useItext ? t.forEachObject(function(e) {
                                "i-text" === e.type && ("" === e.text ? t.remove(e) : e.set({
                                    left: e.left + e.width / 2,
                                    top: e.top + e.height / 2,
                                    originX: "center",
                                    originY: "center"
                                }))
                            }) : (t.discardActiveObject(), this._removeTextarea()), t.off({
                                "mouse:down": this._listeners.mousedown,
                                "object:selected": this._listeners.select,
                                "before:selection:cleared": this._listeners.selectClear,
                                "object:scaling": this._listeners.scaling,
                                "text:editing": this._listeners.modify
                            })
                        }
                    }, {
                        key: "add",
                        value: function(t, e) {
                            var i = this;
                            return new a.default(function(n) {
                                var a = i.getCanvas(),
                                    s = null,
                                    c = l.default.fObjectOptions.SELECTION_STYLE,
                                    u = i._defaultStyles;
                                i._setInitPos(e.position), e.styles && (u = o.default.extend(u, e.styles)), i.useItext ? (s = new r.fabric.IText(t, u), c = o.default.extend({}, c, {
                                    originX: "left",
                                    originY: "top"
                                })) : s = new r.fabric.Text(t, u), s.set(c), s.on({
                                    mouseup: i._onFabricMouseUp.bind(i)
                                }), a.add(s), a.getActiveObject() || a.setActiveObject(s), i.isPrevEditing = !0, n(i.graphics.createObjectProperties(s))
                            })
                        }
                    }, {
                        key: "change",
                        value: function(t, e) {
                            var i = this;
                            return new a.default(function(n) {
                                t.set("text", e), i.getCanvas().renderAll(), n()
                            })
                        }
                    }, {
                        key: "setStyle",
                        value: function(t, e) {
                            var i = this;
                            return new a.default(function(n) {
                                o.default.forEach(e, function(i, n) {
                                    t[n] === i && (e[n] = f[n] || "")
                                }, i), t.set(e), i.getCanvas().renderAll(), n()
                            })
                        }
                    }, {
                        key: "getText",
                        value: function(t) {
                            return t.text
                        }
                    }, {
                        key: "setSelectedInfo",
                        value: function(t, e) {
                            this._selectedObj = t, this._isSelected = e
                        }
                    }, {
                        key: "isSelected",
                        value: function() {
                            return this._isSelected
                        }
                    }, {
                        key: "getSelectedObj",
                        value: function() {
                            return this._selectedObj
                        }
                    }, {
                        key: "setCanvasRatio",
                        value: function() {
                            var t = this.getCanvasElement(),
                                e = parseInt(t.style.maxWidth, 10),
                                i = t.width / e;
                            this._ratio = i
                        }
                    }, {
                        key: "getCanvasRatio",
                        value: function() {
                            return this._ratio
                        }
                    }, {
                        key: "_setInitPos",
                        value: function(t) {
                            t = t || this.getCanvasImage().getCenterPoint(), this._defaultStyles.left = t.x, this._defaultStyles.top = t.y
                        }
                    }, {
                        key: "_createTextarea",
                        value: function() {
                            var t = this.getCanvasElement().parentNode,
                                e = document.createElement("textarea");
                            e.className = "tui-image-eidtor-textarea", e.setAttribute("style", g), e.setAttribute("wrap", "off"), t.appendChild(e), this._textarea = e, this._listeners = o.default.extend(this._listeners, {
                                input: this._onInput.bind(this),
                                keydown: this._onKeyDown.bind(this),
                                blur: this._onBlur.bind(this),
                                scroll: this._onScroll.bind(this)
                            }), p.msie && 9 === p.version ? r.fabric.util.addListener(e, "keydown", this._listeners.keydown) : r.fabric.util.addListener(e, "input", this._listeners.input), r.fabric.util.addListener(e, "blur", this._listeners.blur), r.fabric.util.addListener(e, "scroll", this._listeners.scroll)
                        }
                    }, {
                        key: "_removeTextarea",
                        value: function() {
                            var t = this.getCanvasElement().parentNode,
                                e = t.querySelector("textarea");
                            t.removeChild(e), this._textarea = null, p.msie && p.version < 10 ? r.fabric.util.removeListener(e, "keydown", this._listeners.keydown) : r.fabric.util.removeListener(e, "input", this._listeners.input), r.fabric.util.removeListener(e, "blur", this._listeners.blur), r.fabric.util.removeListener(e, "scroll", this._listeners.scroll)
                        }
                    }, {
                        key: "_onInput",
                        value: function() {
                            var t = this.getCanvasRatio(),
                                e = this._editingObj,
                                i = this._textarea.style;
                            i.width = Math.ceil(e.width / t) + "px", i.height = Math.ceil(e.height / t) + "px"
                        }
                    }, {
                        key: "_onKeyDown",
                        value: function() {
                            var t = this,
                                e = this.getCanvasRatio(),
                                i = this._editingObj,
                                n = this._textarea.style;
                            setTimeout(function() {
                                i.text(t._textarea.value), n.width = Math.ceil(i.width / e) + "px", n.height = Math.ceil(i.height / e) + "px"
                            }, 0)
                        }
                    }, {
                        key: "_onBlur",
                        value: function() {
                            var t = this.getCanvasRatio(),
                                e = this._editingObj,
                                i = this._editingObjInfos,
                                n = this._textarea.value,
                                r = e.width / t - i.width / t,
                                a = e.height / t - i.height / t;
                            if (1 === t && (r /= 2, a /= 2), this._textarea.style.display = "none", e.set({
                                    left: i.left + r,
                                    top: i.top + a
                                }), n.length) {
                                this.getCanvas().add(e);
                                var s = {
                                    id: o.default.stamp(e),
                                    type: e.type,
                                    text: n
                                };
                                this.fire(h.TEXT_CHANGED, s)
                            }
                        }
                    }, {
                        key: "_onScroll",
                        value: function() {
                            this._textarea.scrollLeft = 0, this._textarea.scrollTop = 0
                        }
                    }, {
                        key: "_onFabricScaling",
                        value: function(t) {
                            var e = t.target,
                                i = e.fontSize * e.scaleY;
                            e.fontSize = i, e.scaleX = 1, e.scaleY = 1
                        }
                    }, {
                        key: "_onFabricSelectClear",
                        value: function(t) {
                            var e = this.getSelectedObj();
                            this.isPrevEditing = !0, this.setSelectedInfo(t.target, !1), e && "" === e.text && this.getCanvas().remove(e)
                        }
                    }, {
                        key: "_onFabricSelect",
                        value: function(t) {
                            this.isPrevEditing = !0, this.setSelectedInfo(t.target, !0)
                        }
                    }, {
                        key: "_onFabricMouseDown",
                        value: function(t) {
                            var e = t.target;
                            e && !e.isType("text") || (this.isPrevEditing ? this.isPrevEditing = !1 : this._fireAddText(t))
                        }
                    }, {
                        key: "_fireAddText",
                        value: function(t) {
                            var e = t.target,
                                i = t.e || {},
                                n = this.getCanvas().getPointer(i);
                            e || this.fire(h.ADD_TEXT, {
                                originPosition: {
                                    x: n.x,
                                    y: n.y
                                },
                                clientPosition: {
                                    x: i.clientX || 0,
                                    y: i.clientY || 0
                                }
                            })
                        }
                    }, {
                        key: "_onFabricMouseUp",
                        value: function(t) {
                            var e = t.target,
                                i = (new Date).getTime();
                            (e.isEditing || this._isDoubleClick(i)) && (this.useItext || this._changeToEditingMode(e), this.fire(h.TEXT_EDITING)), this._lastClickTime = i
                        }
                    }, {
                        key: "_isDoubleClick",
                        value: function(t) {
                            return t - this._lastClickTime < 500
                        }
                    }, {
                        key: "_changeToEditingMode",
                        value: function(t) {
                            var e = this.getCanvasRatio(),
                                i = this._textarea.style,
                                n = this.getCanvas();
                            this.isPrevEditing = !0, n.remove(t), n.discardActiveObject(), this._editingObj = t, this._textarea.value = t.text, this._editingObjInfos = {
                                left: t.left,
                                top: t.top,
                                width: t.width,
                                height: t.height
                            }, i.display = "block", i.left = t.oCoords.tl.x / e + "px", i.top = t.oCoords.tl.y / e + "px", i.width = Math.ceil(t.width / e) + "px", i.height = Math.ceil(t.height / e) + "px", i.transform = "rotate(" + t.angle + "deg)", i.color = t.fill, i["font-size"] = t.fontSize / e + "px", i["font-family"] = t.fontFamily, i["font-style"] = t.fontStyle, i["font-weight"] = t.fontWeight, i["text-align"] = t.textAlign, i["line-height"] = t.lineHeight + .1, i["transform-origin"] = "left top", this._textarea.focus()
                        }
                    }]), e
                }();
            t.exports = m
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(106),
                o = c(i(3)),
                a = c(i(4)),
                s = c(i(116)),
                l = c(i(73));

            function c(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var u = l.default.eventNames,
                h = l.default.rejectMessages,
                d = {
                    arrow: "M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",
                    cancel: "M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"
                },
                f = function(t) {
                    function e(t) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var i = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, l.default.componentNames.ICON, t));
                        return i._oColor = "#000000", i._pathMap = d, i.useDragAddIcon = t.useDragAddIcon, i
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, s.default), n(e, [{
                        key: "add",
                        value: function(t, e) {
                            var i = this;
                            return new a.default(function(n, r) {
                                var a = i.getCanvas(),
                                    s = i._pathMap[t],
                                    c = l.default.fObjectOptions.SELECTION_STYLE,
                                    u = Object.keys(l.default.defaultIconPath).indexOf(t) >= 0,
                                    d = i.useDragAddIcon && u,
                                    f = s ? i._createIcon(s) : null;
                                f || r(h.invalidParameters), f.set(o.default.extend({
                                    type: "icon",
                                    fill: i._oColor
                                }, c, e, i.graphics.controlStyle)), a.add(f).setActiveObject(f), d && i._addWithDragEvent(a), n(i.graphics.createObjectProperties(f))
                            })
                        }
                    }, {
                        key: "_addWithDragEvent",
                        value: function(t) {
                            var e = this;
                            t.on({
                                "mouse:move": function(i) {
                                    t.selection = !1, e.fire(u.ICON_CREATE_RESIZE, {
                                        moveOriginPointer: t.getPointer(i.e)
                                    })
                                },
                                "mouse:up": function(i) {
                                    e.fire(u.ICON_CREATE_END, {
                                        moveOriginPointer: t.getPointer(i.e)
                                    }), t.defaultCursor = "default", t.off("mouse:up"), t.off("mouse:move"), t.selection = !0
                                }
                            })
                        }
                    }, {
                        key: "registerPaths",
                        value: function(t) {
                            var e = this;
                            o.default.forEach(t, function(t, i) {
                                e._pathMap[i] = t
                            }, this)
                        }
                    }, {
                        key: "setColor",
                        value: function(t, e) {
                            this._oColor = t, e && "icon" === e.get("type") && (e.set({
                                fill: this._oColor
                            }), this.getCanvas().renderAll())
                        }
                    }, {
                        key: "getColor",
                        value: function(t) {
                            return t.fill
                        }
                    }, {
                        key: "_createIcon",
                        value: function(t) {
                            return new r.fabric.Path(t)
                        }
                    }]), e
                }();
            t.exports = f
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(3),
                o = p(i(4)),
                a = i(106),
                s = p(i(116)),
                l = p(i(126)),
                c = p(i(73)),
                u = p(i(127)),
                h = p(i(128)),
                d = p(i(129)),
                f = p(i(130));

            function p(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var g = c.default.rejectMessages,
                m = a.fabric.Image.filters;
            m.Mask = l.default, m.Blur = u.default, m.Sharpen = h.default, m.Emboss = d.default, m.ColorFilter = f.default;
            var v = function(t) {
                function e(t) {
                    return function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                        function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, c.default.componentNames.FILTER, t))
                }
                return function(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }(e, s.default), n(e, [{
                    key: "add",
                    value: function(t, e) {
                        var i = this;
                        return new o.default(function(n, r) {
                            var o = i._getSourceImage(),
                                a = i.getCanvas(),
                                s = i._getFilter(o, t);
                            s || (s = i._createFilter(o, t, e)), s || r(g.invalidParameters), i._changeFilterValues(s, e), i._apply(o, function() {
                                a.renderAll(), n({
                                    type: t,
                                    action: "add"
                                })
                            })
                        })
                    }
                }, {
                    key: "remove",
                    value: function(t) {
                        var e = this;
                        return new o.default(function(i, n) {
                            var r = e._getSourceImage(),
                                o = e.getCanvas();
                            r.filters.length || n(g.unsupportedOperation), e._removeFilter(r, t), e._apply(r, function() {
                                o.renderAll(), i({
                                    type: t,
                                    action: "remove"
                                })
                            })
                        })
                    }
                }, {
                    key: "hasFilter",
                    value: function(t) {
                        return !!this._getFilter(this._getSourceImage(), t)
                    }
                }, {
                    key: "getOptions",
                    value: function(t) {
                        var e = this._getSourceImage(),
                            i = this._getFilter(e, t);
                        return i ? (0, r.extend)({}, i.options) : null
                    }
                }, {
                    key: "_changeFilterValues",
                    value: function(t, e) {
                        (0, r.forEach)(e, function(e, i) {
                            (0, r.isUndefined)(t[i]) || (t[i] = e)
                        }), (0, r.forEach)(t.options, function(i, n) {
                            (0, r.isUndefined)(e[n]) || (t.options[n] = e[n])
                        })
                    }
                }, {
                    key: "_apply",
                    value: function(t, e) {
                        t.filters.push(), t.applyFilters() && e()
                    }
                }, {
                    key: "_getSourceImage",
                    value: function() {
                        return this.getCanvasImage()
                    }
                }, {
                    key: "_createFilter",
                    value: function(t, e, i) {
                        var n = void 0,
                            r = this._getFabricFilterType(e),
                            o = a.fabric.Image.filters[r];
                        return o && ((n = new o(i)).options = i, t.filters.push(n)), n
                    }
                }, {
                    key: "_getFilter",
                    value: function(t, e) {
                        var i = null;
                        if (t) {
                            var n = this._getFabricFilterType(e),
                                r = t.filters.length,
                                o = void 0,
                                a = void 0;
                            for (a = 0; a < r; a += 1)
                                if ((o = t.filters[a]).type === n) {
                                    i = o;
                                    break
                                }
                        }
                        return i
                    }
                }, {
                    key: "_removeFilter",
                    value: function(t, e) {
                        var i = this._getFabricFilterType(e);
                        t.filters = (0, r.filter)(t.filters, function(t) {
                            return t.type !== i
                        })
                    }
                }, {
                    key: "_getFabricFilterType",
                    value: function(t) {
                        return t.charAt(0).toUpperCase() + t.slice(1)
                    }
                }]), e
            }();
            t.exports = v
        }, function(t, e, i) {
            "use strict";
            var n = i(106),
                r = n.fabric.util.createClass(n.fabric.Image.filters.BlendImage, {
                    applyTo: function(t) {
                        if (this.mask) {
                            var e = t.canvasEl,
                                i = e.width,
                                n = e.height,
                                r = this._createCanvasOfMask(i, n),
                                o = e.getContext("2d"),
                                a = r.getContext("2d"),
                                s = o.getImageData(0, 0, i, n);
                            this._drawMask(a, e, o), this._mapData(a, s, i, n), t.imageData = s
                        }
                    },
                    _createCanvasOfMask: function(t, e) {
                        var i = n.fabric.util.createCanvasElement();
                        return i.width = t, i.height = e, i
                    },
                    _drawMask: function(t) {
                        var e = this.mask,
                            i = e.getElement(),
                            n = e.angle,
                            r = e.left,
                            o = e.scaleX,
                            a = e.scaleY,
                            s = e.top;
                        t.save(), t.translate(r, s), t.rotate(n * Math.PI / 180), t.scale(o, a), t.drawImage(i, -i.width / 2, -i.height / 2), t.restore()
                    },
                    _mapData: function(t, e, i, n) {
                        for (var r = e.data, o = e.height, a = r, s = e.width * o * 4, l = t.getImageData(0, 0, i, n).data, c = 0; c < s; c += 4) a[c + 3] = l[c]
                    }
                });
            t.exports = r
        }, function(t, e, i) {
            "use strict";
            var n = i(106),
                r = n.fabric.util.createClass(n.fabric.Image.filters.Convolute, {
                    type: "Blur",
                    initialize: function() {
                        this.matrix = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9]
                    }
                });
            t.exports = r
        }, function(t, e, i) {
            "use strict";
            var n = i(106),
                r = n.fabric.util.createClass(n.fabric.Image.filters.Convolute, {
                    type: "Sharpen",
                    initialize: function() {
                        this.matrix = [0, -1, 0, -1, 5, -1, 0, -1, 0]
                    }
                });
            t.exports = r
        }, function(t, e, i) {
            "use strict";
            var n = i(106),
                r = n.fabric.util.createClass(n.fabric.Image.filters.Convolute, {
                    type: "Emboss",
                    initialize: function() {
                        this.matrix = [1, 1, 1, 1, .7, -1, -1, -1, -1]
                    }
                });
            t.exports = r
        }, function(t, e, i) {
            "use strict";
            var n = i(106),
                r = n.fabric.util.createClass(n.fabric.Image.filters.BaseFilter, {
                    type: "ColorFilter",
                    initialize: function(t) {
                        t || (t = {}), this.color = t.color || "#FFFFFF", this.threshold = t.threshold || 45, this.x = t.x || null, this.y = t.y || null
                    },
                    applyTo: function(t) {
                        var e, i = t.canvasEl,
                            r = i.getContext("2d"),
                            o = r.getImageData(0, 0, i.width, i.height),
                            a = o.data,
                            s = this.threshold,
                            l = n.fabric.Color.sourceFromHex(this.color),
                            c = void 0;
                        for (this.x && this.y && (l = this._getColor(o, this.x, this.y)), c = 0, e = a.length; c < e; c += 4) this._isOutsideThreshold(a[c], l[0], s) || this._isOutsideThreshold(a[c + 1], l[1], s) || this._isOutsideThreshold(a[c + 2], l[2], s) || (a[c] = a[c + 1] = a[c + 2] = a[c + 3] = 0);
                        r.putImageData(o, 0, 0)
                    },
                    _isOutsideThreshold: function(t, e, i) {
                        var n = t - e;
                        return Math.abs(n) > i
                    },
                    _getColor: function(t, e, i) {
                        var n = [0, 0, 0, 0],
                            r = t.data,
                            o = 4 * (t.width * i + e);
                        return n[0] = r[o], n[1] = r[o + 1], n[2] = r[o + 2], n[3] = r[o + 3], n
                    }
                });
            t.exports = r
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = i(106),
                o = u(i(4)),
                a = u(i(116)),
                s = u(i(73)),
                l = u(i(132)),
                c = i(3);

            function u(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var h = s.default.rejectMessages,
                d = s.default.eventNames,
                f = s.default.keyCodes,
                p = "rect",
                g = {
                    strokeWidth: 1,
                    stroke: "#000000",
                    fill: "#ffffff",
                    width: 1,
                    height: 1,
                    rx: 0,
                    ry: 0,
                    lockSkewingX: !0,
                    lockSkewingY: !0,
                    lockUniScaling: !1,
                    bringForward: !0,
                    isRegular: !1
                },
                m = ["rect", "circle", "triangle"],
                v = function(t) {
                    function e(t) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, e);
                        var i = function(t, e) {
                            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return !e || "object" != typeof e && "function" != typeof e ? t : e
                        }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, s.default.componentNames.SHAPE, t));
                        return i._shapeObj = null, i._type = p, i._options = (0, c.extend)({}, g), i._isSelected = !1, i._startPoint = {}, i._withShiftKey = !1, i._handlers = {
                            mousedown: i._onFabricMouseDown.bind(i),
                            mousemove: i._onFabricMouseMove.bind(i),
                            mouseup: i._onFabricMouseUp.bind(i),
                            keydown: i._onKeyDown.bind(i),
                            keyup: i._onKeyUp.bind(i)
                        }, i
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, a.default), n(e, [{
                        key: "start",
                        value: function() {
                            var t = this.getCanvas();
                            this._isSelected = !1, t.defaultCursor = "crosshair", t.selection = !1, t.uniScaleTransform = !0, t.on({
                                "mouse:down": this._handlers.mousedown
                            }), r.fabric.util.addListener(document, "keydown", this._handlers.keydown), r.fabric.util.addListener(document, "keyup", this._handlers.keyup)
                        }
                    }, {
                        key: "end",
                        value: function() {
                            var t = this.getCanvas();
                            this._isSelected = !1, t.defaultCursor = "default", t.selection = !0, t.uniScaleTransform = !1, t.off({
                                "mouse:down": this._handlers.mousedown
                            }), r.fabric.util.removeListener(document, "keydown", this._handlers.keydown), r.fabric.util.removeListener(document, "keyup", this._handlers.keyup)
                        }
                    }, {
                        key: "setStates",
                        value: function(t, e) {
                            this._type = t, e && (this._options = (0, c.extend)(this._options, e))
                        }
                    }, {
                        key: "add",
                        value: function(t, e) {
                            var i = this;
                            return new o.default(function(n) {
                                var r = i.getCanvas();
                                e = i._extendOptions(e);
                                var o = i._createInstance(t, e);
                                i._bindEventOnShape(o), r.add(o).setActiveObject(o), n(i.graphics.createObjectProperties(o))
                            })
                        }
                    }, {
                        key: "change",
                        value: function(t, e) {
                            var i = this;
                            return new o.default(function(n, r) {
                                (0, c.inArray)(t.get("type"), m) < 0 && r(h.unsupportedType), t.set(e), i.getCanvas().renderAll(), n()
                            })
                        }
                    }, {
                        key: "_createInstance",
                        value: function(t, e) {
                            var i = void 0;
                            switch (t) {
                                case "rect":
                                    i = new r.fabric.Rect(e);
                                    break;
                                case "circle":
                                    i = new r.fabric.Ellipse((0, c.extend)({
                                        type: "circle"
                                    }, e));
                                    break;
                                case "triangle":
                                    i = new r.fabric.Triangle(e);
                                    break;
                                default:
                                    i = {}
                            }
                            return i
                        }
                    }, {
                        key: "_extendOptions",
                        value: function(t) {
                            var e = s.default.fObjectOptions.SELECTION_STYLE;
                            return (t = (0, c.extend)({}, g, this._options, e, t)).isRegular && (t.lockUniScaling = !0), t
                        }
                    }, {
                        key: "_bindEventOnShape",
                        value: function(t) {
                            var e = this,
                                i = this.getCanvas();
                            t.on({
                                added: function() {
                                    e._shapeObj = this, l.default.setOrigins(e._shapeObj)
                                },
                                selected: function() {
                                    e._isSelected = !0, e._shapeObj = this, i.uniScaleTransform = !0, i.defaultCursor = "default", l.default.setOrigins(e._shapeObj)
                                },
                                deselected: function() {
                                    e._isSelected = !1, e._shapeObj = null, i.defaultCursor = "crosshair", i.uniScaleTransform = !1
                                },
                                modified: function() {
                                    var t = e._shapeObj;
                                    l.default.adjustOriginToCenter(t), l.default.setOrigins(t)
                                },
                                scaling: function(t) {
                                    var n = i.getPointer(t.e),
                                        r = e._shapeObj;
                                    i.setCursor("crosshair"), l.default.resize(r, n, !0)
                                }
                            })
                        }
                    }, {
                        key: "_onFabricMouseDown",
                        value: function(t) {
                            if (t.target || (this._isSelected = !1, this._shapeObj = !1), !this._isSelected && !this._shapeObj) {
                                var e = this.getCanvas();
                                this._startPoint = e.getPointer(t.e), e.on({
                                    "mouse:move": this._handlers.mousemove,
                                    "mouse:up": this._handlers.mouseup
                                })
                            }
                        }
                    }, {
                        key: "_onFabricMouseMove",
                        value: function(t) {
                            var e = this,
                                i = this.getCanvas(),
                                n = i.getPointer(t.e),
                                r = this._startPoint.x,
                                o = this._startPoint.y,
                                a = r - n.x,
                                s = o - n.y,
                                c = this._shapeObj;
                            c ? (this._shapeObj.set({
                                isRegular: this._withShiftKey
                            }), l.default.resize(c, n), i.renderAll()) : this.add(this._type, {
                                left: r,
                                top: o,
                                width: a,
                                height: s
                            }).then(function(t) {
                                e.fire(d.ADD_OBJECT, t)
                            })
                        }
                    }, {
                        key: "_onFabricMouseUp",
                        value: function() {
                            var t = this,
                                e = this.getCanvas(),
                                i = this._startPoint.x,
                                n = this._startPoint.y,
                                r = this._shapeObj;
                            r ? r && (l.default.adjustOriginToCenter(r), this.fire(d.ADD_OBJECT_AFTER, this.graphics.createObjectProperties(r))) : this.add(this._type, {
                                left: i,
                                top: n,
                                width: 20,
                                height: 20
                            }).then(function(e) {
                                t.fire(d.ADD_OBJECT, e)
                            }), e.off({
                                "mouse:move": this._handlers.mousemove,
                                "mouse:up": this._handlers.mouseup
                            })
                        }
                    }, {
                        key: "_onKeyDown",
                        value: function(t) {
                            t.keyCode === f.SHIFT && (this._withShiftKey = !0, this._shapeObj && (this._shapeObj.isRegular = !0))
                        }
                    }, {
                        key: "_onKeyUp",
                        value: function(t) {
                            t.keyCode === f.SHIFT && (this._withShiftKey = !1, this._shapeObj && (this._shapeObj.isRegular = !1))
                        }
                    }]), e
                }();
            t.exports = v
        }, function(t, e) {
            "use strict";
            var i = {
                    rect: 1,
                    circle: 2,
                    triangle: 1
                },
                n = {
                    rect: {
                        w: "width",
                        h: "height"
                    },
                    circle: {
                        w: "rx",
                        h: "ry"
                    },
                    triangle: {
                        w: "width",
                        h: "height"
                    }
                };

            function r(t, e, i) {
                var n = t.x,
                    r = t.y,
                    o = e.x,
                    a = e.y,
                    s = i * Math.PI / 180,
                    l = (o - n) * Math.cos(s) - (a - r) * Math.sin(s) + n,
                    c = (o - n) * Math.sin(s) + (a - r) * Math.cos(s) + r;
                return {
                    originX: n > l ? "right" : "left",
                    originY: r > c ? "bottom" : "top"
                }
            }
            t.exports = {
                setOrigins: function(t) {
                    var e = t.getPointByOrigin("left", "top"),
                        i = t.getPointByOrigin("right", "top"),
                        n = t.getPointByOrigin("right", "bottom"),
                        r = t.getPointByOrigin("left", "bottom");
                    t.origins = {
                        lt: e,
                        rt: i,
                        rb: n,
                        lb: r
                    }
                },
                resize: function(t, e, o) {
                    (function(t) {
                        return "center" === t.originX && "center" === t.originY
                    })(t) && (function(t, e) {
                        var i = e.getPointByOrigin("center", "center"),
                            n = r(i, t, -e.angle),
                            o = n.originX,
                            a = n.originY,
                            s = e.getPointByOrigin(o, a),
                            l = e.left - (i.x - s.x),
                            c = e.top - (i.x - s.y);
                        e.set({
                            originX: o,
                            originY: a,
                            left: l,
                            top: c
                        }), e.setCoords()
                    }(e, t), function(t) {
                        var e = t.originX,
                            i = t.originY,
                            n = e.substring(0, 1) + i.substring(0, 1);
                        t.startPoint = t.origins[n]
                    }(t)), o ? function(t) {
                            var e = t.type,
                                i = t.scaleX,
                                r = t.scaleY,
                                o = n[e],
                                a = t[o.w] * i,
                                s = t[o.h] * r;
                            if (t.isRegular) {
                                var l = Math.max(i, r);
                                a = t[o.w] * l, s = t[o.h] * l
                            }
                            var c = {
                                hasControls: !1,
                                hasBorders: !1,
                                scaleX: 1,
                                scaleY: 1
                            };
                            c[o.w] = a, c[o.h] = s, t.set(c)
                        }(t) : function(t, e) {
                            var r = e.type,
                                o = e.strokeWidth,
                                a = e.startPoint,
                                s = i[r],
                                l = n[r],
                                c = !("triangle" !== e.type),
                                u = {},
                                h = Math.abs(a.x - t.x) / s,
                                d = Math.abs(a.y - t.y) / s;
                            h > o && (h -= o / s), d > o && (d -= o / s), e.isRegular && (h = d = Math.max(h, d), c && (d = Math.sqrt(3) / 2 * h)), u[l.w] = h, u[l.h] = d, e.set(u)
                        }(e, t),
                        function(t, e) {
                            var i = e.startPoint,
                                n = r(i, t, -e.angle),
                                o = n.originX,
                                a = n.originY;
                            e.setPositionByOrigin(i, o, a)
                        }(e, t)
                },
                adjustOriginToCenter: function(t) {
                    var e = t.getPointByOrigin("center", "center"),
                        i = t.originX,
                        n = t.originY,
                        r = t.getPointByOrigin(i, n),
                        o = t.left + (e.x - r.x),
                        a = t.top + (e.y - r.y);
                    t.set({
                        hasControls: !0,
                        hasBorders: !0,
                        originX: "center",
                        originY: "center",
                        left: o,
                        top: a
                    }), t.setCoords()
                }
            }
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = a(i(134)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.drawingModes,
                l = o.default.componentNames,
                c = function(t) {
                    function e() {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, s.CROPPER))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, r.default), n(e, [{
                        key: "start",
                        value: function(t) {
                            t.getComponent(l.CROPPER).start()
                        }
                    }, {
                        key: "end",
                        value: function(t) {
                            t.getComponent(l.CROPPER).end()
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = function(t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(i(71));
            var o = r.default.create,
                a = r.default.types,
                s = function() {
                    function t(e) {
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, t), this.name = e
                    }
                    return n(t, [{
                        key: "getName",
                        value: function() {
                            return this.name
                        }
                    }, {
                        key: "start",
                        value: function() {
                            throw new Error(o(a.UN_IMPLEMENTATION, "start"))
                        }
                    }, {
                        key: "stop",
                        value: function() {
                            throw new Error(o(a.UN_IMPLEMENTATION, "stop"))
                        }
                    }]), t
                }();
            t.exports = s
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = a(i(134)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.drawingModes,
                l = o.default.componentNames,
                c = function(t) {
                    function e() {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, s.FREE_DRAWING))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, r.default), n(e, [{
                        key: "start",
                        value: function(t, e) {
                            t.getComponent(l.FREE_DRAWING).start(e)
                        }
                    }, {
                        key: "end",
                        value: function(t) {
                            t.getComponent(l.FREE_DRAWING).end()
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = a(i(134)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.drawingModes,
                l = o.default.componentNames,
                c = function(t) {
                    function e() {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, s.LINE_DRAWING))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, r.default), n(e, [{
                        key: "start",
                        value: function(t, e) {
                            t.getComponent(l.LINE).start(e)
                        }
                    }, {
                        key: "end",
                        value: function(t) {
                            t.getComponent(l.LINE).end()
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = a(i(134)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.drawingModes,
                l = o.default.componentNames,
                c = function(t) {
                    function e() {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, s.SHAPE))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, r.default), n(e, [{
                        key: "start",
                        value: function(t) {
                            t.getComponent(l.SHAPE).start()
                        }
                    }, {
                        key: "end",
                        value: function(t) {
                            t.getComponent(l.SHAPE).end()
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = function() {
                    function t(t, e) {
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                        }
                    }
                    return function(e, i, n) {
                        return i && t(e.prototype, i), n && t(e, n), e
                    }
                }(),
                r = a(i(134)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.drawingModes,
                l = o.default.componentNames,
                c = function(t) {
                    function e() {
                        return function(t, e) {
                                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                            }(this, e),
                            function(t, e) {
                                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return !e || "object" != typeof e && "function" != typeof e ? t : e
                            }(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, s.TEXT))
                    }
                    return function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                    }(e, r.default), n(e, [{
                        key: "start",
                        value: function(t) {
                            t.getComponent(l.TEXT).start()
                        }
                    }, {
                        key: "end",
                        value: function(t) {
                            t.getComponent(l.TEXT).end()
                        }
                    }]), e
                }();
            t.exports = c
        }, function(t, e) {}, , function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.componentNames,
                l = o.default.commandNames,
                c = s.ICON,
                u = {
                    name: l.ADD_ICON,
                    execute: function(t, e, i) {
                        var n = this;
                        return t.getComponent(c).add(e, i).then(function(e) {
                            return n.undoData.object = t.getObject(e.id), e
                        })
                    },
                    undo: function(t) {
                        return t.remove(this.undoData.object), r.default.resolve()
                    }
                };
            n.default.register(u), t.exports = u
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(4));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = {
                name: o(i(73)).default.commandNames.ADD_IMAGE_OBJECT,
                execute: function(t, e) {
                    var i = this;
                    return t.addImageObject(e).then(function(e) {
                        return i.undoData.object = t.getObject(e.id), e
                    })
                },
                undo: function(t) {
                    return t.remove(this.undoData.object), r.default.resolve()
                }
            };
            n.default.register(a), t.exports = a
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.commandNames,
                l = o.default.rejectMessages,
                c = {
                    name: s.ADD_OBJECT,
                    execute: function(t, e) {
                        return new r.default(function(i, n) {
                            t.contains(e) ? n(l.addedObject) : (t.add(e), i(e))
                        })
                    },
                    undo: function(t, e) {
                        return new r.default(function(i, n) {
                            t.contains(e) ? (t.remove(e), i(e)) : n(l.noObject)
                        })
                    }
                };
            n.default.register(c), t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.componentNames,
                l = o.default.commandNames,
                c = s.SHAPE,
                u = {
                    name: l.ADD_SHAPE,
                    execute: function(t, e, i) {
                        var n = this;
                        return t.getComponent(c).add(e, i).then(function(e) {
                            return n.undoData.object = t.getObject(e.id), e
                        })
                    },
                    undo: function(t) {
                        return t.remove(this.undoData.object), r.default.resolve()
                    }
                };
            n.default.register(u), t.exports = u
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.componentNames,
                l = o.default.commandNames,
                c = s.TEXT,
                u = {
                    name: l.ADD_TEXT,
                    execute: function(t, e, i) {
                        var n = this;
                        return t.getComponent(c).add(e, i).then(function(e) {
                            return n.undoData.object = t.getObject(e.id), e
                        })
                    },
                    undo: function(t) {
                        return t.remove(this.undoData.object), r.default.resolve()
                    }
                };
            n.default.register(u), t.exports = u
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(73));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = r.default.componentNames,
                s = r.default.rejectMessages,
                l = r.default.commandNames,
                c = a.FILTER,
                u = {
                    name: l.APPLY_FILTER,
                    execute: function(t, e, i) {
                        var n = t.getComponent(c);
                        if ("mask" === e) {
                            var r = t.getObject(i.maskObjId);
                            if (!r || !r.isType("image")) return Promise.reject(s.invalidParameters);
                            i = {
                                mask: r
                            }
                        }
                        return "mask" === e ? (this.undoData.object = i.mask, t.remove(i.mask)) : this.undoData.options = n.getOptions(e), n.add(e, i)
                    },
                    undo: function(t, e) {
                        var i = t.getComponent(c);
                        if ("mask" === e) {
                            var n = this.undoData.object;
                            return t.add(n), t.setActiveObject(n), i.remove(e)
                        }
                        return this.undoData.options ? i.add(e, this.undoData.options) : i.remove(e)
                    }
                };
            n.default.register(u), t.exports = u
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.componentNames,
                l = o.default.rejectMessages,
                c = o.default.commandNames,
                u = s.ICON,
                h = {
                    name: c.CHANGE_ICON_COLOR,
                    execute: function(t, e, i) {
                        var n = this;
                        return new r.default(function(r, o) {
                            var a = t.getComponent(u),
                                s = t.getObject(e);
                            s || o(l.noObject), n.undoData.object = s, n.undoData.color = a.getColor(s), a.setColor(i, s), r()
                        })
                    },
                    undo: function(t) {
                        var e = t.getComponent(u),
                            i = this.undoData.object,
                            n = i.object,
                            o = i.color;
                        return e.setColor(o, n), r.default.resolve()
                    }
                };
            n.default.register(h), t.exports = h
        }, function(t, e, i) {
            "use strict";
            var n = s(i(3)),
                r = s(i(69)),
                o = s(i(4)),
                a = s(i(73));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = a.default.componentNames,
                c = a.default.rejectMessages,
                u = a.default.commandNames,
                h = l.SHAPE,
                d = {
                    name: u.CHANGE_SHAPE,
                    execute: function(t, e, i) {
                        var r = this,
                            a = t.getComponent(h),
                            s = t.getObject(e);
                        return s ? (this.undoData.object = s, this.undoData.options = {}, n.default.forEachOwnProperties(i, function(t, e) {
                            r.undoData.options[e] = s[e]
                        }), a.change(s, i)) : o.default.reject(c.noObject)
                    },
                    undo: function(t) {
                        var e = t.getComponent(h),
                            i = this.undoData,
                            n = i.object,
                            r = i.options;
                        return e.change(n, r)
                    }
                };
            r.default.register(d), t.exports = d
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.componentNames,
                l = o.default.rejectMessages,
                c = o.default.commandNames,
                u = s.TEXT,
                h = {
                    name: c.CHANGE_TEXT,
                    execute: function(t, e, i) {
                        var n = t.getComponent(u),
                            o = t.getObject(e);
                        return o ? (this.undoData.object = o, this.undoData.text = n.getText(o), n.change(o, i)) : r.default.reject(l.noObject)
                    },
                    undo: function(t) {
                        var e = t.getComponent(u),
                            i = this.undoData,
                            n = i.object,
                            r = i.text;
                        return e.change(n, r)
                    }
                };
            n.default.register(h), t.exports = h
        }, function(t, e, i) {
            "use strict";
            var n = s(i(3)),
                r = s(i(69)),
                o = s(i(4)),
                a = s(i(73));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = a.default.componentNames,
                c = a.default.rejectMessages,
                u = a.default.commandNames,
                h = l.TEXT,
                d = {
                    name: u.CHANGE_TEXT_STYLE,
                    execute: function(t, e, i) {
                        var r = this,
                            a = t.getComponent(h),
                            s = t.getObject(e);
                        return s ? (this.undoData.object = s, this.undoData.styles = {}, n.default.forEachOwnProperties(i, function(t, e) {
                            r.undoData.styles[e] = s[e]
                        }), a.setStyle(s, i)) : o.default.reject(c.noObject)
                    },
                    undo: function(t) {
                        var e = t.getComponent(h),
                            i = this.undoData,
                            n = i.object,
                            r = i.styles;
                        return e.setStyle(n, r)
                    }
                };
            r.default.register(d), t.exports = d
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(4));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = {
                name: o(i(73)).default.commandNames.CLEAR_OBJECTS,
                execute: function(t) {
                    var e = this;
                    return new r.default(function(i) {
                        e.undoData.objects = t.removeAll(), i()
                    })
                },
                undo: function(t) {
                    return t.add(this.undoData.objects), r.default.resolve()
                }
            };
            n.default.register(a), t.exports = a
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(73));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = r.default.componentNames,
                s = r.default.commandNames,
                l = a.FLIP,
                c = {
                    name: s.FLIP_IMAGE,
                    execute: function(t, e) {
                        var i = t.getComponent(l);
                        return this.undoData.setting = i.getCurrentSetting(), i[e]()
                    },
                    undo: function(t) {
                        return t.getComponent(l).set(this.undoData.setting)
                    }
                };
            n.default.register(c), t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(73));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = r.default.componentNames,
                s = r.default.commandNames,
                l = a.IMAGE_LOADER,
                c = {
                    name: s.LOAD_IMAGE,
                    execute: function(t, e, i) {
                        var n = t.getComponent(l),
                            r = n.getCanvasImage(),
                            o = r ? r.width : 0,
                            a = r ? r.height : 0,
                            s = t.removeAll(!0).filter(function(t) {
                                return "cropzone" !== t.type
                            });
                        return s.forEach(function(t) {
                            t.evented = !0
                        }), this.undoData = {
                            name: n.getImageName(),
                            image: r,
                            objects: s
                        }, n.load(e, i).then(function(t) {
                            return {
                                oldWidth: o,
                                oldHeight: a,
                                newWidth: t.width,
                                newHeight: t.height
                            }
                        })
                    },
                    undo: function(t) {
                        var e = t.getComponent(l),
                            i = this.undoData,
                            n = i.objects,
                            r = i.name,
                            o = i.image;
                        return t.removeAll(!0), t.add(n), e.load(r, o)
                    }
                };
            n.default.register(c), t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(73));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = r.default.componentNames,
                s = r.default.commandNames,
                l = a.FILTER,
                c = {
                    name: s.REMOVE_FILTER,
                    execute: function(t, e) {
                        var i = t.getComponent(l);
                        return this.undoData.options = i.getOptions(e), i.remove(e)
                    },
                    undo: function(t, e) {
                        var i = t.getComponent(l),
                            n = this.undoData.options;
                        return i.add(e, n)
                    }
                };
            n.default.register(c), t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.commandNames,
                l = o.default.rejectMessages,
                c = {
                    name: s.REMOVE_OBJECT,
                    execute: function(t, e) {
                        var i = this;
                        return new r.default(function(n, r) {
                            i.undoData.objects = t.removeObjectById(e), i.undoData.objects.length ? n() : r(l.noObject)
                        })
                    },
                    undo: function(t) {
                        return t.add(this.undoData.objects), r.default.resolve()
                    }
                };
            n.default.register(c), t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(4));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = {
                name: o(i(73)).default.commandNames.RESIZE_CANVAS_DIMENSION,
                execute: function(t, e) {
                    var i = this;
                    return new r.default(function(n) {
                        i.undoData.size = {
                            width: t.cssMaxWidth,
                            height: t.cssMaxHeight
                        }, t.setCssMaxDimension(e), t.adjustCanvasDimension(), n()
                    })
                },
                undo: function(t) {
                    return t.setCssMaxDimension(this.undoData.size), t.adjustCanvasDimension(), r.default.resolve()
                }
            };
            n.default.register(a), t.exports = a
        }, function(t, e, i) {
            "use strict";
            var n = o(i(69)),
                r = o(i(73));

            function o(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var a = r.default.componentNames,
                s = r.default.commandNames,
                l = a.ROTATION,
                c = {
                    name: s.ROTATE_IMAGE,
                    execute: function(t, e, i, n) {
                        var r = t.getComponent(l);
                        return n || (this.undoData.angle = r.getCurrentAngle()), r[e](i)
                    },
                    undo: function(t) {
                        var e = t.getComponent(l),
                            i = this.args,
                            n = i[1],
                            r = i[2];
                        return "setAngle" === n ? e[n](this.undoData.angle) : e.rotate(-r)
                    }
                };
            n.default.register(c), t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = s(i(3)),
                r = s(i(69)),
                o = s(i(4)),
                a = s(i(73));

            function s(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var l = a.default.commandNames,
                c = a.default.rejectMessages,
                u = {
                    name: l.SET_OBJECT_PROPERTIES,
                    execute: function(t, e, i) {
                        var r = this,
                            a = t.getObject(e);
                        return a ? (this.undoData.props = {}, n.default.forEachOwnProperties(i, function(t, e) {
                            r.undoData.props[e] = a[e]
                        }), t.setObjectProperties(e, i), o.default.resolve()) : o.default.reject(c.noObject)
                    },
                    undo: function(t, e) {
                        var i = this.undoData.props;
                        return t.setObjectProperties(e, i), o.default.resolve()
                    }
                };
            r.default.register(u), t.exports = u
        }, function(t, e, i) {
            "use strict";
            var n = a(i(69)),
                r = a(i(4)),
                o = a(i(73));

            function a(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var s = o.default.commandNames,
                l = o.default.rejectMessages,
                c = {
                    name: s.SET_OBJECT_POSITION,
                    execute: function(t, e, i) {
                        return t.getObject(e) ? (this.undoData.objectId = e, this.undoData.props = t.getObjectProperties(e, ["left", "top"]), t.setObjectPosition(e, i), t.renderAll(), r.default.resolve()) : r.default.reject(l.noObject)
                    },
                    undo: function(t) {
                        var e = this.undoData,
                            i = e.objectId,
                            n = e.props;
                        return t.setObjectProperties(i, n), t.renderAll(), r.default.resolve()
                    }
                };
            n.default.register(c), t.exports = c
        }])
    })
}, function(t, e, i) {
    ! function(e, n) {
        t.exports = n(i(5))
    }(0, function(t) {
        return function(t) {
            var e = {};

            function i(n) {
                if (e[n]) return e[n].exports;
                var r = e[n] = {
                    exports: {},
                    id: n,
                    loaded: !1
                };
                return t[n].call(r.exports, r, r.exports, i), r.loaded = !0, r.exports
            }
            return i.m = t, i.c = e, i.p = "dist", i(0)
        }([function(t, e, i) {
            i(1), t.exports = i(6)
        }, function(t, e) {}, , , , , function(t, e, i) {
            "use strict";
            var n = {
                domutil: i(7),
                domevent: i(9),
                Collection: i(10),
                View: i(11),
                Drag: i(12),
                create: i(13),
                Palette: i(16),
                Slider: i(18),
                colorutil: i(14),
                svgvml: i(19)
            };
            t.exports = n
        }, function(t, e, i) {
            "use strict";
            var n, r, o = i(8),
                a = i(9),
                s = i(10),
                l = o,
                c = "onselectstart" in document,
                u = "",
                h = /^auto$|^$|%/;
            r = (n = {
                appendHTMLElement: function(t, e, i) {
                    var n;
                    return i = i || "", (n = document.createElement(t)).className = i, e ? e.appendChild(n) : document.body.appendChild(n), n
                },
                remove: function(t) {
                    t && t.parentNode && t.parentNode.removeChild(t)
                },
                get: function(t) {
                    return document.getElementById(t)
                },
                _matcher: function(t, e) {
                    var i = t.nodeName.toLowerCase() === e.toLowerCase();
                    return /^\./.test(e) ? i = n.hasClass(t, e.replace(".", "")) : /^#/.test(e) && (i = t.id === e.replace("#", "")), i
                },
                find: function(t, e, i) {
                    var r = [],
                        o = !1,
                        a = l.isUndefined(i) || !1 === i,
                        s = l.isFunction(i);
                    return l.isString(e) && (e = n.get(e)),
                        function t(e, l) {
                            for (var c, u = e.childNodes, h = 0, d = u.length; h < d; h += 1)
                                if ("#text" !== (c = u[h]).nodeName)
                                    if (n._matcher(c, l)) {
                                        if ((s && i(c) || !s) && r.push(c), a) {
                                            o = !0;
                                            break
                                        }
                                    } else if (c.childNodes.length > 0 && (t(c, l), o)) break
                        }(e = e || window.document.body, t), a ? r[0] || null : r
                },
                closest: function(t, e) {
                    var i = t.parentNode;
                    if (n._matcher(t, e)) return t;
                    for (; i && i !== window.document.body;) {
                        if (n._matcher(i, e)) return i;
                        i = i.parentNode
                    }
                },
                text: function(t) {
                    var e = "",
                        i = 0,
                        r = t.nodeType;
                    if (r) {
                        if (1 === r || 9 === r || 11 === r) {
                            if ("string" == typeof t.textContent) return t.textContent;
                            for (t = t.firstChild; t; t = t.nextSibling) e += n.text(t)
                        } else if (3 === r || 4 === r) return t.nodeValue
                    } else
                        for (; t[i]; i += 1) e += n.text(t[i]);
                    return e
                },
                setData: function(t, e, i) {
                    "dataset" in t ? t.dataset[e] = i : t.setAttribute("data-" + e, i)
                },
                getData: function(t, e) {
                    return "dataset" in t ? t.dataset[e] : t.getAttribute("data-" + e)
                },
                hasClass: function(t, e) {
                    var i;
                    return l.isUndefined(t.classList) ? (i = n.getClass(t)).length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(i) : t.classList.contains(e)
                },
                addClass: function(t, e) {
                    var i;
                    l.isUndefined(t.classList) ? n.hasClass(t, e) || (i = n.getClass(t), n.setClass(t, (i ? i + " " : "") + e)) : l.forEachArray(e.split(" "), function(e) {
                        t.classList.add(e)
                    })
                },
                setClass: function(t, e) {
                    l.isUndefined(t.className.baseVal) ? t.className = e : t.className.baseVal = e
                },
                removeClass: function(t, e) {
                    var i = "";
                    l.isUndefined(t.classList) ? (i = (" " + n.getClass(t) + " ").replace(" " + e + " ", " "), n.setClass(t, function(t) {
                        return t.replace(/^\s\s*/, "").replace(/\s\s*$/, "")
                    }(i))) : t.classList.remove(e)
                },
                getClass: function(t) {
                    return t && t.className ? l.isUndefined(t.className.baseVal) ? t.className : t.className.baseVal : ""
                },
                getStyle: function(t, e) {
                    var i, n = t.style[e] || t.currentStyle && t.currentStyle[e];
                    return n && "auto" !== n || !document.defaultView || (n = (i = document.defaultView.getComputedStyle(t, null)) ? i[e] : null), "auto" === n ? null : n
                },
                getComputedStyle: function(t) {
                    var e = document.defaultView;
                    return e && e.getComputedStyle ? document.defaultView.getComputedStyle(t) : {
                        getPropertyValue: function(e) {
                            var i = /(\-([a-z]){1})/g;
                            return "float" === e && (e = "styleFloat"), i.test(e) && (e = e.replace(i, function() {
                                return arguments[2].toUpperCase()
                            })), t.currentStyle[e] ? t.currentStyle[e] : null
                        }
                    }
                },
                setPosition: function(t, e, i) {
                    e = l.isUndefined(e) ? 0 : e, i = l.isUndefined(i) ? 0 : i, t._pos = [e, i], t.style.left = e + "px", t.style.top = i + "px"
                },
                getPosition: function(t, e) {
                    var i, n, r;
                    return e && (t._pos = null), t._pos ? t._pos : (i = 0, n = 0, (h.test(t.style.left) || h.test(t.style.top)) && "getBoundingClientRect" in t ? (i = (r = t.getBoundingClientRect()).left, n = r.top) : (i = parseFloat(t.style.left || 0), n = parseFloat(t.style.top || 0)), [i, n])
                },
                getSize: function(t) {
                    var e, i = n.getStyle(t, "width"),
                        r = n.getStyle(t, "height");
                    return (h.test(i) || h.test(r)) && "getBoundingClientRect" in t ? (i = (e = t.getBoundingClientRect()).width, r = e.height) : (i = parseFloat(i || 0), r = parseFloat(r || 0)), [i, r]
                },
                testProp: function(t) {
                    for (var e = document.documentElement.style, i = 0, n = t.length; i < n; i += 1)
                        if (t[i] in e) return t[i];
                    return !1
                },
                getFormData: function(t) {
                    var e = new s(function() {
                            return this.length
                        }),
                        i = function(t) {
                            return !t.disabled
                        },
                        r = {};
                    return e.add.apply(e, n.find("input", t, i).concat(n.find("select", t, i)).concat(n.find("textarea", t, i))), e = e.groupBy(function(t) {
                        return t && t.getAttribute("name") || "_other"
                    }), l.forEach(e, function(t, e) {
                        "_other" !== e && t.each(function(i) {
                            var o = i.nodeName.toLowerCase(),
                                a = i.type,
                                s = [];
                            "radio" === a ? s = [t.find(function(t) {
                                return t.checked
                            }).toArray().pop()] : "checkbox" === a ? s = t.find(function(t) {
                                return t.checked
                            }).toArray() : "select" === o ? t.find(function(t) {
                                return !!t.childNodes.length
                            }).each(function(t) {
                                s = s.concat(n.find("option", t, function(t) {
                                    return t.selected
                                }))
                            }) : s = t.find(function(t) {
                                return "" !== t.value
                            }).toArray(), (s = l.map(s, function(t) {
                                return t.value
                            })).length ? 1 === s.length && (s = s[0]) : s = "", r[e] = s
                        })
                    }), r
                }
            }).testProp(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]), n.disableTextSelection = c ? function() {
                a.on(window, "selectstart", a.preventDefault)
            } : function() {
                var t = document.documentElement.style;
                u = t[r], t[r] = "none"
            }, n.enableTextSelection = c ? function() {
                a.off(window, "selectstart", a.preventDefault)
            } : function() {
                document.documentElement.style[r] = u
            }, n.disableImageDrag = function() {
                a.on(window, "dragstart", a.preventDefault)
            }, n.enableImageDrag = function() {
                a.off(window, "dragstart", a.preventDefault)
            }, n.applyTemplate = function(t, e) {
                return t.replace(/\{\{(\w*)\}\}/g, function(t, i) {
                    return e.hasOwnProperty(i) ? e[i] : ""
                })
            }, t.exports = n
        }, function(e, i) {
            e.exports = t
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = n.browser,
                o = {
                    START: ["touchstart", "mousedown"],
                    END: {
                        mousedown: "mouseup",
                        touchstart: "touchend",
                        pointerdown: "touchend",
                        MSPointerDown: "touchend"
                    },
                    MOVE: {
                        mousedown: "mousemove",
                        touchstart: "touchmove",
                        pointerdown: "touchmove",
                        MSPointerDown: "touchmove"
                    }
                },
                a = {
                    on: function(t, e, i, r) {
                        n.isString(e) ? n.forEach(e.split(" "), function(e) {
                            a._on(t, e, i, r)
                        }) : n.forEachOwnProperties(e, function(e, n) {
                            a._on(t, n, e, i)
                        })
                    },
                    _on: function(t, e, i, r) {
                        var o, s, l;
                        o = e + n.stamp(i) + (r ? "_" + n.stamp(r) : ""), t._evt && t._evt[o] || (l = s = function(e) {
                            i.call(r || t, e || window.event)
                        }, "addEventListener" in t ? "mouseenter" === e || "mouseleave" === e ? (s = function(e) {
                            e = e || window.event, a._checkMouse(t, e) && l(e)
                        }, t.addEventListener("mouseenter" === e ? "mouseover" : "mouseout", s, !1)) : ("mousewheel" === e && t.addEventListener("DOMMouseScroll", s, !1), t.addEventListener(e, s, !1)) : "attachEvent" in t && t.attachEvent("on" + e, s), t._evt = t._evt || {}, t._evt[o] = s)
                    },
                    off: function(t, e, i, r) {
                        n.isString(e) ? n.forEach(e.split(" "), function(e) {
                            a._off(t, e, i, r)
                        }) : n.forEachOwnProperties(e, function(e, n) {
                            a._off(t, n, e, i)
                        })
                    },
                    _off: function(t, e, i, r) {
                        var o = e + n.stamp(i) + (r ? "_" + n.stamp(r) : ""),
                            a = t._evt && t._evt[o];
                        if (a) {
                            if ("removeEventListener" in t) "mouseenter" === e || "mouseleave" === e ? t.removeEventListener("mouseenter" === e ? "mouseover" : "mouseout", a, !1) : ("mousewheel" === e && t.removeEventListener("DOMMouseScroll", a, !1), t.removeEventListener(e, a, !1));
                            else if ("detachEvent" in t) try {
                                t.detachEvent("on" + e, a)
                            } catch (t) {}
                            delete t._evt[o], n.keys(t._evt).length || (n.browser.msie && n.browser.version < 9 ? t._evt = null : delete t._evt)
                        }
                    },
                    once: function(t, e, i, r) {
                        var o = this;
                        n.isObject(e) ? n.forEachOwnProperties(e, function(e, n) {
                            a.once(t, n, e, i)
                        }) : a.on(t, e, function n() {
                            i.apply(r || t, arguments), o._off(t, e, n, r)
                        }, r)
                    },
                    stopPropagation: function(t) {
                        t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0
                    },
                    preventDefault: function(t) {
                        t.preventDefault ? t.preventDefault() : t.returnValue = !1
                    },
                    stop: function(t) {
                        a.preventDefault(t), a.stopPropagation(t)
                    },
                    disableScrollPropagation: function(t) {
                        a.on(t, "mousewheel MozMousePixelScroll", a.stopPropagation)
                    },
                    disableClickPropagation: function(t) {
                        a.on(t, o.START.join(" ") + " click dblclick", a.stopPropagation)
                    },
                    getMousePosition: function(t, e) {
                        var i;
                        return e ? (i = e.getBoundingClientRect(), [t.clientX - i.left - e.clientLeft, t.clientY - i.top - e.clientTop]) : [t.clientX, t.clientY]
                    },
                    getWheelDelta: function(t) {
                        var e = 0;
                        return t.wheelDelta && (e = t.wheelDelta / 120), t.detail && (e = -t.detail / 3), e
                    },
                    _checkMouse: function(t, e) {
                        var i = e.relatedTarget;
                        if (!i) return !0;
                        try {
                            for (; i && i !== t;) i = i.parentNode
                        } catch (t) {
                            return !1
                        }
                        return i !== t
                    },
                    trigger: function(t, e, i) {
                        n.isUndefined(i) && /(mouse|click)/.exec(e) && (i = a.mouseEvent(e)), t.dispatchEvent ? t.dispatchEvent(i) : t.fireEvent && t.fireEvent("on" + e, i)
                    },
                    mouseEvent: function(t, e) {
                        var i, o;
                        return o = n.extend({
                            bubbles: !0,
                            cancelable: "mousemove" !== t,
                            view: window,
                            wheelDelta: 0,
                            detail: 0,
                            screenX: 0,
                            screenY: 0,
                            clientX: 0,
                            clientY: 0,
                            ctrlKey: !1,
                            altKey: !1,
                            shiftKey: !1,
                            metaKey: !1,
                            button: 0,
                            relatedTarget: void 0
                        }, e), r.msie && r.version < 9 && delete o.wheelDelta, "function" == typeof document.createEvent ? (i = document.createEvent("MouseEvents")).initMouseEvent(t, o.bubbles, o.cancelable, o.view, o.detail, o.screenX, o.screenY, o.clientX, o.clientY, o.ctrlKey, o.altKey, o.shiftKey, o.metaKey, o.button, document.body.parentNode) : document.createEventObject && (i = document.createEventObject(), n.forEach(o, function(t, e) {
                            i[e] = t
                        }, this), i.button = {
                            0: 1,
                            1: 4,
                            2: 2
                        }[i.button] || i.button), i
                    },
                    getMouseButton: function(t) {
                        var e, i;
                        return document.implementation.hasFeature("MouseEvents", "2.0") ? t.button : (e = t.button + "", ~"0,1,3,5,7".indexOf(e) ? i = 0 : ~"2,6".indexOf(e) ? i = 2 : ~"4".indexOf(e) && (i = 1), i)
                    }
                };
            t.exports = a
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = n.forEachOwnProperties,
                o = n.forEachArray,
                a = n.isFunction,
                s = n.isObject,
                l = Array.prototype.slice;

            function c(t) {
                this.items = {}, this.length = 0, a(t) && (this.getItemID = t)
            }
            c.and = function(t) {
                var e;
                return t = l.call(arguments), e = t.length,
                    function(i) {
                        for (var n = 0; n < e; n += 1)
                            if (!t[n].call(null, i)) return !1;
                        return !0
                    }
            }, c.or = function(t) {
                var e;
                return t = l.call(arguments), e = t.length,
                    function(i) {
                        for (var n = 1, r = t[0].call(null, i); n < e; n += 1) r = r || t[n].call(null, i);
                        return r
                    }
            }, c.merge = function(t) {
                var e = l.call(arguments),
                    i = {},
                    r = new c(e[0].getItemID),
                    a = n.extend;
                return o(e, function(t) {
                    a(i, t.items)
                }), r.items = i, r.length = n.keys(r.items).length, r
            }, c.prototype.getItemID = function(t) {
                return t._id + ""
            }, c.prototype.add = function(t) {
                var e, i;
                arguments.length > 1 ? o(l.call(arguments), function(t) {
                    this.add(t)
                }, this) : (e = this.getItemID(t), (i = this.items)[e] || (this.length += 1), i[e] = t)
            }, c.prototype.remove = function(t) {
                var e, i, r = [];
                return this.length ? arguments.length > 1 ? r = n.map(l.call(arguments), function(t) {
                    return this.remove(t)
                }, this) : (e = this.items, s(t) && (t = this.getItemID(t)), e[t] ? (this.length -= 1, i = e[t], delete e[t], i) : r) : r
            }, c.prototype.clear = function() {
                this.items = {}, this.length = 0
            }, c.prototype.has = function(t) {
                var e, i;
                return !!this.length && (e = a(t), i = !1, e ? this.each(function(e) {
                    return !0 !== t(e) || (i = !0, !1)
                }) : (t = s(t) ? this.getItemID(t) : t, i = n.isExisty(this.items[t])), i)
            }, c.prototype.doWhenHas = function(t, e, i) {
                var r = this.items[t];
                n.isExisty(r) && e.call(i || this, r)
            }, c.prototype.find = function(t) {
                var e = new c;
                return this.hasOwnProperty("getItemID") && (e.getItemID = this.getItemID), this.each(function(i) {
                    !0 === t(i) && e.add(i)
                }), e
            }, c.prototype.groupBy = function(t, e) {
                var i, r, o = {},
                    s = a(t),
                    l = this.getItemID;
                if (n.isArray(t)) {
                    if (n.forEachArray(t, function(t) {
                            o[t + ""] = new c(l)
                        }), !e) return o;
                    t = e, s = !0
                }
                return this.each(function(e) {
                    s ? r = t(e) : (r = e[t], a(r) && (r = r.apply(e))), (i = o[r]) || (i = o[r] = new c(l)), i.add(e)
                }), o
            }, c.prototype.single = function() {
                var t;
                return this.each(function(e) {
                    return t = e, !1
                }, this), t
            }, c.prototype.sort = function(t) {
                var e = [];
                return this.each(function(t) {
                    e.push(t)
                }), a(t) && (e = e.sort(t)), e
            }, c.prototype.each = function(t, e) {
                r(this.items, t, e || this)
            }, c.prototype.toArray = function() {
                return this.length ? n.map(this.items, function(t) {
                    return t
                }) : []
            }, t.exports = c
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = i(7),
                o = i(10);

            function a(t, e) {
                var i = n.stamp(this);
                t = t || {}, n.isUndefined(e) && (e = r.appendHTMLElement("div")), r.addClass(e, "tui-view-" + i), this.id = i, this.container = e, this.childs = new o(function(t) {
                    return n.stamp(t)
                }), this.parent = null
            }
            a.prototype.addChild = function(t, e) {
                e && e.call(t, this), t.parent = this, this.childs.add(t)
            }, a.prototype.removeChild = function(t, e) {
                var i = n.isNumber(t) ? this.childs.items[t] : t;
                t = n.stamp(i), e && e.call(i, this), this.childs.remove(t)
            }, a.prototype.render = function() {
                this.childs.each(function(t) {
                    t.render()
                })
            }, a.prototype.recursive = function(t, e) {
                n.isFunction(t) && (e || t(this), this.childs.each(function(e) {
                    e.recursive(t)
                }))
            }, a.prototype.resize = function() {
                for (var t = Array.prototype.slice.call(arguments), e = this.parent; e;) n.isFunction(e._onResize) && e._onResize.apply(e, t), e = e.parent
            }, a.prototype._beforeDestroy = function() {}, a.prototype._destroy = function() {
                this._beforeDestroy(), this.childs.clear(), this.container.innerHTML = "", this.id = this.parent = this.childs = this.container = null
            }, a.prototype.destroy = function(t) {
                this.childs.each(function(t) {
                    t.destroy(!0), t._destroy()
                }), t || this._destroy()
            }, a.prototype.getViewBound = function() {
                var t = this.container,
                    e = r.getPosition(t),
                    i = r.getSize(t);
                return {
                    x: e[0],
                    y: e[1],
                    width: i[0],
                    height: i[1]
                }
            }, t.exports = a
        }, function(t, e, i) {
            (function(e) {
                "use strict";
                var n = i(8),
                    r = i(7),
                    o = i(9);

                function a(t, e) {
                    o.on(e, "mousedown", this._onMouseDown, this), this.options = n.extend({
                        distance: 10
                    }, t), this.container = e, this._isMoved = !1, this._distance = 0, this._dragStartFired = !1, this._dragStartEventData = null
                }
                a.prototype.destroy = function() {
                    o.off(this.container, "mousedown", this._onMouseDown, this), this.options = this.container = this._isMoved = this._distance = this._dragStartFired = this._dragStartEventData = null
                }, a.prototype._toggleDragEvent = function(t) {
                    var i, n, a = this.container;
                    t ? (i = "on", n = "disable") : (i = "off", n = "enable"), r[n + "TextSelection"](a), r[n + "ImageDrag"](a), o[i](e.document, {
                        mousemove: this._onMouseMove,
                        mouseup: this._onMouseUp
                    }, this)
                }, a.prototype._getEventData = function(t) {
                    return {
                        target: t.target || t.srcElement,
                        originEvent: t
                    }
                }, a.prototype._onMouseDown = function(t) {
                    0 === o.getMouseButton(t) && (this._distance = 0, this._dragStartFired = !1, this._dragStartEventData = this._getEventData(t), this._toggleDragEvent(!0))
                }, a.prototype._onMouseMove = function(t) {
                    var e = this.options.distance;
                    o.preventDefault(t), this._isMoved = !0, this._distance < e ? this._distance += 1 : this._dragStartFired || (this._dragStartFired = !0, this.invoke("dragStart", this._dragStartEventData)) ? this.fire("drag", this._getEventData(t)) : this._toggleDragEvent(!1)
                }, a.prototype._onMouseUp = function(t) {
                    if (this._toggleDragEvent(!1), this._isMoved) return this._isMoved = !1, void this.fire("dragEnd", this._getEventData(t));
                    this.fire("click", this._getEventData(t))
                }, n.CustomEvents.mixin(a), t.exports = a
            }).call(e, function() {
                return this
            }())
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = i(14),
                o = i(15),
                a = i(16),
                s = i(18);

            function l(t) {
                var e;
                if (!(this instanceof l)) return new l(t);
                if (!(t = this.options = n.extend({
                        container: null,
                        color: "#f8f8f8",
                        preset: ["#181818", "#282828", "#383838", "#585858", "#b8b8b8", "#d8d8d8", "#e8e8e8", "#f8f8f8", "#ab4642", "#dc9656", "#f7ca88", "#a1b56c", "#86c1b9", "#7cafc2", "#ba8baf", "#a16946"],
                        cssPrefix: "tui-colorpicker-",
                        detailTxt: "Detail",
                        usageStatistics: !0
                    }, t)).container) throw new Error("ColorPicker(): need container option.");
                e = this.layout = new o(t, t.container), this.palette = new a(t, e.container), this.palette.on({
                    _selectColor: this._onSelectColorInPalette,
                    _toggleSlider: this._onToggleSlider
                }, this), this.slider = new s(t, e.container), this.slider.on("_selectColor", this._onSelectColorInSlider, this), e.addChild(this.palette), e.addChild(this.slider), this.render(t.color), t.usageStatistics && n.sendHostname("color-picker", "UA-129987462-1")
            }
            l.prototype._onSelectColorInPalette = function(t) {
                var e = t.color,
                    i = this.options;
                r.isValidRGB(e) || "" === e ? (this.fire("selectColor", {
                    color: e,
                    origin: "palette"
                }), i.color !== e && (i.color = e, this.render(e))) : this.render()
            }, l.prototype._onToggleSlider = function() {
                this.slider.toggle(!this.slider.isVisible())
            }, l.prototype._onSelectColorInSlider = function(t) {
                var e = t.color,
                    i = this.options;
                this.fire("selectColor", {
                    color: e,
                    origin: "slider"
                }), i.color !== e && (i.color = e, this.palette.render(e))
            }, l.prototype.setColor = function(t) {
                if (!r.isValidRGB(t)) throw new Error("ColorPicker#setColor(): need valid hex string color value");
                this.options.color = t, this.render(t)
            }, l.prototype.getColor = function() {
                return this.options.color
            }, l.prototype.toggle = function(t) {
                this.layout.container.style.display = t ? "block" : "none"
            }, l.prototype.render = function(t) {
                this.layout.render(t || this.options.color)
            }, l.prototype.destroy = function() {
                this.layout.destroy(), this.options.container.innerHTML = "", this.layout = this.slider = this.palette = this.options = null
            }, n.CustomEvents.mixin(l), t.exports = l
        }, function(t, e) {
            "use strict";
            var i = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,
                n = {
                    leadingZero: function(t, e) {
                        var i = "",
                            n = 0;
                        if ((t + "").length > e) return t + "";
                        for (; n < e - 1; n += 1) i += "0";
                        return (i + t).slice(-1 * e)
                    },
                    isValidRGB: function(t) {
                        return i.test(t)
                    },
                    hexToRGB: function(t) {
                        return !!n.isValidRGB(t) && (t = t.substring(1), [parseInt(t.substr(0, 2), 16), parseInt(t.substr(2, 2), 16), parseInt(t.substr(4, 2), 16)])
                    },
                    rgbToHEX: function(t, e, i) {
                        var r = "#" + n.leadingZero(t.toString(16), 2) + n.leadingZero(e.toString(16), 2) + n.leadingZero(i.toString(16), 2);
                        return !!n.isValidRGB(r) && r
                    },
                    rgbToHSV: function(t, e, i) {
                        var n, r, o, a, s, l;
                        if (t /= 255, e /= 255, i /= 255, s = n = Math.max(t, e, i), l = n - (r = Math.min(t, e, i)), a = 0 === n ? 0 : l / n, n === r) o = 0;
                        else {
                            switch (n) {
                                case t:
                                    o = (e - i) / l + (e < i ? 6 : 0);
                                    break;
                                case e:
                                    o = (i - t) / l + 2;
                                    break;
                                case i:
                                    o = (t - e) / l + 4
                            }
                            o /= 6
                        }
                        return [Math.round(360 * o), Math.round(100 * a), Math.round(100 * s)]
                    },
                    hsvToRGB: function(t, e, i) {
                        var n, r, o, a, s, l, c, u;
                        if (t = Math.max(0, Math.min(360, t)), e = Math.max(0, Math.min(100, e)), i = Math.max(0, Math.min(100, i)), i /= 100, 0 === (e /= 100)) return n = r = o = i, [Math.round(255 * n), Math.round(255 * r), Math.round(255 * o)];
                        switch (l = i * (1 - e), c = i * (1 - e * (s = (t /= 60) - (a = Math.floor(t)))), u = i * (1 - e * (1 - s)), a) {
                            case 0:
                                n = i, r = u, o = l;
                                break;
                            case 1:
                                n = c, r = i, o = l;
                                break;
                            case 2:
                                n = l, r = i, o = u;
                                break;
                            case 3:
                                n = l, r = c, o = i;
                                break;
                            case 4:
                                n = u, r = l, o = i;
                                break;
                            default:
                                n = i, r = l, o = c
                        }
                        return [Math.round(255 * n), Math.round(255 * r), Math.round(255 * o)]
                    }
                };
            t.exports = n
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = i(7),
                o = i(11);

            function a(t, e) {
                this.options = n.extend({
                    cssPrefix: "tui-colorpicker-"
                }, t), e = r.appendHTMLElement("div", e, this.options.cssPrefix + "container"), o.call(this, t, e), this.render()
            }
            n.inherit(a, o), a.prototype.render = function(t) {
                this.recursive(function(e) {
                    e.render(t)
                }, !0)
            }, t.exports = a
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = i(7),
                o = i(14),
                a = i(9),
                s = i(11),
                l = i(17);

            function c(t, e) {
                this.options = n.extend({
                    cssPrefix: "tui-colorpicker-",
                    preset: ["#181818", "#282828", "#383838", "#585858", "#B8B8B8", "#D8D8D8", "#E8E8E8", "#F8F8F8", "#AB4642", "#DC9656", "#F7CA88", "#A1B56C", "#86C1B9", "#7CAFC2", "#BA8BAF", "#A16946"],
                    detailTxt: "Detail"
                }, t), e = r.appendHTMLElement("div", e, this.options.cssPrefix + "palette-container"), s.call(this, t, e)
            }
            n.inherit(c, s), c.prototype._onClick = function(t) {
                var e = this.options,
                    i = t.srcElement || t.target,
                    n = {};
                if (r.hasClass(i, e.cssPrefix + "palette-button")) return n.color = i.value, void this.fire("_selectColor", n);
                r.hasClass(i, e.cssPrefix + "palette-toggle-slider") && this.fire("_toggleSlider")
            }, c.prototype._onChange = function(t) {
                var e = this.options,
                    i = t.srcElement || t.target,
                    n = {};
                r.hasClass(i, e.cssPrefix + "palette-hex") && (n.color = i.value, this.fire("_selectColor", n))
            }, c.prototype._beforeDestroy = function() {
                this._toggleEvent(!1)
            }, c.prototype._toggleEvent = function(t) {
                var e, i = this.options,
                    n = this.container,
                    o = a[t ? "on" : "off"];
                o(n, "click", this._onClick, this), (e = r.find("." + i.cssPrefix + "palette-hex", n)) && o(e, "change", this._onChange, this)
            }, c.prototype.render = function(t) {
                var e = this.options,
                    i = "";
                this._toggleEvent(!1), i = l.layout.replace("{{colorList}}", n.map(e.preset, function(i) {
                    var n = "";
                    return o.isValidRGB(i) && (n = r.applyTemplate(l.itemStyle, {
                        color: i
                    })), r.applyTemplate(l.item, {
                        itemStyle: n,
                        itemClass: i ? "" : " " + e.cssPrefix + "color-transparent",
                        color: i,
                        cssPrefix: e.cssPrefix,
                        selected: i === t ? " " + e.cssPrefix + "selected" : ""
                    })
                }).join("")), i = r.applyTemplate(i, {
                    cssPrefix: e.cssPrefix,
                    detailTxt: e.detailTxt,
                    color: t
                }), this.container.innerHTML = i, this._toggleEvent(!0)
            }, n.CustomEvents.mixin(c), t.exports = c
        }, function(t, e) {
            "use strict";
            var i = ['<ul class="{{cssPrefix}}clearfix">{{colorList}}</ul>', '<div class="{{cssPrefix}}clearfix" style="overflow:hidden">', '<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />', '<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />', '<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>', "</div>"].join("\n");
            t.exports = {
                layout: i,
                item: '<li><input class="{{cssPrefix}}palette-button{{selected}}{{itemClass}}" type="button" style="{{itemStyle}}" title="{{color}}" value="{{color}}" /></li>',
                itemStyle: "background-color:{{color}};color:{{color}}"
            }
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = i(7),
                o = i(9),
                a = i(19),
                s = i(14),
                l = i(11),
                c = i(12),
                u = i(20),
                h = [-7, 112],
                d = [-3, 115];

            function f(t, e) {
                (e = r.appendHTMLElement("div", e, t.cssPrefix + "slider-container")).style.display = "none", l.call(this, t, e), this.options = n.extend({
                    color: "#f8f8f8",
                    cssPrefix: "tui-colorpicker-"
                }, t), this._dragDataCache = {}, this.sliderHandleElement = null, this.huebarHandleElement = null, this.baseColorElement = null, this.drag = new c({
                    distance: 0
                }, e), this.drag.on({
                    dragStart: this._onDragStart,
                    drag: this._onDrag,
                    dragEnd: this._onDragEnd,
                    click: this._onClick
                }, this)
            }
            n.inherit(f, l), f.prototype._beforeDestroy = function() {
                this.drag.off(), this.drag = this.options = this._dragDataCache = this.sliderHandleElement = this.huebarHandleElement = this.baseColorElement = null
            }, f.prototype.toggle = function(t) {
                this.container.style.display = t ? "block" : "none"
            }, f.prototype.isVisible = function() {
                return "block" === this.container.style.display
            }, f.prototype.render = function(t) {
                var e, i, n = this.container,
                    o = this.options,
                    a = u.layout;
                s.isValidRGB(t) && (a = (a = (a = a.replace(/{{slider}}/, u.slider)).replace(/{{huebar}}/, u.huebar)).replace(/{{cssPrefix}}/g, o.cssPrefix), this.container.innerHTML = a, this.sliderHandleElement = r.find("." + o.cssPrefix + "slider-handle", n), this.huebarHandleElement = r.find("." + o.cssPrefix + "huebar-handle", n), this.baseColorElement = r.find("." + o.cssPrefix + "slider-basecolor", n), e = s.hexToRGB(t), i = s.rgbToHSV.apply(null, e), this.moveHue(i[0], !0), this.moveSaturationAndValue(i[1], i[2], !0))
            }, f.prototype._moveColorSliderHandle = function(t, e, i) {
                var n, r = this.sliderHandleElement;
                e = Math.max(h[0], e), e = Math.min(h[1], e), t = Math.max(h[0], t), t = Math.min(h[1], t), a.setTranslateXY(r, t, e), n = e > 50 ? "white" : "black", a.setStrokeColor(r, n), i || this.fire("_selectColor", {
                    color: s.rgbToHEX.apply(null, this.getRGB())
                })
            }, f.prototype.moveSaturationAndValue = function(t, e, i) {
                var n, r, o, a;
                t = t || 0, e = e || 0, n = Math.abs(h[0]), o = t * (r = h[1]) / 100 - n, a = r - e * r / 100 - n, this._moveColorSliderHandle(o, a, i)
            }, f.prototype._moveColorSliderByPosition = function(t, e) {
                var i = h[0];
                this._moveColorSliderHandle(t + i, e + i)
            }, f.prototype.getSaturationAndValue = function() {
                var t = Math.abs(h[0]),
                    e = t + h[1],
                    i = a.getTranslateXY(this.sliderHandleElement);
                return [(i[1] + t) / e * 100, 100 - (i[0] + t) / e * 100]
            }, f.prototype._moveHueHandle = function(t, e) {
                var i, n, r = this.huebarHandleElement,
                    o = this.baseColorElement;
                t = Math.max(d[0], t), t = Math.min(d[1], t), a.setTranslateY(r, t), i = s.hsvToRGB(this.getHue(), 100, 100), n = s.rgbToHEX.apply(null, i), a.setGradientColorStop(o, n), e || this.fire("_selectColor", {
                    color: s.rgbToHEX.apply(null, this.getRGB())
                })
            }, f.prototype.moveHue = function(t, e) {
                var i, n;
                i = ((n = Math.abs(d[0])) + d[1]) * (t = t || 0) / 359.99 - n, this._moveHueHandle(i, e)
            }, f.prototype._moveHueByPosition = function(t) {
                var e = d[0];
                this._moveHueHandle(t + e)
            }, f.prototype.getHue = function() {
                var t, e, i = this.huebarHandleElement,
                    n = a.getTranslateXY(i);
                return e = (t = Math.abs(d[0])) + d[1], 359.99 * (n[0] + t) / e
            }, f.prototype.getHSV = function() {
                var t = this.getSaturationAndValue();
                return [this.getHue()].concat(t)
            }, f.prototype.getRGB = function() {
                return s.hsvToRGB.apply(null, this.getHSV())
            }, f.prototype._prepareColorSliderForMouseEvent = function(t) {
                var e = this.options,
                    i = r.closest(t.target, "." + e.cssPrefix + "slider-part");
                return this._dragDataCache = {
                    isColorSlider: r.hasClass(i, e.cssPrefix + "slider-left"),
                    parentElement: i
                }
            }, f.prototype._onClick = function(t) {
                var e = this._prepareColorSliderForMouseEvent(t),
                    i = o.getMousePosition(t.originEvent, e.parentElement);
                e.isColorSlider ? this._moveColorSliderByPosition(i[0], i[1]) : this._moveHueByPosition(i[1]), this._dragDataCache = null
            }, f.prototype._onDragStart = function(t) {
                this._prepareColorSliderForMouseEvent(t)
            }, f.prototype._onDrag = function(t) {
                var e = this._dragDataCache,
                    i = o.getMousePosition(t.originEvent, e.parentElement);
                e.isColorSlider ? this._moveColorSliderByPosition(i[0], i[1]) : this._moveHueByPosition(i[1])
            }, f.prototype._onDragEnd = function() {
                this._dragDataCache = null
            }, n.CustomEvents.mixin(f), t.exports = f
        }, function(t, e, i) {
            "use strict";
            var n = i(8),
                r = /[\.\-0-9]+/g,
                o = {
                    isOldBrowser: function() {
                        var t = o._isOldBrowser;
                        return n.isExisty(t) || (o._isOldBrowser = t = n.browser.msie && n.browser.version < 9), t
                    },
                    getTranslateXY: function(t) {
                        var e;
                        return o.isOldBrowser() ? (e = t.style, [parseFloat(e.top), parseFloat(e.left)]) : (e = t.getAttribute("transform")) ? (e = e.match(r), [parseFloat(e[1]), parseFloat(e[0])]) : [0, 0]
                    },
                    setTranslateXY: function(t, e, i) {
                        o.isOldBrowser() ? (t.style.left = e + "px", t.style.top = i + "px") : t.setAttribute("transform", "translate(" + e + "," + i + ")")
                    },
                    setTranslateY: function(t, e) {
                        o.isOldBrowser() ? t.style.top = e + "px" : t.setAttribute("transform", "translate(-6," + e + ")")
                    },
                    setStrokeColor: function(t, e) {
                        o.isOldBrowser() ? t.strokecolor = e : t.setAttribute("stroke", e)
                    },
                    setGradientColorStop: function(t, e) {
                        o.isOldBrowser() ? t.color = e : t.setAttribute("stop-color", e)
                    }
                };
            t.exports = o
        }, function(t, e, i) {
            (function(e) {
                "use strict";
                var n = i(8),
                    r = ['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>', '<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join("\n"),
                    o = ['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">', "<defs>", '<linearGradient id="{{cssPrefix}}svg-fill-color" x1="0%" y1="0%" x2="100%" y2="0%">', '<stop offset="0%" stop-color="rgb(255,255,255)" />', '<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />', "</linearGradient>", '<linearGradient id="{{cssPrefix}}svn-fill-black" x1="0%" y1="0%" x2="0%" y2="100%">', '<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />', '<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />', "</linearGradient>", "</defs>", '<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color)"></rect>', '<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black)"></rect>', '<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />', "</svg>"].join("\n"),
                    a = ['<div class="{{cssPrefix}}vml-slider">', '<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">', '<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />', "</v:rect>", '<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">', '<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />', "</v:rect>", '<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />', "</div>"].join("\n"),
                    s = ['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">', "<defs>", '<linearGradient id="g" x1="0%" y1="0%" x2="0%" y2="100%">', '<stop offset="0%" stop-color="rgb(255,0,0)" />', '<stop offset="16.666%" stop-color="rgb(255,255,0)" />', '<stop offset="33.333%" stop-color="rgb(0,255,0)" />', '<stop offset="50%" stop-color="rgb(0,255,255)" />', '<stop offset="66.666%" stop-color="rgb(0,0,255)" />', '<stop offset="83.333%" stop-color="rgb(255,0,255)" />', '<stop offset="100%" stop-color="rgb(255,0,0)" />', "</linearGradient>", "</defs>", '<rect width="18px" height="100%" fill="url(#g)"></rect>', '<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />', "</svg>"].join("\n"),
                    l = ['<div class="{{cssPrefix}}vml-huebar">', '<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">', '<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />', "</v:rect>", '<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />', "</div>"].join("\n"),
                    c = n.browser.msie && n.browser.version < 9;
                c && e.document.namespaces.add("v", "urn:schemas-microsoft-com:vml"), t.exports = {
                    layout: r,
                    slider: c ? a : o,
                    huebar: c ? l : s
                }
            }).call(e, function() {
                return this
            }())
        }])
    })
}]);